(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Qp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qc={exports:{}},ys={},Xc={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),Xp=Symbol.for("react.portal"),Zp=Symbol.for("react.fragment"),em=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),om=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),sm=Symbol.for("react.memo"),am=Symbol.for("react.lazy"),Pu=Symbol.iterator;function im(e){return e===null||typeof e!="object"?null:(e=Pu&&e[Pu]||e["@@iterator"],typeof e=="function"?e:null)}var Zc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ed=Object.assign,td={};function ro(e,t,n){this.props=e,this.context=t,this.refs=td,this.updater=n||Zc}ro.prototype.isReactComponent={};ro.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ro.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nd(){}nd.prototype=ro.prototype;function Si(e,t,n){this.props=e,this.context=t,this.refs=td,this.updater=n||Zc}var Ei=Si.prototype=new nd;Ei.constructor=Si;ed(Ei,ro.prototype);Ei.isPureReactComponent=!0;var Au=Array.isArray,rd=Object.prototype.hasOwnProperty,Ti={current:null},od={key:!0,ref:!0,__self:!0,__source:!0};function ld(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)rd.call(t,r)&&!od.hasOwnProperty(r)&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return{$$typeof:el,type:e,key:l,ref:a,props:o,_owner:Ti.current}}function um(e,t){return{$$typeof:el,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ki(e){return typeof e=="object"&&e!==null&&e.$$typeof===el}function cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Lu=/\/+/g;function Ks(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cm(""+e.key):t.toString(36)}function Ol(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case el:case Xp:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+Ks(a,0):r,Au(o)?(n="",e!=null&&(n=e.replace(Lu,"$&/")+"/"),Ol(o,t,n,"",function(c){return c})):o!=null&&(ki(o)&&(o=um(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Lu,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Au(e))for(var i=0;i<e.length;i++){l=e[i];var u=r+Ks(l,i);a+=Ol(l,t,n,u,o)}else if(u=im(e),typeof u=="function")for(e=u.call(e),i=0;!(l=e.next()).done;)l=l.value,u=r+Ks(l,i++),a+=Ol(l,t,n,u,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function gl(e,t,n){if(e==null)return e;var r=[],o=0;return Ol(e,r,"","",function(l){return t.call(n,l,o++)}),r}function dm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},Pl={transition:null},fm={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Pl,ReactCurrentOwner:Ti};function sd(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:gl,forEach:function(e,t,n){gl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return gl(e,function(){t++}),t},toArray:function(e){return gl(e,function(t){return t})||[]},only:function(e){if(!ki(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=ro;Ie.Fragment=Zp;Ie.Profiler=tm;Ie.PureComponent=Si;Ie.StrictMode=em;Ie.Suspense=lm;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fm;Ie.act=sd;Ie.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ed({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Ti.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)rd.call(t,u)&&!od.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:el,type:e.type,key:o,ref:l,props:r,_owner:a}};Ie.createContext=function(e){return e={$$typeof:rm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:nm,_context:e},e.Consumer=e};Ie.createElement=ld;Ie.createFactory=function(e){var t=ld.bind(null,e);return t.type=e,t};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:om,render:e}};Ie.isValidElement=ki;Ie.lazy=function(e){return{$$typeof:am,_payload:{_status:-1,_result:e},_init:dm}};Ie.memo=function(e,t){return{$$typeof:sm,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=Pl.transition;Pl.transition={};try{e()}finally{Pl.transition=t}};Ie.unstable_act=sd;Ie.useCallback=function(e,t){return vt.current.useCallback(e,t)};Ie.useContext=function(e){return vt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};Ie.useEffect=function(e,t){return vt.current.useEffect(e,t)};Ie.useId=function(){return vt.current.useId()};Ie.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return vt.current.useMemo(e,t)};Ie.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};Ie.useRef=function(e){return vt.current.useRef(e)};Ie.useState=function(e){return vt.current.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return vt.current.useTransition()};Ie.version="18.3.1";Xc.exports=Ie;var k=Xc.exports;const Cn=Qp(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm=k,mm=Symbol.for("react.element"),hm=Symbol.for("react.fragment"),gm=Object.prototype.hasOwnProperty,ym=pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xm={key:!0,ref:!0,__self:!0,__source:!0};function ad(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)gm.call(t,r)&&!xm.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:mm,type:e,key:l,ref:a,props:o,_owner:ym.current}}ys.Fragment=hm;ys.jsx=ad;ys.jsxs=ad;Qc.exports=ys;var s=Qc.exports,ka={},id={exports:{}},Mt={},ud={exports:{}},cd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,S){var D=P.length;P.push(S);e:for(;0<D;){var z=D-1>>>1,X=P[z];if(0<o(X,S))P[z]=S,P[D]=X,D=z;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var S=P[0],D=P.pop();if(D!==S){P[0]=D;e:for(var z=0,X=P.length,H=X>>>1;z<H;){var Q=2*(z+1)-1,M=P[Q],ee=Q+1,$=P[ee];if(0>o(M,D))ee<X&&0>o($,M)?(P[z]=$,P[ee]=D,z=ee):(P[z]=M,P[Q]=D,z=Q);else if(ee<X&&0>o($,D))P[z]=$,P[ee]=D,z=ee;else break e}}return S}function o(P,S){var D=P.sortIndex-S.sortIndex;return D!==0?D:P.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],w=1,p=null,d=3,x=!1,C=!1,_=!1,O=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var S=n(c);S!==null;){if(S.callback===null)r(c);else if(S.startTime<=P)r(c),S.sortIndex=S.expirationTime,t(u,S);else break;S=n(c)}}function v(P){if(_=!1,g(P),!C)if(n(u)!==null)C=!0,q(j);else{var S=n(c);S!==null&&ae(v,S.startTime-P)}}function j(P,S){C=!1,_&&(_=!1,f(B),B=-1),x=!0;var D=d;try{for(g(S),p=n(u);p!==null&&(!(p.expirationTime>S)||P&&!pe());){var z=p.callback;if(typeof z=="function"){p.callback=null,d=p.priorityLevel;var X=z(p.expirationTime<=S);S=e.unstable_now(),typeof X=="function"?p.callback=X:p===n(u)&&r(u),g(S)}else r(u);p=n(u)}if(p!==null)var H=!0;else{var Q=n(c);Q!==null&&ae(v,Q.startTime-S),H=!1}return H}finally{p=null,d=D,x=!1}}var R=!1,I=null,B=-1,oe=5,V=-1;function pe(){return!(e.unstable_now()-V<oe)}function Ee(){if(I!==null){var P=e.unstable_now();V=P;var S=!0;try{S=I(!0,P)}finally{S?we():(R=!1,I=null)}}else R=!1}var we;if(typeof m=="function")we=function(){m(Ee)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,je=xe.port2;xe.port1.onmessage=Ee,we=function(){je.postMessage(null)}}else we=function(){O(Ee,0)};function q(P){I=P,R||(R=!0,we())}function ae(P,S){B=O(function(){P(e.unstable_now())},S)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){C||x||(C=!0,q(j))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(P){switch(d){case 1:case 2:case 3:var S=3;break;default:S=d}var D=d;d=S;try{return P()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,S){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var D=d;d=P;try{return S()}finally{d=D}},e.unstable_scheduleCallback=function(P,S,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,P={id:w++,callback:S,priorityLevel:P,startTime:D,expirationTime:X,sortIndex:-1},D>z?(P.sortIndex=D,t(c,P),n(u)===null&&P===n(c)&&(_?(f(B),B=-1):_=!0,ae(v,D-z))):(P.sortIndex=X,t(u,P),C||x||(C=!0,q(j))),P},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(P){var S=d;return function(){var D=d;d=S;try{return P.apply(this,arguments)}finally{d=D}}}})(cd);ud.exports=cd;var vm=ud.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm=k,Lt=vm;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dd=new Set,Mo={};function xr(e,t){Yr(e,t),Yr(e+"Capture",t)}function Yr(e,t){for(Mo[e]=t,e=0;e<t.length;e++)dd.add(t[e])}var Tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ba=Object.prototype.hasOwnProperty,Cm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mu={},Uu={};function Sm(e){return ba.call(Uu,e)?!0:ba.call(Mu,e)?!1:Cm.test(e)?Uu[e]=!0:(Mu[e]=!0,!1)}function Em(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Tm(e,t,n,r){if(t===null||typeof t>"u"||Em(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function wt(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dt[e]=new wt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dt[t]=new wt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dt[e]=new wt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dt[e]=new wt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dt[e]=new wt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dt[e]=new wt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dt[e]=new wt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dt[e]=new wt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dt[e]=new wt(e,5,!1,e.toLowerCase(),null,!1,!1)});var bi=/[\-:]([a-z])/g;function Ni(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bi,Ni);dt[t]=new wt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bi,Ni);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bi,Ni);dt[t]=new wt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!1,!1)});dt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dt[e]=new wt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ji(e,t,n,r){var o=dt.hasOwnProperty(t)?dt[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Tm(t,n,o,r)&&(n=null),r||o===null?Sm(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jn=wm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yl=Symbol.for("react.element"),_r=Symbol.for("react.portal"),Dr=Symbol.for("react.fragment"),Ii=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),fd=Symbol.for("react.provider"),pd=Symbol.for("react.context"),_i=Symbol.for("react.forward_ref"),ja=Symbol.for("react.suspense"),Ia=Symbol.for("react.suspense_list"),Di=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),md=Symbol.for("react.offscreen"),zu=Symbol.iterator;function po(e){return e===null||typeof e!="object"?null:(e=zu&&e[zu]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Object.assign,Js;function Co(e){if(Js===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Js=t&&t[1]||""}return`
`+Js+e}var Ys=!1;function qs(e,t){if(!e||Ys)return"";Ys=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,i=l.length-1;1<=a&&0<=i&&o[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==l[i]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Ys=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Co(e):""}function km(e){switch(e.tag){case 5:return Co(e.type);case 16:return Co("Lazy");case 13:return Co("Suspense");case 19:return Co("SuspenseList");case 0:case 2:case 15:return e=qs(e.type,!1),e;case 11:return e=qs(e.type.render,!1),e;case 1:return e=qs(e.type,!0),e;default:return""}}function _a(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dr:return"Fragment";case _r:return"Portal";case Na:return"Profiler";case Ii:return"StrictMode";case ja:return"Suspense";case Ia:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pd:return(e.displayName||"Context")+".Consumer";case fd:return(e._context.displayName||"Context")+".Provider";case _i:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Di:return t=e.displayName||null,t!==null?t:_a(e.type)||"Memo";case Ln:t=e._payload,e=e._init;try{return _a(e(t))}catch{}}return null}function bm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _a(t);case 8:return t===Ii?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nm(e){var t=hd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xl(e){e._valueTracker||(e._valueTracker=Nm(e))}function gd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Vl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Da(e,t){var n=t.checked;return qe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yd(e,t){t=t.checked,t!=null&&ji(e,"checked",t,!1)}function Ra(e,t){yd(e,t);var n=qn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oa(e,t.type,qn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Bu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oa(e,t,n){(t!=="number"||Vl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var So=Array.isArray;function Gr(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Pa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return qe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $u(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Y(92));if(So(n)){if(1<n.length)throw Error(Y(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qn(n)}}function xd(e,t){var n=qn(t.value),r=qn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Gu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function vd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Aa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?vd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var vl,wd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(vl=vl||document.createElement("div"),vl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=vl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uo(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jm=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){jm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),No[t]=No[e]})});function Cd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||No.hasOwnProperty(e)&&No[e]?(""+t).trim():t+"px"}function Sd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Cd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Im=qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(e,t){if(t){if(Im[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Ma(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ua=null;function Ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var za=null,Wr=null,Vr=null;function Wu(e){if(e=rl(e)){if(typeof za!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Ss(t),za(e.stateNode,e.type,t))}}function Ed(e){Wr?Vr?Vr.push(e):Vr=[e]:Wr=e}function Td(){if(Wr){var e=Wr,t=Vr;if(Vr=Wr=null,Wu(e),t)for(e=0;e<t.length;e++)Wu(t[e])}}function kd(e,t){return e(t)}function bd(){}var Qs=!1;function Nd(e,t,n){if(Qs)return e(t,n);Qs=!0;try{return kd(e,t,n)}finally{Qs=!1,(Wr!==null||Vr!==null)&&(bd(),Td())}}function zo(e,t){var n=e.stateNode;if(n===null)return null;var r=Ss(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Y(231,t,typeof n));return n}var Fa=!1;if(Tn)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){Fa=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{Fa=!1}function _m(e,t,n,r,o,l,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(w){this.onError(w)}}var jo=!1,Hl=null,Kl=!1,Ba=null,Dm={onError:function(e){jo=!0,Hl=e}};function Rm(e,t,n,r,o,l,a,i,u){jo=!1,Hl=null,_m.apply(Dm,arguments)}function Om(e,t,n,r,o,l,a,i,u){if(Rm.apply(this,arguments),jo){if(jo){var c=Hl;jo=!1,Hl=null}else throw Error(Y(198));Kl||(Kl=!0,Ba=c)}}function vr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function jd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Vu(e){if(vr(e)!==e)throw Error(Y(188))}function Pm(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Vu(o),e;if(l===r)return Vu(o),t;l=l.sibling}throw Error(Y(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,i=o.child;i;){if(i===n){a=!0,n=o,r=l;break}if(i===r){a=!0,r=o,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=o;break}if(i===r){a=!0,r=l,n=o;break}i=i.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?e:t}function Id(e){return e=Pm(e),e!==null?_d(e):null}function _d(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_d(e);if(t!==null)return t;e=e.sibling}return null}var Dd=Lt.unstable_scheduleCallback,Hu=Lt.unstable_cancelCallback,Am=Lt.unstable_shouldYield,Lm=Lt.unstable_requestPaint,et=Lt.unstable_now,Mm=Lt.unstable_getCurrentPriorityLevel,Oi=Lt.unstable_ImmediatePriority,Rd=Lt.unstable_UserBlockingPriority,Jl=Lt.unstable_NormalPriority,Um=Lt.unstable_LowPriority,Od=Lt.unstable_IdlePriority,xs=null,fn=null;function zm(e){if(fn&&typeof fn.onCommitFiberRoot=="function")try{fn.onCommitFiberRoot(xs,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:$m,Fm=Math.log,Bm=Math.LN2;function $m(e){return e>>>=0,e===0?32:31-(Fm(e)/Bm|0)|0}var wl=64,Cl=4194304;function Eo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~o;i!==0?r=Eo(i):(l&=a,l!==0&&(r=Eo(l)))}else a=n&~o,a!==0?r=Eo(a):l!==0&&(r=Eo(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rn(t),o=1<<n,r|=e[n],t&=~o;return r}function Gm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-rn(l),i=1<<a,u=o[a];u===-1?(!(i&n)||i&r)&&(o[a]=Gm(i,t)):u<=t&&(e.expiredLanes|=i),l&=~i}}function $a(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Pd(){var e=wl;return wl<<=1,!(wl&4194240)&&(wl=64),e}function Xs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=n}function Vm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-rn(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Pi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rn(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ae=0;function Ad(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ld,Ai,Md,Ud,zd,Ga=!1,Sl=[],$n=null,Gn=null,Wn=null,Fo=new Map,Bo=new Map,Un=[],Hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ku(e,t){switch(e){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":Fo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bo.delete(t.pointerId)}}function ho(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=rl(t),t!==null&&Ai(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Km(e,t,n,r,o){switch(t){case"focusin":return $n=ho($n,e,t,n,r,o),!0;case"dragenter":return Gn=ho(Gn,e,t,n,r,o),!0;case"mouseover":return Wn=ho(Wn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Fo.set(l,ho(Fo.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,Bo.set(l,ho(Bo.get(l)||null,e,t,n,r,o)),!0}return!1}function Fd(e){var t=ir(e.target);if(t!==null){var n=vr(t);if(n!==null){if(t=n.tag,t===13){if(t=jd(n),t!==null){e.blockedOn=t,zd(e.priority,function(){Md(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Al(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ua=r,n.target.dispatchEvent(r),Ua=null}else return t=rl(n),t!==null&&Ai(t),e.blockedOn=n,!1;t.shift()}return!0}function Ju(e,t,n){Al(e)&&n.delete(t)}function Jm(){Ga=!1,$n!==null&&Al($n)&&($n=null),Gn!==null&&Al(Gn)&&(Gn=null),Wn!==null&&Al(Wn)&&(Wn=null),Fo.forEach(Ju),Bo.forEach(Ju)}function go(e,t){e.blockedOn===t&&(e.blockedOn=null,Ga||(Ga=!0,Lt.unstable_scheduleCallback(Lt.unstable_NormalPriority,Jm)))}function $o(e){function t(o){return go(o,e)}if(0<Sl.length){go(Sl[0],e);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===e&&(r.blockedOn=null)}}for($n!==null&&go($n,e),Gn!==null&&go(Gn,e),Wn!==null&&go(Wn,e),Fo.forEach(t),Bo.forEach(t),n=0;n<Un.length;n++)r=Un[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Un.length&&(n=Un[0],n.blockedOn===null);)Fd(n),n.blockedOn===null&&Un.shift()}var Hr=jn.ReactCurrentBatchConfig,ql=!0;function Ym(e,t,n,r){var o=Ae,l=Hr.transition;Hr.transition=null;try{Ae=1,Li(e,t,n,r)}finally{Ae=o,Hr.transition=l}}function qm(e,t,n,r){var o=Ae,l=Hr.transition;Hr.transition=null;try{Ae=4,Li(e,t,n,r)}finally{Ae=o,Hr.transition=l}}function Li(e,t,n,r){if(ql){var o=Wa(e,t,n,r);if(o===null)ia(e,t,r,Ql,n),Ku(e,r);else if(Km(o,e,t,n,r))r.stopPropagation();else if(Ku(e,r),t&4&&-1<Hm.indexOf(e)){for(;o!==null;){var l=rl(o);if(l!==null&&Ld(l),l=Wa(e,t,n,r),l===null&&ia(e,t,r,Ql,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else ia(e,t,r,null,n)}}var Ql=null;function Wa(e,t,n,r){if(Ql=null,e=Ri(r),e=ir(e),e!==null)if(t=vr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=jd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ql=e,null}function Bd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mm()){case Oi:return 1;case Rd:return 4;case Jl:case Um:return 16;case Od:return 536870912;default:return 16}default:return 16}}var Fn=null,Mi=null,Ll=null;function $d(){if(Ll)return Ll;var e,t=Mi,n=t.length,r,o="value"in Fn?Fn.value:Fn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return Ll=o.slice(e,1<r?1-r:void 0)}function Ml(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function El(){return!0}function Yu(){return!1}function Ut(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?El:Yu,this.isPropagationStopped=Yu,this}return qe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),t}var oo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Ut(oo),nl=qe({},oo,{view:0,detail:0}),Qm=Ut(nl),Zs,ea,yo,vs=qe({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yo&&(yo&&e.type==="mousemove"?(Zs=e.screenX-yo.screenX,ea=e.screenY-yo.screenY):ea=Zs=0,yo=e),Zs)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),qu=Ut(vs),Xm=qe({},vs,{dataTransfer:0}),Zm=Ut(Xm),eh=qe({},nl,{relatedTarget:0}),ta=Ut(eh),th=qe({},oo,{animationName:0,elapsedTime:0,pseudoElement:0}),nh=Ut(th),rh=qe({},oo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),oh=Ut(rh),lh=qe({},oo,{data:0}),Qu=Ut(lh),sh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ah={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ih={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ih[e])?!!t[e]:!1}function zi(){return uh}var ch=qe({},nl,{key:function(e){if(e.key){var t=sh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ml(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ah[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zi,charCode:function(e){return e.type==="keypress"?Ml(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ml(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dh=Ut(ch),fh=qe({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xu=Ut(fh),ph=qe({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zi}),mh=Ut(ph),hh=qe({},oo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gh=Ut(hh),yh=qe({},vs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xh=Ut(yh),vh=[9,13,27,32],Fi=Tn&&"CompositionEvent"in window,Io=null;Tn&&"documentMode"in document&&(Io=document.documentMode);var wh=Tn&&"TextEvent"in window&&!Io,Gd=Tn&&(!Fi||Io&&8<Io&&11>=Io),Zu=" ",ec=!1;function Wd(e,t){switch(e){case"keyup":return vh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rr=!1;function Ch(e,t){switch(e){case"compositionend":return Vd(t);case"keypress":return t.which!==32?null:(ec=!0,Zu);case"textInput":return e=t.data,e===Zu&&ec?null:e;default:return null}}function Sh(e,t){if(Rr)return e==="compositionend"||!Fi&&Wd(e,t)?(e=$d(),Ll=Mi=Fn=null,Rr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gd&&t.locale!=="ko"?null:t.data;default:return null}}var Eh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Eh[e.type]:t==="textarea"}function Hd(e,t,n,r){Ed(r),t=Xl(t,"onChange"),0<t.length&&(n=new Ui("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _o=null,Go=null;function Th(e){rf(e,0)}function ws(e){var t=Ar(e);if(gd(t))return e}function kh(e,t){if(e==="change")return t}var Kd=!1;if(Tn){var na;if(Tn){var ra="oninput"in document;if(!ra){var nc=document.createElement("div");nc.setAttribute("oninput","return;"),ra=typeof nc.oninput=="function"}na=ra}else na=!1;Kd=na&&(!document.documentMode||9<document.documentMode)}function rc(){_o&&(_o.detachEvent("onpropertychange",Jd),Go=_o=null)}function Jd(e){if(e.propertyName==="value"&&ws(Go)){var t=[];Hd(t,Go,e,Ri(e)),Nd(Th,t)}}function bh(e,t,n){e==="focusin"?(rc(),_o=t,Go=n,_o.attachEvent("onpropertychange",Jd)):e==="focusout"&&rc()}function Nh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ws(Go)}function jh(e,t){if(e==="click")return ws(t)}function Ih(e,t){if(e==="input"||e==="change")return ws(t)}function _h(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ln=typeof Object.is=="function"?Object.is:_h;function Wo(e,t){if(ln(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ba.call(t,o)||!ln(e[o],t[o]))return!1}return!0}function oc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lc(e,t){var n=oc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oc(n)}}function Yd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qd(){for(var e=window,t=Vl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Vl(e.document)}return t}function Bi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dh(e){var t=qd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Yd(n.ownerDocument.documentElement,n)){if(r!==null&&Bi(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=lc(n,l);var a=lc(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rh=Tn&&"documentMode"in document&&11>=document.documentMode,Or=null,Va=null,Do=null,Ha=!1;function sc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ha||Or==null||Or!==Vl(r)||(r=Or,"selectionStart"in r&&Bi(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Do&&Wo(Do,r)||(Do=r,r=Xl(Va,"onSelect"),0<r.length&&(t=new Ui("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Or)))}function Tl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Pr={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},oa={},Qd={};Tn&&(Qd=document.createElement("div").style,"AnimationEvent"in window||(delete Pr.animationend.animation,delete Pr.animationiteration.animation,delete Pr.animationstart.animation),"TransitionEvent"in window||delete Pr.transitionend.transition);function Cs(e){if(oa[e])return oa[e];if(!Pr[e])return e;var t=Pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Qd)return oa[e]=t[n];return e}var Xd=Cs("animationend"),Zd=Cs("animationiteration"),ef=Cs("animationstart"),tf=Cs("transitionend"),nf=new Map,ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xn(e,t){nf.set(e,t),xr(t,[e])}for(var la=0;la<ac.length;la++){var sa=ac[la],Oh=sa.toLowerCase(),Ph=sa[0].toUpperCase()+sa.slice(1);Xn(Oh,"on"+Ph)}Xn(Xd,"onAnimationEnd");Xn(Zd,"onAnimationIteration");Xn(ef,"onAnimationStart");Xn("dblclick","onDoubleClick");Xn("focusin","onFocus");Xn("focusout","onBlur");Xn(tf,"onTransitionEnd");Yr("onMouseEnter",["mouseout","mouseover"]);Yr("onMouseLeave",["mouseout","mouseover"]);Yr("onPointerEnter",["pointerout","pointerover"]);Yr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var To="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ah=new Set("cancel close invalid load scroll toggle".split(" ").concat(To));function ic(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Om(r,t,void 0,e),e.currentTarget=null}function rf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==l&&o.isPropagationStopped())break e;ic(o,i,c),l=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==l&&o.isPropagationStopped())break e;ic(o,i,c),l=u}}}if(Kl)throw e=Ba,Kl=!1,Ba=null,e}function Ge(e,t){var n=t[Qa];n===void 0&&(n=t[Qa]=new Set);var r=e+"__bubble";n.has(r)||(of(t,e,2,!1),n.add(r))}function aa(e,t,n){var r=0;t&&(r|=4),of(n,e,r,t)}var kl="_reactListening"+Math.random().toString(36).slice(2);function Vo(e){if(!e[kl]){e[kl]=!0,dd.forEach(function(n){n!=="selectionchange"&&(Ah.has(n)||aa(n,!1,e),aa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[kl]||(t[kl]=!0,aa("selectionchange",!1,t))}}function of(e,t,n,r){switch(Bd(t)){case 1:var o=Ym;break;case 4:o=qm;break;default:o=Li}n=o.bind(null,t,n,e),o=void 0,!Fa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ia(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;i!==null;){if(a=ir(i),a===null)return;if(u=a.tag,u===5||u===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Nd(function(){var c=l,w=Ri(n),p=[];e:{var d=nf.get(e);if(d!==void 0){var x=Ui,C=e;switch(e){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":x=dh;break;case"focusin":C="focus",x=ta;break;case"focusout":C="blur",x=ta;break;case"beforeblur":case"afterblur":x=ta;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=qu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=mh;break;case Xd:case Zd:case ef:x=nh;break;case tf:x=gh;break;case"scroll":x=Qm;break;case"wheel":x=xh;break;case"copy":case"cut":case"paste":x=oh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Xu}var _=(t&4)!==0,O=!_&&e==="scroll",f=_?d!==null?d+"Capture":null:d;_=[];for(var m=c,g;m!==null;){g=m;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,f!==null&&(v=zo(m,f),v!=null&&_.push(Ho(m,v,g)))),O)break;m=m.return}0<_.length&&(d=new x(d,C,null,n,w),p.push({event:d,listeners:_}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",d&&n!==Ua&&(C=n.relatedTarget||n.fromElement)&&(ir(C)||C[kn]))break e;if((x||d)&&(d=w.window===w?w:(d=w.ownerDocument)?d.defaultView||d.parentWindow:window,x?(C=n.relatedTarget||n.toElement,x=c,C=C?ir(C):null,C!==null&&(O=vr(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(x=null,C=c),x!==C)){if(_=qu,v="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(_=Xu,v="onPointerLeave",f="onPointerEnter",m="pointer"),O=x==null?d:Ar(x),g=C==null?d:Ar(C),d=new _(v,m+"leave",x,n,w),d.target=O,d.relatedTarget=g,v=null,ir(w)===c&&(_=new _(f,m+"enter",C,n,w),_.target=g,_.relatedTarget=O,v=_),O=v,x&&C)t:{for(_=x,f=C,m=0,g=_;g;g=Ir(g))m++;for(g=0,v=f;v;v=Ir(v))g++;for(;0<m-g;)_=Ir(_),m--;for(;0<g-m;)f=Ir(f),g--;for(;m--;){if(_===f||f!==null&&_===f.alternate)break t;_=Ir(_),f=Ir(f)}_=null}else _=null;x!==null&&uc(p,d,x,_,!1),C!==null&&O!==null&&uc(p,O,C,_,!0)}}e:{if(d=c?Ar(c):window,x=d.nodeName&&d.nodeName.toLowerCase(),x==="select"||x==="input"&&d.type==="file")var j=kh;else if(tc(d))if(Kd)j=Ih;else{j=Nh;var R=bh}else(x=d.nodeName)&&x.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(j=jh);if(j&&(j=j(e,c))){Hd(p,j,n,w);break e}R&&R(e,d,c),e==="focusout"&&(R=d._wrapperState)&&R.controlled&&d.type==="number"&&Oa(d,"number",d.value)}switch(R=c?Ar(c):window,e){case"focusin":(tc(R)||R.contentEditable==="true")&&(Or=R,Va=c,Do=null);break;case"focusout":Do=Va=Or=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,sc(p,n,w);break;case"selectionchange":if(Rh)break;case"keydown":case"keyup":sc(p,n,w)}var I;if(Fi)e:{switch(e){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Rr?Wd(e,n)&&(B="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Gd&&n.locale!=="ko"&&(Rr||B!=="onCompositionStart"?B==="onCompositionEnd"&&Rr&&(I=$d()):(Fn=w,Mi="value"in Fn?Fn.value:Fn.textContent,Rr=!0)),R=Xl(c,B),0<R.length&&(B=new Qu(B,e,null,n,w),p.push({event:B,listeners:R}),I?B.data=I:(I=Vd(n),I!==null&&(B.data=I)))),(I=wh?Ch(e,n):Sh(e,n))&&(c=Xl(c,"onBeforeInput"),0<c.length&&(w=new Qu("onBeforeInput","beforeinput",null,n,w),p.push({event:w,listeners:c}),w.data=I))}rf(p,t)})}function Ho(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xl(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=zo(e,n),l!=null&&r.unshift(Ho(e,l,o)),l=zo(e,t),l!=null&&r.push(Ho(e,l,o))),e=e.return}return r}function Ir(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function uc(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,o?(u=zo(n,l),u!=null&&a.unshift(Ho(n,u,i))):o||(u=zo(n,l),u!=null&&a.push(Ho(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Lh=/\r\n?/g,Mh=/\u0000|\uFFFD/g;function cc(e){return(typeof e=="string"?e:""+e).replace(Lh,`
`).replace(Mh,"")}function bl(e,t,n){if(t=cc(t),cc(e)!==t&&n)throw Error(Y(425))}function Zl(){}var Ka=null,Ja=null;function Ya(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qa=typeof setTimeout=="function"?setTimeout:void 0,Uh=typeof clearTimeout=="function"?clearTimeout:void 0,dc=typeof Promise=="function"?Promise:void 0,zh=typeof queueMicrotask=="function"?queueMicrotask:typeof dc<"u"?function(e){return dc.resolve(null).then(e).catch(Fh)}:qa;function Fh(e){setTimeout(function(){throw e})}function ua(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),$o(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);$o(t)}function Vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lo=Math.random().toString(36).slice(2),dn="__reactFiber$"+lo,Ko="__reactProps$"+lo,kn="__reactContainer$"+lo,Qa="__reactEvents$"+lo,Bh="__reactListeners$"+lo,$h="__reactHandles$"+lo;function ir(e){var t=e[dn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[kn]||n[dn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fc(e);e!==null;){if(n=e[dn])return n;e=fc(e)}return t}e=n,n=e.parentNode}return null}function rl(e){return e=e[dn]||e[kn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ar(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Ss(e){return e[Ko]||null}var Xa=[],Lr=-1;function Zn(e){return{current:e}}function We(e){0>Lr||(e.current=Xa[Lr],Xa[Lr]=null,Lr--)}function ze(e,t){Lr++,Xa[Lr]=e.current,e.current=t}var Qn={},gt=Zn(Qn),Nt=Zn(!1),pr=Qn;function qr(e,t){var n=e.type.contextTypes;if(!n)return Qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function jt(e){return e=e.childContextTypes,e!=null}function es(){We(Nt),We(gt)}function pc(e,t,n){if(gt.current!==Qn)throw Error(Y(168));ze(gt,t),ze(Nt,n)}function lf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(Y(108,bm(e)||"Unknown",o));return qe({},n,r)}function ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Qn,pr=gt.current,ze(gt,e),ze(Nt,Nt.current),!0}function mc(e,t,n){var r=e.stateNode;if(!r)throw Error(Y(169));n?(e=lf(e,t,pr),r.__reactInternalMemoizedMergedChildContext=e,We(Nt),We(gt),ze(gt,e)):We(Nt),ze(Nt,n)}var xn=null,Es=!1,ca=!1;function sf(e){xn===null?xn=[e]:xn.push(e)}function Gh(e){Es=!0,sf(e)}function er(){if(!ca&&xn!==null){ca=!0;var e=0,t=Ae;try{var n=xn;for(Ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}xn=null,Es=!1}catch(o){throw xn!==null&&(xn=xn.slice(e+1)),Dd(Oi,er),o}finally{Ae=t,ca=!1}}return null}var Mr=[],Ur=0,ns=null,rs=0,$t=[],Gt=0,mr=null,vn=1,wn="";function sr(e,t){Mr[Ur++]=rs,Mr[Ur++]=ns,ns=e,rs=t}function af(e,t,n){$t[Gt++]=vn,$t[Gt++]=wn,$t[Gt++]=mr,mr=e;var r=vn;e=wn;var o=32-rn(r)-1;r&=~(1<<o),n+=1;var l=32-rn(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,vn=1<<32-rn(t)+o|n<<o|r,wn=l+e}else vn=1<<l|n<<o|r,wn=e}function $i(e){e.return!==null&&(sr(e,1),af(e,1,0))}function Gi(e){for(;e===ns;)ns=Mr[--Ur],Mr[Ur]=null,rs=Mr[--Ur],Mr[Ur]=null;for(;e===mr;)mr=$t[--Gt],$t[Gt]=null,wn=$t[--Gt],$t[Gt]=null,vn=$t[--Gt],$t[Gt]=null}var At=null,Ot=null,He=!1,nn=null;function uf(e,t){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,At=e,Ot=Vn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,At=e,Ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=mr!==null?{id:vn,overflow:wn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,At=e,Ot=null,!0):!1;default:return!1}}function Za(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ei(e){if(He){var t=Ot;if(t){var n=t;if(!hc(e,t)){if(Za(e))throw Error(Y(418));t=Vn(n.nextSibling);var r=At;t&&hc(e,t)?uf(r,n):(e.flags=e.flags&-4097|2,He=!1,At=e)}}else{if(Za(e))throw Error(Y(418));e.flags=e.flags&-4097|2,He=!1,At=e}}}function gc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;At=e}function Nl(e){if(e!==At)return!1;if(!He)return gc(e),He=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ya(e.type,e.memoizedProps)),t&&(t=Ot)){if(Za(e))throw cf(),Error(Y(418));for(;t;)uf(e,t),t=Vn(t.nextSibling)}if(gc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ot=Vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ot=null}}else Ot=At?Vn(e.stateNode.nextSibling):null;return!0}function cf(){for(var e=Ot;e;)e=Vn(e.nextSibling)}function Qr(){Ot=At=null,He=!1}function Wi(e){nn===null?nn=[e]:nn.push(e)}var Wh=jn.ReactCurrentBatchConfig;function xo(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=o.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,e))}return e}function jl(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yc(e){var t=e._init;return t(e._payload)}function df(e){function t(f,m){if(e){var g=f.deletions;g===null?(f.deletions=[m],f.flags|=16):g.push(m)}}function n(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function r(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function o(f,m){return f=Yn(f,m),f.index=0,f.sibling=null,f}function l(f,m,g){return f.index=g,e?(g=f.alternate,g!==null?(g=g.index,g<m?(f.flags|=2,m):g):(f.flags|=2,m)):(f.flags|=1048576,m)}function a(f){return e&&f.alternate===null&&(f.flags|=2),f}function i(f,m,g,v){return m===null||m.tag!==6?(m=ya(g,f.mode,v),m.return=f,m):(m=o(m,g),m.return=f,m)}function u(f,m,g,v){var j=g.type;return j===Dr?w(f,m,g.props.children,v,g.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&yc(j)===m.type)?(v=o(m,g.props),v.ref=xo(f,m,g),v.return=f,v):(v=Wl(g.type,g.key,g.props,null,f.mode,v),v.ref=xo(f,m,g),v.return=f,v)}function c(f,m,g,v){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=xa(g,f.mode,v),m.return=f,m):(m=o(m,g.children||[]),m.return=f,m)}function w(f,m,g,v,j){return m===null||m.tag!==7?(m=fr(g,f.mode,v,j),m.return=f,m):(m=o(m,g),m.return=f,m)}function p(f,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ya(""+m,f.mode,g),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case yl:return g=Wl(m.type,m.key,m.props,null,f.mode,g),g.ref=xo(f,null,m),g.return=f,g;case _r:return m=xa(m,f.mode,g),m.return=f,m;case Ln:var v=m._init;return p(f,v(m._payload),g)}if(So(m)||po(m))return m=fr(m,f.mode,g,null),m.return=f,m;jl(f,m)}return null}function d(f,m,g,v){var j=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:i(f,m,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case yl:return g.key===j?u(f,m,g,v):null;case _r:return g.key===j?c(f,m,g,v):null;case Ln:return j=g._init,d(f,m,j(g._payload),v)}if(So(g)||po(g))return j!==null?null:w(f,m,g,v,null);jl(f,g)}return null}function x(f,m,g,v,j){if(typeof v=="string"&&v!==""||typeof v=="number")return f=f.get(g)||null,i(m,f,""+v,j);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case yl:return f=f.get(v.key===null?g:v.key)||null,u(m,f,v,j);case _r:return f=f.get(v.key===null?g:v.key)||null,c(m,f,v,j);case Ln:var R=v._init;return x(f,m,g,R(v._payload),j)}if(So(v)||po(v))return f=f.get(g)||null,w(m,f,v,j,null);jl(m,v)}return null}function C(f,m,g,v){for(var j=null,R=null,I=m,B=m=0,oe=null;I!==null&&B<g.length;B++){I.index>B?(oe=I,I=null):oe=I.sibling;var V=d(f,I,g[B],v);if(V===null){I===null&&(I=oe);break}e&&I&&V.alternate===null&&t(f,I),m=l(V,m,B),R===null?j=V:R.sibling=V,R=V,I=oe}if(B===g.length)return n(f,I),He&&sr(f,B),j;if(I===null){for(;B<g.length;B++)I=p(f,g[B],v),I!==null&&(m=l(I,m,B),R===null?j=I:R.sibling=I,R=I);return He&&sr(f,B),j}for(I=r(f,I);B<g.length;B++)oe=x(I,f,B,g[B],v),oe!==null&&(e&&oe.alternate!==null&&I.delete(oe.key===null?B:oe.key),m=l(oe,m,B),R===null?j=oe:R.sibling=oe,R=oe);return e&&I.forEach(function(pe){return t(f,pe)}),He&&sr(f,B),j}function _(f,m,g,v){var j=po(g);if(typeof j!="function")throw Error(Y(150));if(g=j.call(g),g==null)throw Error(Y(151));for(var R=j=null,I=m,B=m=0,oe=null,V=g.next();I!==null&&!V.done;B++,V=g.next()){I.index>B?(oe=I,I=null):oe=I.sibling;var pe=d(f,I,V.value,v);if(pe===null){I===null&&(I=oe);break}e&&I&&pe.alternate===null&&t(f,I),m=l(pe,m,B),R===null?j=pe:R.sibling=pe,R=pe,I=oe}if(V.done)return n(f,I),He&&sr(f,B),j;if(I===null){for(;!V.done;B++,V=g.next())V=p(f,V.value,v),V!==null&&(m=l(V,m,B),R===null?j=V:R.sibling=V,R=V);return He&&sr(f,B),j}for(I=r(f,I);!V.done;B++,V=g.next())V=x(I,f,B,V.value,v),V!==null&&(e&&V.alternate!==null&&I.delete(V.key===null?B:V.key),m=l(V,m,B),R===null?j=V:R.sibling=V,R=V);return e&&I.forEach(function(Ee){return t(f,Ee)}),He&&sr(f,B),j}function O(f,m,g,v){if(typeof g=="object"&&g!==null&&g.type===Dr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case yl:e:{for(var j=g.key,R=m;R!==null;){if(R.key===j){if(j=g.type,j===Dr){if(R.tag===7){n(f,R.sibling),m=o(R,g.props.children),m.return=f,f=m;break e}}else if(R.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ln&&yc(j)===R.type){n(f,R.sibling),m=o(R,g.props),m.ref=xo(f,R,g),m.return=f,f=m;break e}n(f,R);break}else t(f,R);R=R.sibling}g.type===Dr?(m=fr(g.props.children,f.mode,v,g.key),m.return=f,f=m):(v=Wl(g.type,g.key,g.props,null,f.mode,v),v.ref=xo(f,m,g),v.return=f,f=v)}return a(f);case _r:e:{for(R=g.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(f,m.sibling),m=o(m,g.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else t(f,m);m=m.sibling}m=xa(g,f.mode,v),m.return=f,f=m}return a(f);case Ln:return R=g._init,O(f,m,R(g._payload),v)}if(So(g))return C(f,m,g,v);if(po(g))return _(f,m,g,v);jl(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(f,m.sibling),m=o(m,g),m.return=f,f=m):(n(f,m),m=ya(g,f.mode,v),m.return=f,f=m),a(f)):n(f,m)}return O}var Xr=df(!0),ff=df(!1),os=Zn(null),ls=null,zr=null,Vi=null;function Hi(){Vi=zr=ls=null}function Ki(e){var t=os.current;We(os),e._currentValue=t}function ti(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kr(e,t){ls=e,Vi=zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Ht(e){var t=e._currentValue;if(Vi!==e)if(e={context:e,memoizedValue:t,next:null},zr===null){if(ls===null)throw Error(Y(308));zr=e,ls.dependencies={lanes:0,firstContext:e}}else zr=zr.next=e;return t}var ur=null;function Ji(e){ur===null?ur=[e]:ur.push(e)}function pf(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Ji(t)):(n.next=o.next,o.next=n),t.interleaved=n,bn(e,r)}function bn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function Yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Sn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,bn(e,n)}return o=r.interleaved,o===null?(t.next=t,Ji(r)):(t.next=o.next,o.next=t),r.interleaved=t,bn(e,n)}function Ul(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pi(e,n)}}function xc(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ss(e,t,n,r){var o=e.updateQueue;Mn=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?l=c:a.next=c,a=u;var w=e.alternate;w!==null&&(w=w.updateQueue,i=w.lastBaseUpdate,i!==a&&(i===null?w.firstBaseUpdate=c:i.next=c,w.lastBaseUpdate=u))}if(l!==null){var p=o.baseState;a=0,w=c=u=null,i=l;do{var d=i.lane,x=i.eventTime;if((r&d)===d){w!==null&&(w=w.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var C=e,_=i;switch(d=t,x=n,_.tag){case 1:if(C=_.payload,typeof C=="function"){p=C.call(x,p,d);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=_.payload,d=typeof C=="function"?C.call(x,p,d):C,d==null)break e;p=qe({},p,d);break e;case 2:Mn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[i]:d.push(i))}else x={eventTime:x,lane:d,tag:i.tag,payload:i.payload,callback:i.callback,next:null},w===null?(c=w=x,u=p):w=w.next=x,a|=d;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;d=i,i=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(w===null&&(u=p),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=w,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);gr|=a,e.lanes=a,e.memoizedState=p}}function vc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Y(191,o));o.call(r)}}}var ol={},pn=Zn(ol),Jo=Zn(ol),Yo=Zn(ol);function cr(e){if(e===ol)throw Error(Y(174));return e}function qi(e,t){switch(ze(Yo,t),ze(Jo,e),ze(pn,ol),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Aa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Aa(t,e)}We(pn),ze(pn,t)}function Zr(){We(pn),We(Jo),We(Yo)}function hf(e){cr(Yo.current);var t=cr(pn.current),n=Aa(t,e.type);t!==n&&(ze(Jo,e),ze(pn,n))}function Qi(e){Jo.current===e&&(We(pn),We(Jo))}var Je=Zn(0);function as(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var da=[];function Xi(){for(var e=0;e<da.length;e++)da[e]._workInProgressVersionPrimary=null;da.length=0}var zl=jn.ReactCurrentDispatcher,fa=jn.ReactCurrentBatchConfig,hr=0,Ye=null,nt=null,st=null,is=!1,Ro=!1,qo=0,Vh=0;function pt(){throw Error(Y(321))}function Zi(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ln(e[n],t[n]))return!1;return!0}function eu(e,t,n,r,o,l){if(hr=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zl.current=e===null||e.memoizedState===null?Yh:qh,e=n(r,o),Ro){l=0;do{if(Ro=!1,qo=0,25<=l)throw Error(Y(301));l+=1,st=nt=null,t.updateQueue=null,zl.current=Qh,e=n(r,o)}while(Ro)}if(zl.current=us,t=nt!==null&&nt.next!==null,hr=0,st=nt=Ye=null,is=!1,t)throw Error(Y(300));return e}function tu(){var e=qo!==0;return qo=0,e}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?Ye.memoizedState=st=e:st=st.next=e,st}function Kt(){if(nt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=nt.next;var t=st===null?Ye.memoizedState:st.next;if(t!==null)st=t,nt=e;else{if(e===null)throw Error(Y(310));nt=e,e={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},st===null?Ye.memoizedState=st=e:st=st.next=e}return st}function Qo(e,t){return typeof t=="function"?t(e):t}function pa(e){var t=Kt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=nt,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var i=a=null,u=null,c=l;do{var w=c.lane;if((hr&w)===w)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:w,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=p,a=r):u=u.next=p,Ye.lanes|=w,gr|=w}c=c.next}while(c!==null&&c!==l);u===null?a=r:u.next=i,ln(r,t.memoizedState)||(bt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,Ye.lanes|=l,gr|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ma(e){var t=Kt(),n=t.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);ln(l,t.memoizedState)||(bt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function gf(){}function yf(e,t){var n=Ye,r=Kt(),o=t(),l=!ln(r.memoizedState,o);if(l&&(r.memoizedState=o,bt=!0),r=r.queue,nu(wf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Xo(9,vf.bind(null,n,r,o,t),void 0,null),at===null)throw Error(Y(349));hr&30||xf(n,t,o)}return o}function xf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vf(e,t,n,r){t.value=n,t.getSnapshot=r,Cf(t)&&Sf(e)}function wf(e,t,n){return n(function(){Cf(t)&&Sf(e)})}function Cf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ln(e,n)}catch{return!0}}function Sf(e){var t=bn(e,1);t!==null&&on(t,e,1,-1)}function wc(e){var t=cn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qo,lastRenderedState:e},t.queue=e,e=e.dispatch=Jh.bind(null,Ye,e),[t.memoizedState,e]}function Xo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ef(){return Kt().memoizedState}function Fl(e,t,n,r){var o=cn();Ye.flags|=e,o.memoizedState=Xo(1|t,n,void 0,r===void 0?null:r)}function Ts(e,t,n,r){var o=Kt();r=r===void 0?null:r;var l=void 0;if(nt!==null){var a=nt.memoizedState;if(l=a.destroy,r!==null&&Zi(r,a.deps)){o.memoizedState=Xo(t,n,l,r);return}}Ye.flags|=e,o.memoizedState=Xo(1|t,n,l,r)}function Cc(e,t){return Fl(8390656,8,e,t)}function nu(e,t){return Ts(2048,8,e,t)}function Tf(e,t){return Ts(4,2,e,t)}function kf(e,t){return Ts(4,4,e,t)}function bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nf(e,t,n){return n=n!=null?n.concat([e]):null,Ts(4,4,bf.bind(null,t,e),n)}function ru(){}function jf(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function If(e,t){var n=Kt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Zi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _f(e,t,n){return hr&21?(ln(n,t)||(n=Pd(),Ye.lanes|=n,gr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=n)}function Hh(e,t){var n=Ae;Ae=n!==0&&4>n?n:4,e(!0);var r=fa.transition;fa.transition={};try{e(!1),t()}finally{Ae=n,fa.transition=r}}function Df(){return Kt().memoizedState}function Kh(e,t,n){var r=Jn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rf(e))Of(t,n);else if(n=pf(e,t,n,r),n!==null){var o=xt();on(n,e,r,o),Pf(n,t,r)}}function Jh(e,t,n){var r=Jn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rf(e))Of(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(o.hasEagerState=!0,o.eagerState=i,ln(i,a)){var u=t.interleaved;u===null?(o.next=o,Ji(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=pf(e,t,o,r),n!==null&&(o=xt(),on(n,e,r,o),Pf(n,t,r))}}function Rf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Of(e,t){Ro=is=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Pf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pi(e,n)}}var us={readContext:Ht,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},Yh={readContext:Ht,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Ht,useEffect:Cc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fl(4194308,4,bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fl(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fl(4,2,e,t)},useMemo:function(e,t){var n=cn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=cn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Kh.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:wc,useDebugValue:ru,useDeferredValue:function(e){return cn().memoizedState=e},useTransition:function(){var e=wc(!1),t=e[0];return e=Hh.bind(null,e[1]),cn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,o=cn();if(He){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=t(),at===null)throw Error(Y(349));hr&30||xf(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Cc(wf.bind(null,r,l,e),[e]),r.flags|=2048,Xo(9,vf.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=cn(),t=at.identifierPrefix;if(He){var n=wn,r=vn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Vh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qh={readContext:Ht,useCallback:jf,useContext:Ht,useEffect:nu,useImperativeHandle:Nf,useInsertionEffect:Tf,useLayoutEffect:kf,useMemo:If,useReducer:pa,useRef:Ef,useState:function(){return pa(Qo)},useDebugValue:ru,useDeferredValue:function(e){var t=Kt();return _f(t,nt.memoizedState,e)},useTransition:function(){var e=pa(Qo)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:gf,useSyncExternalStore:yf,useId:Df,unstable_isNewReconciler:!1},Qh={readContext:Ht,useCallback:jf,useContext:Ht,useEffect:nu,useImperativeHandle:Nf,useInsertionEffect:Tf,useLayoutEffect:kf,useMemo:If,useReducer:ma,useRef:Ef,useState:function(){return ma(Qo)},useDebugValue:ru,useDeferredValue:function(e){var t=Kt();return nt===null?t.memoizedState=e:_f(t,nt.memoizedState,e)},useTransition:function(){var e=ma(Qo)[0],t=Kt().memoizedState;return[e,t]},useMutableSource:gf,useSyncExternalStore:yf,useId:Df,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=qe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ni(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:qe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ks={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),o=Jn(e),l=Sn(r,o);l.payload=t,n!=null&&(l.callback=n),t=Hn(e,l,o),t!==null&&(on(t,e,o,r),Ul(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),o=Jn(e),l=Sn(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Hn(e,l,o),t!==null&&(on(t,e,o,r),Ul(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=Jn(e),o=Sn(n,r);o.tag=2,t!=null&&(o.callback=t),t=Hn(e,o,r),t!==null&&(on(t,e,r,n),Ul(t,e,r))}};function Sc(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!Wo(n,r)||!Wo(o,l):!0}function Af(e,t,n){var r=!1,o=Qn,l=t.contextType;return typeof l=="object"&&l!==null?l=Ht(l):(o=jt(t)?pr:gt.current,r=t.contextTypes,l=(r=r!=null)?qr(e,o):Qn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ks,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function Ec(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ks.enqueueReplaceState(t,t.state,null)}function ri(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Yi(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Ht(l):(l=jt(t)?pr:gt.current,o.context=qr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ni(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&ks.enqueueReplaceState(o,o.state,null),ss(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t){try{var n="",r=t;do n+=km(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function oi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Xh=typeof WeakMap=="function"?WeakMap:Map;function Lf(e,t,n){n=Sn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ds||(ds=!0,mi=r),oi(e,t)},n}function Mf(e,t,n){n=Sn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){oi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){oi(e,t),typeof r!="function"&&(Kn===null?Kn=new Set([this]):Kn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Tc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Xh;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=fg.bind(null,e,t,n),t.then(e,e))}function kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bc(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Sn(-1,1),t.tag=2,Hn(n,t,1))),n.lanes|=1),e)}var Zh=jn.ReactCurrentOwner,bt=!1;function yt(e,t,n,r){t.child=e===null?ff(t,null,n,r):Xr(t,e.child,n,r)}function Nc(e,t,n,r,o){n=n.render;var l=t.ref;return Kr(t,o),r=eu(e,t,n,r,l,o),n=tu(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Nn(e,t,o)):(He&&n&&$i(t),t.flags|=1,yt(e,t,r,o),t.child)}function jc(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!du(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Uf(e,t,l,r,o)):(e=Wl(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:Wo,n(a,r)&&e.ref===t.ref)return Nn(e,t,o)}return t.flags|=1,e=Yn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Uf(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(Wo(l,r)&&e.ref===t.ref)if(bt=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,Nn(e,t,o)}return li(e,t,n,r,o)}function zf(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Br,Dt),Dt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(Br,Dt),Dt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ze(Br,Dt),Dt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ze(Br,Dt),Dt|=r;return yt(e,t,o,n),t.child}function Ff(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function li(e,t,n,r,o){var l=jt(n)?pr:gt.current;return l=qr(t,l),Kr(t,o),n=eu(e,t,n,r,l,o),r=tu(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Nn(e,t,o)):(He&&r&&$i(t),t.flags|=1,yt(e,t,n,o),t.child)}function Ic(e,t,n,r,o){if(jt(n)){var l=!0;ts(t)}else l=!1;if(Kr(t,o),t.stateNode===null)Bl(e,t),Af(t,n,r),ri(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ht(c):(c=jt(n)?pr:gt.current,c=qr(t,c));var w=n.getDerivedStateFromProps,p=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&Ec(t,a,r,c),Mn=!1;var d=t.memoizedState;a.state=d,ss(t,r,a,o),u=t.memoizedState,i!==r||d!==u||Nt.current||Mn?(typeof w=="function"&&(ni(t,n,w,r),u=t.memoizedState),(i=Mn||Sc(t,n,i,r,d,u,c))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,mf(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:en(t.type,i),a.props=c,p=t.pendingProps,d=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ht(u):(u=jt(n)?pr:gt.current,u=qr(t,u));var x=n.getDerivedStateFromProps;(w=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==p||d!==u)&&Ec(t,a,r,u),Mn=!1,d=t.memoizedState,a.state=d,ss(t,r,a,o);var C=t.memoizedState;i!==p||d!==C||Nt.current||Mn?(typeof x=="function"&&(ni(t,n,x,r),C=t.memoizedState),(c=Mn||Sc(t,n,c,r,d,C,u)||!1)?(w||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=C),a.props=r,a.state=C,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return si(e,t,n,r,l,o)}function si(e,t,n,r,o,l){Ff(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&mc(t,n,!1),Nn(e,t,l);r=t.stateNode,Zh.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Xr(t,e.child,null,l),t.child=Xr(t,null,i,l)):yt(e,t,i,l),t.memoizedState=r.state,o&&mc(t,n,!0),t.child}function Bf(e){var t=e.stateNode;t.pendingContext?pc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&pc(e,t.context,!1),qi(e,t.containerInfo)}function _c(e,t,n,r,o){return Qr(),Wi(o),t.flags|=256,yt(e,t,n,r),t.child}var ai={dehydrated:null,treeContext:null,retryLane:0};function ii(e){return{baseLanes:e,cachePool:null,transitions:null}}function $f(e,t,n){var r=t.pendingProps,o=Je.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(o&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ze(Je,o&1),e===null)return ei(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=js(a,r,0,null),e=fr(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ii(n),t.memoizedState=ai,e):ou(t,a));if(o=e.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return eg(e,t,a,r,i,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,i=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Yn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),i!==null?l=Yn(i,l):(l=fr(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?ii(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=ai,r}return l=e.child,e=l.sibling,r=Yn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ou(e,t){return t=js({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Il(e,t,n,r){return r!==null&&Wi(r),Xr(t,e.child,null,n),e=ou(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function eg(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ha(Error(Y(422))),Il(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=js({mode:"visible",children:r.children},o,0,null),l=fr(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Xr(t,e.child,null,a),t.child.memoizedState=ii(a),t.memoizedState=ai,l);if(!(t.mode&1))return Il(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(Y(419)),r=ha(l,r,void 0),Il(e,t,a,r)}if(i=(a&e.childLanes)!==0,bt||i){if(r=at,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,bn(e,o),on(r,e,o,-1))}return cu(),r=ha(Error(Y(421))),Il(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=pg.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Ot=Vn(o.nextSibling),At=t,He=!0,nn=null,e!==null&&($t[Gt++]=vn,$t[Gt++]=wn,$t[Gt++]=mr,vn=e.id,wn=e.overflow,mr=t),t=ou(t,r.children),t.flags|=4096,t)}function Dc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ti(e.return,t,n)}function ga(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Gf(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(yt(e,t,r.children,n),r=Je.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dc(e,n,t);else if(e.tag===19)Dc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(Je,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&as(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ga(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&as(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ga(t,!0,n,null,l);break;case"together":ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),gr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,n=Yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tg(e,t,n){switch(t.tag){case 3:Bf(t),Qr();break;case 5:hf(t);break;case 1:jt(t.type)&&ts(t);break;case 4:qi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ze(os,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(Je,Je.current&1),t.flags|=128,null):n&t.child.childLanes?$f(e,t,n):(ze(Je,Je.current&1),e=Nn(e,t,n),e!==null?e.sibling:null);ze(Je,Je.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gf(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ze(Je,Je.current),r)break;return null;case 22:case 23:return t.lanes=0,zf(e,t,n)}return Nn(e,t,n)}var Wf,ui,Vf,Hf;Wf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ui=function(){};Vf=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,cr(pn.current);var l=null;switch(n){case"input":o=Da(e,o),r=Da(e,r),l=[];break;case"select":o=qe({},o,{value:void 0}),r=qe({},r,{value:void 0}),l=[];break;case"textarea":o=Pa(e,o),r=Pa(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Zl)}La(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var i=o[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mo.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(i=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ge("scroll",e),l||i===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Hf=function(e,t,n,r){n!==r&&(t.flags|=4)};function vo(e,t){if(!He)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ng(e,t,n){var r=t.pendingProps;switch(Gi(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(t),null;case 1:return jt(t.type)&&es(),mt(t),null;case 3:return r=t.stateNode,Zr(),We(Nt),We(gt),Xi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Nl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(yi(nn),nn=null))),ui(e,t),mt(t),null;case 5:Qi(t);var o=cr(Yo.current);if(n=t.type,e!==null&&t.stateNode!=null)Vf(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Y(166));return mt(t),null}if(e=cr(pn.current),Nl(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[dn]=t,r[Ko]=l,e=(t.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(o=0;o<To.length;o++)Ge(To[o],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":Fu(r,l),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ge("invalid",r);break;case"textarea":$u(r,l),Ge("invalid",r)}La(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&bl(r.textContent,i,e),o=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&bl(r.textContent,i,e),o=["children",""+i]):Mo.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ge("scroll",r)}switch(n){case"input":xl(r),Bu(r,l,!0);break;case"textarea":xl(r),Gu(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Zl)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=vd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[dn]=t,e[Ko]=r,Wf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ma(n,r),n){case"dialog":Ge("cancel",e),Ge("close",e),o=r;break;case"iframe":case"object":case"embed":Ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<To.length;o++)Ge(To[o],e);o=r;break;case"source":Ge("error",e),o=r;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),o=r;break;case"details":Ge("toggle",e),o=r;break;case"input":Fu(e,r),o=Da(e,r),Ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=qe({},r,{value:void 0}),Ge("invalid",e);break;case"textarea":$u(e,r),o=Pa(e,r),Ge("invalid",e);break;default:o=r}La(n,o),i=o;for(l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="style"?Sd(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&wd(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Uo(e,u):typeof u=="number"&&Uo(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Mo.hasOwnProperty(l)?u!=null&&l==="onScroll"&&Ge("scroll",e):u!=null&&ji(e,l,u,a))}switch(n){case"input":xl(e),Bu(e,r,!1);break;case"textarea":xl(e),Gu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Gr(e,!!r.multiple,l,!1):r.defaultValue!=null&&Gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mt(t),null;case 6:if(e&&t.stateNode!=null)Hf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Y(166));if(n=cr(Yo.current),cr(pn.current),Nl(t)){if(r=t.stateNode,n=t.memoizedProps,r[dn]=t,(l=r.nodeValue!==n)&&(e=At,e!==null))switch(e.tag){case 3:bl(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bl(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[dn]=t,t.stateNode=r}return mt(t),null;case 13:if(We(Je),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(He&&Ot!==null&&t.mode&1&&!(t.flags&128))cf(),Qr(),t.flags|=98560,l=!1;else if(l=Nl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Y(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Y(317));l[dn]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mt(t),l=!1}else nn!==null&&(yi(nn),nn=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Je.current&1?rt===0&&(rt=3):cu())),t.updateQueue!==null&&(t.flags|=4),mt(t),null);case 4:return Zr(),ui(e,t),e===null&&Vo(t.stateNode.containerInfo),mt(t),null;case 10:return Ki(t.type._context),mt(t),null;case 17:return jt(t.type)&&es(),mt(t),null;case 19:if(We(Je),l=t.memoizedState,l===null)return mt(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)vo(l,!1);else{if(rt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=as(e),a!==null){for(t.flags|=128,vo(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(Je,Je.current&1|2),t.child}e=e.sibling}l.tail!==null&&et()>to&&(t.flags|=128,r=!0,vo(l,!1),t.lanes=4194304)}else{if(!r)if(e=as(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!He)return mt(t),null}else 2*et()-l.renderingStartTime>to&&n!==1073741824&&(t.flags|=128,r=!0,vo(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=et(),t.sibling=null,n=Je.current,ze(Je,r?n&1|2:n&1),t):(mt(t),null);case 22:case 23:return uu(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Dt&1073741824&&(mt(t),t.subtreeFlags&6&&(t.flags|=8192)):mt(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function rg(e,t){switch(Gi(t),t.tag){case 1:return jt(t.type)&&es(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zr(),We(Nt),We(gt),Xi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qi(t),null;case 13:if(We(Je),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return We(Je),null;case 4:return Zr(),null;case 10:return Ki(t.type._context),null;case 22:case 23:return uu(),null;case 24:return null;default:return null}}var _l=!1,ht=!1,og=typeof WeakSet=="function"?WeakSet:Set,se=null;function Fr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(e,t,r)}else n.current=null}function ci(e,t,n){try{n()}catch(r){Ze(e,t,r)}}var Rc=!1;function lg(e,t){if(Ka=ql,e=qd(),Bi(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,w=0,p=e,d=null;t:for(;;){for(var x;p!==n||o!==0&&p.nodeType!==3||(i=a+o),p!==l||r!==0&&p.nodeType!==3||(u=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(x=p.firstChild)!==null;)d=p,p=x;for(;;){if(p===e)break t;if(d===n&&++c===o&&(i=a),d===l&&++w===r&&(u=a),(x=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=x}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ja={focusedElem:e,selectionRange:n},ql=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var C=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var _=C.memoizedProps,O=C.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?_:en(t.type,_),O);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(v){Ze(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return C=Rc,Rc=!1,C}function Oo(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&ci(t,n,l)}o=o.next}while(o!==r)}}function bs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function di(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Kf(e){var t=e.alternate;t!==null&&(e.alternate=null,Kf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dn],delete t[Ko],delete t[Qa],delete t[Bh],delete t[$h])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jf(e){return e.tag===5||e.tag===3||e.tag===4}function Oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Zl));else if(r!==4&&(e=e.child,e!==null))for(fi(e,t,n),e=e.sibling;e!==null;)fi(e,t,n),e=e.sibling}function pi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pi(e,t,n),e=e.sibling;e!==null;)pi(e,t,n),e=e.sibling}var ut=null,tn=!1;function Pn(e,t,n){for(n=n.child;n!==null;)Yf(e,t,n),n=n.sibling}function Yf(e,t,n){if(fn&&typeof fn.onCommitFiberUnmount=="function")try{fn.onCommitFiberUnmount(xs,n)}catch{}switch(n.tag){case 5:ht||Fr(n,t);case 6:var r=ut,o=tn;ut=null,Pn(e,t,n),ut=r,tn=o,ut!==null&&(tn?(e=ut,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ut.removeChild(n.stateNode));break;case 18:ut!==null&&(tn?(e=ut,n=n.stateNode,e.nodeType===8?ua(e.parentNode,n):e.nodeType===1&&ua(e,n),$o(e)):ua(ut,n.stateNode));break;case 4:r=ut,o=tn,ut=n.stateNode.containerInfo,tn=!0,Pn(e,t,n),ut=r,tn=o;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&ci(n,t,a),o=o.next}while(o!==r)}Pn(e,t,n);break;case 1:if(!ht&&(Fr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Ze(n,t,i)}Pn(e,t,n);break;case 21:Pn(e,t,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Pn(e,t,n),ht=r):Pn(e,t,n);break;default:Pn(e,t,n)}}function Pc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new og),t.forEach(function(r){var o=mg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Xt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:ut=i.stateNode,tn=!1;break e;case 3:ut=i.stateNode.containerInfo,tn=!0;break e;case 4:ut=i.stateNode.containerInfo,tn=!0;break e}i=i.return}if(ut===null)throw Error(Y(160));Yf(l,a,o),ut=null,tn=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){Ze(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}function qf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),un(e),r&4){try{Oo(3,e,e.return),bs(3,e)}catch(_){Ze(e,e.return,_)}try{Oo(5,e,e.return)}catch(_){Ze(e,e.return,_)}}break;case 1:Xt(t,e),un(e),r&512&&n!==null&&Fr(n,n.return);break;case 5:if(Xt(t,e),un(e),r&512&&n!==null&&Fr(n,n.return),e.flags&32){var o=e.stateNode;try{Uo(o,"")}catch(_){Ze(e,e.return,_)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&yd(o,l),Ma(i,a);var c=Ma(i,l);for(a=0;a<u.length;a+=2){var w=u[a],p=u[a+1];w==="style"?Sd(o,p):w==="dangerouslySetInnerHTML"?wd(o,p):w==="children"?Uo(o,p):ji(o,w,p,c)}switch(i){case"input":Ra(o,l);break;case"textarea":xd(o,l);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Gr(o,!!l.multiple,x,!1):d!==!!l.multiple&&(l.defaultValue!=null?Gr(o,!!l.multiple,l.defaultValue,!0):Gr(o,!!l.multiple,l.multiple?[]:"",!1))}o[Ko]=l}catch(_){Ze(e,e.return,_)}}break;case 6:if(Xt(t,e),un(e),r&4){if(e.stateNode===null)throw Error(Y(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(_){Ze(e,e.return,_)}}break;case 3:if(Xt(t,e),un(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$o(t.containerInfo)}catch(_){Ze(e,e.return,_)}break;case 4:Xt(t,e),un(e);break;case 13:Xt(t,e),un(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(au=et())),r&4&&Pc(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(ht=(c=ht)||w,Xt(t,e),ht=c):Xt(t,e),un(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!w&&e.mode&1)for(se=e,w=e.child;w!==null;){for(p=se=w;se!==null;){switch(d=se,x=d.child,d.tag){case 0:case 11:case 14:case 15:Oo(4,d,d.return);break;case 1:Fr(d,d.return);var C=d.stateNode;if(typeof C.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,C.props=t.memoizedProps,C.state=t.memoizedState,C.componentWillUnmount()}catch(_){Ze(r,n,_)}}break;case 5:Fr(d,d.return);break;case 22:if(d.memoizedState!==null){Lc(p);continue}}x!==null?(x.return=d,se=x):Lc(p)}w=w.sibling}e:for(w=null,p=e;;){if(p.tag===5){if(w===null){w=p;try{o=p.stateNode,c?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=p.stateNode,u=p.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=Cd("display",a))}catch(_){Ze(e,e.return,_)}}}else if(p.tag===6){if(w===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(_){Ze(e,e.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;w===p&&(w=null),p=p.return}w===p&&(w=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Xt(t,e),un(e),r&4&&Pc(e);break;case 21:break;default:Xt(t,e),un(e)}}function un(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jf(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Uo(o,""),r.flags&=-33);var l=Oc(e);pi(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,i=Oc(e);fi(e,i,a);break;default:throw Error(Y(161))}}catch(u){Ze(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sg(e,t,n){se=e,Qf(e)}function Qf(e,t,n){for(var r=(e.mode&1)!==0;se!==null;){var o=se,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||_l;if(!a){var i=o.alternate,u=i!==null&&i.memoizedState!==null||ht;i=_l;var c=ht;if(_l=a,(ht=u)&&!c)for(se=o;se!==null;)a=se,u=a.child,a.tag===22&&a.memoizedState!==null?Mc(o):u!==null?(u.return=a,se=u):Mc(o);for(;l!==null;)se=l,Qf(l),l=l.sibling;se=o,_l=i,ht=c}Ac(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,se=l):Ac(e)}}function Ac(e){for(;se!==null;){var t=se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ht||bs(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ht)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&vc(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vc(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var w=c.memoizedState;if(w!==null){var p=w.dehydrated;p!==null&&$o(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}ht||t.flags&512&&di(t)}catch(d){Ze(t,t.return,d)}}if(t===e){se=null;break}if(n=t.sibling,n!==null){n.return=t.return,se=n;break}se=t.return}}function Lc(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,se=n;break}se=t.return}}function Mc(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{bs(4,t)}catch(u){Ze(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){Ze(t,o,u)}}var l=t.return;try{di(t)}catch(u){Ze(t,l,u)}break;case 5:var a=t.return;try{di(t)}catch(u){Ze(t,a,u)}}}catch(u){Ze(t,t.return,u)}if(t===e){se=null;break}var i=t.sibling;if(i!==null){i.return=t.return,se=i;break}se=t.return}}var ag=Math.ceil,cs=jn.ReactCurrentDispatcher,lu=jn.ReactCurrentOwner,Vt=jn.ReactCurrentBatchConfig,Re=0,at=null,tt=null,ct=0,Dt=0,Br=Zn(0),rt=0,Zo=null,gr=0,Ns=0,su=0,Po=null,kt=null,au=0,to=1/0,yn=null,ds=!1,mi=null,Kn=null,Dl=!1,Bn=null,fs=0,Ao=0,hi=null,$l=-1,Gl=0;function xt(){return Re&6?et():$l!==-1?$l:$l=et()}function Jn(e){return e.mode&1?Re&2&&ct!==0?ct&-ct:Wh.transition!==null?(Gl===0&&(Gl=Pd()),Gl):(e=Ae,e!==0||(e=window.event,e=e===void 0?16:Bd(e.type)),e):1}function on(e,t,n,r){if(50<Ao)throw Ao=0,hi=null,Error(Y(185));tl(e,n,r),(!(Re&2)||e!==at)&&(e===at&&(!(Re&2)&&(Ns|=n),rt===4&&zn(e,ct)),It(e,r),n===1&&Re===0&&!(t.mode&1)&&(to=et()+500,Es&&er()))}function It(e,t){var n=e.callbackNode;Wm(e,t);var r=Yl(e,e===at?ct:0);if(r===0)n!==null&&Hu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Hu(n),t===1)e.tag===0?Gh(Uc.bind(null,e)):sf(Uc.bind(null,e)),zh(function(){!(Re&6)&&er()}),n=null;else{switch(Ad(r)){case 1:n=Oi;break;case 4:n=Rd;break;case 16:n=Jl;break;case 536870912:n=Od;break;default:n=Jl}n=lp(n,Xf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Xf(e,t){if($l=-1,Gl=0,Re&6)throw Error(Y(327));var n=e.callbackNode;if(Jr()&&e.callbackNode!==n)return null;var r=Yl(e,e===at?ct:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ps(e,r);else{t=r;var o=Re;Re|=2;var l=ep();(at!==e||ct!==t)&&(yn=null,to=et()+500,dr(e,t));do try{cg();break}catch(i){Zf(e,i)}while(!0);Hi(),cs.current=l,Re=o,tt!==null?t=0:(at=null,ct=0,t=rt)}if(t!==0){if(t===2&&(o=$a(e),o!==0&&(r=o,t=gi(e,o))),t===1)throw n=Zo,dr(e,0),zn(e,r),It(e,et()),n;if(t===6)zn(e,r);else{if(o=e.current.alternate,!(r&30)&&!ig(o)&&(t=ps(e,r),t===2&&(l=$a(e),l!==0&&(r=l,t=gi(e,l))),t===1))throw n=Zo,dr(e,0),zn(e,r),It(e,et()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(Y(345));case 2:ar(e,kt,yn);break;case 3:if(zn(e,r),(r&130023424)===r&&(t=au+500-et(),10<t)){if(Yl(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=qa(ar.bind(null,e,kt,yn),t);break}ar(e,kt,yn);break;case 4:if(zn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-rn(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ag(r/1960))-r,10<r){e.timeoutHandle=qa(ar.bind(null,e,kt,yn),r);break}ar(e,kt,yn);break;case 5:ar(e,kt,yn);break;default:throw Error(Y(329))}}}return It(e,et()),e.callbackNode===n?Xf.bind(null,e):null}function gi(e,t){var n=Po;return e.current.memoizedState.isDehydrated&&(dr(e,t).flags|=256),e=ps(e,t),e!==2&&(t=kt,kt=n,t!==null&&yi(t)),e}function yi(e){kt===null?kt=e:kt.push.apply(kt,e)}function ig(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!ln(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zn(e,t){for(t&=~su,t&=~Ns,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rn(t),r=1<<n;e[n]=-1,t&=~r}}function Uc(e){if(Re&6)throw Error(Y(327));Jr();var t=Yl(e,0);if(!(t&1))return It(e,et()),null;var n=ps(e,t);if(e.tag!==0&&n===2){var r=$a(e);r!==0&&(t=r,n=gi(e,r))}if(n===1)throw n=Zo,dr(e,0),zn(e,t),It(e,et()),n;if(n===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,kt,yn),It(e,et()),null}function iu(e,t){var n=Re;Re|=1;try{return e(t)}finally{Re=n,Re===0&&(to=et()+500,Es&&er())}}function yr(e){Bn!==null&&Bn.tag===0&&!(Re&6)&&Jr();var t=Re;Re|=1;var n=Vt.transition,r=Ae;try{if(Vt.transition=null,Ae=1,e)return e()}finally{Ae=r,Vt.transition=n,Re=t,!(Re&6)&&er()}}function uu(){Dt=Br.current,We(Br)}function dr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Uh(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Gi(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&es();break;case 3:Zr(),We(Nt),We(gt),Xi();break;case 5:Qi(r);break;case 4:Zr();break;case 13:We(Je);break;case 19:We(Je);break;case 10:Ki(r.type._context);break;case 22:case 23:uu()}n=n.return}if(at=e,tt=e=Yn(e.current,null),ct=Dt=t,rt=0,Zo=null,su=Ns=gr=0,kt=Po=null,ur!==null){for(t=0;t<ur.length;t++)if(n=ur[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}ur=null}return e}function Zf(e,t){do{var n=tt;try{if(Hi(),zl.current=us,is){for(var r=Ye.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}is=!1}if(hr=0,st=nt=Ye=null,Ro=!1,qo=0,lu.current=null,n===null||n.return===null){rt=1,Zo=t,tt=null;break}e:{var l=e,a=n.return,i=n,u=t;if(t=ct,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,w=i,p=w.tag;if(!(w.mode&1)&&(p===0||p===11||p===15)){var d=w.alternate;d?(w.updateQueue=d.updateQueue,w.memoizedState=d.memoizedState,w.lanes=d.lanes):(w.updateQueue=null,w.memoizedState=null)}var x=kc(a);if(x!==null){x.flags&=-257,bc(x,a,i,l,t),x.mode&1&&Tc(l,c,t),t=x,u=c;var C=t.updateQueue;if(C===null){var _=new Set;_.add(u),t.updateQueue=_}else C.add(u);break e}else{if(!(t&1)){Tc(l,c,t),cu();break e}u=Error(Y(426))}}else if(He&&i.mode&1){var O=kc(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),bc(O,a,i,l,t),Wi(eo(u,i));break e}}l=u=eo(u,i),rt!==4&&(rt=2),Po===null?Po=[l]:Po.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var f=Lf(l,u,t);xc(l,f);break e;case 1:i=u;var m=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Kn===null||!Kn.has(g)))){l.flags|=65536,t&=-t,l.lanes|=t;var v=Mf(l,i,t);xc(l,v);break e}}l=l.return}while(l!==null)}np(n)}catch(j){t=j,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function ep(){var e=cs.current;return cs.current=us,e===null?us:e}function cu(){(rt===0||rt===3||rt===2)&&(rt=4),at===null||!(gr&268435455)&&!(Ns&268435455)||zn(at,ct)}function ps(e,t){var n=Re;Re|=2;var r=ep();(at!==e||ct!==t)&&(yn=null,dr(e,t));do try{ug();break}catch(o){Zf(e,o)}while(!0);if(Hi(),Re=n,cs.current=r,tt!==null)throw Error(Y(261));return at=null,ct=0,rt}function ug(){for(;tt!==null;)tp(tt)}function cg(){for(;tt!==null&&!Am();)tp(tt)}function tp(e){var t=op(e.alternate,e,Dt);e.memoizedProps=e.pendingProps,t===null?np(e):tt=t,lu.current=null}function np(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rg(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rt=6,tt=null;return}}else if(n=ng(n,t,Dt),n!==null){tt=n;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);rt===0&&(rt=5)}function ar(e,t,n){var r=Ae,o=Vt.transition;try{Vt.transition=null,Ae=1,dg(e,t,n,r)}finally{Vt.transition=o,Ae=r}return null}function dg(e,t,n,r){do Jr();while(Bn!==null);if(Re&6)throw Error(Y(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Vm(e,l),e===at&&(tt=at=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,lp(Jl,function(){return Jr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Vt.transition,Vt.transition=null;var a=Ae;Ae=1;var i=Re;Re|=4,lu.current=null,lg(e,n),qf(n,e),Dh(Ja),ql=!!Ka,Ja=Ka=null,e.current=n,sg(n),Lm(),Re=i,Ae=a,Vt.transition=l}else e.current=n;if(Dl&&(Dl=!1,Bn=e,fs=o),l=e.pendingLanes,l===0&&(Kn=null),zm(n.stateNode),It(e,et()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ds)throw ds=!1,e=mi,mi=null,e;return fs&1&&e.tag!==0&&Jr(),l=e.pendingLanes,l&1?e===hi?Ao++:(Ao=0,hi=e):Ao=0,er(),null}function Jr(){if(Bn!==null){var e=Ad(fs),t=Vt.transition,n=Ae;try{if(Vt.transition=null,Ae=16>e?16:e,Bn===null)var r=!1;else{if(e=Bn,Bn=null,fs=0,Re&6)throw Error(Y(331));var o=Re;for(Re|=4,se=e.current;se!==null;){var l=se,a=l.child;if(se.flags&16){var i=l.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(se=c;se!==null;){var w=se;switch(w.tag){case 0:case 11:case 15:Oo(8,w,l)}var p=w.child;if(p!==null)p.return=w,se=p;else for(;se!==null;){w=se;var d=w.sibling,x=w.return;if(Kf(w),w===c){se=null;break}if(d!==null){d.return=x,se=d;break}se=x}}}var C=l.alternate;if(C!==null){var _=C.child;if(_!==null){C.child=null;do{var O=_.sibling;_.sibling=null,_=O}while(_!==null)}}se=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,se=a;else e:for(;se!==null;){if(l=se,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Oo(9,l,l.return)}var f=l.sibling;if(f!==null){f.return=l.return,se=f;break e}se=l.return}}var m=e.current;for(se=m;se!==null;){a=se;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,se=g;else e:for(a=m;se!==null;){if(i=se,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:bs(9,i)}}catch(j){Ze(i,i.return,j)}if(i===a){se=null;break e}var v=i.sibling;if(v!==null){v.return=i.return,se=v;break e}se=i.return}}if(Re=o,er(),fn&&typeof fn.onPostCommitFiberRoot=="function")try{fn.onPostCommitFiberRoot(xs,e)}catch{}r=!0}return r}finally{Ae=n,Vt.transition=t}}return!1}function zc(e,t,n){t=eo(n,t),t=Lf(e,t,1),e=Hn(e,t,1),t=xt(),e!==null&&(tl(e,1,t),It(e,t))}function Ze(e,t,n){if(e.tag===3)zc(e,e,n);else for(;t!==null;){if(t.tag===3){zc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kn===null||!Kn.has(r))){e=eo(n,e),e=Mf(t,e,1),t=Hn(t,e,1),e=xt(),t!==null&&(tl(t,1,e),It(t,e));break}}t=t.return}}function fg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,at===e&&(ct&n)===n&&(rt===4||rt===3&&(ct&130023424)===ct&&500>et()-au?dr(e,0):su|=n),It(e,t)}function rp(e,t){t===0&&(e.mode&1?(t=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):t=1);var n=xt();e=bn(e,t),e!==null&&(tl(e,t,n),It(e,n))}function pg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),rp(e,n)}function mg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(t),rp(e,n)}var op;op=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nt.current)bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bt=!1,tg(e,t,n);bt=!!(e.flags&131072)}else bt=!1,He&&t.flags&1048576&&af(t,rs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bl(e,t),e=t.pendingProps;var o=qr(t,gt.current);Kr(t,n),o=eu(null,t,r,e,o,n);var l=tu();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,jt(r)?(l=!0,ts(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Yi(t),o.updater=ks,t.stateNode=o,o._reactInternals=t,ri(t,r,e,n),t=si(null,t,r,!0,l,n)):(t.tag=0,He&&l&&$i(t),yt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=gg(r),e=en(r,e),o){case 0:t=li(null,t,r,e,n);break e;case 1:t=Ic(null,t,r,e,n);break e;case 11:t=Nc(null,t,r,e,n);break e;case 14:t=jc(null,t,r,en(r.type,e),n);break e}throw Error(Y(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),li(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),Ic(e,t,r,o,n);case 3:e:{if(Bf(t),e===null)throw Error(Y(387));r=t.pendingProps,l=t.memoizedState,o=l.element,mf(e,t),ss(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=eo(Error(Y(423)),t),t=_c(e,t,r,n,o);break e}else if(r!==o){o=eo(Error(Y(424)),t),t=_c(e,t,r,n,o);break e}else for(Ot=Vn(t.stateNode.containerInfo.firstChild),At=t,He=!0,nn=null,n=ff(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qr(),r===o){t=Nn(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return hf(t),e===null&&ei(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,Ya(r,o)?a=null:l!==null&&Ya(r,l)&&(t.flags|=32),Ff(e,t),yt(e,t,a,n),t.child;case 6:return e===null&&ei(t),null;case 13:return $f(e,t,n);case 4:return qi(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xr(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),Nc(e,t,r,o,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,ze(os,r._currentValue),r._currentValue=a,l!==null)if(ln(l.value,a)){if(l.children===o.children&&!Nt.current){t=Nn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=Sn(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var w=c.pending;w===null?u.next=u:(u.next=w.next,w.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),ti(l.return,n,t),i.lanes|=n;break}u=u.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(Y(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),ti(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}yt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Kr(t,n),o=Ht(o),r=r(o),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,o=en(r,t.pendingProps),o=en(r.type,o),jc(e,t,r,o,n);case 15:return Uf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:en(r,o),Bl(e,t),t.tag=1,jt(r)?(e=!0,ts(t)):e=!1,Kr(t,n),Af(t,r,o),ri(t,r,o,n),si(null,t,r,!0,e,n);case 19:return Gf(e,t,n);case 22:return zf(e,t,n)}throw Error(Y(156,t.tag))};function lp(e,t){return Dd(e,t)}function hg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,t,n,r){return new hg(e,t,n,r)}function du(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gg(e){if(typeof e=="function")return du(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_i)return 11;if(e===Di)return 14}return 2}function Yn(e,t){var n=e.alternate;return n===null?(n=Wt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wl(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")du(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Dr:return fr(n.children,o,l,t);case Ii:a=8,o|=8;break;case Na:return e=Wt(12,n,t,o|2),e.elementType=Na,e.lanes=l,e;case ja:return e=Wt(13,n,t,o),e.elementType=ja,e.lanes=l,e;case Ia:return e=Wt(19,n,t,o),e.elementType=Ia,e.lanes=l,e;case md:return js(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fd:a=10;break e;case pd:a=9;break e;case _i:a=11;break e;case Di:a=14;break e;case Ln:a=16,r=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=Wt(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function fr(e,t,n,r){return e=Wt(7,e,r,t),e.lanes=n,e}function js(e,t,n,r){return e=Wt(22,e,r,t),e.elementType=md,e.lanes=n,e.stateNode={isHidden:!1},e}function ya(e,t,n){return e=Wt(6,e,null,t),e.lanes=n,e}function xa(e,t,n){return t=Wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yg(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xs(0),this.expirationTimes=Xs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xs(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function fu(e,t,n,r,o,l,a,i,u){return e=new yg(e,t,n,i,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yi(l),e}function xg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_r,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function sp(e){if(!e)return Qn;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(jt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var n=e.type;if(jt(n))return lf(e,n,t)}return t}function ap(e,t,n,r,o,l,a,i,u){return e=fu(n,r,!0,e,o,l,a,i,u),e.context=sp(null),n=e.current,r=xt(),o=Jn(n),l=Sn(r,o),l.callback=t??null,Hn(n,l,o),e.current.lanes=o,tl(e,o,r),It(e,r),e}function Is(e,t,n,r){var o=t.current,l=xt(),a=Jn(o);return n=sp(n),t.context===null?t.context=n:t.pendingContext=n,t=Sn(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Hn(o,t,a),e!==null&&(on(e,o,a,l),Ul(e,o,a)),a}function ms(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pu(e,t){Fc(e,t),(e=e.alternate)&&Fc(e,t)}function vg(){return null}var ip=typeof reportError=="function"?reportError:function(e){console.error(e)};function mu(e){this._internalRoot=e}_s.prototype.render=mu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Is(e,t,null,null)};_s.prototype.unmount=mu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yr(function(){Is(null,e,null,null)}),t[kn]=null}};function _s(e){this._internalRoot=e}_s.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ud();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Un.length&&t!==0&&t<Un[n].priority;n++);Un.splice(n,0,e),n===0&&Fd(e)}};function hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ds(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Bc(){}function wg(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var c=ms(a);l.call(c)}}var a=ap(t,r,e,0,null,!1,!1,"",Bc);return e._reactRootContainer=a,e[kn]=a.current,Vo(e.nodeType===8?e.parentNode:e),yr(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var i=r;r=function(){var c=ms(u);i.call(c)}}var u=fu(e,0,!1,null,null,!1,!1,"",Bc);return e._reactRootContainer=u,e[kn]=u.current,Vo(e.nodeType===8?e.parentNode:e),yr(function(){Is(t,u,n,r)}),u}function Rs(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var i=o;o=function(){var u=ms(a);i.call(u)}}Is(t,a,e,o)}else a=wg(n,t,e,o,r);return ms(a)}Ld=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Eo(t.pendingLanes);n!==0&&(Pi(t,n|1),It(t,et()),!(Re&6)&&(to=et()+500,er()))}break;case 13:yr(function(){var r=bn(e,1);if(r!==null){var o=xt();on(r,e,1,o)}}),pu(e,1)}};Ai=function(e){if(e.tag===13){var t=bn(e,134217728);if(t!==null){var n=xt();on(t,e,134217728,n)}pu(e,134217728)}};Md=function(e){if(e.tag===13){var t=Jn(e),n=bn(e,t);if(n!==null){var r=xt();on(n,e,t,r)}pu(e,t)}};Ud=function(){return Ae};zd=function(e,t){var n=Ae;try{return Ae=e,t()}finally{Ae=n}};za=function(e,t,n){switch(t){case"input":if(Ra(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Ss(r);if(!o)throw Error(Y(90));gd(r),Ra(r,o)}}}break;case"textarea":xd(e,n);break;case"select":t=n.value,t!=null&&Gr(e,!!n.multiple,t,!1)}};kd=iu;bd=yr;var Cg={usingClientEntryPoint:!1,Events:[rl,Ar,Ss,Ed,Td,iu]},wo={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sg={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Id(e),e===null?null:e.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||vg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rl.isDisabled&&Rl.supportsFiber)try{xs=Rl.inject(Sg),fn=Rl}catch{}}Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cg;Mt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hu(t))throw Error(Y(200));return xg(e,t,null,n)};Mt.createRoot=function(e,t){if(!hu(e))throw Error(Y(299));var n=!1,r="",o=ip;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=fu(e,1,!1,null,null,n,!1,r,o),e[kn]=t.current,Vo(e.nodeType===8?e.parentNode:e),new mu(t)};Mt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=Id(t),e=e===null?null:e.stateNode,e};Mt.flushSync=function(e){return yr(e)};Mt.hydrate=function(e,t,n){if(!Ds(t))throw Error(Y(200));return Rs(null,e,t,!0,n)};Mt.hydrateRoot=function(e,t,n){if(!hu(e))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=ip;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=ap(t,null,e,1,n??null,o,!1,l,a),e[kn]=t.current,Vo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new _s(t)};Mt.render=function(e,t,n){if(!Ds(t))throw Error(Y(200));return Rs(null,e,t,!1,n)};Mt.unmountComponentAtNode=function(e){if(!Ds(e))throw Error(Y(40));return e._reactRootContainer?(yr(function(){Rs(null,null,e,!1,function(){e._reactRootContainer=null,e[kn]=null})}),!0):!1};Mt.unstable_batchedUpdates=iu;Mt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ds(n))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Rs(e,t,n,!1,r)};Mt.version="18.3.1-next-f1338f8080-20240426";function up(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(up)}catch(e){console.error(e)}}up(),id.exports=Mt;var Os=id.exports,$c=Os;ka.createRoot=$c.createRoot,ka.hydrateRoot=$c.hydrateRoot;var De=(e=>(e.SynchroTech="SynchroTech",e.Hoods="Hoods",e.Optimates="Optimates",e.Fusion="Fusion",e.Command="Command",e.Tokens="Tokens",e.Custom="Custom",e))(De||{}),En=(e=>(e.FreeForAll="FFA",e.TwoVTwo="2v2",e.ThreeVOne="3v1",e))(En||{});const Eg={ipDeptAgent:{name:"IP Dept Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253319/SYN_IP_DEPT_AGENT_mhwphu.png",fallbackImage:"/images/cards/SYN_IP_DEPT_AGENT.png",power:2,ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`,types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},tacticalAgent:{name:"Tactical Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253342/SYN_TACTICAL_AGENT_xbb7i0.png",fallbackImage:"/images/cards/SYN_TACTICAL_AGENT.png",power:3,ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},patrolAgent:{name:"Patrol Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253325/SYN_PATROL_AGENT_ioetlu.png",fallbackImage:"/images/cards/SYN_PATROL_AGENT.png",power:2,ability:`Setup: Move this card to any cell in a line.
Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink.",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},riotAgent:{name:"Riot Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",fallbackImage:"/images/cards/SYN_RIOT_AGENT.png",power:3,ability:`Deploy: Push an opponent card 1 cell. ay take its place.
Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},threatAnalyst:{name:"Threat Analyst",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253338/SYN_THREAT_ANALYST_sqnpgw.png",fallbackImage:"/images/cards/SYN_THREAT_ANALYST.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:"",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},recklessProvocateur:{name:"Reckless Provocateur",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253315/HOO_RECKLESS_PROVOCATEUR_hi7a9z.png",fallbackImage:"/images/cards/HOO_RECKLESS_PROVOCATEUR.png",power:3,ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},dataLiberator:{name:"Data Liberator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253317/HOO_DATA_LIBERATOR_lbtqa2.png",fallbackImage:"/images/cards/HOO_DATA_LIBERATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`,types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},cautiousAvenger:{name:"Cautious Avenger",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253309/HOO_CAUTIOUS_AVENGER_x4g4g3.png",fallbackImage:"/images/cards/HOO_CAUTIOUS_AVENGER.png",power:2,ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},vigilantSpotter:{name:"Vigilant Spotter",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253311/HOO_VIGILANT_SPOTTER_eiephm.png",fallbackImage:"/images/cards/HOO_VIGILANT_SPOTTER.png",power:1,ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},inventiveMaker:{name:"Inventive Maker",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253313/HOO_INVENTIVE_MAKER_uzrbg1.png",fallbackImage:"/images/cards/HOO_INVENTIVE_MAKER.png",power:1,ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},faber:{name:"Faber",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253324/OPT_FABER_d7uxew.png",fallbackImage:"/images/cards/OPT_FABER.png",power:1,ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},censor:{name:"Censor",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253321/OPT_CENSOR_wtxtc2.png",fallbackImage:"/images/cards/OPT_CENSOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 of your exploits for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},princeps:{name:"Princeps",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",fallbackImage:"/images/cards/OPT_PRINCEPS.png",power:3,ability:`Deploy: Shield 1. Aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},immunis:{name:"Immunis",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253327/OPT_IMMUNIS_bjlncl.png",fallbackImage:"/images/cards/OPT_IMMUNIS.png",power:2,ability:"Support  Deploy: Return your Optimate from the discard pile to an adjacent cell. At the end of the phase, return the Optimate for 2 stuns.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},centurion:{name:"Centurion",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253330/OPT_CENTURION_aaushl.png",fallbackImage:"/images/cards/OPT_CENTURION.png",power:2,ability:"Support  Setup: The power of other allied cards in the line increases by 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},codeKeeper:{name:"Code Keeper",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253298/FUS_CODE_KEEPER_qotsym.png",fallbackImage:"/images/cards/FUS_CODE_KEEPER.png",power:3,ability:`Deploy: Exploit opponent cards with threat.
Support  Commit: Move opponent card with exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},devoutSynthetic:{name:"Devout Synthetic",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253305/FUS_DEVOUT_SYNTHETIC_bavg9k.png",fallbackImage:"/images/cards/FUS_DEVOUT_SYNTHETIC.png",power:4,ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},unwaveringIntegrator:{name:"Unwavering Integrator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253303/FUS_UNWAVERING_INTEGRATOR_emret1.png",fallbackImage:"/images/cards/FUS_UNWAVERING_INTEGRATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},signalProphet:{name:"Signal Prophet",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253299/FUS_SIGNAL_PROPHET_nzd7w3.png",fallbackImage:"/images/cards/FUS_SIGNAL_PROPHET.png",power:3,ability:`Deploy: Exploit each of your cards with support.
Support  Commit: Move your card with your exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},zealousMissionary:{name:"Zealous Missionary",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253301/FUS_ZEALOUS_MISSIONARY_mfv9xl.png",fallbackImage:"/images/cards/FUS_ZEALOUS_MISSIONARY.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reduce the power of any card with your exploit by 1.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},overwatch:{name:"Overwatch",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253291/CMD_OVERWATCH_hrba9x.png",fallbackImage:"/images/cards/CMD_OVERWATCH.png",power:0,ability:` Aim 1 on any card. Reveal 1 opponent hand card for each of your Aim counters on the battlefield. 
 Aim 1 on any card. Draw 1 card for each of your Aim counters on the battlefield.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},tacticalManeuver:{name:"Tactical Maneuver",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253296/CMD_REPOSITIONING_m7k4kf.png",fallbackImage:"/images/cards/CMD_REPOSITIONING.png",power:0,ability:` Move your unit to an open cell in its line. Draw cards equal to the Power of the moved unit. 
 Move your unit to an open cell in its line. Gain points equal to the Power of the moved unit.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},inspiration:{name:"Inspiration",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763260942/CMD_INSPIRATION_nxifhu.png",fallbackImage:"/images/cards/CMD_INSPIRATION.png",power:0,ability:` Remove any number of non-Support/Threat counters from your unit. Draw 1 card for each counter removed. 
 Remove any number of non-Support/Threat counters from your unit. Gain 1 point for each counter removed.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},dataInterception:{name:"Data Interception",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253290/CMD_DATA_INTERCEPTION_ks4lcv.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:` Exploit 1 on any card. Reveal 1 opponent hand card for each of your Exploit counters on the battlefield. 
 Exploit 1 on any card. Move a unit with your Exploit to an open cell in its line.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},falseOrders:{name:"False Orders",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763640484/CMD_FALSE_ORDERS_ghi01y.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:` Exploit 1 on an opponent card. Move a card with your Exploit up to 2 adjacent cells. Reveal up to 2 opponent hand cards. 
 Exploit 1 on an opponent card. Move a card with your Exploit up to 2 adjacent cells. Stun the moved card 1.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization1:{name:"Line Breach",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894862/line_ocsoyj.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen line of the battlefield.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]}},Tg={reconDrone:{name:"Recon Drone",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253333/TKN_RECON_DRONE_esfknf.png",fallbackImage:"/images/cards/TKN_RECON_DRONE.png",power:1,ability:`Setup: Move to any cell.
Commit: You may reveal a card from the hand of your opponent who owns an adjacent card.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them.",color:"bg-gray-400",types:["Unit","Device"],allowedPanels:["TOKEN_PANEL"]},walkingTurret:{name:"Walking Turret",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253307/TKN_WALKING_TURRET_uq6owm.png",fallbackImage:"/images/cards/TKN_WALKING_TURRET.png",power:2,ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets.",color:"bg-gray-400",types:["Unit","Optimates","Device"],allowedPanels:["TOKEN_PANEL"]}},kg={Aim:{name:"Aim",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Aim_dcct45.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`,sortOrder:1,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Exploit:{name:"Exploit",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Exploit_foomty.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`,sortOrder:2,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},LastPlayed:{name:"LastPlayed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/LastPlayed_bfkbwb.png",description:"This card was last played by its owner.",sortOrder:99,allowedPanels:[],allowedTargets:["board"]},Revealed:{name:"Revealed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Revealed_w1gbe7.png",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand.",sortOrder:7,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board","hand"]},Stun:{name:"Stun",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Stun_cwqroz.png",description:`A stunned card cannot activate abilities or gain points. Its owner's effects cannot move it, but opponent effects can.
Remove 1 stun counter from the card at the end of the Commit Phase.`,sortOrder:4,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Shield:{name:"Shield",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Shield_z9sjr1.png",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead.",sortOrder:3,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Support:{name:"Support",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Support_ui9qpl.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`,sortOrder:5,allowedPanels:[],allowedTargets:["board"]},Threat:{name:"Threat",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Threat_i1pbko.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`,sortOrder:6,allowedPanels:[],allowedTargets:["board"]},"Power+":{name:"Power+",imageUrl:"",description:"Increases the power of the card by 1.",sortOrder:10,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]},"Power-":{name:"Power-",imageUrl:"",description:"Decreases the power of the card by 1.",sortOrder:11,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]}},bg=[{id:"SynchroTech",name:"SynchroTech",isSelectable:!0,cards:[{cardId:"ipDeptAgent",quantity:3},{cardId:"tacticalAgent",quantity:3},{cardId:"patrolAgent",quantity:3},{cardId:"riotAgent",quantity:3},{cardId:"threatAnalyst",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Hoods",name:"Hoods",isSelectable:!0,cards:[{cardId:"recklessProvocateur",quantity:3},{cardId:"dataLiberator",quantity:3},{cardId:"cautiousAvenger",quantity:3},{cardId:"vigilantSpotter",quantity:3},{cardId:"inventiveMaker",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Optimates",name:"Optimates",isSelectable:!0,cards:[{cardId:"faber",quantity:3},{cardId:"censor",quantity:3},{cardId:"princeps",quantity:3},{cardId:"immunis",quantity:3},{cardId:"centurion",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]},{id:"Fusion",name:"Fusion",isSelectable:!0,cards:[{cardId:"codeKeeper",quantity:3},{cardId:"devoutSynthetic",quantity:3},{cardId:"unwaveringIntegrator",quantity:3},{cardId:"signalProphet",quantity:3},{cardId:"zealousMissionary",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"falseOrders",quantity:2}]}],cp={cardDatabase:Eg,tokenDatabase:Tg,countersDatabase:kg,deckFiles:bg},{cardDatabase:Ng,tokenDatabase:jg,countersDatabase:Ig,deckFiles:_g}=cp,lr=cp,Ps=new Map(Object.entries(Ng)),Dg=new Map(Object.entries(jg)),ll=Ig,dp=_g,gu=new Set(["overwatch","repositioning","tacticalManeuver","mobilization","inspiration","dataInterception","falseOrders"]);function Rg(){const e={};for(const t of dp){const n=[];for(const r of t.cards){const o=Ps.get(r.cardId);if(!o){console.warn(`Card definition not found for ID: ${r.cardId} in deck: ${t.name}`);continue}const l=gu.has(r.cardId);for(let a=0;a<r.quantity;a++){const i=r.cardId.toUpperCase().replace(/-/g,"_");l?n.push({...o,deck:De.Command,id:`CMD_${i}`,baseId:r.cardId,faction:o.faction||"Command"}):n.push({...o,deck:t.id,id:`${t.id.substring(0,3).toUpperCase()}_${i}_${a+1}`,baseId:r.cardId,faction:o.faction||t.id})}}e[t.id]=n}return e[De.Tokens]=Array.from(Dg.entries()).map(([t,n])=>{const r=n.types?[...n.types]:["Unit"];return r.includes("Device")||r.push("Device"),{id:`TKN_${n.name.toUpperCase().replace(/\s/g,"_")}`,baseId:t,deck:De.Tokens,name:n.name,imageUrl:n.imageUrl,fallbackImage:n.fallbackImage,power:n.power,ability:n.ability,color:n.color,types:r,flavorText:n.flavorText,faction:"Tokens"}}),e}const xi=Rg(),fp=()=>dp.filter(e=>e.isSelectable);function yu(e){return Ps.get(e)}function va(e){return Array.from(Ps.values()).find(t=>t.name===e)}function Og(){return Array.from(Ps.entries()).map(([e,t])=>({id:e,card:t}))}const pp={[De.SynchroTech]:{prefix:"SYN",color:"border-cyan-400"},[De.Hoods]:{prefix:"HOO",color:"border-purple-500"},[De.Optimates]:{prefix:"OPT",color:"border-red-500"},[De.Fusion]:{prefix:"FUS",color:"border-green-400"},[De.Command]:{prefix:"CMD",color:"border-yellow-500"},[De.Tokens]:{prefix:"TKN",color:"border-gray-400"},[De.Custom]:{prefix:"CUS",color:"border-purple-400"}},Pt={blue:{bg:"bg-blue-600",border:"border-blue-600",outline:"outline-blue-600",glow:"shadow-[0_0_15px_#2563eb]"},purple:{bg:"bg-purple-600",border:"border-purple-600",outline:"outline-purple-600",glow:"shadow-[0_0_15px_#9333ea]"},red:{bg:"bg-red-600",border:"border-red-600",outline:"outline-red-600",glow:"shadow-[0_0_15px_#dc2626]"},green:{bg:"bg-green-600",border:"border-green-600",outline:"outline-green-600",glow:"shadow-[0_0_15px_#16a34a]"},yellow:{bg:"bg-yellow-500",border:"border-yellow-500",outline:"outline-yellow-500",glow:"shadow-[0_0_15px_#eab308]"},orange:{bg:"bg-orange-500",border:"border-orange-500",outline:"outline-orange-500",glow:"shadow-[0_0_15px_#f97316]"},pink:{bg:"bg-pink-500",border:"border-pink-500",outline:"outline-pink-500",glow:"shadow-[0_0_15px_#ec4899]"},brown:{bg:"bg-[#8B4513]",border:"border-[#8B4513]",outline:"outline-[#8B4513]",glow:"shadow-[0_0_15px_#8B4513]"}},mp=["blue","purple","red","green","yellow","orange","pink","brown"],vi=["Setup Phase","Main Phase","Commit Phase"],no=Object.fromEntries(Object.entries(ll).map(([e,t])=>[e,t.imageUrl])),hs=Object.fromEntries(Object.entries(ll).map(([e,t])=>[e,t.description])),Pg=Object.entries(ll).filter(([,e])=>!e.allowedPanels||e.allowedPanels.includes("COUNTER_PANEL")).sort(([,e],[,t])=>e.sortOrder-t.sortOrder).map(([e,t])=>({type:e,label:t.name})),wa=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},Ag={1:"top-[59px] left-2",2:"top-[59px] right-2",3:"bottom-[3px] left-2",4:"bottom-[3px] right-2"},Lg=e=>{const t={bold:["Support","support","Threat","threat","threaten","Act","Pas","Trg","Int","ETB","Deploy","Setup","Commit","Exploit","exploits","Aim","Stun","Shield","Gain points","gain points"],italic:["This counter has no effect on its own, but it can modify the abilities of cards."]},n=t.bold.map(l=>l.toLowerCase()),r=t.italic.map(l=>l.toLowerCase());return e.split(/(\s+|[.,:()])/).map((l,a)=>{if(!l)return null;const i=l.replace(/[.,:()]/g,"").toLowerCase();return i&&n.includes(i)?Cn.createElement("strong",{key:a,className:"text-white"},l):i&&r.includes(i)?Cn.createElement("em",{key:a,className:"text-gray-300 italic font-semibold"},l):l})},hp=e=>e?e.split(`
`).map((t,n)=>{const r=[];return n>0&&r.push(Cn.createElement("br",{key:`br-${n}`})),r.push(...Lg(t)),Cn.createElement(Cn.Fragment,{key:n},...r.filter(Boolean))}):"",xu=({x:e,y:t,children:n})=>{const r=k.useRef(null),[o,l]=k.useState({top:t+20,left:e+20});return k.useLayoutEffect(()=>{if(r.current){const{innerWidth:a,innerHeight:i}=window,{offsetWidth:u,offsetHeight:c}=r.current;let w=e+20;w+u>a&&(w=e-u-20),w<5&&(w=5);let p=t+20;p+c>i&&(p=t-c-20),p<5&&(p=5),l({top:p,left:w})}},[e,t,n]),Os.createPortal(s.jsx("div",{ref:r,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[99999] p-3 text-white text-base pointer-events-none transition-opacity duration-100",style:{top:o.top,left:o.left,opacity:1},children:n}),document.body)},vu=({card:e,statusDescriptions:t,className:n,hideOwner:r=!1,powerPosition:o="default"})=>{var m;const l=(m=e.types)!=null&&m.length?e.types.join(", "):e.deck==="counter"?"":`${e.deck} Card`,a=e.powerModifier||0,i=Math.max(0,e.power+a),u=(e.statuses??[]).reduce((g,v)=>(g[v.type]=(g[v.type]||0)+1,g),{}),c=Object.keys(u).length>0,w=e.ownerName||(e.ownerId?`Player ${e.ownerId}`:null);let p="bg-gray-700 border-gray-500",d="text-white";a>0?(p="bg-green-900 border-green-500",d="text-green-400"):a<0&&(p="bg-red-900 border-red-500",d="text-red-400");const x=e.ability?e.ability.length:0,C=c?Object.keys(u).length*10:0,_=x>35||C>35,O=n||"relative flex flex-col text-left w-max max-w-[90vw]",f=o==="inner"?"top-0.5 right-0.5":"-top-1 -right-1";return s.jsxs("div",{className:O,children:[e.power>0&&s.jsx("div",{className:`absolute ${f} w-[37px] h-[37px] flex items-center justify-center rounded border-2 ${p} shadow-sm z-10`,children:s.jsx("span",{className:`font-bold text-lg ${d}`,children:i})}),s.jsxs("div",{className:"mb-1 pr-8 whitespace-nowrap",children:[s.jsx("div",{className:"font-bold text-white text-lg leading-tight mb-0.5",children:e.name}),l&&s.jsx("div",{className:"text-xs text-gray-400 font-semibold",children:l})]}),s.jsxs("div",{className:`flex flex-col ${!n&&_?"w-[16rem]":"w-full"} whitespace-normal break-words`,children:[e.ability&&s.jsx("hr",{className:"border-gray-600 mt-[0px] mb-[2px]"}),e.ability&&s.jsx("div",{className:"text-sm text-gray-200 leading-snug",children:hp(e.ability)}),e.ability&&s.jsx("hr",{className:"border-gray-600 my-[4px]"}),c&&s.jsx("div",{className:"text-xs text-gray-200 leading-snug",children:Object.entries(u).map(([g,v],j,R)=>s.jsxs("span",{children:[s.jsx("span",{className:"font-bold text-indigo-300",children:g}),v>1&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(x",v,")"]}),j<R.length-1?s.jsx("span",{className:"text-gray-400 mr-1",children:", "}):""]},g))}),c&&w&&!r&&s.jsx("hr",{className:"border-gray-600 my-[2px]"}),w&&!r&&s.jsxs("div",{className:"text-xs text-gray-500 font-semibold",children:["Owner: ",s.jsx("span",{className:"text-gray-300",children:w})]})]})]})},Mg=(e,t,n,r)=>e===n||t===r,gs=(e,t,n,r)=>Math.abs(e-n)+Math.abs(t-r)===1,lt=(e,t,n)=>e.statuses?e.statuses.some(r=>r.type===t&&(n===void 0||r.addedByPlayerId===n)):!1,ko=(e,t)=>e?e.toLowerCase().includes(t.toLowerCase()):!1,wi=(e,t,n)=>{var o;if(n!==e.ownerId||(o=e.statuses)!=null&&o.some(l=>l.type==="Stun"))return!1;const r=e.ability||"";if(!e.deployAbilityConsumed&&ko(r,"deploy:"))return ko(r,"support  deploy:")?lt(e,"Support",n):!0;if(e.abilityUsedInPhase!==t){let l="";if(t===0&&(l="setup:"),t===1&&(l="act:"),t===2&&(l="commit:"),l&&ko(r,l))return ko(r,`support  ${l}`)?lt(e,"Support",n):!0}return e.deck==="Command"&&(t===1||t===2)},Ug=(e,t,n,r)=>{if(n!==e.ownerId)return null;if(!e.deployAbilityConsumed){const o=zg(e,t,n,r);if(o){const l=e.ability||"";if(ko(l,"support  deploy:")&&lt(e,"Support",n),o)return{...o,isDeployAbility:!0}}}if(e.abilityUsedInPhase!==t.currentPhase){const o=Fg(e,t,n,r);if(o)return o}return null},zg=(e,t,n,r)=>{const o=e.name.toLowerCase(),l=lt(e,"Support",n);if(o.includes("ip dept agent"))return{type:"CREATE_STACK",tokenType:"Stun",count:2,requiredTargetStatus:"Exploit",placeAllAtOnce:!0};if(o.includes("tactical agent"))return{type:"CREATE_STACK",tokenType:"Aim",count:1,requiredTargetStatus:"Threat"};if(o.includes("riot agent"))return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("threat analyst"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("reckless provocateur"))return{type:"ENTER_MODE",mode:"SWAP_POSITIONS",sourceCard:e,sourceCoords:r,payload:{filter:(a,i,u)=>gs(i,u,r.row,r.col)}};if(o.includes("data liberator"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("cautious avenger"))return{type:"CREATE_STACK",tokenType:"Aim",count:1,sourceCoords:r,mustBeInLineWithSource:!0};if(o.includes("inventive maker"))return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,payload:{tokenName:"Recon Drone"}};if(o.includes("faber"))return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,payload:{tokenName:"Walking Turret"}};if(o.includes("censor"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("princeps"))return{type:"ENTER_MODE",mode:"PRINCEPS_SHIELD_THEN_AIM",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("immunis")&&l)return{type:"OPEN_MODAL",mode:"IMMUNIS_RETRIEVE",sourceCard:e,sourceCoords:r,payload:{filter:(a,i)=>gs(a,i,r.row,r.col)}};if(o.includes("code keeper"))return{type:"GLOBAL_AUTO_APPLY",sourceCard:e,sourceCoords:r,payload:{tokenType:"Exploit",count:1,filter:a=>a.ownerId!==n&&lt(a,"Threat",n)}};if(o.includes("devout synthetic"))return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("unwavering integrator"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("signal prophet"))return{type:"GLOBAL_AUTO_APPLY",sourceCard:e,sourceCoords:r,payload:{tokenType:"Exploit",count:1,filter:a=>a.ownerId===n&&lt(a,"Support",n)}};if(o.includes("zealous missionary"))return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(e.ability.toLowerCase().includes("deploy:")){if(e.ability.toLowerCase().includes("shield 1"))return{type:"CREATE_STACK",tokenType:"Shield",count:1};if(e.ability.toLowerCase().includes("stun 1"))return{type:"CREATE_STACK",tokenType:"Stun",count:1};if(e.ability.toLowerCase().includes("aim 1"))return{type:"CREATE_STACK",tokenType:"Aim",count:1}}return null},Fg=(e,t,n,r)=>{const o=e.name.toLowerCase(),l=t.currentPhase,a=lt(e,"Support",n);if(l===0){if(o.includes("tactical agent"))return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>lt(i,"Aim")}};if(o.includes("patrol agent"))return{type:"ENTER_MODE",mode:"PATROL_MOVE",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("cautious avenger"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>lt(i,"Aim")}}:null;if(o.includes("inventive maker"))return a?{type:"OPEN_MODAL",mode:"RETRIEVE_DEVICE",sourceCard:e,sourceCoords:r,payload:{}}:null;if(o.includes("princeps"))return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(i,u,c)=>Mg(u,c,r.row,r.col)&&lt(i,"Aim",n)}};if(o.includes("centurion"))return a?{type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:e,sourceCoords:r,payload:{actionType:"CENTURION_BUFF",firstCoords:r}}:null;if(o.includes("devout synthetic"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(i,u,c)=>gs(u,c,r.row,r.col)&&i.ownerId!==n&&(lt(i,"Threat",n)||lt(i,"Stun",n))}}:null;if(o.includes("unwavering integrator"))return a?{type:"ENTER_MODE",mode:"INTEGRATOR_LINE_SELECT",sourceCard:e,sourceCoords:r,payload:{}}:null;if(o.includes("recon drone"))return{type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:e,sourceCoords:r,payload:{allowSelf:!1,range:"global"}}}if(l===2){if(o.includes("ip dept agent"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>i.ownerId!==n&&lt(i,"Revealed",n)}}:null;if(o.includes("patrol agent")||o.includes("riot agent"))return{type:"CREATE_STACK",tokenType:"Stun",count:1,requiredTargetStatus:"Threat",onlyOpponents:!0,mustBeAdjacentToSource:!0,sourceCoords:r};if(o.includes("threat analyst")){if(!a)return null;let i=0;return t.board.forEach(u=>{u.forEach(c=>{c.card&&c.card.statuses&&(i+=c.card.statuses.filter(w=>w.type==="Exploit"&&w.addedByPlayerId===n).length)})}),i===0?null:{type:"CREATE_STACK",tokenType:"Revealed",count:i}}if(o.includes("reckless provocateur"))return{type:"ENTER_MODE",mode:"TRANSFER_ALL_STATUSES",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.id===e.id?!1:i.ownerId===n}};if(o.includes("vigilant spotter"))return{type:"CREATE_STACK",tokenType:"Revealed",count:1,onlyFaceDown:!0,excludeOwnerId:n};if(o.includes("recon drone"))return{type:"ENTER_MODE",mode:"REVEAL_ENEMY",sourceCard:e,sourceCoords:r,payload:{filter:(i,u,c)=>gs(u,c,r.row,r.col)&&i.ownerId!==n}};if(o.includes("censor"))return a?{type:"ENTER_MODE",mode:"CENSOR_SWAP",sourceCard:e,sourceCoords:r,payload:{filter:i=>lt(i,"Exploit",n)}}:null;if(o.includes("walking turret"))return!a||lt(e,"Shield")?null:{type:"ENTER_MODE",mode:"WALKING_TURRET_SHIELD",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("code keeper"))return a?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.ownerId!==n&&lt(i,"Exploit",n)}}:null;if(o.includes("signal prophet"))return a?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:i=>i.ownerId===n&&lt(i,"Exploit",n)}}:null;if(o.includes("zealous missionary"))return a?{type:"ENTER_MODE",mode:"ZEALOUS_WEAKEN",sourceCard:e,sourceCoords:r,payload:{filter:i=>lt(i,"Exploit",n)}}:null}return null},bo={ui:{startGame:"Start Game",joinGame:"Join Game",deckBuilding:"Deck Building",rules:"Rules & Tutorial",settings:"Settings",language:"Language",serverAddress:"Server Address",saveApply:"Save & Apply",cancel:"Cancel",close:"Close",tokens:"Tokens",counters:"Counters",phase:"Phase",autoAbility:"Auto-Ability",newGame:"New Game",exit:"Exit",surrender:"Surrender",mode:"Mode",size:"Size",dummies:"Dummies",spectatorMode:"Spectator Mode",spectatorMsg:"You are watching the game.",readyCheck:"Ready to Start?",imReady:"I'm Ready",waiting:"Waiting...",cancelStart:"Cancel Start",assignTeams:"Assign Teams",confirmTeams:"Confirm Teams & Start",unassigned:"Unassigned Players",team:"Team",deck:"DECK",discard:"DISCARD",showcase:"Showcase",customDeck:"Custom Deck",loadDeck:"Load",clear:"Clear",save:"Save",filter:"Filter",currentDeck:"Current Deck",emptyDeck:"Your deck is empty.",clickToAdd:"Click cards on the left to add them.",view:"View",play:"Play",playFaceDown:"Play Face Down",toHand:"To Hand",toDiscard:"To Discard",revealToAll:"Reveal to All",requestReveal:"Request Reveal",flipUp:"Flip Face Up",flipDown:"Flip Face Down"},rules:{title:"Game Rules",introTitle:"1. Introduction",introText:"**New Avalon: Skirmish** is a tactical card game where opponents control units on a grid battlefield. The goal is to outmaneuver your opponent using placement strategies and card abilities to score 30 points.",componentsTitle:"2. Components",componentsText:`- **Deck:** A collection of Unit and Command cards (standard size ~15-40).
- **Battlefield:** A square grid (typically 5x5 to 7x7).
- **Hand:** Players hold cards hidden from opponents.
- **Discard Pile:** Used cards go here.`,turnTitle:"3. Turn Structure",turnText:`A turn is divided into phases. Players act in turn order within each phase:
1. **Setup Phase:** 'Setup' abilities trigger.
2. **Main Phase:** Players deploy units and use 'Act' abilities.
3. **Commit Phase:** 'Commit' abilities trigger.
4. **Scoring Phase:** Players choose a row/column to score.
5. **Draw Phase:** Draw up to 6 cards.
6. **End Phase:** Pass priority token.`,priorityTitle:"4. Priority System",priorityText:"Whenever a player performs an action, opponents get a chance to respond (Priority). You can play Command cards or activate abilities when you have priority. If all players pass, the top action on the Stack resolves.",stackTitle:"5. The Stack",stackText:"Actions use a Last-In, First-Out (LIFO) stack. If Player A plays a card, and Player B responds with a Command, Player B's command resolves first.",supportTitle:"6. Status: Support",supportText:"A unit has **Support** if it is orthogonally adjacent (Up, Down, Left, Right) to an allied unit. Many powerful abilities require Support to activate.",threatTitle:"7. Status: Threat",threatText:`A unit is **Threatened** if:
1. It is sandwiched between two enemies.
2. It is pinned against the grid edge by an enemy.
Threatened units are vulnerable to destruction.`,deployTitle:"8. Deployment",deployText:"During the Main Phase, the active player can deploy a unit from their hand to any empty cell (unless restricted by card text).",scoringTitle:"9. Scoring",scoringText:"In the Scoring phase, you select a row or column. You gain points equal to the total Power of your un-stunned units in that line. Status effects like 'Exploit' may boost this score.",endgameTitle:"10. Winning",endgameText:"The game enters the final round when a player reaches 30 points. The player with the highest score at the end of that round wins."},counters:{Aim:{name:"Aim",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`},Exploit:{name:"Exploit",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`},LastPlayed:{name:"LastPlayed",description:"This card was last played by its owner."},Revealed:{name:"Revealed",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand."},Stun:{name:"Stun",description:`A stunned card cannot activate abilities or gain points. Its owner's effects cannot move it, but opponent effects can.
Remove 1 stun counter from the card at the end of the Commit Phase.`},Shield:{name:"Shield",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead."},Support:{name:"Support",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`},Threat:{name:"Threat",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`},"Power+":{name:"Power+",description:"Increases the power of the card by 1."},"Power-":{name:"Power-",description:"Decreases the power of the card by 1."}},cards:{ipDeptAgent:{name:"IP Dept Agent",ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`},tacticalAgent:{name:"Tactical Agent",ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"'},patrolAgent:{name:"Patrol Agent",ability:`Setup: Move this card to any cell in a line.
Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink."},riotAgent:{name:"Riot Agent",ability:`Deploy: Push an opponent card 1 cell. ay take its place.
Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."'},threatAnalyst:{name:"Threat Analyst",ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:""},recklessProvocateur:{name:"Reckless Provocateur",ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},dataLiberator:{name:"Data Liberator",ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`},cautiousAvenger:{name:"Cautious Avenger",ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},vigilantSpotter:{name:"Vigilant Spotter",ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},inventiveMaker:{name:"Inventive Maker",ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."'},faber:{name:"Faber",ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},censor:{name:"Censor",ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 of your exploits for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},princeps:{name:"Princeps",ability:`Deploy: Shield 1. Aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed."},immunis:{name:"Immunis",ability:"Support  Deploy: Return your Optimate from the discard pile to an adjacent cell. At the end of the phase, return the Optimate for 2 stuns.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},centurion:{name:"Centurion",ability:"Support  Setup: The power of other allied cards in the line increases by 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art."},codeKeeper:{name:"Code Keeper",ability:`Deploy: Exploit opponent cards with threat.
Support  Commit: Move opponent card with exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise."},devoutSynthetic:{name:"Devout Synthetic",ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch."},unwaveringIntegrator:{name:"Unwavering Integrator",ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise."},signalProphet:{name:"Signal Prophet",ability:`Deploy: Exploit each of your cards with support.
Support  Commit: Move your card with your exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise."},zealousMissionary:{name:"Zealous Missionary",ability:`Deploy: Exploit any card.
Support  Commit: Reduce the power of any card with your exploit by 1.`,flavorText:"The Signal is truth. All else is noise."},overwatch:{name:"Overwatch",ability:`Aim any card. Choose: 
 Reveal opponent cards equal to total Aim. 
 Draw cards equal to total Aim.`},tacticalManeuver:{name:"Tactical Maneuver",ability:`Move your unit to any cell in a line. Choose: 
 Draw cards equal to unit's power. 
 Gain points equal to unit's power.`},inspiration:{name:"Inspiration",ability:`Remove counters from your unit. Choose: 
 Draw 1 card for each counter removed. 
 Gain 1 point for each counter removed.`},dataInterception:{name:"Data Interception",ability:`Exploit any card. Choose: 
 Reveal opponent cards equal to total Exploit. 
 Move a unit with your Exploit to any cell in a line.`},falseOrders:{name:"False Orders",ability:`Exploit an opponent unit. Choose: 
 Move Opponent (Range 2) then Reveal 2 cards. 
 Move Opponent (Range 2) then Stun unit.`},mobilization1:{name:"Line Breach",ability:"Gain points in a chosen line of the battlefield."},mobilization2:{name:"Logistics Chain",ability:"Gain points in a chosen diagonal of the battlefield."},mobilization3:{name:"Sector Capture",ability:"Gain points from 4 adjacent allied cards."},reconDrone:{name:"Recon Drone",ability:`Setup: Move to any cell.
Commit: You may reveal a card from the hand of your opponent who owns an adjacent card.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them."},walkingTurret:{name:"Walking Turret",ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets."}}},Bg={ui:{startGame:" ",joinGame:"",deckBuilding:" ",rules:"  ",settings:"",language:"",serverAddress:" ",saveApply:"",cancel:"",close:"",tokens:"",counters:"",phase:"",autoAbility:"-",newGame:" ",exit:"",surrender:"",mode:"",size:"",dummies:"",spectatorMode:" ",spectatorMsg:"   .",readyCheck:" ?",imReady:" ",waiting:"...",cancelStart:"",assignTeams:" ",confirmTeams:"  ",unassigned:"",team:"",deck:"",discard:"",showcase:"",customDeck:" ",loadDeck:"",clear:"",save:"",filter:"",currentDeck:" ",emptyDeck:"  .",clickToAdd:"   ,   .",view:"",play:"",playFaceDown:"  ",toHand:" ",toDiscard:" ",revealToAll:" ",requestReveal:" ",flipUp:"",flipDown:"  "},rules:{title:" ",introTitle:"1. ",introText:"**New Avalon: Skirmish**     ,       -.    ,     ,   30  .",componentsTitle:"2. ",componentsText:`- **:**      ( 15-40 ).
- ** :**   ( 5x5  7x7).
- **:**  ,   .
- **:**      .`,turnTitle:"3.  ",turnText:`   .       :
1. ** :**   Setup.
2. ** :**       Act.
3. ** :**   Commit.
4. ** :**   /   .
5. ** :**   6   .
6. ** :**    .`,priorityTitle:"4.  ",priorityText:"   ,     ().        ,     .   ,     .",stackTitle:"5. ",stackText:"   LIFO (    ).     ,     ,     .",supportTitle:"6. :  (Support)",supportText:"  **Support**,      (, ,   )   .       .",threatTitle:"7. :  (Threat)",threatText:`   **Threat**, :
1.     .
2.      .
     .`,deployTitle:"8. ",deployText:"       ()        (     ).",scoringTitle:"9.  ",scoringText:"       .   ,     ( )    .   Exploit    .",endgameTitle:"10. ",endgameText:"    ,      30 .          ."},counters:{Aim:{name:"Aim",description:`       ,     .
   .`},Exploit:{name:"Exploit",description:`       ,     .
          .`},LastPlayed:{name:"LastPlayed",description:"      ."},Revealed:{name:"Revealed",description:"      revealed.      ."},Stun:{name:"Stun",description:`        .       ,    .
 1         (Commit).`},Shield:{name:"Shield",description:"     ,      1  ."},Support:{name:"Support",description:`       ,     .
     .`},Threat:{name:"Threat",description:`       ,     .
         .`},"Power+":{name:"Power+",description:"    1."},"Power-":{name:"Power-",description:"    1."}},cards:{ipDeptAgent:{name:"  IP",ability:`Deploy:  2 Stun   Exploit.
Support  Commit:    (Revealed)    .`,flavorText:'- "   .  .     ."'},tacticalAgent:{name:" ",ability:`Deploy: Aim    Threat.
Setup:    Aim.`,flavorText:'- "  !   SynchroTech!"'},patrolAgent:{name:" ",ability:`Setup:        .
Commit: Stun     Threat.`,flavorText:",    .  ,     ."},riotAgent:{name:" ",ability:`Deploy:     1 .    .
Commit: Stun     Threat.`,flavorText:'- ", !     SynchroTech."'},threatAnalyst:{name:" ",ability:`Deploy: Exploit   .
Support  Commit:  1     Exploit   .`,flavorText:""},recklessProvocateur:{name:" ",ability:`Deploy:       .
Commit:            .`,flavorText:'- "   .    ."'},dataLiberator:{name:" ",ability:`Deploy: Exploit   .
Support  Pas:     Exploit   .`,flavorText:'- "    .   ."'},cautiousAvenger:{name:" ",ability:`Deploy: Aim    .
Support  Setup:    Aim.`,flavorText:'- "   .    ."'},vigilantSpotter:{name:" ",ability:`Support  Pas:   (Revealed)     ,  2 .
Commit:     1 .`,flavorText:'- "   .    ."'},inventiveMaker:{name:" ",ability:`Deploy:       .
Support  Setup:       .`,flavorText:'- "   .    ."'},faber:{name:"",ability:"Deploy:        .",flavorText:"         ."},censor:{name:"",ability:`Deploy: Exploit   .
Support  Commit:  1  Exploit  1 Stun.`,flavorText:"         ."},princeps:{name:"",ability:`Deploy: Shield 1. Aim    Threat.
Setup:    Aim  .`,flavorText:"  .  ."},immunis:{name:"",ability:"Support  Deploy:        .       2 Stun.",flavorText:"         ."},centurion:{name:"",ability:"Support  Setup:         1.",flavorText:"         ."},codeKeeper:{name:" ",ability:`Deploy: Exploit     Threat.
Support  Commit:     Exploit  1 .`,flavorText:"   .    ."},devoutSynthetic:{name:" ",ability:`Deploy:     1 .    .
Support  Setup:     Threat  Stun.`,flavorText:"   .    ."},unwaveringIntegrator:{name:" ",ability:`Deploy: Exploit   .
Support  Setup:  1     Exploit  .`,flavorText:"   .    ."},signalProphet:{name:" ",ability:`Deploy: Exploit      Support.
Support  Commit:      Exploit  1 .`,flavorText:"   .    ."},zealousMissionary:{name:" ",ability:`Deploy: Exploit   .
Support  Commit:       Exploit  1.`,flavorText:"   .    ."},overwatch:{name:"",ability:`Aim   . :
   1      Aim.
   1     Aim.`},tacticalManeuver:{name:" ",ability:`       . :
  ,    .
  ,    .`},inspiration:{name:"",ability:`      . :
  1     .
  1     .`},dataInterception:{name:" ",ability:`Exploit   . :
   1      Exploit.
     Exploit     .`},falseOrders:{name:" ",ability:`Exploit   . :
   (. 2),   2  .
   (. 2),   Stun.`},mobilization1:{name:" ",ability:"      ."},mobilization2:{name:" ",ability:"      ."},mobilization3:{name:" ",ability:"   4   ."},reconDrone:{name:"",ability:`Setup:    .
Commit:       ,    .`,flavorText:"SynchroTech      ,   Hoods    ."},walkingTurret:{name:" ",ability:"Support  Commit:   Shield,  Shield 1.",flavorText:"        ."}}},Ft=(e,t)=>({ui:{...bo.ui,...e},rules:{...bo.rules,title:t},cards:bo.cards,counters:bo.counters}),An={en:bo,ru:Bg,de:Ft({startGame:"Spiel Starten",settings:"Einstellungen",rules:"Regeln",language:"Sprache",exit:"Verlassen",surrender:"Aufgeben"},"Spielregeln"),fr:Ft({startGame:"Dmarrer",settings:"Paramtres",rules:"Rgles",language:"Langue",exit:"Quitter",surrender:"Abandonner"},"Rgles du jeu"),it:Ft({startGame:"Inizia Gioco",settings:"Impostazioni",rules:"Regole",language:"Lingua",exit:"Esci",surrender:"Arrendersi"},"Regole del gioco"),pt:Ft({startGame:"Iniciar Jogo",settings:"Configuraes",rules:"Regras",language:"Idioma",exit:"Sair",surrender:"Desistir"},"Regras do Jogo"),es:Ft({startGame:"Iniciar Juego",settings:"Ajustes",rules:"Reglas",language:"Idioma",exit:"Salir",surrender:"Rendirse"},"Reglas del Juego"),zh:Ft({startGame:"",settings:"",rules:"",language:"",exit:"",surrender:""},""),hi:Ft({startGame:"  ",settings:"",rules:"",language:"",exit:" ",surrender:""},"  "),ar:Ft({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),uk:Ft({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),be:Ft({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),tt:Ft({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:""}," "),sr:Ft({startGame:" ",settings:"",rules:"",language:"",exit:"",surrender:" "}," ")},$g={en:"English",ru:"",de:"Deutsch",fr:"Franais",it:"Italiano",pt:"Portugus",es:"Espaol",zh:"",hi:"",ar:"",uk:"",be:"",tt:"",sr:""},gp=k.createContext(void 0),Gg=({children:e})=>{const[t,n]=k.useState("en");k.useEffect(()=>{const u=localStorage.getItem("app_language");u&&An[u]&&n(u)},[]);const r=u=>{n(u),localStorage.setItem("app_language",u)},o=u=>An[t].ui[u]||An.en.ui[u]||u,l=u=>An[t].cards[u]||An.en.cards[u],a=u=>An[t].counters[u]||An.en.counters[u],i=t==="ar";return s.jsx(gp.Provider,{value:{language:t,setLanguage:r,t:o,getCardTranslation:l,getCounterTranslation:a,resources:An[t],isRTL:i},children:s.jsx("div",{dir:i?"rtl":"ltr",children:e})})},In=()=>{const e=k.useContext(gp);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e},Rt=({card:e,isFaceUp:t,playerColorMap:n,localPlayerId:r,imageRefreshVersion:o,disableTooltip:l,smallStatusIcons:a,activePhaseIndex:i,activeTurnPlayerId:u,disableActiveHighlights:c,extraPowerSpacing:w})=>{const{getCardTranslation:p}=In(),[d,x]=k.useState(!1),[C,_]=k.useState({x:0,y:0}),O=k.useRef(null),[f,m]=k.useState(!1),g=e.baseId?p(e.baseId):void 0,v=g?{...e,...g}:e;k.useEffect(()=>{m(!1)},[i]),k.useEffect(()=>{c||m(!1)},[c]);const[j,R]=k.useState(e.imageUrl);k.useEffect(()=>{let M=e.imageUrl;if(o&&M){const ee=M.includes("?")?"&":"?";M=`${M}${ee}v=${o}`}R(M)},[e.imageUrl,o]);const I=()=>{let M=e.fallbackImage;if(o&&M){const ee=M.includes("?")?"&":"?";M=`${M}${ee}v=${o}`}j!==M&&R(M)},B=M=>{l||M.clientX===0&&M.clientY===0||(_({x:M.clientX,y:M.clientY}),!d&&!O.current&&(O.current=window.setTimeout(()=>{x(!0)},250)))},oe=M=>{l||((M.clientX!==0||M.clientY!==0)&&_({x:M.clientX,y:M.clientY}),O.current&&clearTimeout(O.current),O.current=window.setTimeout(()=>{x(!0)},250))},V=()=>{O.current&&(clearTimeout(O.current),O.current=null),x(!1)},pe=()=>{O.current&&(clearTimeout(O.current),O.current=null),x(!1)},Ee=i!==void 0&&u!==void 0?wi(e,i,u):!1,we=!c&&!f&&Ee,xe=M=>{we&&r===e.ownerId&&m(!0)},je=(e.statuses??[]).reduce((M,ee)=>{const $=`${ee.type}_${ee.addedByPlayerId}`;return M[$]||(M[$]={type:ee.type,playerId:ee.addedByPlayerId,count:0}),M[$].count++,M},{}),q=({type:M,playerId:ee,count:$})=>{const ne=n.get(ee),Ce=ne&&Pt[ne]?Pt[ne].bg:"bg-gray-500";let ge=no[M];if(ge&&o){const Le=ge.includes("?")?"&":"?";ge=`${ge}${Le}v=${o}`}const me=["Support","Threat","Revealed","LastPlayed"].includes(M),Se=!me&&$>1,re=Se?"p-1.5":"p-1",Z=a?"w-6 h-6":"w-8 h-8",ke=a?Se?"text-xs":"text-base":Se?"text-base":"text-lg",ye=a?"text-[10px]":"text-xs";return s.jsxs("div",{className:`relative ${Z} flex items-center justify-center ${Ce} bg-opacity-80 rounded-sm shadow-md flex-shrink-0`,title:`${M} (Player ${ee}) ${!me&&$>0?`x${$}`:""}`,children:[ge?s.jsx("img",{src:ge,alt:M,className:`object-contain w-full h-full transition-all duration-150 ${re}`}):s.jsx("span",{className:`text-white font-black transition-all duration-150 ${ke}`,style:{textShadow:"0 0 2px black"},children:M.charAt(0)}),Se&&s.jsx("span",{className:`absolute top-0 right-0.5 text-white font-bold ${ye} leading-none`,style:{textShadow:"1px 1px 2px black"},children:$})]})};if(e.deck==="counter")return s.jsx("div",{title:v.name,className:`w-full h-full ${e.color} shadow-md`,style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)"}});const ae=e.ownerId?n.get(e.ownerId):null,P=ae&&Pt[ae]?Pt[ae]:null,S=Object.values(je).sort((M,ee)=>M.type!==ee.type?M.type.localeCompare(ee.type):M.playerId-ee.playerId),D=e.powerModifier||0,z=Math.max(0,e.power+D);let X="text-white";D>0?X="text-green-400":D<0&&(X="text-red-500");const H=d&&t&&!l&&C.x>0&&C.y>0,Q=w?"bottom-[10px] right-[10px]":"bottom-[5px] right-[5px]";return s.jsxs(s.Fragment,{children:[t?(()=>{var ke;const M=P?P.border:((ke=pp[e.deck])==null?void 0:ke.color)||"border-gray-300",ee=e.deck===De.Tokens?e.color:"bg-card-face",$=(e.deck===De.Tokens,"text-black"),ne=["Support","Shield"],Ce=S.filter(ye=>ne.includes(ye.type)),ge=S.filter(ye=>!ne.includes(ye.type)&&ye.type!=="LastPlayed"),me=S.find(ye=>ye.type==="LastPlayed"),Se=me?[me,...Ce]:Ce,re=P?P.glow:"shadow-[0_0_15px_#ffffff]",Z=we?`border-[6px] shadow-2xl ${re}`:"border-4";return s.jsxs("div",{onMouseEnter:oe,onMouseLeave:V,onMouseMove:B,onMouseDown:pe,onClick:xe,className:`relative w-full h-full ${ee} rounded-md shadow-md ${Z} ${M} ${$} flex-shrink-0 select-none overflow-hidden transition-all duration-300 ${we?"scale-[1.15] z-10":""}`,children:[j?s.jsx("img",{src:j,onError:I,alt:v.name,className:"absolute inset-0 w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full p-1 flex items-center justify-center",children:s.jsx("span",{className:"text-center text-sm font-bold",children:v.name})}),S.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-[3px] left-[3px] right-[3px] flex flex-row-reverse flex-wrap justify-start items-start z-10 pointer-events-none",children:ge.map(ye=>s.jsx(q,{type:ye.type,playerId:ye.playerId,count:ye.count},`${ye.type}_${ye.playerId}`))}),s.jsx("div",{className:"absolute bottom-[3px] left-[3px] right-[30px] flex flex-wrap-reverse content-start items-end z-10 pointer-events-none",children:Se.map(ye=>s.jsx(q,{type:ye.type,playerId:ye.playerId,count:ye.count},`${ye.type}_${ye.playerId}`))})]}),e.power>0&&s.jsx("div",{className:`absolute ${Q} w-8 h-8 rounded-full ${P?P.bg:"bg-gray-600"} border-[3px] border-white flex items-center justify-center z-20 shadow-md`,children:s.jsx("span",{className:`${X} font-bold text-lg leading-none`,style:{textShadow:"0 0 2px black"},children:z})})]})})():(()=>{const M=P?P.bg:"bg-card-back",ee=P?P.border:"border-blue-300",$=S.find(ne=>ne.type==="LastPlayed");return s.jsx("div",{onMouseEnter:oe,onMouseLeave:V,onMouseMove:B,onMouseDown:pe,className:`relative w-full h-full ${M} rounded-md shadow-md border-2 ${ee} flex-shrink-0 transition-transform duration-300 ${we?"scale-[1.15] z-10":""}`,children:$&&s.jsx("div",{className:"absolute bottom-[3px] left-[3px] pointer-events-none",children:s.jsx(q,{type:$.type,playerId:$.playerId,count:$.count})})})})(),H&&s.jsx(xu,{x:C.x,y:C.y,children:s.jsx(vu,{card:v})})]})},Wg=({row:e,col:t,cell:n,isGameStarted:r,handleDrop:o,draggedItem:l,setDraggedItem:a,openContextMenu:i,playMode:u,setPlayMode:c,playerColorMap:w,localPlayerId:p,onCardDoubleClick:d,onEmptyCellDoubleClick:x,imageRefreshVersion:C,cursorStack:_,setCursorStack:O,currentPhase:f,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:v,isValidTarget:j,showNoTarget:R,disableActiveHighlights:I})=>{const[B,oe]=Cn.useState(!1),V=Q=>{Q.preventDefault(),l&&o(l,{target:"board",boardCoords:{row:e,col:t}}),oe(!1)},pe=()=>{if(u){const Q={...u.sourceItem,card:{...u.sourceItem.card}};Q.card.isFaceDown=!!u.faceDown,o(Q,{target:"board",boardCoords:{row:e,col:t}}),c(null)}else n.card&&g?g(n.card,{row:e,col:t}):!n.card&&v&&v({row:e,col:t})},Ee=Q=>{Q.preventDefault();const M=(l==null?void 0:l.source)==="counter_panel";(!n.card||n.card&&M)&&oe(!0)},we=()=>{oe(!1)},xe=!!u,je=!!_,q=!!n.card,ae="w-full h-full rounded-lg transition-colors duration-200 flex items-center justify-center relative",P=!!l&&(!q||q&&l.source==="counter_panel"),z=j||xe&&!q||je&&j,H=`bg-board-cell-active ${B&&P?"bg-indigo-400 opacity-80":""} ${xe&&q?"cursor-not-allowed":""} ${z?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] cursor-pointer z-10":""}`;return s.jsxs("div",{onDrop:V,onDragOver:Ee,onDragLeave:we,onClick:pe,onContextMenu:Q=>{n.card||i(Q,"emptyBoardCell",{boardCoords:{row:e,col:t}})},onDoubleClick:()=>{n.card||x({row:e,col:t})},className:`${ae} ${H}`,"data-interactive":!n.card,"data-board-coords":`${e},${t}`,children:[z&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-cyan-400 bg-opacity-30 animate-pulse pointer-events-none"}),n.card&&s.jsxs("div",{draggable:r,onDragStart:()=>a({card:n.card,source:"board",boardCoords:{row:e,col:t},isManual:!0}),onDragEnd:()=>a(null),onContextMenu:Q=>i(Q,"boardItem",{card:n.card,boardCoords:{row:e,col:t}}),onDoubleClick:Q=>{Q.stopPropagation(),_?pe():d(n.card,{row:e,col:t})},className:`w-full h-full ${r?"cursor-grab":"cursor-default"} relative`,"data-interactive":"true",children:[s.jsx(Rt,{card:n.card,isFaceUp:(()=>{var ne;const Q=n.card;if(!Q)return!1;const M=Q.revealedTo==="all",ee=p!==null&&Array.isArray(Q.revealedTo)&&Q.revealedTo.includes(p),$=p!==null&&((ne=Q.statuses)==null?void 0:ne.some(Ce=>Ce.type==="Revealed"&&Ce.addedByPlayerId===p));return!Q.isFaceDown||M||ee||$})(),playerColorMap:w,localPlayerId:p,imageRefreshVersion:C,activePhaseIndex:f,activeTurnPlayerId:m,disableActiveHighlights:I}),R&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none animate-pulse",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763978163/no_tarket_mic5sm.png",alt:"No Target",className:"w-4/5 h-4/5 object-contain drop-shadow-lg opacity-90"})})]},n.card.id)]})},Gc={4:"grid-cols-4 grid-rows-4",5:"grid-cols-5 grid-rows-5",6:"grid-cols-6 grid-rows-6",7:"grid-cols-7 grid-rows-7"},Vg=({textData:e,playerColorMap:t})=>{const n=t.get(e.playerId),r={blue:"text-blue-400 drop-shadow-[0_0_4px_rgba(59,130,246,0.8)]",purple:"text-purple-400 drop-shadow-[0_0_4px_rgba(168,85,247,0.8)]",red:"text-red-500 drop-shadow-[0_0_4px_rgba(239,68,68,0.8)]",green:"text-green-400 drop-shadow-[0_0_4px_rgba(34,197,94,0.8)]",yellow:"text-yellow-400 drop-shadow-[0_0_4px_rgba(234,179,8,0.8)]",orange:"text-orange-400 drop-shadow-[0_0_4px_rgba(249,115,22,0.8)]",pink:"text-pink-400 drop-shadow-[0_0_4px_rgba(236,72,153,0.8)]",brown:"text-[#A0522D] drop-shadow-[0_0_4px_rgba(139,69,19,0.8)]"},o=n&&r[n]?r[n]:"text-white";return s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[60] animate-float-up",children:s.jsx("span",{className:`text-4xl font-black ${o}`,style:{textShadow:"2px 2px 0 #000"},children:e.text})})},Wc=({board:e,isGameStarted:t,activeGridSize:n,handleDrop:r,draggedItem:o,setDraggedItem:l,openContextMenu:a,playMode:i,setPlayMode:u,highlight:c,playerColorMap:w,localPlayerId:p,onCardDoubleClick:d,onEmptyCellDoubleClick:x,imageRefreshVersion:C,cursorStack:_,setCursorStack:O,currentPhase:f,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:v,validTargets:j,noTargetOverlay:R,disableActiveHighlights:I,activeFloatingTexts:B})=>{const oe=e.length,V=Math.floor((oe-n)/2),pe=e.slice(V,V+n).map(we=>we.slice(V,V+n)),Ee=()=>{if(!c)return null;const{type:we,row:xe,col:je,playerId:q}=c,ae=w.get(q),S=`outline outline-[8px] ${ae&&Pt[ae]?Pt[ae].outline:"outline-yellow-400"} rounded-lg`;if(we==="row"&&xe!==void 0&&xe>=V&&xe<V+n){const D=xe-V+1;return s.jsx("div",{className:S,style:{gridArea:`${D} / 1 / ${D+1} / ${n+1}`}})}if(we==="col"&&je!==void 0&&je>=V&&je<V+n){const D=je-V+1;return s.jsx("div",{className:S,style:{gridArea:`1 / ${D} / ${n+1} / ${D+1}`}})}if(we==="cell"&&xe!==void 0&&je!==void 0&&xe>=V&&xe<V+n&&je>=V&&je<V+n){const D=xe-V+1,z=je-V+1;return s.jsx("div",{className:S,style:{gridArea:`${D} / ${z} / ${D+1} / ${z+1}`}})}return null};return s.jsxs("div",{className:"relative p-2 bg-board-bg rounded-xl shadow-2xl h-full aspect-square transition-all duration-300",children:[s.jsx("div",{className:`grid ${Gc[n]} gap-0.5 h-full w-full`,children:pe.map((we,xe)=>we.map((je,q)=>{const ae=xe+V,P=q+V,S=j==null?void 0:j.some(X=>X.row===ae&&X.col===P),D=R&&R.row===ae&&R.col===P,z=B==null?void 0:B.filter(X=>X.row===ae&&X.col===P);return s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx(Wg,{row:ae,col:P,cell:je,isGameStarted:t,handleDrop:r,draggedItem:o,setDraggedItem:l,openContextMenu:a,playMode:i,setPlayMode:u,playerColorMap:w,localPlayerId:p,onCardDoubleClick:d,onEmptyCellDoubleClick:x,imageRefreshVersion:C,cursorStack:_,setCursorStack:O,currentPhase:f,activeTurnPlayerId:m,onCardClick:g,onEmptyCellClick:v,isValidTarget:S,showNoTarget:D,disableActiveHighlights:I}),z==null?void 0:z.map(X=>s.jsx(Vg,{textData:X,playerColorMap:w},X.id||`${X.row}-${X.col}-${X.timestamp}`))]},`${ae}-${P}`)}))}),c&&s.jsx("div",{className:`absolute top-2 right-2 bottom-2 left-2 grid ${Gc[n]} gap-0.5 pointer-events-none z-20`,children:s.jsx(Ee,{})})]})},Ca="https://res.cloudinary.com/dxxh6meej/image/upload/v1764204928/medal_rgbw8d.png",Bt=({onDrop:e,children:t,className:n,isOverClassName:r="bg-indigo-500",onContextMenu:o,style:l})=>{const[a,i]=k.useState(!1),u=p=>{p.preventDefault(),i(!0)},c=p=>{i(!1)},w=p=>{p.preventDefault(),i(!1),e()};return s.jsx("div",{onDragOver:u,onDragLeave:c,onDrop:w,onContextMenu:o,className:`${n} transition-colors ${a?r:""}`,"data-interactive":o?"true":void 0,style:l,children:t})},Sa=({player:e,canEditSettings:t,selectedColors:n,onColorChange:r,compact:o=!1})=>{const[l,a]=k.useState(!1),[i,u]=k.useState({top:0,left:0}),c=k.useRef(null),w=k.useRef(null),p=Pt[e.color]?e.color:"blue",d=Pt[p];k.useEffect(()=>{const C=_=>{const O=_.target;l&&c.current&&!c.current.contains(O)&&w.current&&!w.current.contains(O)&&a(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[l]);const x=()=>{if(t)if(!l&&c.current){const C=c.current.getBoundingClientRect();u({top:C.bottom+window.scrollY+4,left:C.left+window.scrollX}),a(!0)}else a(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:c,type:"button",onClick:x,disabled:!t,className:`flex items-center gap-2 bg-gray-700 p-1.5 rounded-md border border-gray-600 justify-center disabled:opacity-100 disabled:cursor-default hover:bg-gray-600 ${o?"px-2 py-1":"w-28"} flex-shrink-0`,title:t?"Change Color":void 0,children:[s.jsx("div",{className:`rounded-full ${d.bg} border border-white/50 ${o?"w-3 h-3":"w-4 h-4"}`}),!o&&s.jsx("span",{className:"capitalize font-medium truncate select-none",children:p})]}),l&&Os.createPortal(s.jsx("div",{ref:w,className:"fixed bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 left-0 z-[9990]",style:{top:i.top,left:i.left,width:"9rem"},children:mp.map(C=>{const _=n.has(C),O=Pt[C];return s.jsxs("button",{type:"button",disabled:_,onClick:()=>{r(C),a(!1)},className:"w-full flex items-center gap-3 px-3 py-1.5 text-sm text-left hover:bg-indigo-600 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${O.bg} border border-white/50`}),s.jsx("span",{className:"capitalize font-medium text-white select-none",children:C})]},C)})}),document.body)]})},Ea=({player:e,isLocalPlayer:t,localPlayerId:n,isSpectator:r,isGameStarted:o,position:l,onNameChange:a,onColorChange:i,onScoreChange:u,onDeckChange:c,onLoadCustomDeck:w,onDrawCard:p,handleDrop:d,draggedItem:x,setDraggedItem:C,openContextMenu:_,onHandCardDoubleClick:O,playerColorMap:f,allPlayers:m,localPlayerTeamId:g,activeTurnPlayerId:v,onToggleActiveTurn:j,imageRefreshVersion:R,layoutMode:I="standard",onCardClick:B,validHandTargets:oe,onAnnouncedCardDoubleClick:V,currentPhase:pe,disableActiveHighlights:Ee,roundWinners:we,startingPlayerId:xe})=>{const je=!!e.isDisconnected,q=g!==void 0&&e.teamId===g,ae=k.useRef(null),P=!o&&!r&&(t||!!e.isDummy),S=!r&&o&&(t||je||!!e.isDummy),D=t&&!je,z=new Set(m.filter(re=>!re.isDummy&&re.id!==e.id).map(re=>re.color)),X=k.useMemo(()=>fp(),[]),H=e.id===v,Q=o&&pe===0&&H,M=k.useMemo(()=>we?Object.values(we).flat().filter(re=>re===e.id).length:0,[we,e.id]),ee=xe===e.id,$=no.LastPlayed,ne=re=>{const Z=re.target.value;c(Z)},Ce=()=>{var re;(re=ae.current)==null||re.click()},ge=re=>{var ye;const Z=(ye=re.target.files)==null?void 0:ye[0];if(!Z)return;const ke=new FileReader;ke.onload=Le=>{var Me;try{const Ue=(Me=Le.target)==null?void 0:Me.result,zt=JSON.parse(Ue);w(zt)}catch(Ue){alert(`Error loading deck: ${Ue instanceof Error?Ue.message:"Unknown error"}`)}finally{re.target&&(re.target.value="")}},ke.readAsText(Z)};if(I==="list-remote"){const re=H?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full bg-panel-bg rounded-lg shadow-lg p-3 border-2 ${re} ${je?"opacity-60":""} flex flex-col overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-grow",children:[s.jsx(Sa,{player:e,canEditSettings:P,selectedColors:z,onColorChange:i,compact:!0}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:`font-bold text-base truncate ${H?"text-yellow-400":"text-white"} select-none`,children:e.name}),ee&&s.jsx("img",{src:$,alt:"First Player",className:"w-4 h-4 drop-shadow-md ml-1",title:"First Player"}),M>0&&Array.from({length:M}).map((Z,ke)=>s.jsx("img",{src:Ca,alt:"Round Winner",className:"w-4 h-4 drop-shadow-md ml-1",title:"Round Winner"},`win-${ke}`))]}),e.isDummy&&!o&&s.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:s.jsx("select",{value:e.selectedDeck,onChange:ne,className:"bg-gray-800 border border-gray-600 text-xs rounded p-0.5 text-gray-300 max-w-[120px]",onClick:Z=>Z.stopPropagation(),children:X.map(Z=>s.jsx("option",{value:Z.id,children:Z.name},Z.id))})})]})]}),s.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:s.jsx("input",{type:"checkbox",checked:H,onChange:()=>j(e.id),disabled:!t&&!e.isDummy,className:"w-4 h-4 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Mark as Active Turn"})})]}),s.jsxs("div",{className:"grid grid-cols-6 gap-1 mb-2 flex-shrink-0",children:[s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:Z=>_(Z,"deckPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{onClick:S?p:void 0,className:`w-full h-full bg-card-back rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:ring-1 ring-white shadow-sm select-none ${Q?"animate-deck-reminder border-4":""}`,title:"Deck",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-white drop-shadow-md",children:"DECK"}),s.jsx("span",{className:"text-xl font-bold text-white drop-shadow-md",children:e.deck.length})]})}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"discard",playerId:e.id}),onContextMenu:Z=>_(Z,"discardPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-gray-700 rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 shadow-sm select-none",title:"Discard",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-xl font-bold text-white",children:e.discard.length})]})}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"announced",playerId:e.id}),className:"w-full aspect-square bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",isOverClassName:"bg-indigo-600",children:e.announcedCard?s.jsx("div",{className:"w-full h-full cursor-pointer",draggable:S,onDragStart:()=>S&&C({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:Z=>S&&_(Z,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Rt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:f,imageRefreshVersion:R,activePhaseIndex:pe,activeTurnPlayerId:v,disableActiveHighlights:Ee})}):s.jsx("span",{className:"text-xs font-bold text-gray-400 select-none",children:"Showcase"})}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{className:"flex justify-end h-full w-full",children:s.jsxs("div",{className:"flex flex-col items-center justify-between h-full w-6 select-none relative",children:[s.jsx("button",{onClick:()=>u(1),disabled:!S,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"+"}),s.jsx("span",{className:"font-bold text-lg leading-none",children:e.score}),s.jsx("button",{onClick:()=>u(-1),disabled:!S,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"-"})]})})]}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"hand",playerId:e.id}),className:"w-full bg-gray-900/50 rounded p-1 grid grid-cols-6 gap-1 flex-grow overflow-y-scroll content-start",children:e.hand.map((Z,ke)=>{const Le=(oe==null?void 0:oe.some(Me=>Me.playerId===e.id&&Me.cardIndex===ke))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-full aspect-square ${Le}`,draggable:S,onDragStart:()=>S&&C({card:Z,source:"hand",playerId:e.id,cardIndex:ke,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:Me=>o&&_(Me,"handCard",{card:Z,player:e,cardIndex:ke}),onDoubleClick:()=>O(e,Z,ke),onClick:()=>B&&B(e,Z,ke),"data-hand-card":`${e.id},${ke}`,children:s.jsx(Rt,{card:Z,isFaceUp:(()=>{var Ct;const Me=Z.revealedTo==="all",Ue=n!==null&&Array.isArray(Z.revealedTo)&&Z.revealedTo.includes(n),zt=n!==null&&((Ct=Z.statuses)==null?void 0:Ct.some(Jt=>Jt.type==="Revealed"&&Jt.addedByPlayerId===n));return t||q||!!e.isDummy||je||Me||Ue||zt})(),playerColorMap:f,localPlayerId:n,imageRefreshVersion:R,disableActiveHighlights:Ee})},`${Z.id}-${ke}`)})})]})}if(I==="list-local"){const re=H?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full flex flex-col p-4 bg-panel-bg border-2 ${re} rounded-lg shadow-2xl ${je?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-[3px] flex-shrink-0",children:[s.jsx(Sa,{player:e,canEditSettings:P,selectedColors:z,onColorChange:i}),s.jsxs("div",{className:"flex-grow relative flex items-center",children:[s.jsx("input",{type:"text",value:e.name,onChange:Z=>a(Z.target.value),readOnly:!P,className:"bg-transparent font-bold text-xl p-1 flex-grow focus:bg-gray-800 rounded focus:outline-none border-b border-gray-600 mr-3"}),ee&&s.jsx("img",{src:$,alt:"First Player",className:"w-6 h-6 drop-shadow-md mr-3",title:"First Player"}),M>0&&Array.from({length:M}).map((Z,ke)=>s.jsx("img",{src:Ca,alt:"Round Winner",className:"w-6 h-6 drop-shadow-md mr-2",title:"Round Winner"},`win-${ke}`)),s.jsx("input",{type:"checkbox",checked:H,onChange:()=>j(e.id),disabled:!t&&!e.isDummy,className:"w-6 h-6 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Active Turn"})]})]}),s.jsxs("div",{className:"flex justify-between items-start gap-4 bg-gray-800 p-[2px] rounded-lg mb-[3px] flex-shrink-0",children:[s.jsxs("div",{className:"p-0 border border-transparent flex gap-[3px]",children:[s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:Z=>_(Z,"deckPile",{player:e}),children:s.jsxs("div",{onClick:S?p:void 0,className:`w-[120px] h-[120px] bg-card-back rounded flex flex-col items-center justify-center cursor-pointer hover:ring-2 ring-indigo-400 transition-all shadow-lg select-none ${Q?"animate-deck-reminder border-4":""}`,children:[s.jsx("span",{className:"text-xs font-bold mb-1",children:"DECK"}),s.jsx("span",{className:"text-lg font-bold",children:e.deck.length})]})}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"discard",playerId:e.id}),onContextMenu:Z=>_(Z,"discardPile",{player:e}),isOverClassName:"bg-indigo-600 ring-2",children:s.jsxs("div",{className:"w-[120px] h-[120px] bg-gray-700 rounded flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 transition-all shadow-lg border border-gray-600 select-none",children:[s.jsx("span",{className:"text-xs font-bold mb-1 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-lg font-bold",children:e.discard.length})]})}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"announced",playerId:e.id}),className:"w-[120px] h-[120px] bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",children:e.announcedCard?s.jsx("div",{className:"w-full h-full p-1 cursor-pointer",draggable:S,onDragStart:()=>S&&C({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:Z=>S&&_(Z,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Rt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:f,imageRefreshVersion:R,activePhaseIndex:pe,activeTurnPlayerId:v,disableActiveHighlights:Ee})}):s.jsx("span",{className:"text-xs font-bold text-gray-500 select-none",children:"Showcase"})})]}),s.jsxs("div",{className:"flex flex-col items-center justify-between h-[120px] w-12 flex-shrink-0 py-0 select-none relative",children:[s.jsx("button",{onClick:()=>u(1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"+"}),s.jsx("span",{className:"font-bold text-3xl",children:e.score}),s.jsx("button",{onClick:()=>u(-1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"-"})]})]}),!o&&s.jsxs("div",{className:"mb-[3px] flex-shrink-0",children:[s.jsxs("select",{value:e.selectedDeck,onChange:ne,className:"w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2",children:[X.map(Z=>s.jsx("option",{value:Z.id,children:Z.name},Z.id)),s.jsx("option",{value:De.Custom,children:"Custom Deck"})]}),e.selectedDeck===De.Custom&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",ref:ae,onChange:ge,accept:".json",className:"hidden"}),s.jsx("button",{onClick:Ce,className:"w-full bg-indigo-600 hover:bg-indigo-700 py-1 rounded font-bold",children:"Load Custom Deck"})]})]}),s.jsx("div",{className:"flex-grow flex flex-col min-h-0",children:s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 overflow-y-scroll border border-gray-700",children:s.jsx("div",{className:"flex flex-col gap-[2px]",children:e.hand.map((Z,ke)=>{const Le=(oe==null?void 0:oe.some(Me=>Me.playerId===e.id&&Me.cardIndex===ke))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsxs("div",{className:`flex bg-gray-900 border border-gray-700 rounded p-2 ${Le}`,draggable:S,onDragStart:()=>S&&C({card:Z,source:"hand",playerId:e.id,cardIndex:ke,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:Me=>S&&_(Me,"handCard",{card:Z,player:e,cardIndex:ke}),onDoubleClick:()=>O(e,Z,ke),onClick:()=>B&&B(e,Z,ke),"data-hand-card":`${e.id},${ke}`,children:[s.jsx("div",{className:"w-[120px] h-[120px] flex-shrink-0 mr-3",children:s.jsx(Rt,{card:Z,isFaceUp:!0,playerColorMap:f,localPlayerId:n,imageRefreshVersion:R,disableTooltip:!0,disableActiveHighlights:Ee})}),s.jsx("div",{className:"flex-grow min-w-0",children:s.jsx(vu,{card:Z,className:"relative flex flex-col text-left w-full h-full justify-start whitespace-normal break-words",hideOwner:Z.ownerId===e.id,powerPosition:"inner"})})]},`${Z.id}-${ke}`)})})})})]})}const me=Ag[l]||"top-2 left-2",Se=H?"border-yellow-400":D?"border-indigo-500":"border-gray-700";return s.jsxs("div",{className:`fixed ${me} min-w-[30rem] bg-panel-bg rounded-lg shadow-2xl p-3 flex flex-col z-10 border-2 ${Se} ${je?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[s.jsx(Sa,{player:e,canEditSettings:P,selectedColors:z,onColorChange:i}),s.jsx("input",{type:"text",value:je?`${e.name} (Disconnected)`:e.name,onChange:re=>a(re.target.value),readOnly:!P||je,className:"bg-transparent font-bold text-xl p-1.5 flex-grow focus:bg-gray-800 rounded focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:cursor-default"}),ee&&s.jsx("img",{src:$,alt:"First Player",className:"w-6 h-6 drop-shadow-md",title:"First Player"}),M>0&&Array.from({length:M}).map((re,Z)=>s.jsx("img",{src:Ca,alt:"Round Winner",className:"w-6 h-6 drop-shadow-md ml-1",title:"Round Winner"},`win-${Z}`))]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("input",{type:"checkbox",checked:H,onChange:()=>j(e.id),disabled:!t&&!e.isDummy,className:"w-5 h-5 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Mark as active turn"}),s.jsxs("div",{className:"flex items-center space-x-1 select-none relative",children:[s.jsx("button",{onClick:()=>u(-1),disabled:!S,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),s.jsx("span",{className:"font-bold text-2xl w-10 text-center",children:e.score}),s.jsx("button",{onClick:()=>u(1),disabled:!S,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]})]})]}),s.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[s.jsxs("select",{value:e.selectedDeck,onChange:ne,disabled:!P,className:"bg-gray-700 border border-gray-600 text-white text-base rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[e.selectedDeck===De.Custom&&s.jsx("option",{value:De.Custom,children:"Custom Deck"}),X.map(re=>s.jsx("option",{value:re.id,children:re.name},re.id))]}),s.jsx("input",{type:"file",ref:ae,onChange:ge,accept:".json",style:{display:"none"}}),s.jsx("button",{onClick:Ce,disabled:!P,title:"Load Custom Deck",className:"bg-gray-600 hover:bg-gray-500 text-white font-bold p-2 rounded disabled:opacity-70 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),s.jsxs("div",{className:"flex-grow flex space-x-3",children:[s.jsxs("div",{className:"flex flex-col w-28 space-y-2",children:[s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:re=>_(re,"deckPile",{player:e}),children:s.jsxs("div",{onClick:S?p:void 0,className:`relative w-28 h-28 bg-card-back rounded-md flex items-center justify-center text-center text-sm font-bold p-1 select-none ${S?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"} ${Q?"animate-deck-reminder border-4":""}`,children:["DECK ",s.jsx("br",{})," (",e.deck.length,")"]})}),s.jsxs(Bt,{onDrop:()=>{x&&d(x,{target:"discard",playerId:e.id})},onContextMenu:re=>_(re,"discardPile",{player:e}),className:`relative w-28 h-28 bg-gray-700 rounded-md flex items-center justify-center text-center text-sm font-bold p-1 select-none ${S?"cursor-pointer":""}`,isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:["DISCARD ",s.jsx("br",{})," (",e.discard.length,")"]}),s.jsx("div",{className:"relative w-28 h-28",children:s.jsxs(Bt,{onDrop:()=>x&&d(x,{target:"announced",playerId:e.id}),className:"w-full h-full bg-gray-700 rounded-md flex items-center justify-center text-center text-sm p-1",isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:[!e.announcedCard&&s.jsx("span",{className:"text-sm font-bold text-gray-500 select-none",children:"Showcase"}),e.announcedCard&&s.jsx("div",{draggable:S,onDragStart:()=>S&&C({card:e.announcedCard,source:"announced",playerId:e.id,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:re=>S&&_(re,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),className:"w-full h-full cursor-pointer","data-interactive":"true",children:s.jsx(Rt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:f,localPlayerId:n,imageRefreshVersion:R,activePhaseIndex:pe,activeTurnPlayerId:v,disableActiveHighlights:Ee})})]})})]}),s.jsx(Bt,{onDrop:()=>x&&d(x,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 min-h-[16rem] max-h-[22.25rem] overflow-y-auto",isOverClassName:"bg-gray-900 ring-2 ring-indigo-400",children:s.jsx("div",{className:"grid grid-cols-3 gap-0.5",children:e.hand.map((re,Z)=>{const ye=(oe==null?void 0:oe.some(Le=>Le.playerId===e.id&&Le.cardIndex===Z))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-28 h-28 ${ye}`,draggable:S,onDragStart:()=>S&&C({card:re,source:"hand",playerId:e.id,cardIndex:Z,isManual:!0}),onDragEnd:()=>C(null),onContextMenu:Le=>{n!==null&&o&&_(Le,"handCard",{card:re,player:e,cardIndex:Z})},onDoubleClick:()=>O(e,re,Z),onClick:()=>B&&B(e,re,Z),"data-interactive":"true","data-hand-card":`${e.id},${Z}`,children:s.jsx(Rt,{card:re,isFaceUp:(()=>{var zt;const Le=re.revealedTo==="all",Me=n!==null&&Array.isArray(re.revealedTo)&&re.revealedTo.includes(n),Ue=n!==null&&((zt=re.statuses)==null?void 0:zt.some(Ct=>Ct.type==="Revealed"&&Ct.addedByPlayerId===n));return t||q||!!e.isDummy||je||Le||Me||Ue})(),playerColorMap:f,localPlayerId:n,imageRefreshVersion:R,disableActiveHighlights:Ee})},`${re.id}-${Z}`)})})})]})]})},Hg=4,Kg=({gameId:e,isGameStarted:t,onStartGame:n,onResetGame:r,activeGridSize:o,onGridSizeChange:l,dummyPlayerCount:a,onDummyPlayerCountChange:i,realPlayerCount:u,connectionStatus:c,onExitGame:w,onOpenTokensModal:p,onOpenCountersModal:d,gameMode:x,onGameModeChange:C,isPrivate:_,onPrivacyChange:O,isHost:f,onSyncGame:m,currentPhase:g,onNextPhase:v,onPrevPhase:j,onSetPhase:R,isAutoAbilitiesEnabled:I,onToggleAutoAbilities:B,isScoringStep:oe,currentRound:V=1,turnNumber:pe=1})=>{const{t:Ee}=In(),we=[0,1,2,3],[xe,je]=k.useState(!1),[q,ae]=k.useState({x:0,y:0}),P=()=>{let z="bg-gray-500",X="...";return c==="Connected"?(z="bg-green-500 animate-pulse",X="Connected"):c==="Disconnected"&&(z="bg-red-500",X="Disconnected"),s.jsxs("div",{className:"flex items-center space-x-2",title:X,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${z} transition-colors`}),s.jsx("span",{className:"text-sm text-gray-400 hidden sm:block",children:c})]})},S=z=>{ae({x:z.clientX,y:z.clientY+20}),je(!0)},D=V*10+10;return s.jsxs("header",{className:"fixed top-0 left-0 right-0 h-14 bg-panel-bg bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-between px-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-bold text-indigo-400 hidden lg:block",children:"New Avalon"}),s.jsx(P,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400 hidden md:inline",children:"ID:"}),s.jsx("span",{className:"font-mono bg-gray-700 px-2 py-1 rounded text-indigo-300 w-24 md:w-44 text-center truncate",children:e})]}),s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer hidden md:flex",title:"Hidden games do not appear in the 'Join Game' list.",children:[s.jsx("input",{type:"checkbox",checked:_,onChange:z=>O(z.target.checked),disabled:t||!f,className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Hidden"})]}),s.jsx("span",{className:"text-gray-600 hidden md:inline",children:"|"}),s.jsx("button",{onClick:p,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:Ee("tokens")}),s.jsx("button",{onClick:d,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:Ee("counters")})]})]}),t&&s.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg px-3 py-1.5 border border-gray-700 shadow-md cursor-help",onMouseEnter:S,onMouseLeave:()=>je(!1),children:[s.jsxs("span",{className:"text-yellow-500 font-bold text-sm tracking-wider",children:["ROUND ",V]}),s.jsx("span",{className:"text-gray-500 mx-2",children:"|"}),s.jsxs("span",{className:"text-gray-300 text-xs font-mono",children:["TURN ",pe]})]}),s.jsxs("div",{className:"flex items-center bg-gray-800 rounded-lg p-1 border border-gray-700 shadow-md",children:[s.jsx("button",{onClick:j,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M15 6 L8 12 L15 18 Z"})})}),s.jsx("div",{className:"bg-gray-800 text-white font-bold text-sm text-center px-2 min-w-[120px] uppercase",children:oe?s.jsx("span",{className:"text-yellow-400 animate-pulse",children:"SCORING..."}):vi[g]}),s.jsx("button",{onClick:v,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M9 6 L16 12 L9 18 Z"})})})]})]}),xe&&s.jsx(xu,{x:q.x,y:q.y,children:s.jsxs("div",{className:"text-sm text-center",children:[s.jsxs("p",{className:"font-bold text-yellow-400 mb-1",children:["Round ",V," Victory Condition"]}),s.jsxs("p",{children:["Reach ",s.jsxs("span",{className:"font-bold text-white",children:[D," points"]})," to win round."]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Checked at First Player's Setup Phase."})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[t&&s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer bg-gray-800 px-2 py-1 rounded border border-gray-600",children:[s.jsx("input",{type:"checkbox",checked:I,onChange:z=>B(z.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:Ee("autoAbility")})]}),t?f&&s.jsx("button",{onClick:r,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded text-sm hidden md:block",children:Ee("newGame")}):s.jsx("button",{onClick:n,disabled:!f,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm animate-pulse disabled:bg-gray-600 disabled:opacity-70 disabled:cursor-not-allowed disabled:animate-none",children:Ee("startGame")}),s.jsxs("div",{className:"flex items-center space-x-2 hidden lg:flex",children:[s.jsxs("label",{htmlFor:"game-mode",className:"text-sm font-medium text-gray-300",children:[Ee("mode"),":"]}),s.jsxs("select",{id:"game-mode",value:x,onChange:z=>C(z.target.value),disabled:t||!f,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:[s.jsx("option",{value:En.FreeForAll,children:"FFA"}),s.jsx("option",{value:En.TwoVTwo,children:"2v2"}),s.jsx("option",{value:En.ThreeVOne,children:"3v1"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsxs("label",{htmlFor:"grid-size",className:"text-sm font-medium text-gray-300",children:[Ee("size"),":"]}),s.jsxs("select",{id:"grid-size",value:o,onChange:z=>l(parseInt(z.target.value,10)),disabled:t||!f,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:[s.jsx("option",{value:"4",children:"4x4"}),s.jsx("option",{value:"5",children:"5x5"}),s.jsx("option",{value:"6",children:"6x6"}),s.jsx("option",{value:"7",children:"7x7"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsxs("label",{htmlFor:"dummy-players",className:"text-sm font-medium text-gray-300",children:[Ee("dummies"),":"]}),s.jsx("select",{id:"dummy-players",value:a,onChange:z=>i(parseInt(z.target.value,10)),disabled:t||!f,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg block w-full p-2 disabled:opacity-70",children:we.map(z=>s.jsx("option",{value:z,disabled:u+z>Hg,children:z},z))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[f&&t&&s.jsx("button",{onClick:m,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold p-2 rounded text-sm",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:w,className:`bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded text-sm ${t?"bg-red-600 hover:bg-red-700":""}`,children:Ee(t?"surrender":"exit")})]})]})]})},yp=({isOpen:e,onClose:t,onJoin:n,games:r})=>{const[o,l]=k.useState("");if(!e)return null;const a=()=>{o.trim()&&n(o.trim().toUpperCase())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Join an Existing Game"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Active Games"}),s.jsx("div",{className:"h-[40rem] overflow-y-auto pr-2 border-b border-gray-700 pb-2 mb-6",children:r.length>0?s.jsx("ul",{className:"space-y-2",children:r.map(i=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(i.gameId),className:"w-full text-left p-3 bg-gray-700 hover:bg-indigo-600 rounded-lg transition-colors flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Game ID:"}),s.jsx("span",{className:"block font-mono text-indigo-300",children:i.gameId})]}),s.jsxs("span",{className:"bg-gray-600 px-2 py-1 rounded-full text-sm font-bold",children:[i.playerCount," / 4"]})]})},i.gameId))}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("p",{className:"text-gray-400 text-center",children:["No active games found. ",s.jsx("br",{})," Why not create one?"]})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Or Join with Code"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:o,onChange:i=>l(i.target.value),placeholder:"Enter Game ID",className:"flex-grow bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:i=>i.key==="Enter"&&a()}),s.jsx("button",{onClick:a,disabled:!o.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Join"})]}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})})]})})},Vc=({isOpen:e,onClose:t,title:n,player:r,cards:o,setDraggedItem:l,onCardContextMenu:a,onCardDoubleClick:i,onCardClick:u,canInteract:c,isDeckView:w=!1,playerColorMap:p,localPlayerId:d,imageRefreshVersion:x})=>{const[C,_]=k.useState(null),O=k.useRef(null);if(!e)return null;const f=j=>{C!==null&&O.current&&!O.current.contains(j.relatedTarget)&&t()},g=Math.ceil(o.length/5)>5;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 pointer-events-auto",onClick:t,children:s.jsxs("div",{ref:O,onClick:j=>j.stopPropagation(),onDragLeave:f,className:"bg-gray-800 rounded-lg p-4 shadow-xl w-auto max-w-4xl max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold",children:n}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:`bg-gray-900 rounded p-2 ${g?"overflow-y-auto":""}`,style:g?{height:"calc(5 * 7rem + 4 * 0.5rem + 1rem)"}:{},children:s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[o.map((j,R)=>s.jsx("div",{style:{visibility:C===R?"hidden":"visible"},draggable:c,onDragStart:()=>{c&&(_(R),l({card:j,source:w?"deck":"discard",playerId:r.id,cardIndex:R}))},onDragEnd:()=>{_(null),l(null)},onContextMenu:I=>c&&(a==null?void 0:a(I,R)),onClick:()=>c&&(u==null?void 0:u(R)),onDoubleClick:()=>c&&(i==null?void 0:i(R)),"data-interactive":c,className:`w-28 h-28 ${c?"cursor-grab":"cursor-default"}`,children:s.jsx(Rt,{card:j,isFaceUp:!0,playerColorMap:p,localPlayerId:d,imageRefreshVersion:x})},`${j.id}-${R}`)),o.length===0&&s.jsx("p",{className:"col-span-5 w-full text-center text-gray-400 py-8",children:"Empty"})]})})]})})},Jg=({isOpen:e,onClose:t,setDraggedItem:n,openContextMenu:r,canInteract:o,anchorEl:l,imageRefreshVersion:a,draggedItem:i})=>{if(!e||!l)return null;const u=(xi[De.Tokens]||[]).filter(p=>!p.allowedPanels||p.allowedPanels.includes("TOKEN_PANEL")),c={position:"fixed",top:`${l.top}px`,left:`${l.left}px`,zIndex:60},w=p=>{if(i&&i.source==="token_panel"){const d=p.currentTarget.getBoundingClientRect(),x=p.clientX,C=p.clientY;(x<d.left||x>=d.right||C<d.top||C>=d.bottom)&&t()}};return s.jsx("div",{style:c,className:"pointer-events-auto",onDragLeave:w,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-96 max-w-[90vw] h-auto flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Tokens"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:"flex-grow bg-gray-900 rounded p-2 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.map(p=>s.jsx("div",{draggable:o,onDragStart:()=>o&&n({card:p,source:"token_panel"}),onDragEnd:()=>n(null),onContextMenu:d=>o&&r(d,"token_panel_item",{card:p}),"data-interactive":o,className:`w-24 h-24 ${o?"cursor-grab":"cursor-not-allowed"}`,children:s.jsx(Rt,{card:p,isFaceUp:!0,playerColorMap:new Map,imageRefreshVersion:a})},p.id))})})]})})},Yg="https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png",qg=({isOpen:e,onClose:t,setDraggedItem:n,canInteract:r,anchorEl:o,imageRefreshVersion:l,onCounterMouseDown:a,cursorStack:i})=>{const{getCounterTranslation:u}=In(),[c,w]=k.useState(null),[p,d]=k.useState({x:0,y:0});if(!e||!o)return null;const x={position:"fixed",top:`${o.top}px`,left:`${o.left}px`,zIndex:60},C=v=>{let j=no[v];if(j&&l){const R=j.includes("?")?"&":"?";j=`${j}${R}v=${l}`}return j},_=(v,j,R)=>{if(v.button===2){const I=u(j),B=I?I.name:R,oe=I?I.description:hs[j]||"",V={id:`tooltip_${j}`,deck:"counter",name:B,imageUrl:"",fallbackImage:"",power:0,ability:oe,types:[],statuses:[]};w(V),d({x:v.clientX,y:v.clientY})}else v.button===0&&r&&a(j,v)},O=()=>{w(null)},f=v=>{c&&d({x:v.clientX,y:v.clientY})},m=()=>{i&&t(),w(null)},g=v=>{const j=v.currentTarget.getBoundingClientRect(),R=v.clientX,I=v.clientY;(R<j.left||R>=j.right||I<j.top||I>=j.bottom)&&t()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:x,className:"pointer-events-auto counter-modal-content",onMouseLeave:m,onDragLeave:g,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-80 max-w-[90vw] h-auto flex flex-col",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Counters"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hold right click to view hints"})]}),s.jsx("div",{className:"bg-gray-900 rounded p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-1",children:Pg.map(v=>{const j=C(v.type),R=v.type.startsWith("Power"),I=u(v.type),B=I?I.name:v.label;return s.jsx("button",{onContextMenu:oe=>oe.preventDefault(),onMouseDown:oe=>_(oe,v.type,B),onMouseUp:O,onMouseMove:f,className:`w-12 h-12 rounded-full border-white flex items-center justify-center shadow-lg mx-auto relative select-none ${r?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,style:{backgroundImage:`url(${Yg})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:j?s.jsx("img",{src:j,alt:B,className:"w-full h-full object-contain p-1 pointer-events-none"}):s.jsx("span",{className:`font-bold text-white pointer-events-none ${R?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:R?B:v.type.charAt(0)})},v.type)})})})]})}),c&&s.jsx(xu,{x:p.x,y:p.y,children:s.jsx(vu,{card:c,statusDescriptions:hs})})]})},xp=({player:e,onDragStart:t})=>{const n=Pt[e.color]||Pt.blue;return s.jsxs("div",{draggable:!0,onDragStart:r=>t(r,e.id),className:"flex items-center gap-2 bg-gray-600 p-2 rounded-md cursor-grab active:cursor-grabbing",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.bg} border border-white/50`}),s.jsx("span",{className:"font-medium",children:e.name})]})},Hc=({teamId:e,teamName:t,players:n,capacity:r,onDrop:o,onDragOver:l,onPlayerDragStart:a,isOver:i})=>s.jsxs("div",{onDrop:u=>o(u,e),onDragOver:l,className:`bg-gray-800 p-4 rounded-lg border-2 ${i?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:[t," (",n.length,"/",r,")"]}),s.jsx("div",{className:"space-y-2 min-h-[4rem]",children:n.map(u=>s.jsx(xp,{player:u,onDragStart:a},u.id))})]}),Qg=({players:e,gameMode:t,onCancel:n,onConfirm:r})=>{const[o,l]=k.useState(e),[a,i]=k.useState([]),[u,c]=k.useState([]),[w,p]=k.useState(null),[d,x]=k.useState(null),{team1Capacity:C,team2Capacity:_}=k.useMemo(()=>t===En.TwoVTwo?{team1Capacity:2,team2Capacity:2}:t===En.ThreeVOne?{team1Capacity:3,team2Capacity:1}:{team1Capacity:0,team2Capacity:0},[t]),O=o.length===0&&a.length===C&&u.length===_,f=(j,R)=>{j.dataTransfer.effectAllowed="move",p(R)},m=j=>{j.preventDefault(),j.dataTransfer.dropEffect="move"},g=(j,R)=>{if(j.preventDefault(),w===null)return;const I=e.find(xe=>xe.id===w);if(!I)return;const B=[...o],oe=[...a],V=[...u],pe=B.findIndex(xe=>xe.id===w);pe>-1&&B.splice(pe,1);const Ee=oe.findIndex(xe=>xe.id===w);Ee>-1&&oe.splice(Ee,1);const we=V.findIndex(xe=>xe.id===w);we>-1&&V.splice(we,1),R===1&&oe.length<C?oe.push(I):R===2&&V.length<_?V.push(I):B.push(I),l(B),i(oe),c(V),p(null),x(null)},v=()=>{if(!O)return;const j={1:a.map(R=>R.id),2:u.map(R=>R.id)};r(j)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-8 shadow-xl w-full max-w-4xl",children:[s.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Assign Teams"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Drag and drop players into their teams."}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{onDrop:j=>g(j,"unassigned"),onDragOver:j=>{m(j),x("unassigned")},onDragLeave:()=>x(null),className:`bg-gray-800 p-4 rounded-lg border-2 ${d==="unassigned"?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsx("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:"Unassigned Players"}),s.jsx("div",{className:"space-y-2",children:o.map(j=>s.jsx(xp,{player:j,onDragStart:f},j.id))})]}),s.jsx(Hc,{teamId:1,teamName:"Team 1",players:a,capacity:C,onDrop:g,onDragOver:j=>{m(j),x(1)},onPlayerDragStart:f,isOver:d===1}),s.jsx(Hc,{teamId:2,teamName:"Team 2",players:u,capacity:_,onDrop:g,onDragOver:j=>{m(j),x(2)},onPlayerDragStart:f,isOver:d===2})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-4",children:[s.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{type:"button",onClick:v,disabled:!O,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Confirm Teams & Start"})]})]})})},Xg=({players:e,localPlayer:t,onReady:n,onCancel:r})=>{const o=()=>{t.isReady||n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Ready to Start?"}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The game will begin once all players are ready. You can still change your name and deck."}),s.jsx("ul",{className:"space-y-3 mb-8",children:e.map(l=>s.jsxs("li",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[s.jsxs("span",{className:"font-medium",children:[l.name," ",l.id===t.id&&"(You)"]}),l.isReady?s.jsxs("span",{className:"flex items-center text-green-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Ready"]}):s.jsxs("span",{className:"flex items-center text-yellow-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zM9 14a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"})}),"Waiting..."]})]},l.id))}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:o,disabled:t.isReady,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors text-lg",children:t.isReady?"Waiting for others...":"I'm Ready"}),s.jsx("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Cancel Start"})]})]})})},vp=({card:e,ownerPlayer:t,onClose:n,statusDescriptions:r,allPlayers:o,imageRefreshVersion:l})=>{var f,m,g;const{getCardTranslation:a,getCounterTranslation:i}=In(),[u,c]=k.useState(e.imageUrl),w=e.baseId?a(e.baseId):void 0,p=w?{...e,...w}:e;k.useEffect(()=>{let v=e.imageUrl;if(l&&v){const j=v.includes("?")?"&":"?";v=`${v}${j}v=${l}`}c(v)},[e.imageUrl,l]);const d=()=>{let v=e.fallbackImage;if(l&&v){const j=v.includes("?")?"&":"?";v=`${v}${j}v=${l}`}u!==v&&c(v)},x=t==null?void 0:t.color,C=x?Pt[x].border:((f=pp[e.deck])==null?void 0:f.color)||"border-gray-300",_=k.useMemo(()=>!t||t.teamId===void 0?null:`Team ${t.teamId}`,[t]),O=(e.statuses??[]).reduce((v,j)=>(v[j.type]||(v[j.type]=[]),v[j.type].push(j.addedByPlayerId),v),{});return s.jsx("div",{onClick:n,className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[102]",children:s.jsxs("div",{onClick:v=>v.stopPropagation(),className:`bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl h-[40rem] p-6 flex gap-6 border-4 ${C}`,children:[s.jsx("div",{className:"w-1/2 h-full flex-shrink-0",children:u?s.jsx("img",{src:u,onError:d,alt:p.name,className:"w-full h-full object-contain rounded-lg"}):s.jsx("div",{className:"w-full h-full bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-center p-4",children:p.name})}),s.jsxs("div",{className:"w-1/2 h-full flex flex-col gap-4 overflow-y-auto pr-2 text-left",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold",children:p.name}),s.jsx("p",{className:"text-lg text-gray-400 capitalize",children:((m=p.types)==null?void 0:m.join(", "))||`${p.deck} Card`})]}),s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Power:"})," ",s.jsx("span",{className:"text-xl font-bold",children:p.power})]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Ability:"})," ",s.jsx("span",{className:"text-gray-200 text-base",children:hp(p.ability)})]})]}),t&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400",children:"Owner:"})," ",t.name]}),_&&s.jsxs("p",{className:"mt-1",children:[s.jsx("strong",{className:"text-indigo-400",children:"Team:"})," ",_]})]}),e.statuses&&e.statuses.length>0&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 text-lg font-bold mb-2",children:"Statuses"}),s.jsx("ul",{className:"space-y-2 text-sm",children:Object.entries(O).map(([v,j])=>{const R=j.reduce((V,pe)=>(V[pe]=(V[pe]||0)+1,V),{}),I=Object.entries(R).map(([V,pe])=>{var we;return`${((we=o.find(xe=>xe.id===Number(V)))==null?void 0:we.name)||`Player ${V}`} (x${pe})`}).join(", "),B=i(v),oe=B?B.description:r[v]||"No description available.";return s.jsxs("li",{children:[s.jsx("strong",{className:"text-gray-200",children:v})," ",s.jsxs("span",{className:"text-gray-400 text-xs ml-1",children:["- ",I]}),s.jsx("p",{className:"text-gray-400 text-xs pl-2 mt-0.5",children:oe})]},v)})})]}),p.flavorText&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 font-bold mb-1",children:"Flavor Text"}),s.jsx("p",{className:"italic text-gray-400",children:(g=p.flavorText)==null?void 0:g.split(`
`).map((v,j)=>s.jsxs(Cn.Fragment,{children:[j>0&&s.jsx("br",{}),v]},j))})]}),s.jsx("button",{onClick:n,className:"mt-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded self-end",children:"Close"})]})]})})},Zg=({fromPlayer:e,cardCount:t,onAccept:n,onDecline:r})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[105]",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reveal Request"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:[s.jsx("span",{className:"font-bold",children:e.name})," would like to see ",t>1?`${t} of your hidden cards`:"one of your hidden cards","."]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Decline"}),s.jsx("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Accept"})]})]})}),Kc=Og().filter(({card:e})=>{var t;return(t=e.allowedPanels)==null?void 0:t.includes("DECK_BUILDER")}),ey=fp(),$r=100,ty=e=>{if(typeof e.deckName!="string"||!Array.isArray(e.cards))return{isValid:!1,error:"Invalid file structure. Must have 'deckName' (string) and 'cards' (array)."};let t=0;for(const n of e.cards){if(typeof n.cardId!="string"||typeof n.quantity!="number"||n.quantity<1||!Number.isInteger(n.quantity))return{isValid:!1,error:`Invalid card entry: ${JSON.stringify(n)}`};if(!yu(n.cardId))return{isValid:!1,error:`Card with ID '${n.cardId}' does not exist.`};t+=n.quantity}return t>$r?{isValid:!1,error:`Deck exceeds the ${$r} card limit (found ${t} cards).`}:t===0&&e.cards.length>0?{isValid:!1,error:"Deck contains cards with zero quantity."}:{isValid:!0,deckFile:e}},wp=({isOpen:e,onClose:t,setViewingCard:n})=>{const{getCardTranslation:r,t:o}=In(),[l,a]=k.useState("My Custom Deck"),[i,u]=k.useState(new Map),[c,w]=k.useState("All"),[p,d]=k.useState(""),[x,C]=k.useState(""),[_,O]=k.useState([]),[f,m]=k.useState(!1),g=k.useRef(null),v=k.useRef(null);k.useEffect(()=>{const q=ae=>{v.current&&!v.current.contains(ae.target)&&m(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const j=k.useMemo(()=>{const q=new Set;return Kc.forEach(({card:ae})=>{var P;return(P=ae.types)==null?void 0:P.forEach(S=>q.add(S))}),Array.from(q).sort()},[]),R=k.useMemo(()=>Kc.filter(({id:ae,card:P})=>{var X;const S=r(ae),D=(S==null?void 0:S.name)||P.name,z=(S==null?void 0:S.ability)||P.ability||"";if(p){const H=p.toLowerCase();if(!D.toLowerCase().includes(H)&&!z.toLowerCase().includes(H))return!1}if(x!==""&&P.power!==Number(x))return!1;if(_.length>0){const H=P.types||[];if(!_.every(M=>H.includes(M)))return!1}if(c!=="All"){if(c==="Command")return gu.has(ae)||((X=P.types)==null?void 0:X.includes("Command"));if(P.faction!==c)return!1}return!0}),[c,p,x,_,r]),I=k.useMemo(()=>{let q=0;return i.forEach(ae=>q+=ae),q},[i]),B=q=>{if(I>=$r){alert(`Deck cannot exceed ${$r} cards.`);return}u(ae=>{const P=new Map(ae),S=P.get(q)||0;return S<3&&P.set(q,S+1),P})},oe=q=>{u(ae=>{const P=new Map(ae),S=P.get(q)||0;return S>1?P.set(q,S-1):P.delete(q),P})},V=()=>{confirm("Are you sure you want to clear the current deck?")&&(u(new Map),a("My Custom Deck"))},pe=q=>{C(ae=>{const S=(ae===""?0:ae)+q;return S<0?0:S})},Ee=q=>{O(ae=>ae.includes(q)?ae.filter(P=>P!==q):ae.length>=10?ae:[...ae,q])},we=()=>{if(I===0){alert("Cannot save an empty deck.");return}const q={deckName:l.trim()||"Untitled Deck",cards:Array.from(i.entries()).map(([D,z])=>({cardId:D,quantity:z}))},ae=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),P=URL.createObjectURL(ae),S=document.createElement("a");S.href=P,S.download=`${q.deckName.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(P)},xe=()=>{var q;(q=g.current)==null||q.click()},je=q=>{var S;const ae=(S=q.target.files)==null?void 0:S[0];if(!ae)return;const P=new FileReader;P.onload=D=>{var z;try{const X=(z=D.target)==null?void 0:z.result,H=JSON.parse(X),Q=ty(H);if(!Q.isValid){alert(Q.error);return}const{deckFile:M}=Q;a(M.deckName);const ee=new Map;M.cards.forEach($=>ee.set($.cardId,$.quantity)),u(ee)}catch{alert("Failed to parse deck file.")}finally{q.target&&(q.target.value="")}},P.readAsText(ae)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 w-full h-full md:w-[95vw] md:h-[90vh] md:rounded-xl flex flex-col overflow-hidden shadow-2xl border border-gray-700",children:[s.jsxs("div",{className:"bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:o("deckBuilding")}),s.jsx("input",{type:"text",value:l,onChange:q=>a(q.target.value),className:"bg-gray-700 text-white px-3 py-1 rounded border border-gray-600 focus:outline-none focus:border-indigo-500 font-bold",placeholder:"Deck Name"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-900 hover:bg-red-800 text-white rounded text-sm font-bold transition-colors",children:o("clear")}),s.jsx("button",{onClick:xe,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm font-bold transition-colors",children:o("loadDeck")}),s.jsx("input",{type:"file",ref:g,onChange:je,accept:".json",className:"hidden"}),s.jsx("button",{onClick:we,className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white rounded text-sm font-bold transition-colors",children:o("save")}),s.jsx("div",{className:"w-px h-8 bg-gray-600 mx-2"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-sm font-bold transition-colors",children:o("close")})]})]}),s.jsxs("div",{className:"flex flex-grow overflow-hidden",children:[s.jsxs("div",{className:"flex-grow flex flex-col p-4 overflow-hidden border-r border-gray-700 bg-gray-900/50",children:[s.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-4 bg-gray-800 p-2 rounded-lg border border-gray-700 relative z-40",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:p,onChange:q=>d(q.target.value),placeholder:"Search...",className:"pl-8 pr-6 py-1 bg-gray-700 text-white border border-gray-600 rounded text-sm focus:outline-none focus:border-indigo-500 w-32 md:w-48"}),p&&s.jsx("button",{onClick:()=>d(""),className:"absolute inset-y-0 right-0 pr-2 flex items-center text-gray-400 hover:text-white",title:"Clear Search",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-400 text-sm font-bold",children:"Pow:"}),s.jsxs("div",{className:"flex items-center bg-gray-700 rounded border border-gray-600 overflow-hidden",children:[s.jsx("button",{onClick:()=>pe(-1),className:"px-2 py-1 hover:bg-gray-600 text-white font-bold border-r border-gray-600 active:bg-gray-500",children:"-"}),s.jsx("div",{className:"w-8 text-center text-sm font-bold text-white select-none",children:x===""?"-":x}),s.jsx("button",{onClick:()=>pe(1),className:"px-2 py-1 hover:bg-gray-600 text-white font-bold border-l border-gray-600 active:bg-gray-500",children:"+"})]}),x!==""&&s.jsx("button",{onClick:()=>C(""),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Reset Power Filter",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("div",{className:"relative",ref:v,children:[s.jsxs("button",{onClick:()=>m(!f),className:`px-3 py-1 bg-gray-700 text-white border border-gray-600 rounded text-sm flex items-center gap-2 focus:outline-none hover:bg-gray-600 ${_.length>0?"border-indigo-500 text-indigo-300":""}`,children:[s.jsxs("span",{children:["Types ",_.length>0?`(${_.length})`:""]}),s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),f&&s.jsxs("div",{className:"absolute top-full left-0 mt-1 w-48 bg-gray-800 border border-gray-600 rounded shadow-xl z-50 max-h-60 overflow-y-auto p-1",children:[s.jsx("div",{className:"px-2 py-1 text-xs text-gray-400 border-b border-gray-700 mb-1",children:"Match ALL selected"}),j.map(q=>s.jsxs("label",{className:"flex items-center px-2 py-1.5 hover:bg-gray-700 rounded cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:_.includes(q),onChange:()=>Ee(q),className:"form-checkbox h-4 w-4 text-indigo-600 rounded border-gray-500 bg-gray-700 focus:ring-indigo-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-200",children:q})]},q))]})]}),_.length>0&&s.jsx("button",{onClick:()=>O([]),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Clear Types",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("select",{value:c,onChange:q=>w(q.target.value),className:`bg-gray-700 text-white border border-gray-600 rounded px-2 py-1 text-sm focus:outline-none focus:border-indigo-500 max-w-[140px] ${c!=="All"?"border-indigo-500 text-indigo-300":""}`,children:[s.jsx("option",{value:"All",children:"All Factions"}),ey.map(q=>s.jsx("option",{value:q.id,children:q.name},q.id)),s.jsx("option",{value:"Command",children:"Command Cards"})]}),c!=="All"&&s.jsx("button",{onClick:()=>w("All"),className:"p-1 bg-gray-700 hover:bg-red-600 text-gray-400 hover:text-white rounded transition-colors",title:"Reset Faction",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("span",{className:"ml-auto text-gray-500 text-xs hidden xl:inline",children:"Right-click to view card details"})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-2",children:[R.map(({id:q,card:ae})=>{const P={...ae,id:q,baseId:q,deck:ae.faction||De.Custom,ownerId:0};return s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>B(q),onContextMenu:S=>{S.preventDefault(),n({card:P})},children:[s.jsx("div",{className:"w-full aspect-square transition-transform duration-100 hover:scale-105 hover:shadow-lg hover:z-10",children:s.jsx(Rt,{card:P,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0,extraPowerSpacing:!0})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white text-[10px] text-center py-0.5 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none truncate px-1",children:o("clickToAdd")})]},q)}),R.length===0&&s.jsx("div",{className:"col-span-full text-center text-gray-500 py-10",children:"No cards match your filters."})]})})]}),s.jsxs("div",{className:"w-80 md:w-96 bg-gray-800 flex flex-col border-l border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-600",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:o("currentDeck")}),s.jsxs("p",{className:`text-sm font-bold mt-1 ${I>$r?"text-red-500":"text-indigo-400"}`,children:[I," / ",$r," Cards"]})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-2 space-y-2",children:[i.size===0&&s.jsxs("div",{className:"text-center text-gray-500 mt-10",children:[s.jsx("p",{children:o("emptyDeck")}),s.jsx("p",{className:"text-xs mt-2",children:o("clickToAdd")})]}),Array.from(i.entries()).map(([q,ae])=>{const P=yu(q);if(!P)return null;const S={...P,id:q,baseId:q,deck:P.faction||De.Custom,ownerId:0},D=r(q),z=D?D.name:P.name;return s.jsxs("div",{className:"flex items-center bg-gray-700 rounded p-2 group hover:bg-gray-600 transition-colors select-none",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 mr-3 cursor-pointer",onContextMenu:X=>{X.preventDefault(),n({card:S})},children:s.jsx(Rt,{card:S,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white truncate",children:z}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:P.faction})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[s.jsx("button",{onClick:()=>oe(q),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-red-900 text-gray-300 rounded text-sm font-bold",title:"Remove one",children:"-"}),s.jsx("span",{className:"font-bold text-white w-4 text-center",children:ae}),s.jsx("button",{onClick:()=>B(q),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-green-900 text-gray-300 rounded text-sm font-bold",title:"Add one",disabled:ae>=3,children:"+"})]})]},q)})]})]})]})]})}):null},Cp=({isOpen:e,onClose:t,onSave:n})=>{const{language:r,setLanguage:o,t:l}=In(),[a,i]=k.useState(""),[u,c]=k.useState(!1);if(k.useEffect(()=>{if(e){const p=localStorage.getItem("custom_ws_url")||"";i(p);const d=localStorage.getItem("ui_list_mode");c(d===null?!0:d==="true")}},[e]),!e)return null;const w=()=>{localStorage.setItem("ui_list_mode",String(u)),window.dispatchEvent(new Event("storage")),n(a)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:l("settings")}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"language-select",className:"block text-sm font-medium text-gray-300 mb-1",children:l("language")}),s.jsx("select",{id:"language-select",value:"en",onChange:p=>o(p.target.value),disabled:!0,className:"w-full bg-gray-700 border border-gray-600 text-white font-sans rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500 opacity-60 cursor-not-allowed",title:"Language selection is currently disabled.",children:Object.entries($g).map(([p,d])=>s.jsx("option",{value:p,children:d},p))})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"server-url",className:"block text-sm font-medium text-gray-300 mb-1",children:l("serverAddress")}),s.jsx("input",{id:"server-url",type:"text",value:a,onChange:p=>i(p.target.value),placeholder:"e.g., ws://localhost:8080 or wss://my-server.com",className:"w-full bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:p=>p.key==="Enter"&&w()})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:"List Mode Interface"}),s.jsx("p",{className:"text-xs text-gray-400",children:"Optimized layout for desktop."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:u,onChange:p=>c(p.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:l("cancel")}),s.jsx("button",{onClick:w,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors",children:l("saveApply")})]})]})})},Sp="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",Ep="/images/cards/SYN_RIOT_AGENT.png",Tp="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",kp="/images/cards/OPT_PRINCEPS.png",ny=e=>e===1?{id:`demo-riot-${Math.random()}`,deck:De.SynchroTech,name:"Riot Agent",imageUrl:Sp,fallbackImage:Ep,power:3,ability:`Deploy: Push an adjacent card 1 cell.
Commit: Stun an adjacent opponent card with threat.`,ownerId:1,ownerName:"Player 1",statuses:[],types:["Unit","SynchroTech"]}:{id:`demo-princeps-${Math.random()}`,deck:De.Optimates,name:"Princeps",imageUrl:Tp,fallbackImage:kp,power:3,ability:"Deploy: Shield 1. Aim a card with threat.",ownerId:2,ownerName:"Player 2",statuses:[],types:["Unit","Optimates"]},ry=new Map([[1,"blue"],[2,"red"]]),oy=({config:e,cardStatuses:t})=>{const n=e||Array(9).fill(null);return s.jsx("div",{className:"bg-board-bg p-2 rounded-lg shadow-xl aspect-square w-full max-w-[400px] mx-auto grid grid-cols-3 grid-rows-3 gap-1",children:n.map((r,o)=>{const l=r?ny(r):null;return l&&t&&t[o]&&(l.statuses=t[o]),s.jsx("div",{className:"bg-board-cell rounded flex items-center justify-center relative",children:l?s.jsx("div",{className:"w-full h-full p-0.5",children:s.jsx(Rt,{card:l,isFaceUp:!0,playerColorMap:ry,localPlayerId:1})}):s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full opacity-20"})},o)})})},bp=({isOpen:e,onClose:t})=>{const{resources:n,t:r}=In(),o=n.rules,l=[{id:"intro",title:o.introTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.introText}),demoConfig:[null,1,null,null,2,null,null,null,null]},{id:"components",title:o.componentsTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.componentsText})},{id:"turn_order",title:o.turnTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.turnText})},{id:"priority",title:o.priorityTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.priorityText})},{id:"stack",title:o.stackTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.stackText})},{id:"statuses_support",title:o.supportTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.supportText}),demoConfig:[null,null,null,null,1,1,null,null,null],demoCardStatuses:{4:[{type:"Support",addedByPlayerId:1}],5:[{type:"Support",addedByPlayerId:1}]}},{id:"statuses_threat",title:o.threatTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.threatText}),demoConfig:[null,2,null,null,1,null,null,2,null],demoCardStatuses:{4:[{type:"Threat",addedByPlayerId:2}]}},{id:"deployment",title:o.deployTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.deployText}),demoConfig:[null,null,null,null,1,null,null,null,null]},{id:"scoring",title:o.scoringTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.scoringText}),demoConfig:[1,1,1,null,null,null,null,null,null]},{id:"endgame",title:o.endgameTitle,content:s.jsx("div",{className:"text-left whitespace-pre-wrap",children:o.endgameText})}],[a,i]=k.useState(l[0].id),u=k.useMemo(()=>l.find(c=>c.id===a)||l[0],[a,l]);return k.useEffect(()=>{e&&[Sp,Tp,Ep,kp].forEach(w=>{const p=new Image;p.src=w})},[e]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[100]",onClick:t,children:s.jsxs("div",{className:"bg-gray-900 w-[95vw] h-[90vh] rounded-xl shadow-2xl flex overflow-hidden border border-gray-700",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"w-1/4 min-w-[250px] bg-gray-800 border-r border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-800",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:o.title})}),s.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:l.map(c=>s.jsx("button",{onClick:()=>i(c.id),className:`w-full text-left px-4 py-3 rounded-md transition-colors text-sm font-medium ${a===c.id?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:c.title},c.id))}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 rounded transition-colors",children:r("close")})})]}),s.jsxs("div",{className:"w-2/5 p-8 overflow-y-auto border-r border-gray-700 bg-gray-900 text-left",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-6 border-b border-indigo-500 pb-2 inline-block",children:u.title}),s.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed text-left",children:u.content})]}),s.jsxs("div",{className:"w-[35%] bg-gray-800 flex flex-col items-center justify-center p-8 relative",children:[s.jsx("h3",{className:"absolute top-6 left-0 right-0 text-center text-gray-400 text-sm uppercase tracking-widest font-bold",children:"Visual Demo"}),s.jsx("div",{className:"w-full",children:s.jsx(oy,{config:u.demoConfig,cardStatuses:u.demoCardStatuses})})]})]})}):null},ly=({x:e,y:t,items:n,onClose:r})=>{const o=k.useRef(null),[l,a]=k.useState({top:t,left:e});return k.useEffect(()=>{if(o.current){const{innerWidth:i,innerHeight:u}=window,{offsetWidth:c,offsetHeight:w}=o.current,p=e+c>i?i-c-10:e,d=t+w>u?u-w-10:t;a({top:d,left:p})}},[e,t,n]),Os.createPortal(s.jsx("div",{ref:o,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[100] py-1",style:{top:l.top,left:l.left},onClick:i=>i.stopPropagation(),children:n.map((i,u)=>"isDivider"in i?s.jsx("hr",{className:"border-gray-700 my-1"},`divider-${u}`):"onClick"in i?s.jsx("button",{onClick:()=>{i.disabled||(i.onClick(),r())},disabled:i.disabled,className:"block w-full text-left px-4 py-1 text-sm text-white hover:bg-indigo-600 disabled:text-gray-500 disabled:cursor-not-allowed disabled:bg-gray-800",style:{fontWeight:i.isBold?"bold":"normal"},children:i.label},u):s.jsxs("div",{className:"flex items-center justify-between px-4 py-1 text-sm text-white w-full space-x-2",children:[s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onRemove()},disabled:i.removeDisabled,className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-red-600 rounded disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed font-mono text-lg",children:"-"}),s.jsx("span",{className:"flex-grow text-center",children:i.label}),s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onAdd()},className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-green-600 rounded font-mono text-lg",children:"+"})]},u))}),document.body)},sy=({isOpen:e,card:t,playerColorMap:n,onConfirm:r,onCancel:o})=>{const{getCardTranslation:l,t:a}=In(),i=t.baseId?l(t.baseId):void 0,u=i?{...t,...i}:t,c=u.ability||"",w=Cn.useMemo(()=>{const d=c.replace(//g,"").split("");return d.length>=3?{main:d[0].trim(),opt1:d[1].trim(),opt2:d[2].trim()}:{main:c,opt1:"Option 1",opt2:"Option 2"}},[c]);return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[200] backdrop-blur-sm",children:s.jsxs("div",{className:"bg-gray-900 rounded-xl border-2 border-yellow-500 shadow-2xl p-6 w-full max-w-4xl flex gap-6",children:[s.jsxs("div",{className:"w-1/3 flex flex-col items-center justify-center border-r border-gray-700 pr-6",children:[s.jsx("div",{className:"w-72 h-72 relative transform hover:scale-105 transition-transform duration-300",children:s.jsx(Rt,{card:u,isFaceUp:!0,playerColorMap:n,disableTooltip:!0})}),s.jsx("h2",{className:"text-2xl font-bold text-yellow-500 mt-6 text-center leading-tight",children:u.name})]}),s.jsxs("div",{className:"w-2/3 flex flex-col",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2",children:"Select an Option"}),s.jsxs("div",{className:"flex flex-col gap-3 flex-grow justify-center",children:[s.jsxs("button",{onClick:()=>r(0),className:"group relative bg-gray-800 hover:bg-indigo-900 border-2 border-gray-600 hover:border-indigo-400 rounded-lg p-4 transition-all duration-200 text-left shadow-lg hover:shadow-indigo-500/20 flex items-start gap-4",children:[s.jsx("div",{className:"bg-gray-700 text-gray-400 w-6 h-6 flex-shrink-0 flex items-center justify-center rounded-full font-bold text-xs group-hover:bg-indigo-500 group-hover:text-white transition-colors mt-1",children:"1"}),s.jsx("p",{className:"text-gray-200 group-hover:text-white text-base font-medium leading-snug",children:w.opt1})]}),s.jsxs("button",{onClick:()=>r(1),className:"group relative bg-gray-800 hover:bg-indigo-900 border-2 border-gray-600 hover:border-indigo-400 rounded-lg p-4 transition-all duration-200 text-left shadow-lg hover:shadow-indigo-500/20 flex items-start gap-4",children:[s.jsx("div",{className:"bg-gray-700 text-gray-400 w-6 h-6 flex-shrink-0 flex items-center justify-center rounded-full font-bold text-xs group-hover:bg-indigo-500 group-hover:text-white transition-colors mt-1",children:"2"}),s.jsx("p",{className:"text-gray-200 group-hover:text-white text-base font-medium leading-snug",children:w.opt2})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:o,className:"px-6 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white font-bold transition-colors text-sm",children:a("cancel")})})]})]})}):null},ay=({handleCreateGame:e,setSettingsModalOpen:t,handleOpenJoinModal:n,setDeckBuilderOpen:r,setRulesModalOpen:o,isJoinModalOpen:l,setJoinModalOpen:a,handleJoinGame:i,gamesList:u,isDeckBuilderOpen:c,setViewingCard:w,isSettingsModalOpen:p,handleSaveSettings:d,isRulesModalOpen:x,viewingCard:C,gameState:_,imageRefreshVersion:O,t:f})=>s.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 z-0 opacity-30",style:{backgroundImage:"url(https://images.unsplash.com/photo-1614728853975-69c960c725af?q=80&w=1920&auto=format&fit=crop)",backgroundSize:"cover",backgroundPosition:"center"}}),s.jsxs("div",{className:"z-10 text-center p-8 bg-black bg-opacity-60 rounded-xl shadow-2xl border border-gray-700 max-w-md w-full",children:[s.jsx("h1",{className:"text-5xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-600 drop-shadow-lg",children:"New Avalon"}),s.jsx("h2",{className:"text-2xl font-light mb-8 text-gray-300 tracking-widest",children:"SKIRMISH"}),s.jsxs("div",{className:"space-y-4 w-full",children:[s.jsxs("button",{onClick:e,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),f("startGame")]}),s.jsxs("button",{onClick:n,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),f("joinGame")]}),s.jsxs("button",{disabled:!0,className:"w-full bg-gray-800 text-gray-500 font-bold py-3 px-6 rounded-lg shadow-inner flex items-center justify-center gap-2 cursor-not-allowed border border-gray-700",title:"Coming Soon",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),"Story Mode"]}),s.jsxs("button",{disabled:!0,className:"w-full bg-gray-800 text-gray-500 font-bold py-3 px-6 rounded-lg shadow-inner flex items-center justify-center gap-2 cursor-not-allowed border border-gray-700",title:"Coming Soon",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"Puzzles"]}),s.jsxs("button",{onClick:()=>r(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),f("deckBuilding")]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105 flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),f("rules")]}),s.jsxs("button",{onClick:()=>t(!0),className:"w-full bg-gray-800 hover:bg-gray-700 text-gray-300 font-bold py-2 px-6 rounded-lg shadow transition-all flex items-center justify-center gap-2 border border-gray-600",children:[s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),f("settings")]})]}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-700 flex justify-center gap-6",children:[s.jsx("a",{href:"https://t.me/Anahoret_NewAvalon",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Telegram",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190409/Telegram_logo.svg_rnhkud.webp",alt:"Telegram",className:"w-8 h-8"})}),s.jsx("a",{href:"https://discord.gg/U5zKADsZZY",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Discord",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190408/discord-icon_nhgjyx.svg",alt:"Discord",className:"w-8 h-8"})}),s.jsx("a",{href:"https://www.donationalerts.com/r/anahoret",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"DonationAlerts",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190414/donationalerts_hpjtbe.png",alt:"DonationAlerts",className:"w-8 h-8 rounded"})}),s.jsx("a",{href:"https://www.patreon.com/c/AnchoriteComics",target:"_blank",rel:"noopener noreferrer",className:"transition-transform hover:scale-110",title:"Patreon",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1764190408/Patreon_logo.svg_ala7gn.png",alt:"Patreon",className:"w-8 h-8"})})]})]}),s.jsx("div",{className:"absolute bottom-4 text-gray-500 text-xs",children:"v0.1.3 alpha"}),s.jsx(yp,{isOpen:l,onClose:()=>a(!1),onJoin:i,games:u}),s.jsx(wp,{isOpen:c,onClose:()=>r(!1),setViewingCard:w}),s.jsx(Cp,{isOpen:p,onClose:()=>t(!1),onSave:d}),s.jsx(bp,{isOpen:x,onClose:()=>o(!1)}),C&&s.jsx(vp,{card:C.card,ownerPlayer:C.player,onClose:()=>w(null),statusDescriptions:hs,allPlayers:_.players,imageRefreshVersion:O})]}),iy=({gameState:e,onConfirm:t,localPlayerId:n,onExit:r})=>{if(!e.isRoundEndModalOpen)return null;const o=e.roundWinners[e.currentRound]||[],a=!!e.gameWinner,i=e.currentRound+1,u=i*10+10,c="https://res.cloudinary.com/dxxh6meej/image/upload/v1764204928/medal_rgbw8d.png",w=[...e.players].sort((C,_)=>C.id-_.id),p=e.startingPlayerId||1,d=w.findIndex(C=>C.id===p);let x=[];return d!==-1?x=[...w.slice(d),...w.slice(0,d)]:x=w,s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[200] backdrop-blur-sm",children:s.jsxs("div",{className:"bg-gray-900 rounded-lg border-2 border-gray-700 shadow-2xl p-6 w-full max-w-md text-left relative",children:[s.jsx("div",{className:"mb-4 text-center",children:s.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest leading-none",children:a?"Game Over":`Round ${e.currentRound} Complete`})}),s.jsx("div",{className:"space-y-2 mb-4",children:x.map(C=>{const _=o.includes(C.id),O=Object.values(e.roundWinners).flat().filter(m=>m===C.id).length,f=Pt[C.color];return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded bg-gray-800 border ${_?"border-yellow-500/50":"border-gray-700"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${(f==null?void 0:f.bg)||"bg-gray-500"}`}),s.jsx("span",{className:`font-bold text-lg ${_?"text-white":"text-gray-400"}`,children:C.name})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xl font-bold text-white font-mono mr-2",children:C.score}),O>0&&Array.from({length:O}).map((m,g)=>s.jsx("img",{src:c,alt:"Winner",className:"w-6 h-6 object-contain drop-shadow-md",title:"Round Winner"},g))]})]},C.id)})}),s.jsx("hr",{className:"border-gray-600 my-2"}),s.jsxs("div",{className:"text-xs text-gray-400 flex justify-between px-1",children:[s.jsxs("span",{children:["Ended on Turn ",e.turnNumber]}),s.jsx("span",{children:"Alpha v0.1.3"})]}),s.jsx("hr",{className:"border-gray-600 my-2"}),s.jsx("div",{className:"text-sm text-gray-300 leading-snug space-y-2 mt-3",children:a?s.jsxs("div",{className:"text-center py-2",children:[s.jsx("div",{className:"text-yellow-400 font-bold text-lg mb-1",children:"Match Complete"}),s.jsx("p",{className:"text-gray-400 text-xs",children:"Thank you for playing New Avalon: Skirmish."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Next:"}),s.jsxs("span",{className:"font-bold text-white",children:["Round ",i]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Victory Condition:"}),s.jsxs("span",{className:"font-bold text-yellow-400",children:[u," Points"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 italic mt-2 text-center",children:["* Win 2 rounds to win the match. ",s.jsx("br",{}),i===5?"Final Round! Max 10 Turns.":"Max 5 Rounds."]})]})}),s.jsx("div",{className:"mt-6 flex justify-end gap-3",children:a?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:r,className:"flex-1 bg-red-900 hover:bg-red-800 text-white font-bold py-2 px-4 rounded border border-red-700 text-sm transition-colors",children:"Return to Menu"}),s.jsx("button",{onClick:t,className:"flex-1 bg-green-800 hover:bg-green-700 text-white font-bold py-2 px-4 rounded border border-green-600 text-sm transition-colors",children:"Continue Game"})]}):s.jsxs("button",{onClick:t,className:"bg-green-800 hover:bg-green-700 text-white font-bold py-2 px-6 rounded border border-green-600 text-sm transition-colors w-full",children:["Start Round ",i]})})]})})},uy=({isOpen:e,data:t,onConfirm:n,onCancel:r})=>{const[o,l]=k.useState(()=>(t.card.statuses||[]).filter(x=>x.type!=="Support"&&x.type!=="Threat"&&x.type!=="LastPlayed").reduce((x,C)=>(x[C.type]=(x[C.type]||0)+1,x),{})),[a]=k.useState(()=>(t.card.statuses||[]).filter(x=>x.type!=="Support"&&x.type!=="Threat"&&x.type!=="LastPlayed").reduce((x,C)=>(x[C.type]=(x[C.type]||0)+1,x),{}));if(!e)return null;const i=Object.keys(a),u=d=>{const x=o[d]||0;x>0&&l({...o,[d]:x-1})},c=d=>{const x=o[d]||0,C=a[d];x<C&&l({...o,[d]:x+1})},w=i.reduce((d,x)=>d+(a[x]-o[x]),0),p=()=>{const d={};i.forEach(x=>{const C=a[x]-o[x];C>0&&(d[x]=C)}),n(d,t)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[250]",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl w-96 border border-gray-600",children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-4 text-center",children:"Remove Counters"}),s.jsxs("p",{className:"text-gray-400 text-sm mb-6 text-center",children:["Adjust counters on ",s.jsx("strong",{children:t.card.name}),".",s.jsx("br",{}),s.jsx("span",{className:"text-xs text-gray-500",children:"Press (-) to remove, (+) to keep."})]}),s.jsxs("div",{className:"space-y-3 mb-6 bg-gray-900 p-3 rounded-lg max-h-[300px] overflow-y-auto",children:[i.length===0&&s.jsx("p",{className:"text-center text-gray-500 italic py-4",children:"No removable counters found."}),i.map(d=>{const x=o[d],C=a[d],_=no[d];return s.jsxs("div",{className:"flex items-center justify-between bg-gray-800 border border-gray-700 p-3 rounded",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-gray-700 rounded-sm",children:_?s.jsx("img",{src:_,className:"w-6 h-6 object-contain"}):s.jsx("span",{className:"font-bold text-white",children:d[0]})}),s.jsx("div",{children:s.jsx("div",{className:"text-gray-200 font-medium leading-none",children:d})})]}),s.jsxs("div",{className:"flex items-center bg-gray-700 rounded border border-gray-600",children:[s.jsx("button",{onClick:()=>u(d),disabled:x===0,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-600 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:"-"}),s.jsx("div",{className:"w-8 text-center font-bold text-white select-none",children:x}),s.jsx("button",{onClick:()=>c(d),disabled:x>=C,className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-600 disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:"+"})]})]},d)})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-700",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-400 text-sm",children:"Total Removed:"}),s.jsx("span",{className:"text-indigo-400 font-bold text-xl ml-2",children:w})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-sm font-medium transition-colors",children:"Cancel"}),s.jsx("button",{onClick:p,className:"px-4 py-2 rounded bg-green-600 hover:bg-green-500 font-bold text-sm text-white shadow-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:w===0,children:"Confirm"})]})]})]})})},Jc=7,Yc=()=>Array(Jc).fill(null).map(()=>Array(Jc).fill({card:null})),Zt=e=>{const{board:t,activeGridSize:n,players:r}=e,o=JSON.parse(JSON.stringify(t)),l=o.length,a=Math.floor((l-n)/2),i=new Map;r.forEach(u=>i.set(u.id,u.teamId));for(let u=0;u<l;u++)for(let c=0;c<l;c++){const w=o[u][c].card;w&&w.statuses&&(w.statuses=w.statuses.filter(p=>p.type!=="Support"&&p.type!=="Threat"))}for(let u=0;u<l;u++)for(let c=0;c<l;c++){const w=o[u][c].card;if(!w||w.ownerId===void 0||w.isFaceDown)continue;const p=w.ownerId,d=i.get(p),x=[{r:u-1,c},{r:u+1,c},{r:u,c:c-1},{r:u,c:c+1}],C={};let _=!1;for(const f of x){const{r:m,c:g}=f;if(m>=0&&m<l&&g>=0&&g<l){const v=o[m][g].card;if(v&&v.ownerId!==void 0&&!v.isFaceDown){const j=v.ownerId,R=i.get(j);p===j||d!==void 0&&d===R?_=!0:(C[j]||(C[j]=[]),C[j].push({r:m,c:g}))}}}_&&(w.statuses||(w.statuses=[]),w.statuses.some(f=>f.type==="Support")||w.statuses.push({type:"Support",addedByPlayerId:p}));let O=null;for(const f in C)if(C[f].length>=2){O=parseInt(f,10);break}if(O===null&&u>=a&&u<a+n&&c>=a&&c<a+n){const m=u===a||u===a+n-1||c===a||c===a+n-1,g=Object.keys(C).length>0;m&&g&&(O=parseInt(Object.keys(C)[0],10))}O!==null&&(w.statuses||(w.statuses=[]),w.statuses.some(f=>f.type==="Threat")||w.statuses.push({type:"Threat",addedByPlayerId:O}))}return o},cy=4,dy=()=>{const e=localStorage.getItem("custom_ws_url");if(e&&e.trim()!=="")return console.log(`Using custom WebSocket URL: ${e}`),e.trim();const t=window.location.protocol==="https:"?"wss":"ws",n=window.location.hostname||"localhost";return window.location.port&&window.location.port!=="80"&&window.location.port!=="443"&&window.location.hostname==="localhost"?"wss://platinocyanic-unsceptically-belia.ngrok-free.dev":`${t}://${n}`},fy=()=>Math.random().toString(36).substring(2,18).toUpperCase(),py=()=>{const e=k.useCallback((h,y,E)=>{const b=xi[h];if(!b)return console.error(`Deck data for ${h} not loaded! Returning empty deck.`),[];const T=[...b].map(A=>({...A,ownerId:y,ownerName:E}));return wa(T)},[]),t=k.useCallback((h,y=!1)=>{const E=Object.keys(xi)[0],b={id:h,name:y?`Dummy ${h-1}`:`Player ${h}`,score:0,hand:[],deck:[],discard:[],announcedCard:null,selectedDeck:E,color:mp[h-1]||"blue",isDummy:y,isReady:!1};return b.deck=e(E,h,b.name),b},[e]),n=k.useCallback(()=>({players:[],board:Yc(),activeGridSize:7,gameId:null,dummyPlayerCount:0,isGameStarted:!1,gameMode:En.FreeForAll,isPrivate:!0,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,startingPlayerId:void 0,currentPhase:0,isScoringStep:!1,currentRound:1,turnNumber:1,roundEndTriggered:!1,roundWinners:{},gameWinner:null,isRoundEndModalOpen:!1}),[]),[r,o]=k.useState(n),[l,a]=k.useState(null),[i,u]=k.useState(null),[c,w]=k.useState("Connecting"),[p,d]=k.useState([]),[x,C]=k.useState(null),[_,O]=k.useState(null),f=k.useRef(null),m=k.useRef(null),g=k.useRef(null),v=k.useRef(!1),j=k.useRef(r);k.useEffect(()=>{j.current=r},[r]);const R=k.useRef(l);k.useEffect(()=>{R.current=l},[l]);const I=k.useCallback(h=>{o(y=>{const E=typeof h=="function"?h(y):h;return f.current&&f.current.readyState===WebSocket.OPEN&&f.current.send(JSON.stringify({type:"UPDATE_STATE",gameState:E})),E})},[]),B=k.useCallback(()=>{if(v.current||f.current&&(f.current.readyState===WebSocket.OPEN||f.current.readyState===WebSocket.CONNECTING))return;const h=dy();try{f.current=new WebSocket(h)}catch(y){console.error("Failed to create WebSocket:",y),w("Disconnected"),m.current&&clearTimeout(m.current),m.current=window.setTimeout(B,3e3);return}w("Connecting"),f.current.onopen=()=>{var E;console.log("WebSocket connection established"),w("Connected");const y=j.current;if(y&&y.gameId&&((E=f.current)==null?void 0:E.readyState)===WebSocket.OPEN){let b;try{const T=localStorage.getItem("reconnection_data");if(T){const A=JSON.parse(T);A.gameId===y.gameId&&(b=A.playerToken)}}catch{}f.current.send(JSON.stringify({type:"JOIN_GAME",gameId:y.gameId,playerToken:b})),R.current===1&&f.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}))}},f.current.onmessage=y=>{try{const E=JSON.parse(y.data);if(E.type==="GAMES_LIST")d(E.games);else if(E.type==="JOIN_SUCCESS"){a(E.playerId);const b=g.current||j.current.gameId;b&&E.playerId!==null&&E.playerToken?localStorage.setItem("reconnection_data",JSON.stringify({gameId:b,playerId:E.playerId,playerToken:E.playerToken,timestamp:Date.now()})):E.playerId===null&&localStorage.removeItem("reconnection_data"),g.current=null,E.playerId===1&&setTimeout(()=>{var T;((T=f.current)==null?void 0:T.readyState)===WebSocket.OPEN&&f.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}))},500)}else E.type==="ERROR"?E.message.includes("not found")||E.message.includes("Dummy")?(o(n()),a(null),localStorage.removeItem("reconnection_data")):console.warn("Server Error:",E.message):E.type==="HIGHLIGHT_TRIGGERED"?C(E.highlightData):E.type==="FLOATING_TEXT_TRIGGERED"?O([E.floatingTextData]):E.type==="FLOATING_TEXT_BATCH_TRIGGERED"?O(E.batch):o(E)}catch(E){console.error("Failed to parse message from server:",y.data,E)}},f.current.onclose=()=>{console.log("WebSocket connection closed. Attempting to reconnect in 3s..."),w("Disconnected"),v.current||(m.current&&clearTimeout(m.current),m.current=window.setTimeout(B,3e3))},f.current.onerror=y=>console.error("WebSocket error event:",y)},[o,n]),oe=k.useCallback(()=>{f.current&&f.current.close()},[]),V=k.useCallback(h=>{var y;if(v.current=!1,((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN){g.current=h;let E=null;try{const T=localStorage.getItem("reconnection_data");T&&(E=JSON.parse(T))}catch{localStorage.removeItem("reconnection_data")}const b={type:"JOIN_GAME",gameId:h};E&&E.gameId===h&&E.playerToken&&(b.playerToken=E.playerToken),f.current.send(JSON.stringify(b))}else B(),g.current=h},[B]);k.useEffect(()=>(v.current=!1,localStorage.removeItem("reconnection_data"),B(),()=>{m.current&&clearTimeout(m.current),f.current&&(f.current.onclose=null,f.current.close())}),[B]);const pe=k.useCallback(()=>{var E;v.current=!1,localStorage.removeItem("reconnection_data");const h=fy(),y={...n(),gameId:h,players:[t(1)]};I(y),((E=f.current)==null?void 0:E.readyState)===WebSocket.OPEN&&(f.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:h})),f.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr})))},[I,n,t]),Ee=k.useCallback(()=>{var h;((h=f.current)==null?void 0:h.readyState)===WebSocket.OPEN&&f.current.send(JSON.stringify({type:"GET_GAMES_LIST"}))},[]),we=k.useCallback(()=>{var E;v.current=!0;const h=j.current.gameId,y=R.current;o(n()),a(null),localStorage.removeItem("reconnection_data"),f.current&&(f.current.onclose=null),((E=f.current)==null?void 0:E.readyState)===WebSocket.OPEN&&h&&y!==null&&f.current.send(JSON.stringify({type:"LEAVE_GAME",gameId:h,playerId:y})),f.current&&f.current.close(),setTimeout(()=>{v.current=!1,B()},100)},[n,B]),xe=k.useCallback(()=>{var h;((h=f.current)==null?void 0:h.readyState)===WebSocket.OPEN&&j.current.gameId&&f.current.send(JSON.stringify({type:"START_READY_CHECK",gameId:j.current.gameId}))},[]),je=k.useCallback(()=>{var h;((h=f.current)==null?void 0:h.readyState)===WebSocket.OPEN&&j.current.gameId&&f.current.send(JSON.stringify({type:"CANCEL_READY_CHECK",gameId:j.current.gameId}))},[]),q=k.useCallback(()=>{var h;((h=f.current)==null?void 0:h.readyState)===WebSocket.OPEN&&j.current.gameId&&R.current!==null&&f.current.send(JSON.stringify({type:"PLAYER_READY",gameId:j.current.gameId,playerId:R.current}))},[]),ae=k.useCallback(h=>{var y;((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN&&j.current.gameId&&f.current.send(JSON.stringify({type:"ASSIGN_TEAMS",gameId:j.current.gameId,assignments:h}))},[]),P=k.useCallback(h=>{var y;((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN&&j.current.gameId&&f.current.send(JSON.stringify({type:"SET_GAME_MODE",gameId:j.current.gameId,mode:h}))},[]),S=k.useCallback(h=>{var y;((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN&&j.current.gameId&&f.current.send(JSON.stringify({type:"SET_GAME_PRIVACY",gameId:j.current.gameId,isPrivate:h}))},[]),D=k.useCallback(()=>{var h;if(((h=f.current)==null?void 0:h.readyState)===WebSocket.OPEN&&j.current.gameId&&R.current===1){f.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:lr}));const y=j.current,E=JSON.parse(JSON.stringify(y));E.players.forEach(b=>{if(["hand","deck","discard"].forEach(T=>{b[T]&&(b[T]=b[T].map(A=>{const L=va(A.name);return L?{...A,...L}:A}))}),b.announcedCard){const T=va(b.announcedCard.name);T&&(b.announcedCard={...b.announcedCard,...T})}}),E.board.forEach(b=>{b.forEach(T=>{if(T.card){const A=va(T.card.name);A&&(T.card={...T.card,...A})}})}),f.current.send(JSON.stringify({type:"FORCE_SYNC",gameState:E})),o(E)}},[]),z=k.useCallback(()=>{I(h=>{if(R.current!==1)return h;const y=h.players.map(E=>{const b=e(E.selectedDeck,E.id,E.name);return{...E,hand:[],deck:b,discard:[],announcedCard:null,score:0,isReady:!1}});return{...h,players:y,board:Yc(),isGameStarted:!1,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,startingPlayerId:void 0,currentPhase:0,isScoringStep:!1,currentRound:1,turnNumber:1,roundEndTriggered:!1,roundWinners:{},gameWinner:null,isRoundEndModalOpen:!1}})},[I,e]),X=k.useCallback(h=>{I(y=>{if(y.isGameStarted)return y;const E={...y,activeGridSize:h};return E.board=Zt(E),E})},[I]),H=k.useCallback(h=>{I(y=>{if(y.isGameStarted)return y;const E=y.players.filter(T=>!T.isDummy);if(E.length+h>cy)return y;const b=[...E];for(let T=0;T<h;T++){const A=b.length+1,L=t(A,!0);L.name=`Dummy ${T+1}`,b.push(L)}return{...y,players:b,dummyPlayerCount:h}})},[I,t]),Q=k.useCallback((h,y,E)=>{I(b=>{var L;if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=T.board[h.row][h.col].card;if(A){if(["Support","Threat","Revealed"].includes(y)&&((L=A.statuses)==null?void 0:L.some(te=>te.type===y&&te.addedByPlayerId===E)))return b;A.statuses||(A.statuses=[]),A.statuses.push({type:y,addedByPlayerId:E})}return T})},[I]),M=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.board[h.row][h.col].card;if(T!=null&&T.statuses){const A=T.statuses.map(L=>L.type).lastIndexOf(y);A>-1&&T.statuses.splice(A,1)}return b})},[I]),ee=k.useCallback((h,y,E)=>{I(b=>{if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=T.board[h.row][h.col].card;if(A!=null&&A.statuses){const L=A.statuses.findIndex(F=>F.type===y&&F.addedByPlayerId===E);L>-1&&A.statuses.splice(L,1)}return T})},[I]),$=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.board[h.row][h.col].card;return T&&(T.powerModifier===void 0&&(T.powerModifier=0),T.powerModifier+=y),b})},[I]),ne=k.useCallback((h,y,E)=>{I(b=>{var L;if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=T.players.find(F=>F.id===h);if(A&&A.announcedCard){if(["Support","Threat","Revealed"].includes(y)&&((L=A.announcedCard.statuses)==null?void 0:L.some(te=>te.type===y&&te.addedByPlayerId===E)))return b;A.announcedCard.statuses||(A.announcedCard.statuses=[]),A.announcedCard.statuses.push({type:y,addedByPlayerId:E})}return T})},[I]),Ce=k.useCallback((h,y)=>{I(E=>{var A;if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.players.find(L=>L.id===h);if(T&&((A=T.announcedCard)!=null&&A.statuses)){const L=T.announcedCard.statuses.map(F=>F.type).lastIndexOf(y);L>-1&&T.announcedCard.statuses.splice(L,1)}return b})},[I]),ge=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.players.find(A=>A.id===h);return T&&T.announcedCard&&(T.announcedCard.powerModifier===void 0&&(T.announcedCard.powerModifier=0),T.announcedCard.powerModifier+=y),b})},[I]),me=k.useCallback((h,y,E,b)=>{I(T=>{var F;if(!T.isGameStarted)return T;const A=JSON.parse(JSON.stringify(T)),L=A.players.find(te=>te.id===h);if(L&&L.hand[y]){const te=L.hand[y];if(["Support","Threat","Revealed"].includes(E)&&((F=te.statuses)==null?void 0:F.some(fe=>fe.type===E&&fe.addedByPlayerId===b)))return T;te.statuses||(te.statuses=[]),te.statuses.push({type:E,addedByPlayerId:b})}return A})},[I]),Se=k.useCallback((h,y,E)=>{I(b=>{if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=T.players.find(F=>F.id===h),L=A==null?void 0:A.hand[y];if(L!=null&&L.statuses){const F=L.statuses.map(te=>te.type).lastIndexOf(E);F>-1&&L.statuses.splice(F,1),E==="Revealed"&&(L.statuses.some(K=>K.type==="Revealed")||delete L.revealedTo)}return T})},[I]),re=k.useCallback(h=>{I(y=>{if(!y.isGameStarted)return y;const E=JSON.parse(JSON.stringify(y)),b=E.board[h.row][h.col].card;return b&&(b.isFaceDown=!1),E.board=Zt(E),E})},[I]),Z=k.useCallback(h=>{I(y=>{if(!y.isGameStarted)return y;const E=JSON.parse(JSON.stringify(y)),b=E.board[h.row][h.col].card;return b&&(b.isFaceDown=!0),E.board=Zt(E),E})},[I]),ke=k.useCallback((h,y,E)=>{I(b=>{const T=b.players.find(F=>F.id===h);if(!T||!T.hand[y])return b;const A=JSON.parse(JSON.stringify(b)),L=A.players.find(F=>F.id===h).hand[y];if(E==="all")L.revealedTo="all",L.statuses||(L.statuses=[]),L.statuses.some(F=>F.type==="Revealed"&&F.addedByPlayerId===h)||L.statuses.push({type:"Revealed",addedByPlayerId:h});else{(!L.revealedTo||L.revealedTo==="all"||!Array.isArray(L.revealedTo))&&(L.revealedTo=[]);const F=E.filter(te=>!L.revealedTo.includes(te));L.revealedTo.push(...F)}return A})},[I]),ye=k.useCallback((h,y)=>{I(E=>{if(!E.board[h.row][h.col].card)return E;const T=JSON.parse(JSON.stringify(E)),A=T.board[h.row][h.col].card,L=A.ownerId;if(y==="all")A.revealedTo="all",L!==void 0&&(A.statuses||(A.statuses=[]),A.statuses.some(F=>F.type==="Revealed"&&F.addedByPlayerId===L)||A.statuses.push({type:"Revealed",addedByPlayerId:L}));else{(!A.revealedTo||A.revealedTo==="all"||!Array.isArray(A.revealedTo))&&(A.revealedTo=[]);const F=y.filter(te=>!A.revealedTo.includes(te));A.revealedTo.push(...F)}return T})},[I]),Le=k.useCallback((h,y)=>{I(E=>{var L;const b=h.boardCoords?(L=E.board[h.boardCoords.row][h.boardCoords.col].card)==null?void 0:L.ownerId:h.ownerId;if(!b)return E;const T=JSON.parse(JSON.stringify(E)),A=T.revealRequests.find(F=>F.fromPlayerId===y&&F.toPlayerId===b);return A?A.cardIdentifiers.some(te=>JSON.stringify(te)===JSON.stringify(h))||A.cardIdentifiers.push(h):T.revealRequests.push({fromPlayerId:y,toPlayerId:b,cardIdentifiers:[h]}),T})},[I]),Me=k.useCallback((h,y)=>{I(E=>{const b=E.revealRequests.findIndex(L=>L.toPlayerId===R.current&&L.fromPlayerId===h);if(b===-1)return E;const T=JSON.parse(JSON.stringify(E)),A=T.revealRequests[b];if(y){const{toPlayerId:L,cardIdentifiers:F}=A;for(const te of F){let K=null;if(te.source==="board"&&te.boardCoords)K=T.board[te.boardCoords.row][te.boardCoords.col].card;else if(te.source==="hand"&&te.ownerId&&te.cardIndex!==void 0){const fe=T.players.find(ve=>ve.id===te.ownerId);fe&&(K=fe.hand[te.cardIndex])}K&&(K.statuses||(K.statuses=[]),K.statuses.some(fe=>fe.type==="Revealed"&&fe.addedByPlayerId===h)||K.statuses.push({type:"Revealed",addedByPlayerId:h}))}}return T.revealRequests.splice(b,1),T})},[I]),Ue=k.useCallback(h=>{I(y=>{const E=JSON.parse(JSON.stringify(y));let b=null;if(h.source==="board"&&h.boardCoords)b=E.board[h.boardCoords.row][h.boardCoords.col].card;else if(h.source==="hand"&&h.playerId&&h.cardIndex!==void 0){const T=E.players.find(A=>A.id===h.playerId);T&&(b=T.hand[h.cardIndex])}return b&&(b.statuses&&(b.statuses=b.statuses.filter(T=>T.type!=="Revealed")),delete b.revealedTo),E})},[I]),zt=k.useCallback((h,y)=>{I(E=>E.isGameStarted?E:{...E,players:E.players.map(b=>b.id===h?{...b,name:y}:b)})},[I]),Ct=k.useCallback((h,y)=>{I(E=>E.isGameStarted||E.players.some(T=>T.id!==h&&!T.isDummy&&T.color===y)?E:{...E,players:E.players.map(T=>T.id===h?{...T,color:y}:T)})},[I]),Jt=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.players.find(A=>A.id===h);return T&&(T.score+=y),b})},[I]),so=k.useCallback((h,y)=>{I(E=>E.isGameStarted?E:{...E,players:E.players.map(b=>b.id===h?{...b,deck:e(y,h,b.name),selectedDeck:y,hand:[],discard:[],announcedCard:null}:b)})},[I,e]),tr=k.useCallback((h,y)=>{I(E=>{if(E.isGameStarted)return E;const b=E.players.find(L=>L.id===h);if(!b)return E;const T=[];let A=new Map;for(const{cardId:L,quantity:F}of y.cards){const te=yu(L);if(!te)continue;const K=gu.has(L),fe=K?De.Command:De.Custom,ve=K?"CMD":"CUS";for(let he=0;he<F;he++){const be=(A.get(L)||0)+1;A.set(L,be),T.push({...te,id:`${ve}_${L.toUpperCase()}_${be}`,deck:fe,ownerId:h,ownerName:b.name})}}return{...E,players:E.players.map(L=>L.id===h?{...L,deck:wa(T),selectedDeck:De.Custom,hand:[],discard:[],announcedCard:null}:L)}})},[I]),As=k.useCallback(h=>{I(y=>{if(!y.isGameStarted)return y;const E=y.players.find(L=>L.id===h);if(!E||E.deck.length===0)return y;const b=JSON.parse(JSON.stringify(y)),T=b.players.find(L=>L.id===h),A=T.deck.shift();return A&&T.hand.push(A),b})},[I]),Ls=k.useCallback(h=>{I(y=>{if(!y.isGameStarted||!y.players.find(A=>A.id===h))return y;const b=JSON.parse(JSON.stringify(y)),T=b.players.find(A=>A.id===h);return T.deck=wa(T.deck),b})},[I]),Ms=k.useCallback(h=>{I(y=>{const E=y.activeTurnPlayerId===h?void 0:h;return{...y,activeTurnPlayerId:E}})},[I]),Us=k.useCallback(h=>{I(y=>y.isGameStarted?{...y,currentPhase:Math.max(0,Math.min(h,vi.length-1))}:y)},[I]),sl=k.useCallback(()=>{I(h=>{if(!h.isGameStarted)return h;const y=JSON.parse(JSON.stringify(h));if(y.isScoringStep){y.isScoringStep=!1;const b=h.activeTurnPlayerId;b!==void 0&&y.board.forEach(A=>{A.forEach(L=>{if(L.card&&L.card.ownerId===b&&L.card.statuses){const F=L.card.statuses.findIndex(te=>te.type==="Stun");F!==-1&&L.card.statuses.splice(F,1)}})});let T=b;if(T!==void 0){const A=[...y.players].sort((F,te)=>F.id-te.id),L=A.findIndex(F=>F.id===T);if(L!==-1){let F=(L+1)%A.length;T=A[F].id}}if(y.currentPhase=0,y.activeTurnPlayerId=T,y.startingPlayerId!==void 0&&T===y.startingPlayerId){const A=y.currentRound*10+10,L=y.currentRound===5&&y.turnNumber>=10;let F=-1/0;if(y.players.forEach(K=>{K.score>F&&(F=K.score)}),F>=A||L){const K=y.players.filter(be=>be.score===F).map(be=>be.id);y.roundWinners[y.currentRound]=K;const ve=Object.values(y.roundWinners).flat().reduce((be,Qe)=>(be[Qe]=(be[Qe]||0)+1,be),{}),he=Object.keys(ve).filter(be=>ve[Number(be)]>=2).map(be=>Number(be));he.length>0&&(y.gameWinner=he[0]),y.isRoundEndModalOpen=!0}else y.turnNumber+=1}return y.board.forEach(A=>{A.forEach(L=>{L.card&&(delete L.card.enteredThisTurn,delete L.card.abilityUsedInPhase)})}),y.board.forEach(A=>{A.forEach(L=>{if(L.card&&L.card.statuses){const F=L.card.statuses.findIndex(te=>te.type==="Resurrected");if(F!==-1){const te=L.card.statuses[F].addedByPlayerId;L.card.statuses.splice(F,1),L.card.statuses.push({type:"Stun",addedByPlayerId:te}),L.card.statuses.push({type:"Stun",addedByPlayerId:te})}}})}),y}const E=h.currentPhase+1;return y.board.forEach(b=>{b.forEach(T=>{T.card&&(T.card.deployAbilityConsumed=!0)})}),E>=vi.length?(y.isScoringStep=!0,y):(y.board.forEach(b=>{b.forEach(T=>{if(T.card&&T.card.statuses){const A=T.card.statuses.findIndex(L=>L.type==="Resurrected");if(A!==-1){const L=T.card.statuses[A].addedByPlayerId;T.card.statuses.splice(A,1),T.card.statuses.push({type:"Stun",addedByPlayerId:L}),T.card.statuses.push({type:"Stun",addedByPlayerId:L})}}})}),y.currentPhase=E,y)})},[I]),wr=k.useCallback(()=>{I(h=>h.isGameStarted?h.isScoringStep?{...h,isScoringStep:!1}:{...h,currentPhase:Math.max(0,h.currentPhase-1)}:h)},[I]),al=k.useCallback(()=>{I(h=>{const y=JSON.parse(JSON.stringify(h));return y.isRoundEndModalOpen=!1,y.players.forEach(E=>E.score=0),y.currentRound+=1,y.roundEndTriggered=!1,y.turnNumber=1,y.gameWinner=null,y})},[I]),ao=k.useCallback((h,y)=>{I(E=>{var L,F,te;if(!E.isGameStarted||y.target==="board"&&y.boardCoords&&E.board[y.boardCoords.row][y.boardCoords.col].card!==null&&h.source!=="counter_panel")return E;const b=JSON.parse(JSON.stringify(E));if(h.source==="board"&&["hand","deck","discard"].includes(y.target)&&!h.bypassOwnershipCheck){const K=h.card.ownerId,fe=b.players.find(be=>be.id===K),ve=K===R.current,he=!!(fe!=null&&fe.isDummy);if(!ve&&!he)return E}if(b.startingPlayerId===void 0&&y.target==="board"&&h.source!=="board"){const K=h.playerId||R.current;K!==null&&(b.startingPlayerId=K)}if(h.source==="board"&&y.target==="board"){let fe=h.card;if(h.boardCoords){const he=E.board[h.boardCoords.row][h.boardCoords.col];he.card&&(fe=he.card)}if((L=fe.statuses)==null?void 0:L.some(he=>he.type==="Stun")){const he=R.current,be=fe.ownerId,Qe=E.players.find(St=>St.id===he),Fe=E.players.find(St=>St.id===be),ot=he===be,Ke=(Qe==null?void 0:Qe.teamId)!==void 0&&(Fe==null?void 0:Fe.teamId)!==void 0&&Qe.teamId===Fe.teamId;if((ot||Ke)&&!h.isManual)return E}}if(h.source==="counter_panel"&&h.statusType){const K=ll[h.statusType];if(!((K==null?void 0:K.allowedTargets)||["board","hand"]).includes(y.target))return E;let ve=null;if(y.target==="board"&&y.boardCoords)ve=b.board[y.boardCoords.row][y.boardCoords.col].card;else if(y.playerId!==void 0){const he=b.players.find(be=>be.id===y.playerId);he&&(y.target==="hand"&&y.cardIndex!==void 0&&(ve=he.hand[y.cardIndex]),y.target==="announced"&&(ve=he.announcedCard||null),y.target==="deck"&&he.deck.length>0?y.deckPosition==="top"||!y.deckPosition?ve=he.deck[0]:ve=he.deck[he.deck.length-1]:y.target==="discard"&&he.discard.length>0&&(ve=he.discard[he.discard.length-1]))}if(ve){const he=h.count||1,be=b.players.find(Fe=>Fe.id===b.activeTurnPlayerId),Qe=be&&be.isDummy?be.id:R.current!==null?R.current:0;if(h.statusType==="Power+")ve.powerModifier===void 0&&(ve.powerModifier=0),ve.powerModifier+=1*he;else if(h.statusType==="Power-")ve.powerModifier===void 0&&(ve.powerModifier=0),ve.powerModifier-=1*he;else{ve.statuses||(ve.statuses=[]);for(let Fe=0;Fe<he;Fe++)["Support","Threat","Revealed"].includes(h.statusType)?ve.statuses.some(Ke=>Ke.type===h.statusType&&Ke.addedByPlayerId===Qe)||ve.statuses.push({type:h.statusType,addedByPlayerId:Qe}):ve.statuses.push({type:h.statusType,addedByPlayerId:Qe})}return y.target==="board"&&(b.board=Zt(b)),b}return E}let T={...h.card};if(h.source==="hand"&&h.playerId!==void 0&&h.cardIndex!==void 0){const K=b.players.find(fe=>fe.id===h.playerId);K&&K.hand.splice(h.cardIndex,1)}else if(h.source==="board"&&h.boardCoords)b.board[h.boardCoords.row][h.boardCoords.col].card=null;else if(h.source==="discard"&&h.playerId!==void 0&&h.cardIndex!==void 0){const K=b.players.find(fe=>fe.id===h.playerId);K&&K.discard.splice(h.cardIndex,1)}else if(h.source==="deck"&&h.playerId!==void 0&&h.cardIndex!==void 0){const K=b.players.find(fe=>fe.id===h.playerId);K&&K.deck.splice(h.cardIndex,1)}else if(h.source==="announced"&&h.playerId!==void 0){const K=b.players.find(fe=>fe.id===h.playerId);K&&(K.announcedCard=null)}if(["hand","deck","discard"].includes(y.target)?(T.statuses&&(T.statuses=T.statuses.filter(K=>K.type==="Revealed")),T.isFaceDown=!1,delete T.powerModifier,delete T.enteredThisTurn,delete T.abilityUsedInPhase,delete T.deployAbilityConsumed):y.target==="board"&&(T.statuses||(T.statuses=[]),h.source!=="board"&&T.isFaceDown===void 0&&(T.isFaceDown=!1),h.source!=="board"&&(T.enteredThisTurn=!0,delete T.deployAbilityConsumed)),y.target==="hand"&&y.playerId!==void 0){if(T.deck===De.Tokens||T.deck==="counter")return b;const K=b.players.find(fe=>fe.id===y.playerId);K&&K.hand.push(T)}else if(y.target==="board"&&y.boardCoords){if(b.board[y.boardCoords.row][y.boardCoords.col].card===null){if(T.ownerId===void 0&&R.current!==null){const K=b.players.find(fe=>fe.id===R.current);K&&(T.ownerId=K.id,T.ownerName=K.name)}if((h.source==="hand"||h.source==="announced")&&h.isManual){const K=T.ownerId;b.board.forEach(fe=>{fe.forEach(ve=>{ve.card&&ve.card.ownerId===K&&ve.card.statuses&&(ve.card.statuses=ve.card.statuses.filter(he=>he.type!=="LastPlayed"))})}),T.statuses||(T.statuses=[]),T.statuses.push({type:"LastPlayed",addedByPlayerId:K})}b.board[y.boardCoords.row][y.boardCoords.col].card=T}}else if(y.target==="discard"&&y.playerId!==void 0){if(!(T.deck===De.Tokens||T.deck==="counter")){const K=b.players.find(fe=>fe.id===y.playerId);K&&K.discard.push(T)}}else if(y.target==="deck"&&y.playerId!==void 0){if(T.deck===De.Tokens||T.deck==="counter")return b;const K=b.players.find(fe=>fe.id===y.playerId);K&&(y.deckPosition==="top"||!y.deckPosition?K.deck.unshift(T):K.deck.push(T))}else if(y.target==="announced"&&y.playerId!==void 0){const K=b.players.find(fe=>fe.id===y.playerId);K&&(K.announcedCard&&(K.announcedCard.statuses&&(K.announcedCard.statuses=K.announcedCard.statuses.filter(fe=>fe.type==="Revealed")),delete K.announcedCard.enteredThisTurn,delete K.announcedCard.abilityUsedInPhase,delete K.announcedCard.powerModifier,delete K.announcedCard.deployAbilityConsumed,K.hand.push(K.announcedCard)),K.announcedCard=T)}if(h.source==="hand"&&y.target==="board"){const K=T;if(K.revealedTo==="all"||((F=K.statuses)==null?void 0:F.some(ve=>ve.type==="Revealed"))){const ve=b.board.length;for(let he=0;he<ve;he++)for(let be=0;be<ve;be++){const Qe=b.board[he][be].card;if(Qe&&Qe.name.toLowerCase().includes("vigilant spotter")&&Qe.ownerId!==K.ownerId&&(b.board=Zt(b),(te=b.board[he][be].card.statuses)!=null&&te.some(ot=>ot.type==="Support"))){const ot=b.players.find(Ke=>Ke.id===Qe.ownerId);ot&&(ot.score+=2)}}}}return(h.source==="board"||y.target==="board")&&(b.board=Zt(b)),b})},[I]),il=k.useCallback((h,y,E,b)=>{I(T=>{if(!T.isGameStarted||T.board[E.row][E.col].card!==null)return T;const A=JSON.parse(JSON.stringify(T)),L=A.players.find(F=>F.id===h);if(L&&L.discard.length>y){const[F]=L.discard.splice(y,1);F.enteredThisTurn=!0,delete F.deployAbilityConsumed,F.statuses||(F.statuses=[]),F.statuses.push({type:"Resurrected",addedByPlayerId:h}),b&&b.forEach(te=>{var K;te.type!=="Resurrected"&&((K=F.statuses)==null||K.push({type:te.type,addedByPlayerId:h}))}),A.board[E.row][E.col].card=F,A.board=Zt(A)}return A})},[I]),io=k.useCallback(h=>{var y;if(((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN&&j.current.gameId){const E={...h,timestamp:Date.now()};f.current.send(JSON.stringify({type:"TRIGGER_HIGHLIGHT",gameId:j.current.gameId,highlightData:E}))}},[]),Cr=k.useCallback(h=>{var y;if(((y=f.current)==null?void 0:y.readyState)===WebSocket.OPEN&&j.current.gameId){const E=Array.isArray(h)?h:[h],b=Date.now(),T=E.map((A,L)=>({...A,timestamp:b+L}));f.current.send(JSON.stringify({type:"TRIGGER_FLOATING_TEXT_BATCH",gameId:j.current.gameId,batch:T}))}},[]),nr=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.board[h.row][h.col].card;return T&&(y?T.deployAbilityConsumed=!0:T.abilityUsedInPhase=b.currentPhase),b})},[I]),ul=k.useCallback((h,y,E,b,T)=>{I(A=>{if(!A.isGameStarted)return A;const L=JSON.parse(JSON.stringify(A));y.forEach(({row:te,col:K})=>{const fe=L.board[te][K].card;fe&&(fe.statuses||(fe.statuses=[]),["Support","Threat","Revealed"].includes(E)?fe.statuses.some(he=>he.type===E&&he.addedByPlayerId===b)||fe.statuses.push({type:E,addedByPlayerId:b}):fe.statuses.push({type:E,addedByPlayerId:b}))});const F=L.board[h.row][h.col].card;return F&&(T?F.deployAbilityConsumed=!0:F.abilityUsedInPhase=L.currentPhase),L})},[I]),rr=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.board[h.row][h.col].card,A=b.board[y.row][y.col].card;return b.board[h.row][h.col].card=A,b.board[y.row][y.col].card=T,b.board=Zt(b),b})},[I]),cl=k.useCallback((h,y,E)=>{I(b=>{if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=T.board[h.row][h.col].card,L=T.board[y.row][y.col].card;if(A&&L&&A.statuses){const F=A.statuses.findIndex(te=>te.type===E);if(F>-1){const[te]=A.statuses.splice(F,1);L.statuses||(L.statuses=[]),L.statuses.push(te)}}return T.board=Zt(T),T})},[I]),uo=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.board[h.row][h.col].card,A=b.board[y.row][y.col].card,L=["Support","Threat"];if(T&&A&&T.statuses){const F=T.statuses.filter(K=>!L.includes(K.type)),te=T.statuses.filter(K=>L.includes(K.type));F.length>0&&(A.statuses||(A.statuses=[]),A.statuses.push(...F),T.statuses=te)}return b.board=Zt(b),b})},[I]),Sr=k.useCallback((h,y)=>{I(E=>{if(!E.isGameStarted)return E;const b=JSON.parse(JSON.stringify(E)),T=b.players.find(A=>A.id===h);if(T&&T.discard.length>y){const[A]=T.discard.splice(y,1);T.hand.push(A)}return b})},[I]),Er=k.useCallback((h,y,E)=>{I(b=>{if(!b.isGameStarted)return b;const T=JSON.parse(JSON.stringify(b)),A=Object.keys(lr.tokenDatabase).find(te=>lr.tokenDatabase[te].name===y);if(!A)return b;const L=lr.tokenDatabase[A],F=T.players.find(te=>te.id===E);if(L&&T.board[h.row][h.col].card===null){const te={id:`TKN_${y.toUpperCase().replace(/\s/g,"_")}_${Date.now()}`,deck:De.Tokens,name:y,imageUrl:L.imageUrl,fallbackImage:L.fallbackImage,power:L.power,ability:L.ability,color:L.color,types:L.types||["Unit"],faction:"Tokens",ownerId:E,ownerName:F==null?void 0:F.name,enteredThisTurn:!0};T.board[h.row][h.col].card=te}return T.board=Zt(T),T})},[I]),Tr=k.useCallback((h,y,E,b,T)=>{var Qe,Fe;const A=j.current;if(!A.isGameStarted)return;const L=A.board.some(ot=>ot.some(Ke=>{var St;return Ke.card&&Ke.card.ownerId===T&&Ke.card.name.toLowerCase().includes("data liberator")&&((St=Ke.card.statuses)==null?void 0:St.some(it=>it.type==="Support"))})),F=A.board.length;let te=h,K=h,fe=y,ve=y;if(h===E)te=h,K=h,fe=0,ve=F-1;else if(y===b)fe=y,ve=y,te=0,K=F-1;else return;let he=0;const be=[];for(let ot=te;ot<=K;ot++)for(let Ke=fe;Ke<=ve;Ke++){const it=A.board[ot][Ke].card;if(it&&!((Qe=it.statuses)!=null&&Qe.some(ft=>ft.type==="Stun"))){const ft=it.ownerId===T,G=(Fe=it.statuses)==null?void 0:Fe.some(Be=>Be.type==="Exploit"&&Be.addedByPlayerId===T);if(ft||L&&G&&it.ownerId!==T){const Be=Math.max(0,it.power+(it.powerModifier||0));Be>0&&(he+=Be,be.push({row:ot,col:Ke,text:`+${Be}`,playerId:T}))}}}be.length>0&&Cr(be),I(ot=>{const Ke=JSON.parse(JSON.stringify(ot)),St=Ke.players.find(it=>it.id===T);return St&&(St.score+=he),Ke})},[I,Cr]);return{gameState:r,localPlayerId:l,setLocalPlayerId:a,draggedItem:i,setDraggedItem:u,connectionStatus:c,gamesList:p,latestHighlight:x,latestFloatingTexts:_,createGame:pe,joinGame:V,requestGamesList:Ee,exitGame:we,startReadyCheck:xe,cancelReadyCheck:je,playerReady:q,assignTeams:ae,setGameMode:P,setGamePrivacy:S,setActiveGridSize:X,setDummyPlayerCount:H,updatePlayerName:zt,changePlayerColor:Ct,updatePlayerScore:Jt,changePlayerDeck:so,loadCustomDeck:tr,drawCard:As,shufflePlayerDeck:Ls,moveItem:ao,handleDrop:ao,addBoardCardStatus:Q,removeBoardCardStatus:M,removeBoardCardStatusByOwner:ee,modifyBoardCardPower:$,addAnnouncedCardStatus:ne,removeAnnouncedCardStatus:Ce,modifyAnnouncedCardPower:ge,addHandCardStatus:me,removeHandCardStatus:Se,flipBoardCard:re,flipBoardCardFaceDown:Z,revealHandCard:ke,revealBoardCard:ye,requestCardReveal:Le,respondToRevealRequest:Me,syncGame:D,removeRevealedStatus:Ue,resetGame:z,toggleActiveTurnPlayer:Ms,forceReconnect:oe,triggerHighlight:io,triggerFloatingText:Cr,nextPhase:sl,prevPhase:wr,setPhase:Us,markAbilityUsed:nr,applyGlobalEffect:ul,swapCards:rr,transferStatus:cl,transferAllCounters:uo,recoverDiscardedCard:Sr,resurrectDiscardedCard:il,spawnToken:Er,scoreLine:Tr,confirmRoundEnd:al}},Lo=(e,t,n,r)=>{var i,u,c;const{card:o,ownerId:l,location:a}=e;if(t.targetOwnerId!==void 0&&t.targetOwnerId!==-1&&t.targetOwnerId!==-2&&t.targetOwnerId!==l||t.excludeOwnerId!==void 0&&t.excludeOwnerId===l)return!1;if(t.onlyOpponents||t.targetOwnerId===-1){if(l===n)return!1;const w=r.find(d=>d.id===n),p=r.find(d=>d.id===l);if(w&&p&&w.teamId!==void 0&&w.teamId===p.teamId)return!1}if(t.onlyFaceDown&&((i=o.statuses)!=null&&i.some(w=>w.type==="Revealed"&&w.addedByPlayerId===n)||a==="board"&&!o.isFaceDown)||t.tokenType==="Revealed"&&(u=o.statuses)!=null&&u.some(w=>w.type==="Revealed"&&w.addedByPlayerId===n)||t.requiredTargetStatus&&!((c=o.statuses)!=null&&c.some(w=>w.type===t.requiredTargetStatus)))return!1;if(t.mustBeAdjacentToSource&&t.sourceCoords&&e.boardCoords){const{row:w,col:p}=t.sourceCoords,{row:d,col:x}=e.boardCoords;if(Math.abs(w-d)+Math.abs(p-x)!==1)return!1}if(t.mustBeInLineWithSource&&t.sourceCoords&&e.boardCoords){const{row:w,col:p}=t.sourceCoords,{row:d,col:x}=e.boardCoords;if(w!==d&&p!==x)return!1}return!0},Ci=(e,t,n,r)=>{if(!e||e.type!=="ENTER_MODE"&&e.type!=="CREATE_STACK")return[];const o=[],l=t.board,a=l.length;if(e.type==="CREATE_STACK"){const p={targetOwnerId:e.targetOwnerId,excludeOwnerId:e.excludeOwnerId,onlyOpponents:e.onlyOpponents,onlyFaceDown:e.onlyFaceDown,requiredTargetStatus:e.requiredTargetStatus,mustBeAdjacentToSource:e.mustBeAdjacentToSource,mustBeInLineWithSource:e.mustBeInLineWithSource,sourceCoords:e.sourceCoords,tokenType:e.tokenType};for(let d=0;d<a;d++)for(let x=0;x<a;x++){const C=l[d][x];C.card&&Lo({card:C.card,ownerId:C.card.ownerId||0,location:"board",boardCoords:{row:d,col:x}},p,n,t.players)&&o.push({row:d,col:x})}return o}const{mode:i,payload:u,sourceCoords:c,contextCheck:w}=e;if((i==="SELECT_TARGET"||i==="CENSOR_SWAP"||i==="ZEALOUS_WEAKEN"||i==="CENTURION_BUFF"||i==="SELECT_UNIT_FOR_MOVE")&&u.filter)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=l[p][d];let C=x.card&&u.filter(x.card,p,d);if(C&&w==="ADJACENT_TO_LAST_MOVE"&&(r!=null&&r.lastMovedCardCoords)){const{row:_,col:O}=r.lastMovedCardCoords;Math.abs(p-_)+Math.abs(d-O)===1||(C=!1)}C&&o.push({row:p,col:d})}else if(i==="PATROL_MOVE"&&c)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=p===c.row||d===c.col,C=p===c.row&&d===c.col,_=!l[p][d].card;x&&(_||C)&&o.push({row:p,col:d})}else if(i==="RIOT_PUSH"&&c)[{r:c.row-1,c:c.col},{r:c.row+1,c:c.col},{r:c.row,c:c.col-1},{r:c.row,c:c.col+1}].forEach(d=>{if(d.r>=0&&d.r<a&&d.c>=0&&d.c<a){const x=l[d.r][d.c].card;if(x&&x.ownerId!==n){const C=t.players.find(f=>f.id===n),_=t.players.find(f=>f.id===x.ownerId);if(!((C==null?void 0:C.teamId)!==void 0&&(_==null?void 0:_.teamId)!==void 0&&C.teamId===_.teamId)){const f=d.r-c.row,m=d.c-c.col,g=d.r+f,v=d.c+m;g>=0&&g<a&&v>=0&&v<a&&(l[g][v].card||o.push({row:d.r,col:d.c}))}}}});else if(i==="RIOT_MOVE"&&u.vacatedCoords)o.push(u.vacatedCoords),c&&o.push(c);else if(i==="SWAP_POSITIONS"&&u.filter)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=l[p][d];x.card&&u.filter(x.card,p,d)&&o.push({row:p,col:d})}else if((i==="TRANSFER_STATUS_SELECT"||i==="TRANSFER_ALL_STATUSES")&&u.filter)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=l[p][d];x.card&&u.filter(x.card,p,d)&&o.push({row:p,col:d})}else if((i==="SPAWN_TOKEN"||i==="SELECT_CELL"||i==="IMMUNIS_RETRIEVE")&&c)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=!l[p][d].card;if(i==="IMMUNIS_RETRIEVE"&&u.filter){x&&u.filter(p,d)&&o.push({row:p,col:d});continue}if(i==="SELECT_CELL"){const C=p===c.row&&d===c.col,_=u.range==="global";let O=!1;if(_)O=!0;else if(u.range==="line")O=p===c.row||d===c.col;else if(u.range===2){const f=Math.abs(p-c.row),m=Math.abs(d-c.col),g=f+m;if(g===1)O=!0;else if(g===2){const v=[];f===2&&m===0?v.push({r:(p+c.row)/2,c:d}):f===0&&m===2?v.push({r:p,c:(d+c.col)/2}):f===1&&m===1&&(v.push({r:p,c:c.col}),v.push({r:c.row,c:d})),O=v.some(j=>!l[j.r][j.c].card)}}else O=Math.abs(p-c.row)+Math.abs(d-c.col)===1;x&&O&&o.push({row:p,col:d}),u.allowSelf&&C&&o.push({row:p,col:d})}else if(i==="SPAWN_TOKEN"){const C=Math.abs(p-c.row)+Math.abs(d-c.col)===1;x&&C&&o.push({row:p,col:d})}}else if(i==="REVEAL_ENEMY"&&u.filter)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=l[p][d];x.card&&u.filter(x.card,p,d)&&o.push({row:p,col:d})}else if(i==="SELECT_LINE_START")for(let p=0;p<a;p++)for(let d=0;d<a;d++)o.push({row:p,col:d});else if(i==="SELECT_LINE_END"&&u.firstCoords)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=p===u.firstCoords.row,C=d===u.firstCoords.col;(x||C)&&o.push({row:p,col:d})}else if(i==="INTEGRATOR_LINE_SELECT"&&c)for(let p=0;p<a;p++)for(let d=0;d<a;d++){const x=p===c.row,C=d===c.col;(x||C)&&o.push({row:p,col:d})}return o},qc=(e,t,n,r)=>{var l,a;if(e.type==="OPEN_MODAL")return!0;if(e.type==="CREATE_STACK"){if(Ci(e,t,n,r).length>0)return!0;if(e.tokenType==="Revealed"||(l=e.tokenType)!=null&&l.startsWith("Power"))for(const u of t.players)for(let c=0;c<u.hand.length;c++){const w={targetOwnerId:e.targetOwnerId,excludeOwnerId:e.excludeOwnerId,onlyOpponents:e.onlyOpponents,onlyFaceDown:e.onlyFaceDown,tokenType:e.tokenType};if(Lo({card:u.hand[c],ownerId:u.id,location:"hand"},w,n,t.players))return!0}return!1}if(Ci(e,t,n,r).length>0)return!0;if(e.mode==="SELECT_TARGET"&&((a=e.payload)!=null&&a.filter)){for(const i of t.players)if(i.hand.some(u=>e.payload.filter(u)))return!0}return!1},my=({gameState:e,localPlayerId:t,abilityMode:n,setAbilityMode:r,cursorStack:o,setCursorStack:l,commandContext:a,setCommandContext:i,setViewingDiscard:u,setNoTargetOverlay:c,setPlayMode:w,setCounterSelectionData:p,interactionLock:d,moveItem:x,drawCard:C,updatePlayerScore:_,markAbilityUsed:O,applyGlobalEffect:f,swapCards:m,transferStatus:g,transferAllCounters:v,resurrectDiscardedCard:j,spawnToken:R,scoreLine:I,nextPhase:B,modifyBoardCardPower:oe,addBoardCardStatus:V,removeBoardCardStatus:pe,removeBoardCardStatusByOwner:Ee})=>{const we=k.useCallback((S,D)=>{if(n||o||!e.isGameStarted||t===null)return;const z=e.players.find(Q=>Q.id===S.ownerId),X=t===S.ownerId||(z==null?void 0:z.isDummy);if(e.activeTurnPlayerId!==S.ownerId||!X||!wi(S,e.currentPhase,e.activeTurnPlayerId))return;const H=Ug(S,e,S.ownerId,D);if(H){if(H.type==="GLOBAL_AUTO_APPLY"&&H.payload&&!H.payload.cleanupCommand){const{tokenType:Q,filter:M}=H.payload,ee=[],$=e.board.length;for(let ne=0;ne<$;ne++)for(let Ce=0;Ce<$;Ce++){const ge=e.board[ne][Ce].card;ge&&M(ge)&&ee.push({row:ne,col:Ce})}ee.length>0?f(D,ee,Q,S.ownerId,!!H.isDeployAbility):(c(D),O(D,!!H.isDeployAbility),setTimeout(()=>c(null),750));return}if(H.type==="CREATE_STACK"&&H.tokenType&&H.count){if(!qc(H,e,S.ownerId,a)){c(D),O(D,!!H.isDeployAbility),setTimeout(()=>c(null),750);return}l({type:H.tokenType,count:H.count,isDragging:!1,sourceCoords:D,excludeOwnerId:H.excludeOwnerId,onlyOpponents:H.onlyOpponents,onlyFaceDown:H.onlyFaceDown,isDeployAbility:H.isDeployAbility,requiredTargetStatus:H.requiredTargetStatus,mustBeAdjacentToSource:H.mustBeAdjacentToSource,mustBeInLineWithSource:H.mustBeInLineWithSource,placeAllAtOnce:H.placeAllAtOnce})}else if(H.type==="ENTER_MODE"){if(!qc(H,e,S.ownerId,a)){D.row>=0&&(c(D),O(D,H.isDeployAbility),setTimeout(()=>c(null),750));return}r(H)}else if(H.type==="OPEN_MODAL"){if(H.mode==="RETRIEVE_DEVICE"){const Q=e.players.find(M=>M.id===S.ownerId);Q&&(Q.discard.some(ee=>{var $;return($=ee.types)==null?void 0:$.includes("Device")})?(u({player:Q,pickConfig:{filterType:"Device",action:"recover"}}),D.row>=0&&O(D,H.isDeployAbility)):D.row>=0&&(c(D),O(D,H.isDeployAbility),setTimeout(()=>c(null),750)))}if(H.mode==="IMMUNIS_RETRIEVE"){const Q=e.players.find(M=>M.id===S.ownerId);Q&&(Q.discard.some(ee=>{var $,ne;return((($=ee.types)==null?void 0:$.includes("Optimates"))||ee.faction==="Optimates")&&((ne=ee.types)==null?void 0:ne.includes("Unit"))})?(u({player:Q,pickConfig:{filterType:"Optimates",action:"resurrect"}}),r({type:"ENTER_MODE",mode:"IMMUNIS_RETRIEVE",sourceCard:S,sourceCoords:D,isDeployAbility:H.isDeployAbility,payload:H.payload})):D.row>=0&&(c(D),O(D,H.isDeployAbility),setTimeout(()=>c(null),750)))}}}},[n,o,e,t,a,O,r,l,c,f,u]),xe=k.useCallback(S=>{if(!n)return;const{mode:D,sourceCard:z,sourceCoords:X,payload:H,isDeployAbility:Q}=n;if(D==="SCORE_LAST_PLAYED_LINE"&&n.sourceCoords){const{row:M,col:ee}=n.sourceCoords,{row:$,col:ne}=S;if(M!==$&&ee!==ne)return;I(M,ee,$,ne,e.activeTurnPlayerId),B(),r(null);return}if(D==="SELECT_LINE_START"){r({type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:z,sourceCoords:X,isDeployAbility:Q,payload:{...H,firstCoords:S}});return}if(D==="SELECT_LINE_END"&&(H!=null&&H.firstCoords)){const{row:M,col:ee}=H.firstCoords,{row:$,col:ne}=S;if(M!==$&&ee!==ne)return;const Ce=H.actionType,ge=z?z.ownerId:t||e.activeTurnPlayerId;if(Ce==="CENTURION_BUFF"&&z&&X&&ge){const me=e.board.length;let Se=0,re=me-1,Z=0,ke=me-1;M===$?Se=re=M:Z=ke=ee;for(let ye=Se;ye<=re;ye++)for(let Le=Z;Le<=ke;Le++){const Me=e.board[ye][Le].card;if(Me){const Ue=Me.id===z.id,zt=Me.ownerId===ge,Ct=e.players.find(tr=>tr.id===ge),Jt=e.players.find(tr=>tr.id===Me.ownerId),so=(Ct==null?void 0:Ct.teamId)!==void 0&&(Jt==null?void 0:Jt.teamId)!==void 0&&Ct.teamId===Jt.teamId;!Ue&&(zt||so)&&oe({row:ye,col:Le},1)}}O(X,Q)}else(Ce==="SCORE_LINE"||!Ce)&&(I(M,ee,$,ne,ge),z&&x({card:z,source:"announced",playerId:ge},{target:"discard",playerId:ge}),e.isScoringStep&&B());setTimeout(()=>r(null),100)}},[n,e,t,I,B,r,oe,O,x]),je=k.useCallback((S,D)=>{var z,X,H;if(!(w&&o)&&!d.current){if(n&&(n.mode==="SCORE_LAST_PLAYED_LINE"||n.mode==="SELECT_LINE_END")){xe(D);return}if(n&&n.type==="ENTER_MODE"){if(n.sourceCard&&n.sourceCard.id===S.id&&n.mode!=="SELECT_LINE_START"&&n.mode!=="INTEGRATOR_LINE_SELECT"&&n.mode!=="SELECT_UNIT_FOR_MOVE"&&n.mode!=="SELECT_TARGET")return;const{mode:Q,payload:M,sourceCard:ee,sourceCoords:$,isDeployAbility:ne}=n;if(Q==="SELECT_LINE_START"||Q==="SELECT_LINE_END"){xe(D);return}const Ce=ee?ee.ownerId:t||e.activeTurnPlayerId;if(Q==="SELECT_TARGET"&&M.actionType==="OPEN_COUNTER_MODAL"){if(M.filter&&!M.filter(S))return;p({card:S,callbackAction:M.rewardType}),r(null);return}if(Q==="SELECT_TARGET"&&M.actionType==="DESTROY"){if(M.filter&&!M.filter(S,D.row,D.col))return;((z=S.statuses)==null?void 0:z.some(me=>me.type==="Shield"))?pe(D,"Shield"):x({card:S,source:"board",boardCoords:D,bypassOwnershipCheck:!0},{target:"discard",playerId:S.ownerId}),$&&$.row>=0&&O($,ne),setTimeout(()=>r(null),100);return}if(Q==="SELECT_TARGET"&&M.actionType==="DRAW_EQUAL_POWER"){if(M.filter&&!M.filter(S))return;const ge=Math.max(0,S.power+(S.powerModifier||0));for(let me=0;me<ge;me++)C(Ce);setTimeout(()=>r(null),100);return}if(Q==="SELECT_TARGET"&&M.actionType==="SCORE_EQUAL_POWER"){if(M.filter&&!M.filter(S))return;const ge=Math.max(0,S.power+(S.powerModifier||0));_(Ce,ge),setTimeout(()=>r(null),100);return}if(Q==="SELECT_TARGET"&&M.tokenType){if(M.filter&&!M.filter(S,D.row,D.col))return;x({card:{id:"dummy",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:M.tokenType,count:M.count||1},{target:"board",boardCoords:D}),$&&$.row>=0&&O($,ne),setTimeout(()=>r(null),100);return}if(Q==="RIOT_PUSH"&&$&&$.row>=0){const ge=Math.abs(D.row-$.row)+Math.abs(D.col-$.col)===1,me=e.players.find(Ue=>Ue.id===S.ownerId),Se=e.players.find(Ue=>Ue.id===Ce),re=(me==null?void 0:me.teamId)!==void 0&&(Se==null?void 0:Se.teamId)!==void 0&&me.teamId===Se.teamId;if(!ge||S.ownerId===Ce||re)return;const Z=D.row-$.row,ke=D.col-$.col,ye=D.row+Z,Le=D.col+ke,Me=e.board.length;if(ye<0||ye>=Me||Le<0||Le>=Me||e.board[ye][Le].card!==null)return;x({card:S,source:"board",boardCoords:D,bypassOwnershipCheck:!0},{target:"board",boardCoords:{row:ye,col:Le}}),r({type:"ENTER_MODE",mode:"RIOT_MOVE",sourceCard:n.sourceCard,sourceCoords:n.sourceCoords,isDeployAbility:ne,payload:{vacatedCoords:D}});return}if(Q==="RIOT_MOVE"&&$&&$.row>=0){D.row===$.row&&D.col===$.col&&(O($,ne),setTimeout(()=>r(null),100));return}if(Q==="SWAP_POSITIONS"&&$&&$.row>=0){if(ee&&ee.id===S.id||M.filter&&!M.filter(S,D.row,D.col))return;m($,D),O(D,ne),setTimeout(()=>r(null),100);return}if(Q==="TRANSFER_STATUS_SELECT"&&$&&$.row>=0){if(ee&&ee.id===S.id||M.filter&&!M.filter(S,D.row,D.col))return;S.statuses&&S.statuses.length>0&&(g(D,$,S.statuses[0].type),O($,ne),setTimeout(()=>r(null),100));return}if(Q==="TRANSFER_ALL_STATUSES"&&$&&$.row>=0){if(ee&&ee.id===S.id||M.filter&&!M.filter(S,D.row,D.col))return;v(D,$),O($,ne),setTimeout(()=>r(null),100);return}if(Q==="REVEAL_ENEMY"){if(ee&&ee.id===S.id||M.filter&&!M.filter(S,D.row,D.col))return;l({type:"Revealed",count:1,isDragging:!1,sourceCoords:$,targetOwnerId:S.ownerId,onlyFaceDown:!0,onlyOpponents:!0,isDeployAbility:ne}),setTimeout(()=>r(null),100);return}if(Q==="CENSOR_SWAP"&&$&&$.row>=0){if(M.filter&&!M.filter(S))return;Ee(D,"Exploit",Ce),V(D,"Stun",Ce),O($,ne),setTimeout(()=>r(null),100);return}if(Q==="ZEALOUS_WEAKEN"&&$&&$.row>=0){if(M.filter&&!M.filter(S))return;oe(D,-1),O($,ne),setTimeout(()=>r(null),100);return}if(Q==="CENTURION_BUFF"&&$&&$.row>=0){O($,ne),setTimeout(()=>r(null),100);return}if(Q==="SELECT_UNIT_FOR_MOVE"&&$&&$.row>=0){if(M.filter&&!M.filter(S))return;r({type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:S,sourceCoords:D,isDeployAbility:ne,recordContext:n.recordContext,payload:{allowSelf:!1,abilitySourceCoords:$,range:M.range,chainedAction:M.chainedAction}});return}if(Q==="SELECT_UNIT_FOR_MOVE"&&!$){if(M.filter&&!M.filter(S))return;r({type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:S,sourceCoords:D,recordContext:n.recordContext,payload:{allowSelf:!1,range:M.range,chainedAction:M.chainedAction}});return}if(Q==="INTEGRATOR_LINE_SELECT"&&$&&$.row>=0){if(D.row!==$.row&&D.col!==$.col)return;const ge=e.board.length;let me=0;if(D.row===$.row)for(let Se=0;Se<ge;Se++){const re=e.board[D.row][Se];re.card&&(me+=((X=re.card.statuses)==null?void 0:X.filter(Z=>Z.type==="Exploit"&&Z.addedByPlayerId===Ce).length)||0)}else for(let Se=0;Se<ge;Se++){const re=e.board[Se][D.col];re.card&&(me+=((H=re.card.statuses)==null?void 0:H.filter(Z=>Z.type==="Exploit"&&Z.addedByPlayerId===Ce).length)||0)}me>0&&_(Ce,me),O($,ne),setTimeout(()=>r(null),100);return}return}!n&&!o&&we(S,D)}},[n,o,e,t,d,xe,x,O,r,l,pe,Ee,V,oe,m,g,v,_,C,we,p]),q=k.useCallback(S=>{var ee,$;if(d.current||!n||n.type!=="ENTER_MODE")return;const{mode:D,sourceCoords:z,sourceCard:X,payload:H,isDeployAbility:Q}=n;if(D==="SCORE_LAST_PLAYED_LINE"||D==="SELECT_LINE_END"){xe(S);return}if(D==="SELECT_LINE_START"){xe(S);return}const M=X?X.ownerId:t||e.activeTurnPlayerId;if(D==="PATROL_MOVE"&&z&&X&&z.row>=0){const ne=S.row===z.row,Ce=S.col===z.col;if(S.row===z.row&&S.col===z.col){setTimeout(()=>r(null),100);return}(ne||Ce)&&(x({card:X,source:"board",boardCoords:z},{target:"board",boardCoords:S}),O(S,Q),setTimeout(()=>r(null),100));return}if(D==="RIOT_MOVE"&&z&&X&&H.vacatedCoords){S.row===H.vacatedCoords.row&&S.col===H.vacatedCoords.col&&(x({card:X,source:"board",boardCoords:z},{target:"board",boardCoords:S}),O(S,Q),setTimeout(()=>r(null),100));return}if(D==="SPAWN_TOKEN"&&z&&H.tokenName&&z.row>=0){Math.abs(S.row-z.row)+Math.abs(S.col-z.col)===1&&(R(S,H.tokenName,M),O(z,Q),setTimeout(()=>r(null),100));return}if(D==="SELECT_CELL"&&X){const ne=(()=>{var ge;for(let me=0;me<e.board.length;me++)for(let Se=0;Se<e.board.length;Se++)if(((ge=e.board[me][Se].card)==null?void 0:ge.id)===X.id)return{row:me,col:Se};return null})();let Ce=!1;if(ne)if(H.range==="line")Ce=S.row===ne.row||S.col===ne.col;else if(H.range==="global")Ce=!0;else if(H.range===2){const ge=Math.abs(S.row-ne.row)+Math.abs(S.col-ne.col);if(ge===1)Ce=!0;else if(ge===2){const me=ne.row,Se=ne.col,re=S.row,Z=S.col;Ce=[{r:re,c:Se},{r:me,c:Z},{r:(me+re)/2,c:(Se+Z)/2}].some(ye=>!Number.isInteger(ye.r)||!Number.isInteger(ye.c)||Math.abs(ye.r-me)+Math.abs(ye.c-Se)!==1?!1:!e.board[ye.r][ye.c].card)}}else Ce=Math.abs(S.row-ne.row)+Math.abs(S.col-ne.col)===1;if(Ce){const ge=Math.max(0,X.power+(X.powerModifier||0));if(H.allowSelf&&ne&&S.row===ne.row&&S.col===ne.col||ne&&x({card:X,source:"board",boardCoords:ne,bypassOwnershipCheck:!0},{target:"board",boardCoords:S}),n.recordContext&&i({lastMovedCardCoords:S,lastMovedCardId:X.id}),H.chainedAction){const me={...H.chainedAction};if(me.targetOwnerId===-2&&(me.targetOwnerId=X.ownerId),me.type==="CREATE_STACK")l({...me,isDragging:!1,sourceCoords:S}),r(null);else if(me.type==="GLOBAL_AUTO_APPLY"){const Se=me.payload.contextReward;if(Se==="STUN_MOVED_UNIT")V(S,"Stun",M);else if(Se==="DRAW_MOVED_POWER")for(let re=0;re<ge;re++)C(M);else Se==="SCORE_MOVED_POWER"&&_(M,ge);r(null)}}else H.abilitySourceCoords?O(H.abilitySourceCoords,Q):z&&z.row>=0&&O(S,Q),setTimeout(()=>r(null),100);return}return}if(D==="IMMUNIS_RETRIEVE"&&z&&z.row>=0){if(H.selectedCardIndex!==void 0&&H.filter&&H.filter(S.row,S.col)){j(M,H.selectedCardIndex,S),O(z,Q),setTimeout(()=>r(null),100);return}if(H.selectedCardIndex===void 0)return}if(D==="INTEGRATOR_LINE_SELECT"&&z&&z.row>=0){if(S.row!==z.row&&S.col!==z.col)return;const ne=e.board.length;let Ce=0;if(S.row===z.row)for(let ge=0;ge<ne;ge++){const me=e.board[S.row][ge];me.card&&(Ce+=((ee=me.card.statuses)==null?void 0:ee.filter(Se=>Se.type==="Exploit"&&Se.addedByPlayerId===M).length)||0)}else for(let ge=0;ge<ne;ge++){const me=e.board[ge][S.col];me.card&&(Ce+=(($=me.card.statuses)==null?void 0:$.filter(Se=>Se.type==="Exploit"&&Se.addedByPlayerId===M).length)||0)}Ce>0&&_(M,Ce),O(z,Q),setTimeout(()=>r(null),100);return}},[d,n,e,t,xe,x,O,r,R,i,j,_,V,l,C]),ae=k.useCallback((S,D,z)=>{if(!d.current&&n&&n.type==="ENTER_MODE"&&n.mode==="SELECT_TARGET"){const{payload:X,sourceCoords:H,isDeployAbility:Q,sourceCard:M}=n;if(X.actionType==="DESTROY"){if(X.filter&&!X.filter(D))return;x({card:D,source:"hand",playerId:S.id,cardIndex:z,bypassOwnershipCheck:!0},{target:"discard",playerId:S.id}),H&&H.row>=0&&O(H,Q),setTimeout(()=>r(null),100)}}},[d,n,x,O,r]),P=k.useCallback((S,D)=>{n||o||d.current||e.isGameStarted&&e.activeTurnPlayerId===S.id&&wi(D,e.currentPhase,e.activeTurnPlayerId)&&we(D,{row:-1,col:-1})},[n,o,d,e,we]);return{activateAbility:we,handleLineSelection:xe,handleBoardCardClick:je,handleEmptyCellClick:q,handleHandCardClick:ae,handleAnnouncedCardDoubleClick:P}},Ta=(e,t,n,r,o)=>{const l=(n.baseId||e.split("_")[1]||e).toLowerCase(),a=t===-1;if(l.includes("overwatch")){if(a)return{type:"CREATE_STACK",tokenType:"Aim",count:1,sourceCard:n};if(t===0)return{type:"CREATE_STACK",tokenType:"Revealed",dynamicCount:{factor:"Aim",ownerId:o},targetOwnerId:-1,onlyOpponents:!0,sourceCard:n};if(t===1)return{type:"GLOBAL_AUTO_APPLY",payload:{dynamicResource:{type:"draw",factor:"Aim",ownerId:o}},sourceCard:n}}if(l.includes("tacticalmaneuver"))return t===0?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",recordContext:!0,sourceCard:n,payload:{range:"line",filter:i=>i.ownerId===o,chainedAction:{type:"GLOBAL_AUTO_APPLY",payload:{contextReward:"DRAW_MOVED_POWER"},sourceCard:n}}}:t===1?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",recordContext:!0,sourceCard:n,payload:{range:"line",filter:i=>i.ownerId===o,chainedAction:{type:"GLOBAL_AUTO_APPLY",payload:{contextReward:"SCORE_MOVED_POWER"},sourceCard:n}}}:null;if(l.includes("inspiration"))return a?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:n,payload:{actionType:"OPEN_COUNTER_MODAL",filter:i=>i.ownerId===o}}:null;if(l.includes("datainterception")){if(a)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,sourceCard:n};if(t===0)return{type:"CREATE_STACK",tokenType:"Revealed",dynamicCount:{factor:"Exploit",ownerId:o},onlyOpponents:!0,targetOwnerId:-1,sourceCard:n};if(t===1)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:n,payload:{range:"line",filter:i=>{var u;return(u=i.statuses)==null?void 0:u.some(c=>c.type==="Exploit"&&c.addedByPlayerId===o)}}}}if(l.includes("falseorders")){if(a)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,onlyOpponents:!0,sourceCard:n};if(t===0)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",recordContext:!0,sourceCard:n,payload:{filter:i=>{var u;return i.ownerId!==o&&((u=i.statuses)==null?void 0:u.some(c=>c.type==="Exploit"&&c.addedByPlayerId===o))},range:2,chainedAction:{type:"CREATE_STACK",tokenType:"Revealed",count:2,targetOwnerId:-2,onlyFaceDown:!0}}};if(t===1)return{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",recordContext:!0,sourceCard:n,payload:{filter:i=>{var u;return i.ownerId!==o&&((u=i.statuses)==null?void 0:u.some(c=>c.type==="Exploit"&&c.addedByPlayerId===o))},range:2,chainedAction:{type:"GLOBAL_AUTO_APPLY",payload:{contextReward:"STUN_MOVED_UNIT"}}}}}return null},hy=({gameState:e,localPlayerId:t,setActionQueue:n,setCommandContext:r,setCommandModalCard:o,setCounterSelectionData:l,moveItem:a,drawCard:i,updatePlayerScore:u,removeBoardCardStatus:c})=>{const w=k.useCallback((x,C)=>{if(t===null)return;const _=e.players.find(g=>g.id===C.playerId);if(!(C.playerId===t||(_==null?void 0:_.isDummy)))return;a(C,{target:"announced",playerId:C.playerId}),r({});const f=(x.baseId||x.id.split("_")[1]||x.id).toLowerCase();if(["overwatch","tacticalmaneuver","repositioning","inspiration","datainterception","falseorders"].some(g=>f.includes(g)))o(x);else{const g=Ta(x.id,-1,x,e,C.playerId);g&&n([g,{type:"GLOBAL_AUTO_APPLY",payload:{cleanupCommand:!0,card:x},sourceCard:x}])}},[e,t,a,n,r,o]),p=k.useCallback((x,C)=>{var m,g;if(!C||t===null)return;const _=C.ownerId||t,O=[],f=Ta(C.id,-1,C,e,_);if((m=C.baseId)!=null&&m.toLowerCase().includes("inspiration")){const v=x===0?"DRAW_REMOVED":"SCORE_REMOVED";(f==null?void 0:f.type)==="ENTER_MODE"&&(f.payload={...f.payload,rewardType:v}),O.push(f)}else{f&&O.push(f);const v=Ta(C.id,x,C,e,_);v&&O.push(v)}(g=C.baseId)!=null&&g.toLowerCase().includes("inspiration")||O.push({type:"GLOBAL_AUTO_APPLY",payload:{cleanupCommand:!0,card:C},sourceCard:C}),n(O),o(null)},[e,t,n,o]),d=k.useCallback((x,C)=>{var m;if(t===null)return;const _=C.card.ownerId||t;let O=null;for(let g=0;g<e.board.length;g++)for(let v=0;v<e.board.length;v++)if(((m=e.board[g][v].card)==null?void 0:m.id)===C.card.id){O={row:g,col:v};break}if(O){let g=0;if(Object.entries(x).forEach(([v,j])=>{for(let R=0;R<j;R++)c(O,v),g++}),g>0)if(C.callbackAction==="DRAW_REMOVED")for(let v=0;v<g;v++)i(_);else C.callbackAction==="SCORE_REMOVED"&&u(_,g)}const f=e.players.find(g=>g.id===_);f&&f.announcedCard&&n([{type:"GLOBAL_AUTO_APPLY",payload:{cleanupCommand:!0,card:f.announcedCard},sourceCard:f.announcedCard}]),l(null)},[t,i,u,n,l,e,c]);return{playCommandCard:w,handleCommandConfirm:p,handleCounterSelectionConfirm:d}};function gy(){const{t:e}=In(),{gameState:t,localPlayerId:n,setLocalPlayerId:r,createGame:o,joinGame:l,startReadyCheck:a,cancelReadyCheck:i,playerReady:u,assignTeams:c,setGameMode:w,setGamePrivacy:p,setActiveGridSize:d,setDummyPlayerCount:x,updatePlayerName:C,changePlayerColor:_,updatePlayerScore:O,changePlayerDeck:f,loadCustomDeck:m,drawCard:g,handleDrop:v,draggedItem:j,setDraggedItem:R,connectionStatus:I,gamesList:B,requestGamesList:oe,exitGame:V,moveItem:pe,shufflePlayerDeck:Ee,addBoardCardStatus:we,removeBoardCardStatus:xe,removeBoardCardStatusByOwner:je,modifyBoardCardPower:q,addAnnouncedCardStatus:ae,removeAnnouncedCardStatus:P,modifyAnnouncedCardPower:S,addHandCardStatus:D,removeHandCardStatus:z,flipBoardCard:X,flipBoardCardFaceDown:H,revealHandCard:Q,revealBoardCard:M,requestCardReveal:ee,respondToRevealRequest:$,syncGame:ne,removeRevealedStatus:Ce,resetGame:ge,toggleActiveTurnPlayer:me,forceReconnect:Se,triggerHighlight:re,latestHighlight:Z,latestFloatingTexts:ke,nextPhase:ye,prevPhase:Le,setPhase:Me,markAbilityUsed:Ue,applyGlobalEffect:zt,swapCards:Ct,transferStatus:Jt,transferAllCounters:so,recoverDiscardedCard:tr,resurrectDiscardedCard:As,spawnToken:Ls,scoreLine:Ms,confirmRoundEnd:Us}=py(),[sl,wr]=k.useState(!1),[al,ao]=k.useState(!1),[il,io]=k.useState(!1),[Cr,nr]=k.useState(!1),[ul,rr]=k.useState(!1),[cl,uo]=k.useState(!1),[Sr,Er]=k.useState(null),[Tr,h]=k.useState(null),[y,E]=k.useState(null),[b,T]=k.useState(null),[A,L]=k.useState(!1),[F,te]=k.useState(null),[K,fe]=k.useState(null),[ve,he]=k.useState(null),[be,Qe]=k.useState(!0),[Fe,ot]=k.useState(()=>{try{const U=localStorage.getItem("image_refresh_data");if(U){const{version:ie,timestamp:Oe}=JSON.parse(U),J=12*60*60*1e3;if(Date.now()-Oe<J)return ie}}catch(U){console.error("Error parsing image refresh data",U)}const N=Date.now();return localStorage.setItem("image_refresh_data",JSON.stringify({version:N,timestamp:N})),N}),[Ke,St]=k.useState(null),[it,ft]=k.useState(null),[G,Be]=k.useState(null),sn=k.useRef(null),dl=k.useRef(null),[wu,Cu]=k.useState(null),[Su,Eu]=k.useState([]),[zs,jp]=k.useState(!0),[Te,_n]=k.useState(null),[Fs,fl]=k.useState([]),[Tu,Ip]=k.useState([]),[Bs,_p]=k.useState([]),[ku,Dp]=k.useState(null),[Dn,pl]=k.useState({}),$s=k.useRef({x:0,y:0}),Rp=k.useRef(null),kr=k.useRef(null),[Op,bu]=k.useState(void 0),_t=k.useRef(!1),{playCommandCard:ml,handleCommandConfirm:Pp,handleCounterSelectionConfirm:Ap}=hy({gameState:t,localPlayerId:n,setActionQueue:fl,setCommandContext:pl,setCommandModalCard:Er,setCounterSelectionData:h,moveItem:pe,drawCard:g,updatePlayerScore:O,removeBoardCardStatus:xe}),{activateAbility:Lp,handleBoardCardClick:Nu,handleEmptyCellClick:ju,handleHandCardClick:Gs,handleAnnouncedCardDoubleClick:Ws}=my({gameState:t,localPlayerId:n,abilityMode:Te,setAbilityMode:_n,cursorStack:G,setCursorStack:Be,commandContext:Dn,setCommandContext:pl,setViewingDiscard:te,setNoTargetOverlay:Dp,setPlayMode:ft,setCounterSelectionData:h,interactionLock:_t,moveItem:pe,drawCard:g,updatePlayerScore:O,markAbilityUsed:Ue,applyGlobalEffect:zt,swapCards:Ct,transferStatus:Jt,transferAllCounters:so,resurrectDiscardedCard:As,spawnToken:Ls,scoreLine:Ms,nextPhase:ye,modifyBoardCardPower:q,addBoardCardStatus:we,removeBoardCardStatus:xe,removeBoardCardStatusByOwner:je});k.useMemo(()=>t.players.filter(N=>!N.isDummy&&!N.isDisconnected).length,[t.players]);const hl=n===null&&t.gameId!==null,Mp=k.useMemo(()=>t.players.filter(N=>!N.isDummy).length,[t.players]),Iu=n===1,Xe=k.useMemo(()=>t.players.find(N=>N.id===n),[t.players,n]),Up=t.gameId&&(Xe||hl),or=k.useMemo(()=>{const N=new Map;return t.players.forEach(U=>N.set(U.id,U.color)),N},[t.players]),co=!!Te||!!G;k.useEffect(()=>{var N;if(t.isScoringStep&&zs&&!Te){const U=t.activeTurnPlayerId;if(U!==void 0&&(U===n||(N=t.players.find(ie=>ie.id===U))!=null&&N.isDummy)){let ie=null;t.board.some((Oe,J)=>Oe.some((de,_e)=>{var ce;return de.card&&((ce=de.card.statuses)!=null&&ce.some(W=>W.type==="LastPlayed"&&W.addedByPlayerId===U))?(ie={row:J,col:_e},!0):!1})),_n(ie?{type:"ENTER_MODE",mode:"SCORE_LAST_PLAYED_LINE",sourceCoords:ie,payload:{}}:{type:"ENTER_MODE",mode:"SELECT_LINE_END",payload:{actionType:"SCORE_LINE"}})}}},[t.isScoringStep,zs,t.activeTurnPlayerId,n,t.board,Te]),k.useEffect(()=>{const N=()=>{const U=localStorage.getItem("ui_list_mode");Qe(U===null?!0:U==="true")};return N(),window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]),k.useLayoutEffect(()=>{if(!be){bu(void 0);return}const N=()=>{if(kr.current){const Oe=window.innerWidth,J=kr.current.getBoundingClientRect();if(J.width===0)return;const ce=(Oe-J.width)/2-10;bu(Math.max(0,ce))}},U=new ResizeObserver(N);kr.current&&U.observe(kr.current),window.addEventListener("resize",N),N();const ie=setTimeout(N,100);return()=>{U.disconnect(),window.removeEventListener("resize",N),clearTimeout(ie)}},[be,n,t.activeGridSize]),k.useLayoutEffect(()=>{G&&sn.current&&dl.current&&(sn.current.style.left=`${dl.current.x-2}px`,sn.current.style.top=`${dl.current.y-2}px`)},[G]),k.useEffect(()=>{const N=U=>{$s.current={x:U.clientX,y:U.clientY},sn.current&&(G||Te)&&(sn.current.style.left=`${U.clientX-2}px`,sn.current.style.top=`${U.clientY-2}px`)};return window.addEventListener("mousemove",N),(G||Te)&&sn.current&&(sn.current.style.left=`${$s.current.x-2}px`,sn.current.style.top=`${$s.current.y-2}px`),()=>{window.removeEventListener("mousemove",N)}},[G,Te]),k.useEffect(()=>{var N,U,ie,Oe,J;if(Fs.length>0&&!Te&&!G){const de=Fs[0];fl(ce=>ce.slice(1));const _e=(ce,W)=>{let le=0;return ce==="Aim"?t.board.forEach(ue=>ue.forEach(Ne=>{var $e,Tt;(Tt=($e=Ne.card)==null?void 0:$e.statuses)!=null&&Tt.some(Pe=>Pe.type==="Aim"&&Pe.addedByPlayerId===W)&&le++})):ce==="Exploit"&&t.board.forEach(ue=>ue.forEach(Ne=>{var $e,Tt;(Tt=($e=Ne.card)==null?void 0:$e.statuses)!=null&&Tt.some(Pe=>Pe.type==="Exploit"&&Pe.addedByPlayerId===W)&&le++})),le};if(de.type==="GLOBAL_AUTO_APPLY"){if((N=de.payload)!=null&&N.cleanupCommand&&de.sourceCard){const ce=de.sourceCard;if(ce.id==="dummy")return;pe({card:ce,source:"announced",playerId:ce.ownerId},{target:"discard",playerId:ce.ownerId})}else if((U=de.payload)!=null&&U.dynamicResource){const{type:ce,factor:W,ownerId:le}=de.payload.dynamicResource,ue=_e(W,le);if(ce==="draw"&&ue>0)for(let Ne=0;Ne<ue;Ne++)g(le)}else if((ie=de.payload)!=null&&ie.resourceChange){const{draw:ce,score:W}=de.payload.resourceChange,le=((Oe=de.sourceCard)==null?void 0:Oe.ownerId)||t.activeTurnPlayerId;if(le!==void 0){if(ce){const ue=typeof ce=="number"?ce:1;for(let Ne=0;Ne<ue;Ne++)g(le)}W&&O(le,W)}}else if((J=de.payload)!=null&&J.contextReward&&de.sourceCard){const ce=de.payload.contextReward;let W=0;if(Dn.lastMovedCardCoords){const{row:le,col:ue}=Dn.lastMovedCardCoords,Ne=t.board[le][ue].card;Ne&&(W=Math.max(0,Ne.power+(Ne.powerModifier||0)))}if(W>0){const le=de.sourceCard.ownerId;if(ce==="DRAW_MOVED_POWER"||ce==="DRAW_EQUAL_POWER")for(let ue=0;ue<W;ue++)g(le);else ce==="SCORE_MOVED_POWER"&&O(le,W)}ce==="STUN_MOVED_UNIT"&&Dn.lastMovedCardCoords&&we(Dn.lastMovedCardCoords,"Stun",de.sourceCard.ownerId)}}else if(de.type==="CREATE_STACK"){let ce=de.count||1;de.dynamicCount&&(ce=_e(de.dynamicCount.factor,de.dynamicCount.ownerId)),ce>0&&de.tokenType&&Be({type:de.tokenType,count:ce,isDragging:!1,sourceCoords:de.sourceCoords,excludeOwnerId:de.excludeOwnerId,onlyOpponents:de.onlyOpponents||de.targetOwnerId===-1,onlyFaceDown:de.onlyFaceDown,isDeployAbility:de.isDeployAbility,requiredTargetStatus:de.requiredTargetStatus,mustBeAdjacentToSource:de.mustBeAdjacentToSource,mustBeInLineWithSource:de.mustBeInLineWithSource,placeAllAtOnce:de.placeAllAtOnce,targetOwnerId:de.targetOwnerId})}else _n(de)}},[Fs,Te,G,n,g,O,t.activeTurnPlayerId,t.board,pe,Dn,we]),k.useEffect(()=>{const N=U=>{if(!G)return;const ie=document.elementFromPoint(U.clientX,U.clientY),Oe=ie==null?void 0:ie.closest("[data-hand-card]");if(Oe){const de=Oe.getAttribute("data-hand-card");if(de){const[_e,ce]=de.split(","),W=parseInt(_e,10),le=parseInt(ce,10),ue=t.players.find($e=>$e.id===W),Ne=ue==null?void 0:ue.hand[le];if(ue&&Ne){const $e={targetOwnerId:G.targetOwnerId,excludeOwnerId:G.excludeOwnerId,onlyOpponents:G.onlyOpponents||G.targetOwnerId===-1,onlyFaceDown:G.onlyFaceDown,requiredTargetStatus:G.requiredTargetStatus,tokenType:G.type};if(!Lo({card:Ne,ownerId:W,location:"hand"},$e,n,t.players))return;if(G.targetOwnerId,G.type==="Revealed"&&W!==n&&!ue.isDummy){n!==null&&(ee({source:"hand",ownerId:W,cardIndex:le},n),G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),G.count>1?Be(Pe=>Pe?{...Pe,count:Pe.count-1}:null):Be(null),_t.current=!0,setTimeout(()=>{_t.current=!1},300));return}v({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:G.type,count:1},{target:"hand",playerId:W,cardIndex:le,boardCoords:void 0}),G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),G.count>1?Be(Pe=>Pe?{...Pe,count:Pe.count-1}:null):Be(null),_t.current=!0,setTimeout(()=>{_t.current=!1},300);return}}}const J=ie==null?void 0:ie.closest("[data-board-coords]");if(J){const de=J.getAttribute("data-board-coords");if(de){const[_e,ce]=de.split(","),W=parseInt(_e,10),le=parseInt(ce,10),ue=t.board[W][le].card;if(ue&&ue.ownerId!==void 0){const Ne={targetOwnerId:G.targetOwnerId,excludeOwnerId:G.excludeOwnerId,onlyOpponents:G.onlyOpponents||G.targetOwnerId===-1,onlyFaceDown:G.onlyFaceDown,requiredTargetStatus:G.requiredTargetStatus,mustBeAdjacentToSource:G.mustBeAdjacentToSource,mustBeInLineWithSource:G.mustBeInLineWithSource,sourceCoords:G.sourceCoords,tokenType:G.type};if(!Lo({card:ue,ownerId:ue.ownerId,location:"board",boardCoords:{row:W,col:le}},Ne,n,t.players))return;const Tt=t.players.find(Pe=>Pe.id===ue.ownerId);if(G.type==="Revealed"&&ue.ownerId!==n&&!(Tt!=null&&Tt.isDummy)){ue.isFaceDown?n!==null&&ee({source:"board",ownerId:ue.ownerId,boardCoords:{row:W,col:le}},n):v({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:G.type,count:1},{target:"board",boardCoords:{row:W,col:le}}),G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),G.count>1?Be(Pe=>Pe?{...Pe,count:Pe.count-1}:null):Be(null),_t.current=!0,setTimeout(()=>{_t.current=!1},300);return}}if(ue){const Ne=G.placeAllAtOnce?G.count:1;v({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:G.type,count:Ne},{target:"board",boardCoords:{row:W,col:le}}),G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),G.count>Ne?Be($e=>$e?{...$e,count:$e.count-Ne}:null):Be(null),_t.current=!0,setTimeout(()=>{_t.current=!1},300)}}}else{const de=ie==null?void 0:ie.closest(".counter-modal-content");G.isDragging?Be(de?_e=>_e?{..._e,isDragging:!1}:null:null):de||Be(null)}};return window.addEventListener("mouseup",N),()=>{window.removeEventListener("mouseup",N)}},[G,v,t,n,Q,ee,Ue]),k.useEffect(()=>{const N=U=>{_t.current&&(U.stopPropagation(),U.preventDefault())};return window.addEventListener("click",N,!0),()=>window.removeEventListener("click",N,!0)},[]),k.useEffect(()=>{const N=ie=>{["INPUT","TEXTAREA","SELECT"].includes(ie.target.tagName)||(ie.code==="Space"&&(ie.preventDefault(),t.isGameStarted&&ye()),ie.key==="Escape"&&(Te&&Te.sourceCoords&&Te.sourceCoords.row>=0&&Ue(Te.sourceCoords,Te.isDeployAbility),G&&G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),Be(null),ft(null),_n(null),te(null),Er(null),fl([]),pl({}),h(null)))},U=ie=>{(G||it||Te)&&(ie.preventDefault(),Te&&Te.sourceCoords&&Te.sourceCoords.row>=0&&Ue(Te.sourceCoords,Te.isDeployAbility),G&&G.sourceCoords&&Ue(G.sourceCoords,G.isDeployAbility),Be(null),ft(null),_n(null),te(null),h(null))};return window.addEventListener("keydown",N),window.addEventListener("contextmenu",U),()=>{window.removeEventListener("keydown",N),window.removeEventListener("contextmenu",U)}},[G,it,Te,Ue,t.isGameStarted,ye]),k.useEffect(()=>{var J,de;let N=Te;G&&!Te&&(N={type:"CREATE_STACK",tokenType:G.type,count:G.count,onlyFaceDown:G.onlyFaceDown,onlyOpponents:G.onlyOpponents,targetOwnerId:G.targetOwnerId,excludeOwnerId:G.excludeOwnerId,requiredTargetStatus:G.requiredTargetStatus,mustBeAdjacentToSource:G.mustBeAdjacentToSource,mustBeInLineWithSource:G.mustBeInLineWithSource,sourceCoords:G.sourceCoords});const U=((J=N==null?void 0:N.sourceCard)==null?void 0:J.ownerId)??(N!=null&&N.sourceCoords?(de=t.board[N.sourceCoords.row][N.sourceCoords.col].card)==null?void 0:de.ownerId:null)??(n||t.activeTurnPlayerId),ie=Ci(N,t,U,Dn),Oe=[];if(Te&&Te.type==="ENTER_MODE"&&Te.mode==="SELECT_TARGET")Te.payload.filter&&t.players.forEach(_e=>{_e.hand.forEach((ce,W)=>{Te.payload.filter(ce)&&Oe.push({playerId:_e.id,cardIndex:W})})});else if(G){const _e=ll[G.type];(G.type==="Revealed"||_e&&_e.allowedTargets&&_e.allowedTargets.includes("hand"))&&t.players.forEach(W=>{W.hand.forEach((le,ue)=>{const Ne={targetOwnerId:G.targetOwnerId,excludeOwnerId:G.excludeOwnerId,onlyOpponents:G.onlyOpponents||G.targetOwnerId===-1,onlyFaceDown:G.onlyFaceDown,requiredTargetStatus:G.requiredTargetStatus,tokenType:G.type};Lo({card:le,ownerId:W.id,location:"hand"},Ne,n,t.players)&&Oe.push({playerId:W.id,cardIndex:ue})})})}if(Te&&(Te.mode==="SCORE_LAST_PLAYED_LINE"||Te.mode==="SELECT_LINE_END")){const _e=t.board.length;if(Te.sourceCoords){for(let ce=0;ce<_e;ce++)ie.push({row:ce,col:Te.sourceCoords.col});for(let ce=0;ce<_e;ce++)ie.push({row:Te.sourceCoords.row,col:ce})}else for(let ce=0;ce<_e;ce++)for(let W=0;W<_e;W++)ie.push({row:ce,col:W})}Ip(ie),_p(Oe)},[Te,G,t.board,t.players,n,Dn]),k.useEffect(()=>{if(Z){Cu(Z);const N=setTimeout(()=>Cu(null),1e3);return()=>clearTimeout(N)}},[Z]),k.useEffect(()=>{if(ke&&ke.length>0){const N=ke.map(ie=>({...ie,id:`float_${Date.now()}_${Math.random()}`}));Eu(ie=>[...ie,...N]);const U=setTimeout(()=>{Eu(ie=>ie.filter(Oe=>!N.find(J=>J.id===Oe.id)))},1500);return()=>clearTimeout(U)}},[ke]);const mn=()=>{nr(!1),rr(!1),te(null),fe(null),he(null),uo(!1),Er(null),h(null)},zp=()=>{Iu&&(t.gameMode===En.FreeForAll?a():L(!0))},Fp=N=>{c(N),L(!1),a()},_u=N=>{l(N),wr(!1)},Bp=()=>{o(),r(1)},$p=()=>{oe(),wr(!0)},Du=N=>{localStorage.setItem("custom_ws_url",N.trim());const U=localStorage.getItem("ui_list_mode");Qe(U===null?!0:U==="true"),io(!1),Se()},Gp=()=>{const N=Date.now();ot(N),localStorage.setItem("image_refresh_data",JSON.stringify({version:N,timestamp:N})),ne()},Rn=N=>{n!==null&&re({...N,playerId:n})},fo=()=>St(null),On=(N,U,ie)=>{N.preventDefault(),!(Te||G||it)&&(N.stopPropagation(),n!==null&&St({x:N.clientX,y:N.clientY,type:U,data:ie}))},Ru=(N,U)=>{var _e;if(Te||G||_t.current)return;const ie=N.ownerId===n;if(ie&&N.isFaceDown){X(U);return}const Oe=N.ownerId?t.players.find(ce=>ce.id===N.ownerId):void 0,J=(_e=N.statuses)==null?void 0:_e.some(ce=>ce.type==="Revealed"&&ce.addedByPlayerId===n);!N.isFaceDown||N.revealedTo==="all"||Array.isArray(N.revealedTo)&&N.revealedTo.includes(n)||J||ie?he({card:N,player:Oe}):n!==null&&ee({source:"board",ownerId:N.ownerId,boardCoords:U},n)},Ou=N=>{Te||G||_t.current||Rn({type:"cell",row:N.row,col:N.col})},Vs=(N,U,ie)=>{var Oe;if(!(Te||G)&&!_t.current){if(N.id===n||N.isDummy){if(U.deck===De.Command){mn(),ml(U,{card:U,source:"hand",playerId:N.id,cardIndex:ie});return}mn();const J={card:U,source:"hand",playerId:N.id,cardIndex:ie};ft({card:U,sourceItem:J,faceDown:!1})}else if(n!==null){const J=U.revealedTo==="all",de=Array.isArray(U.revealedTo)&&U.revealedTo.includes(n),_e=(Oe=U.statuses)==null?void 0:Oe.some(W=>W.type==="Revealed"&&W.addedByPlayerId===n);J||de||_e||!!N.isDummy||!!N.isDisconnected?he({card:U,player:N}):ee({source:"hand",ownerId:N.id,cardIndex:ie},n)}}},Wp=N=>{te(null),fe(N)},Vp=N=>{fe(null),te({player:N})},Et=k.useMemo(()=>F?t.players.find(N=>N.id===F.player.id)||F.player:null,[F,t.players]),Yt=k.useMemo(()=>K?t.players.find(N=>N.id===K.id)||K:null,[K,t.players]),Hp=k.useMemo(()=>{var de,_e,ce;if(!Ke||n===null)return null;const{type:N,data:U,x:ie,y:Oe}=Ke;let J=[];if(N==="emptyBoardCell")J.push({label:"Highlight Cell",onClick:()=>Rn({type:"cell",row:U.boardCoords.row,col:U.boardCoords.col})}),J.push({label:"Highlight Column",onClick:()=>Rn({type:"col",col:U.boardCoords.col})}),J.push({label:"Highlight Row",onClick:()=>Rn({type:"row",row:U.boardCoords.row})});else if(N==="boardItem"||N==="announcedCard"){const W=N==="boardItem";let le=W?t.board[U.boardCoords.row][U.boardCoords.col].card:U.card,ue=W?null:U.player;if(!W&&ue){const Ve=t.players.find(qt=>qt.id===ue.id);Ve&&(ue=Ve,le=Ve.announcedCard||le)}if(!le)return St(null),null;const Ne=le.ownerId?t.players.find(Ve=>Ve.id===le.ownerId):void 0,$e=le.ownerId===n,Tt=!!(Ne!=null&&Ne.isDummy),Pe=$e||Tt,Hs=(de=le.statuses)==null?void 0:de.some(Ve=>Ve.type==="Revealed"&&Ve.addedByPlayerId===n),br=!le.isFaceDown||le.revealedTo==="all"||Array.isArray(le.revealedTo)&&le.revealedTo.includes(n)||Hs;(br||$e&&le.isFaceDown)&&J.push({label:e("view"),isBold:!0,onClick:()=>he({card:le,player:Ne})}),!W&&Pe&&le.deck===De.Command&&J.push({label:e("play"),isBold:!0,onClick:()=>{ml(le,{card:le,source:"announced",playerId:ue.id})}}),W&&Pe&&(le.isFaceDown?J.push({label:e("flipUp"),isBold:!0,onClick:()=>X(U.boardCoords)}):J.push({label:e("flipDown"),onClick:()=>H(U.boardCoords)}));const Nr=W?{card:le,source:"board",boardCoords:U.boardCoords}:{card:le,source:"announced",playerId:ue.id},hn=le.ownerId,gn=(le==null?void 0:le.deck)===De.Tokens||(le==null?void 0:le.deck)==="counter";if(W&&(Pe&&le.isFaceDown&&J.push({label:e("revealToAll"),onClick:()=>M(U.boardCoords,"all")}),!$e&&!br&&J.push({label:e("requestReveal"),onClick:()=>ee({source:"board",ownerId:le.ownerId,boardCoords:U.boardCoords},n)})),J.length>0&&J.push({isDivider:!0}),Pe&&br&&(J.push({label:e("toHand"),disabled:gn,onClick:()=>pe(Nr,{target:"hand",playerId:hn})}),hn)){const Ve=gn?"Remove":e("toDiscard");J.push({label:Ve,onClick:()=>pe(Nr,{target:"discard",playerId:hn})}),J.push({label:"To Deck Top",disabled:gn,onClick:()=>pe(Nr,{target:"deck",playerId:hn,deckPosition:"top"})}),J.push({label:"To Deck Bottom",disabled:gn,onClick:()=>pe(Nr,{target:"deck",playerId:hn,deckPosition:"bottom"})})}if(W&&(J.push({isDivider:!0}),J.push({label:"Highlight Cell",onClick:()=>Rn({type:"cell",row:U.boardCoords.row,col:U.boardCoords.col})}),J.push({label:"Highlight Column",onClick:()=>Rn({type:"col",col:U.boardCoords.col})}),J.push({label:"Highlight Row",onClick:()=>Rn({type:"row",row:U.boardCoords.row})})),br){const Ve=["Aim","Exploit","Stun","Shield","Support","Threat","Revealed"],qt=[];Ve.forEach(Qt=>{var jr;(((jr=le.statuses)==null?void 0:jr.filter(qp=>qp.type===Qt).length)||0)>0&&qt.push({type:"statusControl",label:Qt,onAdd:()=>W?we(U.boardCoords,Qt,n):ae(ue.id,Qt,n),onRemove:()=>W?xe(U.boardCoords,Qt):P(ue.id,Qt),removeDisabled:!1})}),qt.length>0&&(J.length>0&&!("isDivider"in J[J.length-1])&&J.push({isDivider:!0}),J.push(...qt)),J.length>0&&!("isDivider"in J[J.length-1])&&J.push({isDivider:!0}),J.push({type:"statusControl",label:"Power",onAdd:()=>W?q(U.boardCoords,1):S(ue.id,1),onRemove:()=>W?q(U.boardCoords,-1):S(ue.id,-1),removeDisabled:!1})}}else if(N==="token_panel_item"){const{card:W}=U,le={card:W,source:"token_panel"};J.push({label:e("view"),isBold:!0,onClick:()=>he({card:W})}),J.push({isDivider:!0}),J.push({label:e("play"),isBold:!0,onClick:()=>{mn(),ft({card:W,sourceItem:le,faceDown:!1})}}),J.push({label:e("playFaceDown"),onClick:()=>{mn(),ft({card:W,sourceItem:le,faceDown:!0})}})}else if(["handCard","discardCard","deckCard"].includes(N)){let{card:W,boardCoords:le,player:ue,cardIndex:Ne}=U;const $e=t.players.find(an=>an.id===ue.id);$e&&(ue=$e,N==="handCard"?W=$e.hand[Ne]||W:N==="discardCard"?W=$e.discard[Ne]||W:N==="deckCard"&&(W=$e.deck[Ne]||W));const Tt=ue.id===n||!!ue.isDummy,Pe=t.players.find(an=>an.id===n),Hs=(Pe==null?void 0:Pe.teamId)!==void 0&&ue.teamId===Pe.teamId,br=W.revealedTo==="all"||Array.isArray(W.revealedTo)&&W.revealedTo.includes(n),Nr=(_e=W.statuses)==null?void 0:_e.some(an=>an.type==="Revealed"&&an.addedByPlayerId===n),hn=N!=="handCard"?!0:ue.id===n||Hs||!!ue.isDummy||!!ue.isDisconnected||br||Nr;let gn;N==="handCard"?gn="hand":N==="discardCard"?gn="discard":gn="deck";const Ve={card:W,source:gn,playerId:ue==null?void 0:ue.id,cardIndex:Ne,boardCoords:le},qt=W.ownerId,Qt=(W==null?void 0:W.deck)===De.Tokens||(W==null?void 0:W.deck)==="counter";if(hn){const an=W.ownerId?t.players.find(jr=>jr.id===W.ownerId):void 0;J.push({label:e("view"),isBold:!0,onClick:()=>he({card:W,player:an})})}Tt?(W.deck===De.Command?J.push({label:e("play"),isBold:!0,onClick:()=>{mn(),ml(W,Ve)}}):N==="handCard"?(J.push({label:e("play"),isBold:!0,onClick:()=>{mn(),ft({card:W,sourceItem:Ve,faceDown:!1})}}),J.push({label:e("playFaceDown"),onClick:()=>{mn(),ft({card:W,sourceItem:Ve,faceDown:!0})}})):hn&&["discardCard","deckCard"].includes(N)&&(J.push({label:e("play"),isBold:!0,onClick:()=>{mn(),ft({card:W,sourceItem:Ve,faceDown:!1})}}),J.push({label:e("playFaceDown"),onClick:()=>{mn(),ft({card:W,sourceItem:Ve,faceDown:!0})}})),J.length>0&&J.push({isDivider:!0}),N==="handCard"&&J.push({label:e("revealToAll"),onClick:()=>Q(ue.id,Ne,"all")}),J.length>0&&!("isDivider"in J[J.length-1])&&J.push({isDivider:!0}),N==="discardCard"?J.push({label:e("toHand"),disabled:Qt,onClick:()=>pe(Ve,{target:"hand",playerId:qt})}):N==="handCard"&&J.push({label:e("toDiscard"),onClick:()=>pe(Ve,{target:"discard",playerId:qt})}),["handCard","discardCard"].includes(N)&&qt&&(J.push({label:"To Deck Top",disabled:Qt,onClick:()=>pe(Ve,{target:"deck",playerId:qt,deckPosition:"top"})}),J.push({label:"To Deck Bottom",disabled:Qt,onClick:()=>pe(Ve,{target:"deck",playerId:qt,deckPosition:"bottom"})})),N==="deckCard"&&(J.push({label:e("toHand"),disabled:Qt,onClick:()=>pe(Ve,{target:"hand",playerId:ue.id})}),J.push({label:e("toDiscard"),onClick:()=>pe(Ve,{target:"discard",playerId:ue.id})})),N==="handCard"&&(((ce=W.statuses)==null?void 0:ce.filter(jr=>jr.type==="Revealed").length)||0)>0&&(J.length>0&&!("isDivider"in J[J.length-1])&&J.push({isDivider:!0}),J.push({type:"statusControl",label:"Revealed",onAdd:()=>D(ue.id,Ne,"Revealed",n),onRemove:()=>z(ue.id,Ne,"Revealed"),removeDisabled:!1}))):N==="handCard"&&!hn&&J.push({label:e("requestReveal"),onClick:()=>ee({source:"hand",ownerId:ue.id,cardIndex:Ne},n)})}else if(N==="deckPile"){const{player:W}=U;(W.id===n||!!W.isDummy)&&(J.push({label:"Draw Card",onClick:()=>g(W.id)}),J.push({label:"Draw Starting Hand (6)",onClick:()=>{for(let ue=0;ue<6;ue++)g(W.id)}}),J.push({label:"Shuffle",onClick:()=>Ee(W.id)})),J.push({label:e("view"),onClick:()=>Wp(W)})}else if(N==="discardPile"){const{player:W}=U;J.push({label:e("view"),onClick:()=>Vp(W)})}return J=J.filter((W,le)=>"isDivider"in W?!(le===0||le===J.length-1||"isDivider"in J[le-1]):!0),s.jsx(ly,{x:ie,y:Oe,items:J,onClose:fo})},[t,n,pe,Rn,we,xe,q,ae,P,S,D,z,g,Ee,X,H,Q,M,ee,Ce,Lp,e,Et,Yt,ml,Ke]);k.useEffect(()=>{window.addEventListener("click",fo);const N=U=>{U.target.closest("[data-interactive]")||fo()};return window.addEventListener("contextmenu",N),()=>{window.removeEventListener("click",fo),window.removeEventListener("contextmenu",N)}},[]),k.useEffect(()=>{j&&fo()},[j]);const Kp=N=>{if(Cr)nr(!1),E(null);else{rr(!1),T(null);const U=N.currentTarget.getBoundingClientRect();E({top:U.top,left:U.left}),nr(!0)}},Jp=N=>{if(ul)rr(!1),T(null);else{nr(!1),E(null);const U=N.currentTarget.getBoundingClientRect();T({top:U.top,left:U.left}),rr(!0)}},Yp=(N,U)=>{dl.current={x:U.clientX,y:U.clientY},Be(ie=>ie&&ie.type===N?{type:N,count:ie.count+1,isDragging:!0,sourceCoords:ie.sourceCoords}:{type:N,count:1,isDragging:!0})};return Up?s.jsxs("div",{className:`relative w-screen h-screen overflow-hidden ${G?"cursor-none":""}`,children:[s.jsx(Kg,{gameId:t.gameId,isGameStarted:t.isGameStarted,onStartGame:zp,onResetGame:ge,activeGridSize:t.activeGridSize,onGridSizeChange:d,dummyPlayerCount:t.dummyPlayerCount,onDummyPlayerCountChange:x,realPlayerCount:Mp,connectionStatus:I,onExitGame:V,onOpenTokensModal:Kp,onOpenCountersModal:Jp,gameMode:t.gameMode,onGameModeChange:w,isPrivate:t.isPrivate,onPrivacyChange:p,isHost:Iu,onSyncGame:Gp,currentPhase:t.currentPhase,onNextPhase:ye,onPrevPhase:Le,onSetPhase:Me,isAutoAbilitiesEnabled:zs,onToggleAutoAbilities:jp,isScoringStep:t.isScoringStep,currentRound:t.currentRound,turnNumber:t.turnNumber}),t.isRoundEndModalOpen&&s.jsx(iy,{gameState:t,onConfirm:Us,localPlayerId:n,onExit:V}),Sr&&s.jsx(sy,{isOpen:!!Sr,card:Sr,playerColorMap:new Map(t.players.map(N=>[N.id,N.color])),onConfirm:N=>Pp(N,Sr),onCancel:()=>{Er(null),fl([]),pl({})}}),Tr&&s.jsx(uy,{isOpen:!!Tr,data:Tr,onConfirm:N=>Ap(N,Tr),onCancel:()=>{h(null),_n(null)}}),Hp,be?s.jsxs("div",{className:"relative h-full w-full pt-14 overflow-hidden bg-gray-900",children:[Xe&&s.jsx("div",{ref:Rp,className:"absolute left-0 top-14 bottom-[2px] z-30 bg-panel-bg shadow-xl flex flex-col border-r border-gray-700 w-fit min-w-0 pl-[2px] py-[2px] pr-0 transition-all duration-100 overflow-hidden",style:{width:Op},children:s.jsx(Ea,{player:Xe,isLocalPlayer:!0,localPlayerId:n,isSpectator:hl,isGameStarted:t.isGameStarted,position:Xe.id,onNameChange:N=>C(Xe.id,N),onColorChange:N=>_(Xe.id,N),onScoreChange:N=>O(Xe.id,N),onDeckChange:N=>f(Xe.id,N),onLoadCustomDeck:N=>m(Xe.id,N),onDrawCard:()=>g(Xe.id),handleDrop:v,draggedItem:j,setDraggedItem:R,openContextMenu:On,onHandCardDoubleClick:Vs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:Xe==null?void 0:Xe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:me,imageRefreshVersion:Fe,layoutMode:"list-local",onCardClick:Gs,validHandTargets:Bs,onAnnouncedCardDoubleClick:Ws,currentPhase:t.currentPhase,disableActiveHighlights:co,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId},Xe.id)}),s.jsx("div",{className:"absolute top-14 bottom-0 z-10 flex items-center justify-center pointer-events-none w-full left-0",children:s.jsx("div",{ref:kr,className:"pointer-events-auto h-full aspect-square flex items-center justify-center py-[2px]",children:s.jsx(Wc,{board:t.board,isGameStarted:t.isGameStarted,activeGridSize:t.activeGridSize,handleDrop:v,draggedItem:j,setDraggedItem:R,openContextMenu:On,playMode:it,setPlayMode:ft,highlight:wu,playerColorMap:or,localPlayerId:n,onCardDoubleClick:Ru,onEmptyCellDoubleClick:Ou,imageRefreshVersion:Fe,cursorStack:G,setCursorStack:Be,currentPhase:t.currentPhase,activeTurnPlayerId:t.activeTurnPlayerId,onCardClick:Nu,onEmptyCellClick:ju,validTargets:Tu,noTargetOverlay:ku,disableActiveHighlights:co,activeFloatingTexts:Su})})}),s.jsx("div",{className:"absolute right-0 top-14 bottom-0 z-30 w-[34.2rem] bg-panel-bg shadow-xl flex flex-col pt-[3px] pb-[3px] border-l border-gray-700 gap-[3px]",children:t.players.filter(N=>N.id!==n).map(N=>s.jsx("div",{className:"w-full flex-1 min-h-0",children:s.jsx(Ea,{player:N,isLocalPlayer:!1,localPlayerId:n,isSpectator:hl,isGameStarted:t.isGameStarted,position:N.id,onNameChange:U=>C(N.id,U),onColorChange:U=>_(N.id,U),onScoreChange:U=>O(N.id,U),onDeckChange:U=>f(N.id,U),onLoadCustomDeck:U=>m(N.id,U),onDrawCard:()=>g(N.id),handleDrop:v,draggedItem:j,setDraggedItem:R,openContextMenu:On,onHandCardDoubleClick:Vs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:Xe==null?void 0:Xe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:me,imageRefreshVersion:Fe,layoutMode:"list-remote",onCardClick:Gs,validHandTargets:Bs,onAnnouncedCardDoubleClick:Ws,currentPhase:t.currentPhase,disableActiveHighlights:co,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId})},N.id))})]}):s.jsxs(s.Fragment,{children:[t.players.map(N=>s.jsx(Ea,{player:N,isLocalPlayer:N.id===n,localPlayerId:n,isSpectator:hl,isGameStarted:t.isGameStarted,position:N.id,onNameChange:U=>C(N.id,U),onColorChange:U=>_(N.id,U),onScoreChange:U=>O(N.id,U),onDeckChange:U=>f(N.id,U),onLoadCustomDeck:U=>m(N.id,U),onDrawCard:()=>g(N.id),handleDrop:v,draggedItem:j,setDraggedItem:R,openContextMenu:On,onHandCardDoubleClick:Vs,playerColorMap:or,allPlayers:t.players,localPlayerTeamId:Xe==null?void 0:Xe.teamId,activeTurnPlayerId:t.activeTurnPlayerId,onToggleActiveTurn:me,imageRefreshVersion:Fe,layoutMode:"standard",onCardClick:Gs,validHandTargets:Bs,onAnnouncedCardDoubleClick:Ws,currentPhase:t.currentPhase,disableActiveHighlights:co,roundWinners:t.roundWinners,startingPlayerId:t.startingPlayerId},N.id)),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-0",children:s.jsx("div",{ref:kr,className:"pointer-events-auto h-[80%] aspect-square flex items-center justify-center",children:s.jsx(Wc,{board:t.board,isGameStarted:t.isGameStarted,activeGridSize:t.activeGridSize,handleDrop:v,draggedItem:j,setDraggedItem:R,openContextMenu:On,playMode:it,setPlayMode:ft,highlight:wu,playerColorMap:or,localPlayerId:n,onCardDoubleClick:Ru,onEmptyCellDoubleClick:Ou,imageRefreshVersion:Fe,cursorStack:G,setCursorStack:Be,currentPhase:t.currentPhase,activeTurnPlayerId:t.activeTurnPlayerId,onCardClick:Nu,onEmptyCellClick:ju,validTargets:Tu,noTargetOverlay:ku,disableActiveHighlights:co,activeFloatingTexts:Su})})})]}),s.jsx(yp,{isOpen:sl,onClose:()=>wr(!1),onJoin:_u,games:B}),s.jsx(Vc,{isOpen:!!F,onClose:()=>te(null),title:F!=null&&F.pickConfig?F.pickConfig.action==="recover"?"Recover Device":"Resurrect Unit":"Discard Pile",player:Et,cards:(Et==null?void 0:Et.discard)||[],setDraggedItem:R,canInteract:!!(F!=null&&F.pickConfig)||!!Et&&(Et.id===n||!!Et.isDummy),onCardContextMenu:(N,U)=>{!(F!=null&&F.pickConfig)&&Et&&On(N,"discardCard",{card:Et.discard[U],player:Et,cardIndex:U})},onCardClick:N=>{var U,ie,Oe;if(F!=null&&F.pickConfig&&Et){const J=F.pickConfig,de=Et.discard[N];let _e=!1;J.filterType==="Device"&&(_e=((U=de.types)==null?void 0:U.includes("Device"))||!1),J.filterType==="Optimates"&&(_e=(((ie=de.types)==null?void 0:ie.includes("Optimates"))||de.faction==="Optimates")&&((Oe=de.types)==null?void 0:Oe.includes("Unit"))||!1),_e&&(J.action==="recover"?tr(Et.id,N):J.action==="resurrect"&&Te&&Te.sourceCoords&&_n(ce=>ce?{...ce,payload:{...ce.payload,selectedCardIndex:N}}:null),te(null))}},playerColorMap:or,localPlayerId:n,imageRefreshVersion:Fe}),s.jsx(Vc,{isOpen:!!K,onClose:()=>fe(null),title:"Deck",player:Yt,cards:(Yt==null?void 0:Yt.deck)||[],setDraggedItem:R,canInteract:!!Yt&&(Yt.id===n||!!Yt.isDummy),isDeckView:!0,onCardContextMenu:(N,U)=>Yt&&On(N,"deckCard",{card:Yt.deck[U],player:Yt,cardIndex:U}),playerColorMap:or,localPlayerId:n,imageRefreshVersion:Fe}),s.jsx(Jg,{isOpen:Cr,onClose:()=>{nr(!1),E(null)},setDraggedItem:R,openContextMenu:On,canInteract:!!n,anchorEl:y,imageRefreshVersion:Fe,draggedItem:j}),s.jsx(qg,{isOpen:ul,onClose:()=>{rr(!1),T(null)},setDraggedItem:R,canInteract:!!n,anchorEl:b,imageRefreshVersion:Fe,onCounterMouseDown:Yp,cursorStack:G}),A&&t.gameMode!==En.FreeForAll&&s.jsx(Qg,{players:t.players,gameMode:t.gameMode,onCancel:()=>L(!1),onConfirm:Fp}),t.isReadyCheckActive&&Xe&&s.jsx(Xg,{players:t.players,localPlayer:Xe,onReady:u,onCancel:i}),t.revealRequests.filter(N=>N.toPlayerId===n).map((N,U)=>{const ie=t.players.find(Oe=>Oe.id===N.fromPlayerId);return ie?s.jsx(Zg,{fromPlayer:ie,cardCount:N.cardIdentifiers.length,onAccept:()=>$(ie.id,!0),onDecline:()=>$(ie.id,!1)},U):null}),ve&&s.jsx(vp,{card:ve.card,ownerPlayer:ve.player,onClose:()=>he(null),statusDescriptions:hs,allPlayers:t.players,imageRefreshVersion:Fe}),s.jsx(wp,{isOpen:al,onClose:()=>ao(!1),setViewingCard:he}),s.jsx(Cp,{isOpen:il,onClose:()=>io(!1),onSave:Du}),s.jsx(bp,{isOpen:cl,onClose:()=>uo(!1)}),s.jsx("div",{ref:sn,className:`fixed pointer-events-none z-[9999] flex items-center justify-center transition-transform duration-75 ${G||Te?"block":"hidden"}`,style:{transform:"translate(5px, 5px)"},children:G&&s.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center",style:{backgroundImage:"url(https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:[no[G.type]?s.jsx("img",{src:no[G.type],alt:G.type,className:"w-8 h-8 object-contain drop-shadow-lg"}):s.jsx("span",{className:"text-white font-bold text-lg drop-shadow-[0_0_2px_black]",children:G.type.charAt(0)}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center border border-white z-10",children:G.count})]})})]}):s.jsx(ay,{handleCreateGame:Bp,setSettingsModalOpen:io,handleOpenJoinModal:$p,setDeckBuilderOpen:ao,setRulesModalOpen:uo,isJoinModalOpen:sl,setJoinModalOpen:wr,handleJoinGame:_u,gamesList:B,isDeckBuilderOpen:al,setViewingCard:he,isSettingsModalOpen:il,handleSaveSettings:Du,isRulesModalOpen:cl,viewingCard:ve,gameState:t,imageRefreshVersion:Fe,t:e})}class yy extends Cn.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){return this.state.hasError?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-4 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong"}),s.jsx("p",{className:"mb-6 text-gray-400",children:"The application encountered an unexpected error."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-bold shadow-lg",children:"Reload Game"})]}):this.props.children}}const Np=document.getElementById("root");if(!Np)throw new Error("Could not find root element to mount to");const xy=ka.createRoot(Np);xy.render(s.jsx(yy,{children:s.jsx(Gg,{children:s.jsx(gy,{})})}));
