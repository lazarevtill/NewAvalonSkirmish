(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Np(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Dc={exports:{}},Qo={},Pc={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),Tp=Symbol.for("react.portal"),bp=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),_p=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Pp=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),Ap=Symbol.for("react.lazy"),mu=Symbol.iterator;function Lp(e){return e===null||typeof e!="object"?null:(e=mu&&e[mu]||e["@@iterator"],typeof e=="function"?e:null)}var Rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oc=Object.assign,Ac={};function Gr(e,t,n){this.props=e,this.context=t,this.refs=Ac,this.updater=n||Rc}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Lc(){}Lc.prototype=Gr.prototype;function la(e,t,n){this.props=e,this.context=t,this.refs=Ac,this.updater=n||Rc}var oa=la.prototype=new Lc;oa.constructor=la;Oc(oa,Gr.prototype);oa.isPureReactComponent=!0;var hu=Array.isArray,Mc=Object.prototype.hasOwnProperty,sa={current:null},Uc={key:!0,ref:!0,__self:!0,__source:!0};function zc(e,t,n){var r,l={},o=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(o=""+t.key),t)Mc.call(t,r)&&!Uc.hasOwnProperty(r)&&(l[r]=t[r]);var a=arguments.length-2;if(a===1)l.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)l[r]===void 0&&(l[r]=a[r]);return{$$typeof:zl,type:e,key:o,ref:i,props:l,_owner:sa.current}}function Mp(e,t){return{$$typeof:zl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ia(e){return typeof e=="object"&&e!==null&&e.$$typeof===zl}function Up(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yu=/\/+/g;function Ps(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Up(""+e.key):t.toString(36)}function po(e,t,n,r,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case zl:case Tp:i=!0}}if(i)return i=e,l=l(i),e=r===""?"."+Ps(i,0):r,hu(l)?(n="",e!=null&&(n=e.replace(yu,"$&/")+"/"),po(l,t,n,"",function(c){return c})):l!=null&&(ia(l)&&(l=Mp(l,n+(!l.key||i&&i.key===l.key?"":(""+l.key).replace(yu,"$&/")+"/")+e)),t.push(l)),1;if(i=0,r=r===""?".":r+":",hu(e))for(var a=0;a<e.length;a++){o=e[a];var u=r+Ps(o,a);i+=po(o,t,n,u,l)}else if(u=Lp(e),typeof u=="function")for(e=u.call(e),a=0;!(o=e.next()).done;)o=o.value,u=r+Ps(o,a++),i+=po(o,t,n,u,l);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Jl(e,t,n){if(e==null)return e;var r=[],l=0;return po(e,r,"","",function(o){return t.call(n,o,l++)}),r}function zp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yt={current:null},mo={transition:null},Fp={ReactCurrentDispatcher:yt,ReactCurrentBatchConfig:mo,ReactCurrentOwner:sa};function Fc(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:Jl,forEach:function(e,t,n){Jl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Jl(e,function(){t++}),t},toArray:function(e){return Jl(e,function(t){return t})||[]},only:function(e){if(!ia(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=Gr;ve.Fragment=bp;ve.Profiler=Ip;ve.PureComponent=la;ve.StrictMode=jp;ve.Suspense=Rp;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fp;ve.act=Fc;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Oc({},e.props),l=e.key,o=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,i=sa.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Mc.call(t,u)&&!Uc.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:zl,type:e.type,key:l,ref:o,props:r,_owner:i}};ve.createContext=function(e){return e={$$typeof:Dp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_p,_context:e},e.Consumer=e};ve.createElement=zc;ve.createFactory=function(e){var t=zc.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Pp,render:e}};ve.isValidElement=ia;ve.lazy=function(e){return{$$typeof:Ap,_payload:{_status:-1,_result:e},_init:zp}};ve.memo=function(e,t){return{$$typeof:Op,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=mo.transition;mo.transition={};try{e()}finally{mo.transition=t}};ve.unstable_act=Fc;ve.useCallback=function(e,t){return yt.current.useCallback(e,t)};ve.useContext=function(e){return yt.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return yt.current.useDeferredValue(e)};ve.useEffect=function(e,t){return yt.current.useEffect(e,t)};ve.useId=function(){return yt.current.useId()};ve.useImperativeHandle=function(e,t,n){return yt.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return yt.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return yt.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return yt.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return yt.current.useReducer(e,t,n)};ve.useRef=function(e){return yt.current.useRef(e)};ve.useState=function(e){return yt.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return yt.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return yt.current.useTransition()};ve.version="18.3.1";Pc.exports=ve;var T=Pc.exports;const In=Np(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=T,Bp=Symbol.for("react.element"),Gp=Symbol.for("react.fragment"),Vp=Object.prototype.hasOwnProperty,Hp=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wp={key:!0,ref:!0,__self:!0,__source:!0};function $c(e,t,n){var r,l={},o=null,i=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)Vp.call(t,r)&&!Wp.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Bp,type:e,key:o,ref:i,props:l,_owner:Hp.current}}Qo.Fragment=Gp;Qo.jsx=$c;Qo.jsxs=$c;Dc.exports=Qo;var s=Dc.exports,ai={},Bc={exports:{}},_t={},Gc={exports:{}},Vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,ee){var L=$.length;$.push(ee);e:for(;0<L;){var te=L-1>>>1,de=$[te];if(0<l(de,ee))$[te]=ee,$[L]=de,L=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ee=$[0],L=$.pop();if(L!==ee){$[0]=L;e:for(var te=0,de=$.length,Oe=de>>>1;te<Oe;){var me=2*(te+1)-1,Te=$[me],Be=me+1,ne=$[Be];if(0>l(Te,L))Be<de&&0>l(ne,Te)?($[te]=ne,$[Be]=L,te=Be):($[te]=Te,$[me]=L,te=me);else if(Be<de&&0>l(ne,L))$[te]=ne,$[Be]=L,te=Be;else break e}}return ee}function l($,ee){var L=$.sortIndex-ee.sortIndex;return L!==0?L:$.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],c=[],f=1,y=null,k=3,_=!1,j=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p($){for(var ee=n(c);ee!==null;){if(ee.callback===null)r(c);else if(ee.startTime<=$)r(c),ee.sortIndex=ee.expirationTime,t(u,ee);else break;ee=n(c)}}function m($){if(N=!1,p($),!j)if(n(u)!==null)j=!0,we(b);else{var ee=n(c);ee!==null&&se(m,ee.startTime-$)}}function b($,ee){j=!1,N&&(N=!1,v(G),G=-1),_=!0;var L=k;try{for(p(ee),y=n(u);y!==null&&(!(y.expirationTime>ee)||$&&!le());){var te=y.callback;if(typeof te=="function"){y.callback=null,k=y.priorityLevel;var de=te(y.expirationTime<=ee);ee=e.unstable_now(),typeof de=="function"?y.callback=de:y===n(u)&&r(u),p(ee)}else r(u);y=n(u)}if(y!==null)var Oe=!0;else{var me=n(c);me!==null&&se(m,me.startTime-ee),Oe=!1}return Oe}finally{y=null,k=L,_=!1}}var O=!1,U=null,G=-1,W=5,V=-1;function le(){return!(e.unstable_now()-V<W)}function ue(){if(U!==null){var $=e.unstable_now();V=$;var ee=!0;try{ee=U(!0,$)}finally{ee?ce():(O=!1,U=null)}}else O=!1}var ce;if(typeof d=="function")ce=function(){d(ue)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,_e=fe.port2;fe.port1.onmessage=ue,ce=function(){_e.postMessage(null)}}else ce=function(){A(ue,0)};function we($){U=$,O||(O=!0,ce())}function se($,ee){G=A(function(){$(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){j||_||(j=!0,we(b))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return k},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function($){switch(k){case 1:case 2:case 3:var ee=3;break;default:ee=k}var L=k;k=ee;try{return $()}finally{k=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=k;k=$;try{return ee()}finally{k=L}},e.unstable_scheduleCallback=function($,ee,L){var te=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?te+L:te):L=te,$){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=L+de,$={id:f++,callback:ee,priorityLevel:$,startTime:L,expirationTime:de,sortIndex:-1},L>te?($.sortIndex=L,t(c,$),n(u)===null&&$===n(c)&&(N?(v(G),G=-1):N=!0,se(m,L-te))):($.sortIndex=de,t(u,$),j||_||(j=!0,we(b))),$},e.unstable_shouldYield=le,e.unstable_wrapCallback=function($){var ee=k;return function(){var L=k;k=ee;try{return $.apply(this,arguments)}finally{k=L}}}})(Vc);Gc.exports=Vc;var Kp=Gc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=T,It=Kp;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hc=new Set,kl={};function ar(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(kl[e]=t,e=0;e<t.length;e++)Hc.add(t[e])}var hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ui=Object.prototype.hasOwnProperty,Yp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gu={},vu={};function qp(e){return ui.call(vu,e)?!0:ui.call(gu,e)?!1:Yp.test(e)?vu[e]=!0:(gu[e]=!0,!1)}function Qp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xp(e,t,n,r){if(t===null||typeof t>"u"||Qp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gt(e,t,n,r,l,o,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){st[e]=new gt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];st[t]=new gt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){st[e]=new gt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){st[e]=new gt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){st[e]=new gt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){st[e]=new gt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){st[e]=new gt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){st[e]=new gt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){st[e]=new gt(e,5,!1,e.toLowerCase(),null,!1,!1)});var aa=/[\-:]([a-z])/g;function ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(aa,ua);st[t]=new gt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(aa,ua);st[t]=new gt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(aa,ua);st[t]=new gt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){st[e]=new gt(e,1,!1,e.toLowerCase(),null,!1,!1)});st.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){st[e]=new gt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ca(e,t,n,r){var l=st.hasOwnProperty(t)?st[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xp(t,n,l,r)&&(n=null),r||l===null?qp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var xn=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Yl=Symbol.for("react.element"),gr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),da=Symbol.for("react.strict_mode"),ci=Symbol.for("react.profiler"),Wc=Symbol.for("react.provider"),Kc=Symbol.for("react.context"),fa=Symbol.for("react.forward_ref"),di=Symbol.for("react.suspense"),fi=Symbol.for("react.suspense_list"),pa=Symbol.for("react.memo"),Sn=Symbol.for("react.lazy"),Jc=Symbol.for("react.offscreen"),xu=Symbol.iterator;function tl(e){return e===null||typeof e!="object"?null:(e=xu&&e[xu]||e["@@iterator"],typeof e=="function"?e:null)}var $e=Object.assign,Rs;function ul(e){if(Rs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rs=t&&t[1]||""}return`
`+Rs+e}var Os=!1;function As(e,t){if(!e||Os)return"";Os=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),o=r.stack.split(`
`),i=l.length-1,a=o.length-1;1<=i&&0<=a&&l[i]!==o[a];)a--;for(;1<=i&&0<=a;i--,a--)if(l[i]!==o[a]){if(i!==1||a!==1)do if(i--,a--,0>a||l[i]!==o[a]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{Os=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ul(e):""}function Zp(e){switch(e.tag){case 5:return ul(e.type);case 16:return ul("Lazy");case 13:return ul("Suspense");case 19:return ul("SuspenseList");case 0:case 2:case 15:return e=As(e.type,!1),e;case 11:return e=As(e.type.render,!1),e;case 1:return e=As(e.type,!0),e;default:return""}}function pi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case gr:return"Portal";case ci:return"Profiler";case da:return"StrictMode";case di:return"Suspense";case fi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kc:return(e.displayName||"Context")+".Consumer";case Wc:return(e._context.displayName||"Context")+".Provider";case fa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pa:return t=e.displayName||null,t!==null?t:pi(e.type)||"Memo";case Sn:t=e._payload,e=e._init;try{return pi(e(t))}catch{}}return null}function em(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pi(t);case 8:return t===da?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Yc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tm(e){var t=Yc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(i){r=""+i,o.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ql(e){e._valueTracker||(e._valueTracker=tm(e))}function qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Yc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function To(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mi(e,t){var n=t.checked;return $e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Qc(e,t){t=t.checked,t!=null&&ca(e,"checked",t,!1)}function hi(e,t){Qc(e,t);var n=zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yi(e,t.type,n):t.hasOwnProperty("defaultValue")&&yi(e,t.type,zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yi(e,t,n){(t!=="number"||To(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var cl=Array.isArray;function _r(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+zn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function gi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return $e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ku(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(cl(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:zn(n)}}function Xc(e,t){var n=zn(t.value),r=zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Su(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Zc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Zc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ql,ed=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ql=Ql||document.createElement("div"),Ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Sl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var pl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nm=["Webkit","ms","Moz","O"];Object.keys(pl).forEach(function(e){nm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pl[t]=pl[e]})});function td(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||pl.hasOwnProperty(e)&&pl[e]?(""+t).trim():t+"px"}function nd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=td(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var rm=$e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xi(e,t){if(t){if(rm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function wi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=null;function ma(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ki=null,Dr=null,Pr=null;function Eu(e){if(e=Bl(e)){if(typeof ki!="function")throw Error(M(280));var t=e.stateNode;t&&(t=ns(t),ki(e.stateNode,e.type,t))}}function rd(e){Dr?Pr?Pr.push(e):Pr=[e]:Dr=e}function ld(){if(Dr){var e=Dr,t=Pr;if(Pr=Dr=null,Eu(e),t)for(e=0;e<t.length;e++)Eu(t[e])}}function od(e,t){return e(t)}function sd(){}var Ls=!1;function id(e,t,n){if(Ls)return e(t,n);Ls=!0;try{return od(e,t,n)}finally{Ls=!1,(Dr!==null||Pr!==null)&&(sd(),ld())}}function El(e,t){var n=e.stateNode;if(n===null)return null;var r=ns(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var Si=!1;if(hn)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Si=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Si=!1}function lm(e,t,n,r,l,o,i,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var ml=!1,bo=null,jo=!1,Ei=null,om={onError:function(e){ml=!0,bo=e}};function sm(e,t,n,r,l,o,i,a,u){ml=!1,bo=null,lm.apply(om,arguments)}function im(e,t,n,r,l,o,i,a,u){if(sm.apply(this,arguments),ml){if(ml){var c=bo;ml=!1,bo=null}else throw Error(M(198));jo||(jo=!0,Ei=c)}}function ur(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Nu(e){if(ur(e)!==e)throw Error(M(188))}function am(e){var t=e.alternate;if(!t){if(t=ur(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Nu(l),e;if(o===r)return Nu(l),t;o=o.sibling}throw Error(M(188))}if(n.return!==r.return)n=l,r=o;else{for(var i=!1,a=l.child;a;){if(a===n){i=!0,n=l,r=o;break}if(a===r){i=!0,r=l,n=o;break}a=a.sibling}if(!i){for(a=o.child;a;){if(a===n){i=!0,n=o,r=l;break}if(a===r){i=!0,r=o,n=l;break}a=a.sibling}if(!i)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function ud(e){return e=am(e),e!==null?cd(e):null}function cd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cd(e);if(t!==null)return t;e=e.sibling}return null}var dd=It.unstable_scheduleCallback,Tu=It.unstable_cancelCallback,um=It.unstable_shouldYield,cm=It.unstable_requestPaint,Je=It.unstable_now,dm=It.unstable_getCurrentPriorityLevel,ha=It.unstable_ImmediatePriority,fd=It.unstable_UserBlockingPriority,Io=It.unstable_NormalPriority,fm=It.unstable_LowPriority,pd=It.unstable_IdlePriority,Xo=null,sn=null;function pm(e){if(sn&&typeof sn.onCommitFiberRoot=="function")try{sn.onCommitFiberRoot(Xo,e,void 0,(e.current.flags&128)===128)}catch{}}var Zt=Math.clz32?Math.clz32:ym,mm=Math.log,hm=Math.LN2;function ym(e){return e>>>=0,e===0?32:31-(mm(e)/hm|0)|0}var Xl=64,Zl=4194304;function dl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _o(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,o=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~l;a!==0?r=dl(a):(o&=i,o!==0&&(r=dl(o)))}else i=n&~l,i!==0?r=dl(i):o!==0&&(r=dl(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Zt(t),l=1<<n,r|=e[n],t&=~l;return r}function gm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-Zt(o),a=1<<i,u=l[i];u===-1?(!(a&n)||a&r)&&(l[i]=gm(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}function Ni(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function md(){var e=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),e}function Ms(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Fl(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Zt(t),e[t]=n}function xm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Zt(n),o=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~o}}function ya(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Zt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var je=0;function hd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yd,ga,gd,vd,xd,Ti=!1,eo=[],_n=null,Dn=null,Pn=null,Nl=new Map,Tl=new Map,Nn=[],wm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bu(e,t){switch(e){case"focusin":case"focusout":_n=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":Nl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function rl(e,t,n,r,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[l]},t!==null&&(t=Bl(t),t!==null&&ga(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Cm(e,t,n,r,l){switch(t){case"focusin":return _n=rl(_n,e,t,n,r,l),!0;case"dragenter":return Dn=rl(Dn,e,t,n,r,l),!0;case"mouseover":return Pn=rl(Pn,e,t,n,r,l),!0;case"pointerover":var o=l.pointerId;return Nl.set(o,rl(Nl.get(o)||null,e,t,n,r,l)),!0;case"gotpointercapture":return o=l.pointerId,Tl.set(o,rl(Tl.get(o)||null,e,t,n,r,l)),!0}return!1}function wd(e){var t=Xn(e.target);if(t!==null){var n=ur(t);if(n!==null){if(t=n.tag,t===13){if(t=ad(n),t!==null){e.blockedOn=t,xd(e.priority,function(){gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=bi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ci=r,n.target.dispatchEvent(r),Ci=null}else return t=Bl(n),t!==null&&ga(t),e.blockedOn=n,!1;t.shift()}return!0}function ju(e,t,n){ho(e)&&n.delete(t)}function km(){Ti=!1,_n!==null&&ho(_n)&&(_n=null),Dn!==null&&ho(Dn)&&(Dn=null),Pn!==null&&ho(Pn)&&(Pn=null),Nl.forEach(ju),Tl.forEach(ju)}function ll(e,t){e.blockedOn===t&&(e.blockedOn=null,Ti||(Ti=!0,It.unstable_scheduleCallback(It.unstable_NormalPriority,km)))}function bl(e){function t(l){return ll(l,e)}if(0<eo.length){ll(eo[0],e);for(var n=1;n<eo.length;n++){var r=eo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_n!==null&&ll(_n,e),Dn!==null&&ll(Dn,e),Pn!==null&&ll(Pn,e),Nl.forEach(t),Tl.forEach(t),n=0;n<Nn.length;n++)r=Nn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&(n=Nn[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&Nn.shift()}var Rr=xn.ReactCurrentBatchConfig,Do=!0;function Sm(e,t,n,r){var l=je,o=Rr.transition;Rr.transition=null;try{je=1,va(e,t,n,r)}finally{je=l,Rr.transition=o}}function Em(e,t,n,r){var l=je,o=Rr.transition;Rr.transition=null;try{je=4,va(e,t,n,r)}finally{je=l,Rr.transition=o}}function va(e,t,n,r){if(Do){var l=bi(e,t,n,r);if(l===null)Ks(e,t,r,Po,n),bu(e,r);else if(Cm(l,e,t,n,r))r.stopPropagation();else if(bu(e,r),t&4&&-1<wm.indexOf(e)){for(;l!==null;){var o=Bl(l);if(o!==null&&yd(o),o=bi(e,t,n,r),o===null&&Ks(e,t,r,Po,n),o===l)break;l=o}l!==null&&r.stopPropagation()}else Ks(e,t,r,null,n)}}var Po=null;function bi(e,t,n,r){if(Po=null,e=ma(r),e=Xn(e),e!==null)if(t=ur(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Po=e,null}function Cd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dm()){case ha:return 1;case fd:return 4;case Io:case fm:return 16;case pd:return 536870912;default:return 16}default:return 16}}var bn=null,xa=null,yo=null;function kd(){if(yo)return yo;var e,t=xa,n=t.length,r,l="value"in bn?bn.value:bn.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===l[o-r];r++);return yo=l.slice(e,1<r?1-r:void 0)}function go(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function to(){return!0}function Iu(){return!1}function Dt(e){function t(n,r,l,o,i){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?to:Iu,this.isPropagationStopped=Iu,this}return $e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=to)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=to)},persist:function(){},isPersistent:to}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Dt(Vr),$l=$e({},Vr,{view:0,detail:0}),Nm=Dt($l),Us,zs,ol,Zo=$e({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ol&&(ol&&e.type==="mousemove"?(Us=e.screenX-ol.screenX,zs=e.screenY-ol.screenY):zs=Us=0,ol=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:zs}}),_u=Dt(Zo),Tm=$e({},Zo,{dataTransfer:0}),bm=Dt(Tm),jm=$e({},$l,{relatedTarget:0}),Fs=Dt(jm),Im=$e({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=Dt(Im),Dm=$e({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Pm=Dt(Dm),Rm=$e({},Vr,{data:0}),Du=Dt(Rm),Om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lm[e])?!!t[e]:!1}function Ca(){return Mm}var Um=$e({},$l,{key:function(e){if(e.key){var t=Om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=go(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ca,charCode:function(e){return e.type==="keypress"?go(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?go(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zm=Dt(Um),Fm=$e({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pu=Dt(Fm),$m=$e({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ca}),Bm=Dt($m),Gm=$e({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vm=Dt(Gm),Hm=$e({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wm=Dt(Hm),Km=[9,13,27,32],ka=hn&&"CompositionEvent"in window,hl=null;hn&&"documentMode"in document&&(hl=document.documentMode);var Jm=hn&&"TextEvent"in window&&!hl,Sd=hn&&(!ka||hl&&8<hl&&11>=hl),Ru=" ",Ou=!1;function Ed(e,t){switch(e){case"keyup":return Km.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xr=!1;function Ym(e,t){switch(e){case"compositionend":return Nd(t);case"keypress":return t.which!==32?null:(Ou=!0,Ru);case"textInput":return e=t.data,e===Ru&&Ou?null:e;default:return null}}function qm(e,t){if(xr)return e==="compositionend"||!ka&&Ed(e,t)?(e=kd(),yo=xa=bn=null,xr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sd&&t.locale!=="ko"?null:t.data;default:return null}}var Qm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Au(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qm[e.type]:t==="textarea"}function Td(e,t,n,r){rd(r),t=Ro(t,"onChange"),0<t.length&&(n=new wa("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var yl=null,jl=null;function Xm(e){Md(e,0)}function es(e){var t=kr(e);if(qc(t))return e}function Zm(e,t){if(e==="change")return t}var bd=!1;if(hn){var $s;if(hn){var Bs="oninput"in document;if(!Bs){var Lu=document.createElement("div");Lu.setAttribute("oninput","return;"),Bs=typeof Lu.oninput=="function"}$s=Bs}else $s=!1;bd=$s&&(!document.documentMode||9<document.documentMode)}function Mu(){yl&&(yl.detachEvent("onpropertychange",jd),jl=yl=null)}function jd(e){if(e.propertyName==="value"&&es(jl)){var t=[];Td(t,jl,e,ma(e)),id(Xm,t)}}function eh(e,t,n){e==="focusin"?(Mu(),yl=t,jl=n,yl.attachEvent("onpropertychange",jd)):e==="focusout"&&Mu()}function th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return es(jl)}function nh(e,t){if(e==="click")return es(t)}function rh(e,t){if(e==="input"||e==="change")return es(t)}function lh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tn=typeof Object.is=="function"?Object.is:lh;function Il(e,t){if(tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ui.call(t,l)||!tn(e[l],t[l]))return!1}return!0}function Uu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zu(e,t){var n=Uu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uu(n)}}function Id(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Id(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _d(){for(var e=window,t=To();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=To(e.document)}return t}function Sa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oh(e){var t=_d(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Id(n.ownerDocument.documentElement,n)){if(r!==null&&Sa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(r.start,l);r=r.end===void 0?o:Math.min(r.end,l),!e.extend&&o>r&&(l=r,r=o,o=l),l=zu(n,o);var i=zu(n,r);l&&i&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sh=hn&&"documentMode"in document&&11>=document.documentMode,wr=null,ji=null,gl=null,Ii=!1;function Fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ii||wr==null||wr!==To(r)||(r=wr,"selectionStart"in r&&Sa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gl&&Il(gl,r)||(gl=r,r=Ro(ji,"onSelect"),0<r.length&&(t=new wa("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function no(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionend:no("Transition","TransitionEnd")},Gs={},Dd={};hn&&(Dd=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function ts(e){if(Gs[e])return Gs[e];if(!Cr[e])return e;var t=Cr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Dd)return Gs[e]=t[n];return e}var Pd=ts("animationend"),Rd=ts("animationiteration"),Od=ts("animationstart"),Ad=ts("transitionend"),Ld=new Map,$u="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(e,t){Ld.set(e,t),ar(t,[e])}for(var Vs=0;Vs<$u.length;Vs++){var Hs=$u[Vs],ih=Hs.toLowerCase(),ah=Hs[0].toUpperCase()+Hs.slice(1);$n(ih,"on"+ah)}$n(Pd,"onAnimationEnd");$n(Rd,"onAnimationIteration");$n(Od,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(Ad,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function Bu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,im(r,t,void 0,e),e.currentTarget=null}function Md(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&l.isPropagationStopped())break e;Bu(l,a,c),o=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,c=a.currentTarget,a=a.listener,u!==o&&l.isPropagationStopped())break e;Bu(l,a,c),o=u}}}if(jo)throw e=Ei,jo=!1,Ei=null,e}function Pe(e,t){var n=t[Oi];n===void 0&&(n=t[Oi]=new Set);var r=e+"__bubble";n.has(r)||(Ud(t,e,2,!1),n.add(r))}function Ws(e,t,n){var r=0;t&&(r|=4),Ud(n,e,r,t)}var ro="_reactListening"+Math.random().toString(36).slice(2);function _l(e){if(!e[ro]){e[ro]=!0,Hc.forEach(function(n){n!=="selectionchange"&&(uh.has(n)||Ws(n,!1,e),Ws(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ro]||(t[ro]=!0,Ws("selectionchange",!1,t))}}function Ud(e,t,n,r){switch(Cd(t)){case 1:var l=Sm;break;case 4:l=Em;break;default:l=va}n=l.bind(null,t,n,e),l=void 0,!Si||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ks(e,t,n,r,l){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===l||a.nodeType===8&&a.parentNode===l)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;i=i.return}for(;a!==null;){if(i=Xn(a),i===null)return;if(u=i.tag,u===5||u===6){r=o=i;continue e}a=a.parentNode}}r=r.return}id(function(){var c=o,f=ma(n),y=[];e:{var k=Ld.get(e);if(k!==void 0){var _=wa,j=e;switch(e){case"keypress":if(go(n)===0)break e;case"keydown":case"keyup":_=zm;break;case"focusin":j="focus",_=Fs;break;case"focusout":j="blur",_=Fs;break;case"beforeblur":case"afterblur":_=Fs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=_u;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=bm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=Bm;break;case Pd:case Rd:case Od:_=_m;break;case Ad:_=Vm;break;case"scroll":_=Nm;break;case"wheel":_=Wm;break;case"copy":case"cut":case"paste":_=Pm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Pu}var N=(t&4)!==0,A=!N&&e==="scroll",v=N?k!==null?k+"Capture":null:k;N=[];for(var d=c,p;d!==null;){p=d;var m=p.stateNode;if(p.tag===5&&m!==null&&(p=m,v!==null&&(m=El(d,v),m!=null&&N.push(Dl(d,m,p)))),A)break;d=d.return}0<N.length&&(k=new _(k,j,null,n,f),y.push({event:k,listeners:N}))}}if(!(t&7)){e:{if(k=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",k&&n!==Ci&&(j=n.relatedTarget||n.fromElement)&&(Xn(j)||j[yn]))break e;if((_||k)&&(k=f.window===f?f:(k=f.ownerDocument)?k.defaultView||k.parentWindow:window,_?(j=n.relatedTarget||n.toElement,_=c,j=j?Xn(j):null,j!==null&&(A=ur(j),j!==A||j.tag!==5&&j.tag!==6)&&(j=null)):(_=null,j=c),_!==j)){if(N=_u,m="onMouseLeave",v="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(N=Pu,m="onPointerLeave",v="onPointerEnter",d="pointer"),A=_==null?k:kr(_),p=j==null?k:kr(j),k=new N(m,d+"leave",_,n,f),k.target=A,k.relatedTarget=p,m=null,Xn(f)===c&&(N=new N(v,d+"enter",j,n,f),N.target=p,N.relatedTarget=A,m=N),A=m,_&&j)t:{for(N=_,v=j,d=0,p=N;p;p=hr(p))d++;for(p=0,m=v;m;m=hr(m))p++;for(;0<d-p;)N=hr(N),d--;for(;0<p-d;)v=hr(v),p--;for(;d--;){if(N===v||v!==null&&N===v.alternate)break t;N=hr(N),v=hr(v)}N=null}else N=null;_!==null&&Gu(y,k,_,N,!1),j!==null&&A!==null&&Gu(y,A,j,N,!0)}}e:{if(k=c?kr(c):window,_=k.nodeName&&k.nodeName.toLowerCase(),_==="select"||_==="input"&&k.type==="file")var b=Zm;else if(Au(k))if(bd)b=rh;else{b=th;var O=eh}else(_=k.nodeName)&&_.toLowerCase()==="input"&&(k.type==="checkbox"||k.type==="radio")&&(b=nh);if(b&&(b=b(e,c))){Td(y,b,n,f);break e}O&&O(e,k,c),e==="focusout"&&(O=k._wrapperState)&&O.controlled&&k.type==="number"&&yi(k,"number",k.value)}switch(O=c?kr(c):window,e){case"focusin":(Au(O)||O.contentEditable==="true")&&(wr=O,ji=c,gl=null);break;case"focusout":gl=ji=wr=null;break;case"mousedown":Ii=!0;break;case"contextmenu":case"mouseup":case"dragend":Ii=!1,Fu(y,n,f);break;case"selectionchange":if(sh)break;case"keydown":case"keyup":Fu(y,n,f)}var U;if(ka)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else xr?Ed(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Sd&&n.locale!=="ko"&&(xr||G!=="onCompositionStart"?G==="onCompositionEnd"&&xr&&(U=kd()):(bn=f,xa="value"in bn?bn.value:bn.textContent,xr=!0)),O=Ro(c,G),0<O.length&&(G=new Du(G,e,null,n,f),y.push({event:G,listeners:O}),U?G.data=U:(U=Nd(n),U!==null&&(G.data=U)))),(U=Jm?Ym(e,n):qm(e,n))&&(c=Ro(c,"onBeforeInput"),0<c.length&&(f=new Du("onBeforeInput","beforeinput",null,n,f),y.push({event:f,listeners:c}),f.data=U))}Md(y,t)})}function Dl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ro(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=El(e,n),o!=null&&r.unshift(Dl(e,o,l)),o=El(e,t),o!=null&&r.push(Dl(e,o,l))),e=e.return}return r}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Gu(e,t,n,r,l){for(var o=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,l?(u=El(n,o),u!=null&&i.unshift(Dl(n,u,a))):l||(u=El(n,o),u!=null&&i.push(Dl(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var ch=/\r\n?/g,dh=/\u0000|\uFFFD/g;function Vu(e){return(typeof e=="string"?e:""+e).replace(ch,`
`).replace(dh,"")}function lo(e,t,n){if(t=Vu(t),Vu(e)!==t&&n)throw Error(M(425))}function Oo(){}var _i=null,Di=null;function Pi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ri=typeof setTimeout=="function"?setTimeout:void 0,fh=typeof clearTimeout=="function"?clearTimeout:void 0,Hu=typeof Promise=="function"?Promise:void 0,ph=typeof queueMicrotask=="function"?queueMicrotask:typeof Hu<"u"?function(e){return Hu.resolve(null).then(e).catch(mh)}:Ri;function mh(e){setTimeout(function(){throw e})}function Js(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),bl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);bl(t)}function Rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),on="__reactFiber$"+Hr,Pl="__reactProps$"+Hr,yn="__reactContainer$"+Hr,Oi="__reactEvents$"+Hr,hh="__reactListeners$"+Hr,yh="__reactHandles$"+Hr;function Xn(e){var t=e[on];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yn]||n[on]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Wu(e);e!==null;){if(n=e[on])return n;e=Wu(e)}return t}e=n,n=e.parentNode}return null}function Bl(e){return e=e[on]||e[yn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function ns(e){return e[Pl]||null}var Ai=[],Sr=-1;function Bn(e){return{current:e}}function Re(e){0>Sr||(e.current=Ai[Sr],Ai[Sr]=null,Sr--)}function Ie(e,t){Sr++,Ai[Sr]=e.current,e.current=t}var Fn={},pt=Bn(Fn),kt=Bn(!1),rr=Fn;function Mr(e,t){var n=e.type.contextTypes;if(!n)return Fn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function St(e){return e=e.childContextTypes,e!=null}function Ao(){Re(kt),Re(pt)}function Ku(e,t,n){if(pt.current!==Fn)throw Error(M(168));Ie(pt,t),Ie(kt,n)}function zd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(M(108,em(e)||"Unknown",l));return $e({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Fn,rr=pt.current,Ie(pt,e),Ie(kt,kt.current),!0}function Ju(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=zd(e,t,rr),r.__reactInternalMemoizedMergedChildContext=e,Re(kt),Re(pt),Ie(pt,e)):Re(kt),Ie(kt,n)}var dn=null,rs=!1,Ys=!1;function Fd(e){dn===null?dn=[e]:dn.push(e)}function gh(e){rs=!0,Fd(e)}function Gn(){if(!Ys&&dn!==null){Ys=!0;var e=0,t=je;try{var n=dn;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}dn=null,rs=!1}catch(l){throw dn!==null&&(dn=dn.slice(e+1)),dd(ha,Gn),l}finally{je=t,Ys=!1}}return null}var Er=[],Nr=0,Mo=null,Uo=0,Lt=[],Mt=0,lr=null,fn=1,pn="";function qn(e,t){Er[Nr++]=Uo,Er[Nr++]=Mo,Mo=e,Uo=t}function $d(e,t,n){Lt[Mt++]=fn,Lt[Mt++]=pn,Lt[Mt++]=lr,lr=e;var r=fn;e=pn;var l=32-Zt(r)-1;r&=~(1<<l),n+=1;var o=32-Zt(t)+l;if(30<o){var i=l-l%5;o=(r&(1<<i)-1).toString(32),r>>=i,l-=i,fn=1<<32-Zt(t)+l|n<<l|r,pn=o+e}else fn=1<<o|n<<l|r,pn=e}function Ea(e){e.return!==null&&(qn(e,1),$d(e,1,0))}function Na(e){for(;e===Mo;)Mo=Er[--Nr],Er[Nr]=null,Uo=Er[--Nr],Er[Nr]=null;for(;e===lr;)lr=Lt[--Mt],Lt[Mt]=null,pn=Lt[--Mt],Lt[Mt]=null,fn=Lt[--Mt],Lt[Mt]=null}var jt=null,bt=null,Le=!1,Xt=null;function Bd(e,t){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,jt=e,bt=Rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,jt=e,bt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=lr!==null?{id:fn,overflow:pn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,jt=e,bt=null,!0):!1;default:return!1}}function Li(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mi(e){if(Le){var t=bt;if(t){var n=t;if(!Yu(e,t)){if(Li(e))throw Error(M(418));t=Rn(n.nextSibling);var r=jt;t&&Yu(e,t)?Bd(r,n):(e.flags=e.flags&-4097|2,Le=!1,jt=e)}}else{if(Li(e))throw Error(M(418));e.flags=e.flags&-4097|2,Le=!1,jt=e}}}function qu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;jt=e}function oo(e){if(e!==jt)return!1;if(!Le)return qu(e),Le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Pi(e.type,e.memoizedProps)),t&&(t=bt)){if(Li(e))throw Gd(),Error(M(418));for(;t;)Bd(e,t),t=Rn(t.nextSibling)}if(qu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bt=Rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bt=null}}else bt=jt?Rn(e.stateNode.nextSibling):null;return!0}function Gd(){for(var e=bt;e;)e=Rn(e.nextSibling)}function Ur(){bt=jt=null,Le=!1}function Ta(e){Xt===null?Xt=[e]:Xt.push(e)}var vh=xn.ReactCurrentBatchConfig;function sl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var l=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=l.refs;i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function so(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qu(e){var t=e._init;return t(e._payload)}function Vd(e){function t(v,d){if(e){var p=v.deletions;p===null?(v.deletions=[d],v.flags|=16):p.push(d)}}function n(v,d){if(!e)return null;for(;d!==null;)t(v,d),d=d.sibling;return null}function r(v,d){for(v=new Map;d!==null;)d.key!==null?v.set(d.key,d):v.set(d.index,d),d=d.sibling;return v}function l(v,d){return v=Mn(v,d),v.index=0,v.sibling=null,v}function o(v,d,p){return v.index=p,e?(p=v.alternate,p!==null?(p=p.index,p<d?(v.flags|=2,d):p):(v.flags|=2,d)):(v.flags|=1048576,d)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function a(v,d,p,m){return d===null||d.tag!==6?(d=ni(p,v.mode,m),d.return=v,d):(d=l(d,p),d.return=v,d)}function u(v,d,p,m){var b=p.type;return b===vr?f(v,d,p.props.children,m,p.key):d!==null&&(d.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sn&&Qu(b)===d.type)?(m=l(d,p.props),m.ref=sl(v,d,p),m.return=v,m):(m=Eo(p.type,p.key,p.props,null,v.mode,m),m.ref=sl(v,d,p),m.return=v,m)}function c(v,d,p,m){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=ri(p,v.mode,m),d.return=v,d):(d=l(d,p.children||[]),d.return=v,d)}function f(v,d,p,m,b){return d===null||d.tag!==7?(d=nr(p,v.mode,m,b),d.return=v,d):(d=l(d,p),d.return=v,d)}function y(v,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=ni(""+d,v.mode,p),d.return=v,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Yl:return p=Eo(d.type,d.key,d.props,null,v.mode,p),p.ref=sl(v,null,d),p.return=v,p;case gr:return d=ri(d,v.mode,p),d.return=v,d;case Sn:var m=d._init;return y(v,m(d._payload),p)}if(cl(d)||tl(d))return d=nr(d,v.mode,p,null),d.return=v,d;so(v,d)}return null}function k(v,d,p,m){var b=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return b!==null?null:a(v,d,""+p,m);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Yl:return p.key===b?u(v,d,p,m):null;case gr:return p.key===b?c(v,d,p,m):null;case Sn:return b=p._init,k(v,d,b(p._payload),m)}if(cl(p)||tl(p))return b!==null?null:f(v,d,p,m,null);so(v,p)}return null}function _(v,d,p,m,b){if(typeof m=="string"&&m!==""||typeof m=="number")return v=v.get(p)||null,a(d,v,""+m,b);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Yl:return v=v.get(m.key===null?p:m.key)||null,u(d,v,m,b);case gr:return v=v.get(m.key===null?p:m.key)||null,c(d,v,m,b);case Sn:var O=m._init;return _(v,d,p,O(m._payload),b)}if(cl(m)||tl(m))return v=v.get(p)||null,f(d,v,m,b,null);so(d,m)}return null}function j(v,d,p,m){for(var b=null,O=null,U=d,G=d=0,W=null;U!==null&&G<p.length;G++){U.index>G?(W=U,U=null):W=U.sibling;var V=k(v,U,p[G],m);if(V===null){U===null&&(U=W);break}e&&U&&V.alternate===null&&t(v,U),d=o(V,d,G),O===null?b=V:O.sibling=V,O=V,U=W}if(G===p.length)return n(v,U),Le&&qn(v,G),b;if(U===null){for(;G<p.length;G++)U=y(v,p[G],m),U!==null&&(d=o(U,d,G),O===null?b=U:O.sibling=U,O=U);return Le&&qn(v,G),b}for(U=r(v,U);G<p.length;G++)W=_(U,v,G,p[G],m),W!==null&&(e&&W.alternate!==null&&U.delete(W.key===null?G:W.key),d=o(W,d,G),O===null?b=W:O.sibling=W,O=W);return e&&U.forEach(function(le){return t(v,le)}),Le&&qn(v,G),b}function N(v,d,p,m){var b=tl(p);if(typeof b!="function")throw Error(M(150));if(p=b.call(p),p==null)throw Error(M(151));for(var O=b=null,U=d,G=d=0,W=null,V=p.next();U!==null&&!V.done;G++,V=p.next()){U.index>G?(W=U,U=null):W=U.sibling;var le=k(v,U,V.value,m);if(le===null){U===null&&(U=W);break}e&&U&&le.alternate===null&&t(v,U),d=o(le,d,G),O===null?b=le:O.sibling=le,O=le,U=W}if(V.done)return n(v,U),Le&&qn(v,G),b;if(U===null){for(;!V.done;G++,V=p.next())V=y(v,V.value,m),V!==null&&(d=o(V,d,G),O===null?b=V:O.sibling=V,O=V);return Le&&qn(v,G),b}for(U=r(v,U);!V.done;G++,V=p.next())V=_(U,v,G,V.value,m),V!==null&&(e&&V.alternate!==null&&U.delete(V.key===null?G:V.key),d=o(V,d,G),O===null?b=V:O.sibling=V,O=V);return e&&U.forEach(function(ue){return t(v,ue)}),Le&&qn(v,G),b}function A(v,d,p,m){if(typeof p=="object"&&p!==null&&p.type===vr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Yl:e:{for(var b=p.key,O=d;O!==null;){if(O.key===b){if(b=p.type,b===vr){if(O.tag===7){n(v,O.sibling),d=l(O,p.props.children),d.return=v,v=d;break e}}else if(O.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Sn&&Qu(b)===O.type){n(v,O.sibling),d=l(O,p.props),d.ref=sl(v,O,p),d.return=v,v=d;break e}n(v,O);break}else t(v,O);O=O.sibling}p.type===vr?(d=nr(p.props.children,v.mode,m,p.key),d.return=v,v=d):(m=Eo(p.type,p.key,p.props,null,v.mode,m),m.ref=sl(v,d,p),m.return=v,v=m)}return i(v);case gr:e:{for(O=p.key;d!==null;){if(d.key===O)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(v,d.sibling),d=l(d,p.children||[]),d.return=v,v=d;break e}else{n(v,d);break}else t(v,d);d=d.sibling}d=ri(p,v.mode,m),d.return=v,v=d}return i(v);case Sn:return O=p._init,A(v,d,O(p._payload),m)}if(cl(p))return j(v,d,p,m);if(tl(p))return N(v,d,p,m);so(v,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(v,d.sibling),d=l(d,p),d.return=v,v=d):(n(v,d),d=ni(p,v.mode,m),d.return=v,v=d),i(v)):n(v,d)}return A}var zr=Vd(!0),Hd=Vd(!1),zo=Bn(null),Fo=null,Tr=null,ba=null;function ja(){ba=Tr=Fo=null}function Ia(e){var t=zo.current;Re(zo),e._currentValue=t}function Ui(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Or(e,t){Fo=e,ba=Tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ct=!0),e.firstContext=null)}function Bt(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},Tr===null){if(Fo===null)throw Error(M(308));Tr=e,Fo.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var Zn=null;function _a(e){Zn===null?Zn=[e]:Zn.push(e)}function Wd(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,_a(t)):(n.next=l.next,l.next=n),t.interleaved=n,gn(e,r)}function gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var En=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function On(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,gn(e,n)}return l=r.interleaved,l===null?(t.next=t,_a(r)):(t.next=l.next,l.next=t),r.interleaved=t,gn(e,n)}function vo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ya(e,n)}}function Xu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=i:o=o.next=i,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $o(e,t,n,r){var l=e.updateQueue;En=!1;var o=l.firstBaseUpdate,i=l.lastBaseUpdate,a=l.shared.pending;if(a!==null){l.shared.pending=null;var u=a,c=u.next;u.next=null,i===null?o=c:i.next=c,i=u;var f=e.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==i&&(a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=u))}if(o!==null){var y=l.baseState;i=0,f=c=u=null,a=o;do{var k=a.lane,_=a.eventTime;if((r&k)===k){f!==null&&(f=f.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var j=e,N=a;switch(k=t,_=n,N.tag){case 1:if(j=N.payload,typeof j=="function"){y=j.call(_,y,k);break e}y=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=N.payload,k=typeof j=="function"?j.call(_,y,k):j,k==null)break e;y=$e({},y,k);break e;case 2:En=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,k=l.effects,k===null?l.effects=[a]:k.push(a))}else _={eventTime:_,lane:k,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(c=f=_,u=y):f=f.next=_,i|=k;if(a=a.next,a===null){if(a=l.shared.pending,a===null)break;k=a,a=k.next,k.next=null,l.lastBaseUpdate=k,l.shared.pending=null}}while(!0);if(f===null&&(u=y),l.baseState=u,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do i|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);sr|=i,e.lanes=i,e.memoizedState=y}}function Zu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(M(191,l));l.call(r)}}}var Gl={},an=Bn(Gl),Rl=Bn(Gl),Ol=Bn(Gl);function er(e){if(e===Gl)throw Error(M(174));return e}function Pa(e,t){switch(Ie(Ol,t),Ie(Rl,e),Ie(an,Gl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vi(t,e)}Re(an),Ie(an,t)}function Fr(){Re(an),Re(Rl),Re(Ol)}function Jd(e){er(Ol.current);var t=er(an.current),n=vi(t,e.type);t!==n&&(Ie(Rl,e),Ie(an,n))}function Ra(e){Rl.current===e&&(Re(an),Re(Rl))}var ze=Bn(0);function Bo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=[];function Oa(){for(var e=0;e<qs.length;e++)qs[e]._workInProgressVersionPrimary=null;qs.length=0}var xo=xn.ReactCurrentDispatcher,Qs=xn.ReactCurrentBatchConfig,or=0,Fe=null,Xe=null,et=null,Go=!1,vl=!1,Al=0,xh=0;function ct(){throw Error(M(321))}function Aa(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tn(e[n],t[n]))return!1;return!0}function La(e,t,n,r,l,o){if(or=o,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xo.current=e===null||e.memoizedState===null?Sh:Eh,e=n(r,l),vl){o=0;do{if(vl=!1,Al=0,25<=o)throw Error(M(301));o+=1,et=Xe=null,t.updateQueue=null,xo.current=Nh,e=n(r,l)}while(vl)}if(xo.current=Vo,t=Xe!==null&&Xe.next!==null,or=0,et=Xe=Fe=null,Go=!1,t)throw Error(M(300));return e}function Ma(){var e=Al!==0;return Al=0,e}function ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Fe.memoizedState=et=e:et=et.next=e,et}function Gt(){if(Xe===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=et===null?Fe.memoizedState:et.next;if(t!==null)et=t,Xe=e;else{if(e===null)throw Error(M(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},et===null?Fe.memoizedState=et=e:et=et.next=e}return et}function Ll(e,t){return typeof t=="function"?t(e):t}function Xs(e){var t=Gt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=Xe,l=r.baseQueue,o=n.pending;if(o!==null){if(l!==null){var i=l.next;l.next=o.next,o.next=i}r.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,r=r.baseState;var a=i=null,u=null,c=o;do{var f=c.lane;if((or&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var y={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=y,i=r):u=u.next=y,Fe.lanes|=f,sr|=f}c=c.next}while(c!==null&&c!==o);u===null?i=r:u.next=a,tn(r,t.memoizedState)||(Ct=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do o=l.lane,Fe.lanes|=o,sr|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zs(e){var t=Gt(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var i=l=l.next;do o=e(o,i.action),i=i.next;while(i!==l);tn(o,t.memoizedState)||(Ct=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Yd(){}function qd(e,t){var n=Fe,r=Gt(),l=t(),o=!tn(r.memoizedState,l);if(o&&(r.memoizedState=l,Ct=!0),r=r.queue,Ua(Zd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Ml(9,Xd.bind(null,n,r,l,t),void 0,null),tt===null)throw Error(M(349));or&30||Qd(n,t,l)}return l}function Qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Xd(e,t,n,r){t.value=n,t.getSnapshot=r,ef(t)&&tf(e)}function Zd(e,t,n){return n(function(){ef(t)&&tf(e)})}function ef(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tn(e,n)}catch{return!0}}function tf(e){var t=gn(e,1);t!==null&&en(t,e,1,-1)}function ec(e){var t=ln();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:e},t.queue=e,e=e.dispatch=kh.bind(null,Fe,e),[t.memoizedState,e]}function Ml(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function nf(){return Gt().memoizedState}function wo(e,t,n,r){var l=ln();Fe.flags|=e,l.memoizedState=Ml(1|t,n,void 0,r===void 0?null:r)}function ls(e,t,n,r){var l=Gt();r=r===void 0?null:r;var o=void 0;if(Xe!==null){var i=Xe.memoizedState;if(o=i.destroy,r!==null&&Aa(r,i.deps)){l.memoizedState=Ml(t,n,o,r);return}}Fe.flags|=e,l.memoizedState=Ml(1|t,n,o,r)}function tc(e,t){return wo(8390656,8,e,t)}function Ua(e,t){return ls(2048,8,e,t)}function rf(e,t){return ls(4,2,e,t)}function lf(e,t){return ls(4,4,e,t)}function of(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sf(e,t,n){return n=n!=null?n.concat([e]):null,ls(4,4,of.bind(null,t,e),n)}function za(){}function af(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Aa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function uf(e,t){var n=Gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Aa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function cf(e,t,n){return or&21?(tn(n,t)||(n=md(),Fe.lanes|=n,sr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ct=!0),e.memoizedState=n)}function wh(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Qs.transition;Qs.transition={};try{e(!1),t()}finally{je=n,Qs.transition=r}}function df(){return Gt().memoizedState}function Ch(e,t,n){var r=Ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ff(e))pf(t,n);else if(n=Wd(e,t,n,r),n!==null){var l=ht();en(n,e,r,l),mf(n,t,r)}}function kh(e,t,n){var r=Ln(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ff(e))pf(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var i=t.lastRenderedState,a=o(i,n);if(l.hasEagerState=!0,l.eagerState=a,tn(a,i)){var u=t.interleaved;u===null?(l.next=l,_a(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Wd(e,t,l,r),n!==null&&(l=ht(),en(n,e,r,l),mf(n,t,r))}}function ff(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function pf(e,t){vl=Go=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function mf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ya(e,n)}}var Vo={readContext:Bt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Sh={readContext:Bt,useCallback:function(e,t){return ln().memoizedState=[e,t===void 0?null:t],e},useContext:Bt,useEffect:tc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,wo(4194308,4,of.bind(null,t,e),n)},useLayoutEffect:function(e,t){return wo(4194308,4,e,t)},useInsertionEffect:function(e,t){return wo(4,2,e,t)},useMemo:function(e,t){var n=ln();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ln();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ch.bind(null,Fe,e),[r.memoizedState,e]},useRef:function(e){var t=ln();return e={current:e},t.memoizedState=e},useState:ec,useDebugValue:za,useDeferredValue:function(e){return ln().memoizedState=e},useTransition:function(){var e=ec(!1),t=e[0];return e=wh.bind(null,e[1]),ln().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Fe,l=ln();if(Le){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),tt===null)throw Error(M(349));or&30||Qd(r,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,tc(Zd.bind(null,r,o,e),[e]),r.flags|=2048,Ml(9,Xd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ln(),t=tt.identifierPrefix;if(Le){var n=pn,r=fn;n=(r&~(1<<32-Zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Al++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Eh={readContext:Bt,useCallback:af,useContext:Bt,useEffect:Ua,useImperativeHandle:sf,useInsertionEffect:rf,useLayoutEffect:lf,useMemo:uf,useReducer:Xs,useRef:nf,useState:function(){return Xs(Ll)},useDebugValue:za,useDeferredValue:function(e){var t=Gt();return cf(t,Xe.memoizedState,e)},useTransition:function(){var e=Xs(Ll)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:qd,useId:df,unstable_isNewReconciler:!1},Nh={readContext:Bt,useCallback:af,useContext:Bt,useEffect:Ua,useImperativeHandle:sf,useInsertionEffect:rf,useLayoutEffect:lf,useMemo:uf,useReducer:Zs,useRef:nf,useState:function(){return Zs(Ll)},useDebugValue:za,useDeferredValue:function(e){var t=Gt();return Xe===null?t.memoizedState=e:cf(t,Xe.memoizedState,e)},useTransition:function(){var e=Zs(Ll)[0],t=Gt().memoizedState;return[e,t]},useMutableSource:Yd,useSyncExternalStore:qd,useId:df,unstable_isNewReconciler:!1};function qt(e,t){if(e&&e.defaultProps){t=$e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function zi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:$e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return(e=e._reactInternals)?ur(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ht(),l=Ln(e),o=mn(r,l);o.payload=t,n!=null&&(o.callback=n),t=On(e,o,l),t!==null&&(en(t,e,l,r),vo(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ht(),l=Ln(e),o=mn(r,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=On(e,o,l),t!==null&&(en(t,e,l,r),vo(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ht(),r=Ln(e),l=mn(n,r);l.tag=2,t!=null&&(l.callback=t),t=On(e,l,r),t!==null&&(en(t,e,r,n),vo(t,e,r))}};function nc(e,t,n,r,l,o,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,i):t.prototype&&t.prototype.isPureReactComponent?!Il(n,r)||!Il(l,o):!0}function hf(e,t,n){var r=!1,l=Fn,o=t.contextType;return typeof o=="object"&&o!==null?o=Bt(o):(l=St(t)?rr:pt.current,r=t.contextTypes,o=(r=r!=null)?Mr(e,l):Fn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function rc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function Fi(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Da(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=Bt(o):(o=St(t)?rr:pt.current,l.context=Mr(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(zi(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&os.enqueueReplaceState(l,l.state,null),$o(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function $r(e,t){try{var n="",r=t;do n+=Zp(r),r=r.return;while(r);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function ei(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $i(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Th=typeof WeakMap=="function"?WeakMap:Map;function yf(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wo||(Wo=!0,Qi=r),$i(e,t)},n}function gf(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){$i(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$i(e,t),typeof r!="function"&&(An===null?An=new Set([this]):An.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function lc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Th;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Fh.bind(null,e,t,n),t.then(e,e))}function oc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,On(n,t,1))),n.lanes|=1),e)}var bh=xn.ReactCurrentOwner,Ct=!1;function mt(e,t,n,r){t.child=e===null?Hd(t,null,n,r):zr(t,e.child,n,r)}function ic(e,t,n,r,l){n=n.render;var o=t.ref;return Or(t,l),r=La(e,t,n,r,o,l),n=Ma(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(Le&&n&&Ea(t),t.flags|=1,mt(e,t,r,l),t.child)}function ac(e,t,n,r,l){if(e===null){var o=n.type;return typeof o=="function"&&!Ka(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,vf(e,t,o,r,l)):(e=Eo(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&l)){var i=o.memoizedProps;if(n=n.compare,n=n!==null?n:Il,n(i,r)&&e.ref===t.ref)return vn(e,t,l)}return t.flags|=1,e=Mn(o,r),e.ref=t.ref,e.return=t,t.child=e}function vf(e,t,n,r,l){if(e!==null){var o=e.memoizedProps;if(Il(o,r)&&e.ref===t.ref)if(Ct=!1,t.pendingProps=r=o,(e.lanes&l)!==0)e.flags&131072&&(Ct=!0);else return t.lanes=e.lanes,vn(e,t,l)}return Bi(e,t,n,r,l)}function xf(e,t,n){var r=t.pendingProps,l=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(jr,Tt),Tt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(jr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ie(jr,Tt),Tt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ie(jr,Tt),Tt|=r;return mt(e,t,l,n),t.child}function wf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Bi(e,t,n,r,l){var o=St(n)?rr:pt.current;return o=Mr(t,o),Or(t,l),n=La(e,t,n,r,o,l),r=Ma(),e!==null&&!Ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(Le&&r&&Ea(t),t.flags|=1,mt(e,t,n,l),t.child)}function uc(e,t,n,r,l){if(St(n)){var o=!0;Lo(t)}else o=!1;if(Or(t,l),t.stateNode===null)Co(e,t),hf(t,n,r),Fi(t,n,r,l),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=Bt(c):(c=St(n)?rr:pt.current,c=Mr(t,c));var f=n.getDerivedStateFromProps,y=typeof f=="function"||typeof i.getSnapshotBeforeUpdate=="function";y||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==c)&&rc(t,i,r,c),En=!1;var k=t.memoizedState;i.state=k,$o(t,r,i,l),u=t.memoizedState,a!==r||k!==u||kt.current||En?(typeof f=="function"&&(zi(t,n,f,r),u=t.memoizedState),(a=En||nc(t,n,a,r,k,u,c))?(y||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Kd(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:qt(t.type,a),i.props=c,y=t.pendingProps,k=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=Bt(u):(u=St(n)?rr:pt.current,u=Mr(t,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==y||k!==u)&&rc(t,i,r,u),En=!1,k=t.memoizedState,i.state=k,$o(t,r,i,l);var j=t.memoizedState;a!==y||k!==j||kt.current||En?(typeof _=="function"&&(zi(t,n,_,r),j=t.memoizedState),(c=En||nc(t,n,c,r,k,j,u)||!1)?(f||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,j,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,j,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),i.props=r,i.state=j,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&k===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&k===e.memoizedState||(t.flags|=1024),r=!1)}return Gi(e,t,n,r,o,l)}function Gi(e,t,n,r,l,o){wf(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return l&&Ju(t,n,!1),vn(e,t,o);r=t.stateNode,bh.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=zr(t,e.child,null,o),t.child=zr(t,null,a,o)):mt(e,t,a,o),t.memoizedState=r.state,l&&Ju(t,n,!0),t.child}function Cf(e){var t=e.stateNode;t.pendingContext?Ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ku(e,t.context,!1),Pa(e,t.containerInfo)}function cc(e,t,n,r,l){return Ur(),Ta(l),t.flags|=256,mt(e,t,n,r),t.child}var Vi={dehydrated:null,treeContext:null,retryLane:0};function Hi(e){return{baseLanes:e,cachePool:null,transitions:null}}function kf(e,t,n){var r=t.pendingProps,l=ze.current,o=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(l&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ie(ze,l&1),e===null)return Mi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,o?(r=t.mode,o=t.child,i={mode:"hidden",children:i},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=i):o=as(i,r,0,null),e=nr(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Hi(n),t.memoizedState=Vi,e):Fa(t,i));if(l=e.memoizedState,l!==null&&(a=l.dehydrated,a!==null))return jh(e,t,i,r,a,l,n);if(o){o=r.fallback,i=t.mode,l=e.child,a=l.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=Mn(l,u),r.subtreeFlags=l.subtreeFlags&14680064),a!==null?o=Mn(a,o):(o=nr(o,i,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,i=e.child.memoizedState,i=i===null?Hi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~n,t.memoizedState=Vi,r}return o=e.child,e=o.sibling,r=Mn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return t=as({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function io(e,t,n,r){return r!==null&&Ta(r),zr(t,e.child,null,n),e=Fa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jh(e,t,n,r,l,o,i){if(n)return t.flags&256?(t.flags&=-257,r=ei(Error(M(422))),io(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,l=t.mode,r=as({mode:"visible",children:r.children},l,0,null),o=nr(o,l,i,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&zr(t,e.child,null,i),t.child.memoizedState=Hi(i),t.memoizedState=Vi,o);if(!(t.mode&1))return io(e,t,i,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(M(419)),r=ei(o,r,void 0),io(e,t,i,r)}if(a=(i&e.childLanes)!==0,Ct||a){if(r=tt,r!==null){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|i)?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,gn(e,l),en(r,e,l,-1))}return Wa(),r=ei(Error(M(421))),io(e,t,i,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=$h.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,bt=Rn(l.nextSibling),jt=t,Le=!0,Xt=null,e!==null&&(Lt[Mt++]=fn,Lt[Mt++]=pn,Lt[Mt++]=lr,fn=e.id,pn=e.overflow,lr=t),t=Fa(t,r.children),t.flags|=4096,t)}function dc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ui(e.return,t,n)}function ti(e,t,n,r,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=l)}function Sf(e,t,n){var r=t.pendingProps,l=r.revealOrder,o=r.tail;if(mt(e,t,r.children,n),r=ze.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dc(e,n,t);else if(e.tag===19)dc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(ze,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Bo(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ti(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Bo(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ti(t,!0,n,null,o);break;case"together":ti(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Co(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ih(e,t,n){switch(t.tag){case 3:Cf(t),Ur();break;case 5:Jd(t);break;case 1:St(t.type)&&Lo(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Ie(zo,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(ze,ze.current&1),t.flags|=128,null):n&t.child.childLanes?kf(e,t,n):(Ie(ze,ze.current&1),e=vn(e,t,n),e!==null?e.sibling:null);Ie(ze,ze.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Sf(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ie(ze,ze.current),r)break;return null;case 22:case 23:return t.lanes=0,xf(e,t,n)}return vn(e,t,n)}var Ef,Wi,Nf,Tf;Ef=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wi=function(){};Nf=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,er(an.current);var o=null;switch(n){case"input":l=mi(e,l),r=mi(e,r),o=[];break;case"select":l=$e({},l,{value:void 0}),r=$e({},r,{value:void 0}),o=[];break;case"textarea":l=gi(e,l),r=gi(e,r),o=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Oo)}xi(n,r);var i;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var a=l[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(kl.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(a=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(kl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Pe("scroll",e),o||a===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Tf=function(e,t,n,r){n!==r&&(t.flags|=4)};function il(e,t){if(!Le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _h(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return St(t.type)&&Ao(),dt(t),null;case 3:return r=t.stateNode,Fr(),Re(kt),Re(pt),Oa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(oo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xt!==null&&(ea(Xt),Xt=null))),Wi(e,t),dt(t),null;case 5:Ra(t);var l=er(Ol.current);if(n=t.type,e!==null&&t.stateNode!=null)Nf(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return dt(t),null}if(e=er(an.current),oo(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[on]=t,r[Pl]=o,e=(t.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(l=0;l<fl.length;l++)Pe(fl[l],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":wu(r,o),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Pe("invalid",r);break;case"textarea":ku(r,o),Pe("invalid",r)}xi(n,o),l=null;for(var i in o)if(o.hasOwnProperty(i)){var a=o[i];i==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&lo(r.textContent,a,e),l=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&lo(r.textContent,a,e),l=["children",""+a]):kl.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&Pe("scroll",r)}switch(n){case"input":ql(r),Cu(r,o,!0);break;case"textarea":ql(r),Su(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Oo)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Zc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[on]=t,e[Pl]=r,Ef(e,t,!1,!1),t.stateNode=e;e:{switch(i=wi(n,r),n){case"dialog":Pe("cancel",e),Pe("close",e),l=r;break;case"iframe":case"object":case"embed":Pe("load",e),l=r;break;case"video":case"audio":for(l=0;l<fl.length;l++)Pe(fl[l],e);l=r;break;case"source":Pe("error",e),l=r;break;case"img":case"image":case"link":Pe("error",e),Pe("load",e),l=r;break;case"details":Pe("toggle",e),l=r;break;case"input":wu(e,r),l=mi(e,r),Pe("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=$e({},r,{value:void 0}),Pe("invalid",e);break;case"textarea":ku(e,r),l=gi(e,r),Pe("invalid",e);break;default:l=r}xi(n,l),a=l;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?nd(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ed(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Sl(e,u):typeof u=="number"&&Sl(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Pe("scroll",e):u!=null&&ca(e,o,u,i))}switch(n){case"input":ql(e),Cu(e,r,!1);break;case"textarea":ql(e),Su(e);break;case"option":r.value!=null&&e.setAttribute("value",""+zn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?_r(e,!!r.multiple,o,!1):r.defaultValue!=null&&_r(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Oo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Tf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=er(Ol.current),er(an.current),oo(t)){if(r=t.stateNode,n=t.memoizedProps,r[on]=t,(o=r.nodeValue!==n)&&(e=jt,e!==null))switch(e.tag){case 3:lo(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&lo(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[on]=t,t.stateNode=r}return dt(t),null;case 13:if(Re(ze),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Le&&bt!==null&&t.mode&1&&!(t.flags&128))Gd(),Ur(),t.flags|=98560,o=!1;else if(o=oo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(M(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(M(317));o[on]=t}else Ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),o=!1}else Xt!==null&&(ea(Xt),Xt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ze.current&1?Ze===0&&(Ze=3):Wa())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return Fr(),Wi(e,t),e===null&&_l(t.stateNode.containerInfo),dt(t),null;case 10:return Ia(t.type._context),dt(t),null;case 17:return St(t.type)&&Ao(),dt(t),null;case 19:if(Re(ze),o=t.memoizedState,o===null)return dt(t),null;if(r=(t.flags&128)!==0,i=o.rendering,i===null)if(r)il(o,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Bo(e),i!==null){for(t.flags|=128,il(o,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,e=i.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(ze,ze.current&1|2),t.child}e=e.sibling}o.tail!==null&&Je()>Br&&(t.flags|=128,r=!0,il(o,!1),t.lanes=4194304)}else{if(!r)if(e=Bo(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),il(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!Le)return dt(t),null}else 2*Je()-o.renderingStartTime>Br&&n!==1073741824&&(t.flags|=128,r=!0,il(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(n=o.last,n!==null?n.sibling=i:t.child=i,o.last=i)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ze.current,Ie(ze,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Ha(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Tt&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Dh(e,t){switch(Na(t),t.tag){case 1:return St(t.type)&&Ao(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),Re(kt),Re(pt),Oa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ra(t),null;case 13:if(Re(ze),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Re(ze),null;case 4:return Fr(),null;case 10:return Ia(t.type._context),null;case 22:case 23:return Ha(),null;case 24:return null;default:return null}}var ao=!1,ft=!1,Ph=typeof WeakSet=="function"?WeakSet:Set,Q=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(e,t,r)}else n.current=null}function Ki(e,t,n){try{n()}catch(r){He(e,t,r)}}var fc=!1;function Rh(e,t){if(_i=Do,e=_d(),Sa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,c=0,f=0,y=e,k=null;t:for(;;){for(var _;y!==n||l!==0&&y.nodeType!==3||(a=i+l),y!==o||r!==0&&y.nodeType!==3||(u=i+r),y.nodeType===3&&(i+=y.nodeValue.length),(_=y.firstChild)!==null;)k=y,y=_;for(;;){if(y===e)break t;if(k===n&&++c===l&&(a=i),k===o&&++f===r&&(u=i),(_=y.nextSibling)!==null)break;y=k,k=y.parentNode}y=_}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Di={focusedElem:e,selectionRange:n},Do=!1,Q=t;Q!==null;)if(t=Q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Q=e;else for(;Q!==null;){t=Q;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var N=j.memoizedProps,A=j.memoizedState,v=t.stateNode,d=v.getSnapshotBeforeUpdate(t.elementType===t.type?N:qt(t.type,N),A);v.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(m){He(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,Q=e;break}Q=t.return}return j=fc,fc=!1,j}function xl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&Ki(t,n,o)}l=l.next}while(l!==r)}}function ss(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ji(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bf(e){var t=e.alternate;t!==null&&(e.alternate=null,bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[Pl],delete t[Oi],delete t[hh],delete t[yh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jf(e){return e.tag===5||e.tag===3||e.tag===4}function pc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Oo));else if(r!==4&&(e=e.child,e!==null))for(Yi(e,t,n),e=e.sibling;e!==null;)Yi(e,t,n),e=e.sibling}function qi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qi(e,t,n),e=e.sibling;e!==null;)qi(e,t,n),e=e.sibling}var lt=null,Qt=!1;function kn(e,t,n){for(n=n.child;n!==null;)If(e,t,n),n=n.sibling}function If(e,t,n){if(sn&&typeof sn.onCommitFiberUnmount=="function")try{sn.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:ft||br(n,t);case 6:var r=lt,l=Qt;lt=null,kn(e,t,n),lt=r,Qt=l,lt!==null&&(Qt?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Qt?(e=lt,n=n.stateNode,e.nodeType===8?Js(e.parentNode,n):e.nodeType===1&&Js(e,n),bl(e)):Js(lt,n.stateNode));break;case 4:r=lt,l=Qt,lt=n.stateNode.containerInfo,Qt=!0,kn(e,t,n),lt=r,Qt=l;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var o=l,i=o.destroy;o=o.tag,i!==void 0&&(o&2||o&4)&&Ki(n,t,i),l=l.next}while(l!==r)}kn(e,t,n);break;case 1:if(!ft&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){He(n,t,a)}kn(e,t,n);break;case 21:kn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,kn(e,t,n),ft=r):kn(e,t,n);break;default:kn(e,t,n)}}function mc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ph),t.forEach(function(r){var l=Bh.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Jt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var o=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,Qt=!1;break e;case 3:lt=a.stateNode.containerInfo,Qt=!0;break e;case 4:lt=a.stateNode.containerInfo,Qt=!0;break e}a=a.return}if(lt===null)throw Error(M(160));If(o,i,l),lt=null,Qt=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(c){He(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)_f(t,e),t=t.sibling}function _f(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jt(t,e),rn(e),r&4){try{xl(3,e,e.return),ss(3,e)}catch(N){He(e,e.return,N)}try{xl(5,e,e.return)}catch(N){He(e,e.return,N)}}break;case 1:Jt(t,e),rn(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(Jt(t,e),rn(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var l=e.stateNode;try{Sl(l,"")}catch(N){He(e,e.return,N)}}if(r&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,i=n!==null?n.memoizedProps:o,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Qc(l,o),wi(a,i);var c=wi(a,o);for(i=0;i<u.length;i+=2){var f=u[i],y=u[i+1];f==="style"?nd(l,y):f==="dangerouslySetInnerHTML"?ed(l,y):f==="children"?Sl(l,y):ca(l,f,y,c)}switch(a){case"input":hi(l,o);break;case"textarea":Xc(l,o);break;case"select":var k=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?_r(l,!!o.multiple,_,!1):k!==!!o.multiple&&(o.defaultValue!=null?_r(l,!!o.multiple,o.defaultValue,!0):_r(l,!!o.multiple,o.multiple?[]:"",!1))}l[Pl]=o}catch(N){He(e,e.return,N)}}break;case 6:if(Jt(t,e),rn(e),r&4){if(e.stateNode===null)throw Error(M(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(N){He(e,e.return,N)}}break;case 3:if(Jt(t,e),rn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bl(t.containerInfo)}catch(N){He(e,e.return,N)}break;case 4:Jt(t,e),rn(e);break;case 13:Jt(t,e),rn(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(Ga=Je())),r&4&&mc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(c=ft)||f,Jt(t,e),ft=c):Jt(t,e),rn(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(Q=e,f=e.child;f!==null;){for(y=Q=f;Q!==null;){switch(k=Q,_=k.child,k.tag){case 0:case 11:case 14:case 15:xl(4,k,k.return);break;case 1:br(k,k.return);var j=k.stateNode;if(typeof j.componentWillUnmount=="function"){r=k,n=k.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(N){He(r,n,N)}}break;case 5:br(k,k.return);break;case 22:if(k.memoizedState!==null){yc(y);continue}}_!==null?(_.return=k,Q=_):yc(y)}f=f.sibling}e:for(f=null,y=e;;){if(y.tag===5){if(f===null){f=y;try{l=y.stateNode,c?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=y.stateNode,u=y.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=td("display",i))}catch(N){He(e,e.return,N)}}}else if(y.tag===6){if(f===null)try{y.stateNode.nodeValue=c?"":y.memoizedProps}catch(N){He(e,e.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;f===y&&(f=null),y=y.return}f===y&&(f=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Jt(t,e),rn(e),r&4&&mc(e);break;case 21:break;default:Jt(t,e),rn(e)}}function rn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jf(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Sl(l,""),r.flags&=-33);var o=pc(e);qi(e,o,l);break;case 3:case 4:var i=r.stateNode.containerInfo,a=pc(e);Yi(e,a,i);break;default:throw Error(M(161))}}catch(u){He(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Oh(e,t,n){Q=e,Df(e)}function Df(e,t,n){for(var r=(e.mode&1)!==0;Q!==null;){var l=Q,o=l.child;if(l.tag===22&&r){var i=l.memoizedState!==null||ao;if(!i){var a=l.alternate,u=a!==null&&a.memoizedState!==null||ft;a=ao;var c=ft;if(ao=i,(ft=u)&&!c)for(Q=l;Q!==null;)i=Q,u=i.child,i.tag===22&&i.memoizedState!==null?gc(l):u!==null?(u.return=i,Q=u):gc(l);for(;o!==null;)Q=o,Df(o),o=o.sibling;Q=l,ao=a,ft=c}hc(e)}else l.subtreeFlags&8772&&o!==null?(o.return=l,Q=o):hc(e)}}function hc(e){for(;Q!==null;){var t=Q;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||ss(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Zu(t,o,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zu(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var y=f.dehydrated;y!==null&&bl(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}ft||t.flags&512&&Ji(t)}catch(k){He(t,t.return,k)}}if(t===e){Q=null;break}if(n=t.sibling,n!==null){n.return=t.return,Q=n;break}Q=t.return}}function yc(e){for(;Q!==null;){var t=Q;if(t===e){Q=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Q=n;break}Q=t.return}}function gc(e){for(;Q!==null;){var t=Q;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ss(4,t)}catch(u){He(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){He(t,l,u)}}var o=t.return;try{Ji(t)}catch(u){He(t,o,u)}break;case 5:var i=t.return;try{Ji(t)}catch(u){He(t,i,u)}}}catch(u){He(t,t.return,u)}if(t===e){Q=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Q=a;break}Q=t.return}}var Ah=Math.ceil,Ho=xn.ReactCurrentDispatcher,$a=xn.ReactCurrentOwner,$t=xn.ReactCurrentBatchConfig,Se=0,tt=null,qe=null,ot=0,Tt=0,jr=Bn(0),Ze=0,Ul=null,sr=0,is=0,Ba=0,wl=null,wt=null,Ga=0,Br=1/0,cn=null,Wo=!1,Qi=null,An=null,uo=!1,jn=null,Ko=0,Cl=0,Xi=null,ko=-1,So=0;function ht(){return Se&6?Je():ko!==-1?ko:ko=Je()}function Ln(e){return e.mode&1?Se&2&&ot!==0?ot&-ot:vh.transition!==null?(So===0&&(So=md()),So):(e=je,e!==0||(e=window.event,e=e===void 0?16:Cd(e.type)),e):1}function en(e,t,n,r){if(50<Cl)throw Cl=0,Xi=null,Error(M(185));Fl(e,n,r),(!(Se&2)||e!==tt)&&(e===tt&&(!(Se&2)&&(is|=n),Ze===4&&Tn(e,ot)),Et(e,r),n===1&&Se===0&&!(t.mode&1)&&(Br=Je()+500,rs&&Gn()))}function Et(e,t){var n=e.callbackNode;vm(e,t);var r=_o(e,e===tt?ot:0);if(r===0)n!==null&&Tu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Tu(n),t===1)e.tag===0?gh(vc.bind(null,e)):Fd(vc.bind(null,e)),ph(function(){!(Se&6)&&Gn()}),n=null;else{switch(hd(r)){case 1:n=ha;break;case 4:n=fd;break;case 16:n=Io;break;case 536870912:n=pd;break;default:n=Io}n=zf(n,Pf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pf(e,t){if(ko=-1,So=0,Se&6)throw Error(M(327));var n=e.callbackNode;if(Ar()&&e.callbackNode!==n)return null;var r=_o(e,e===tt?ot:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Jo(e,r);else{t=r;var l=Se;Se|=2;var o=Of();(tt!==e||ot!==t)&&(cn=null,Br=Je()+500,tr(e,t));do try{Uh();break}catch(a){Rf(e,a)}while(!0);ja(),Ho.current=o,Se=l,qe!==null?t=0:(tt=null,ot=0,t=Ze)}if(t!==0){if(t===2&&(l=Ni(e),l!==0&&(r=l,t=Zi(e,l))),t===1)throw n=Ul,tr(e,0),Tn(e,r),Et(e,Je()),n;if(t===6)Tn(e,r);else{if(l=e.current.alternate,!(r&30)&&!Lh(l)&&(t=Jo(e,r),t===2&&(o=Ni(e),o!==0&&(r=o,t=Zi(e,o))),t===1))throw n=Ul,tr(e,0),Tn(e,r),Et(e,Je()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Qn(e,wt,cn);break;case 3:if(Tn(e,r),(r&130023424)===r&&(t=Ga+500-Je(),10<t)){if(_o(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){ht(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ri(Qn.bind(null,e,wt,cn),t);break}Qn(e,wt,cn);break;case 4:if(Tn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var i=31-Zt(r);o=1<<i,i=t[i],i>l&&(l=i),r&=~o}if(r=l,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ah(r/1960))-r,10<r){e.timeoutHandle=Ri(Qn.bind(null,e,wt,cn),r);break}Qn(e,wt,cn);break;case 5:Qn(e,wt,cn);break;default:throw Error(M(329))}}}return Et(e,Je()),e.callbackNode===n?Pf.bind(null,e):null}function Zi(e,t){var n=wl;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=Jo(e,t),e!==2&&(t=wt,wt=n,t!==null&&ea(t)),e}function ea(e){wt===null?wt=e:wt.push.apply(wt,e)}function Lh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],o=l.getSnapshot;l=l.value;try{if(!tn(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tn(e,t){for(t&=~Ba,t&=~is,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Zt(t),r=1<<n;e[n]=-1,t&=~r}}function vc(e){if(Se&6)throw Error(M(327));Ar();var t=_o(e,0);if(!(t&1))return Et(e,Je()),null;var n=Jo(e,t);if(e.tag!==0&&n===2){var r=Ni(e);r!==0&&(t=r,n=Zi(e,r))}if(n===1)throw n=Ul,tr(e,0),Tn(e,t),Et(e,Je()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qn(e,wt,cn),Et(e,Je()),null}function Va(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(Br=Je()+500,rs&&Gn())}}function ir(e){jn!==null&&jn.tag===0&&!(Se&6)&&Ar();var t=Se;Se|=1;var n=$t.transition,r=je;try{if($t.transition=null,je=1,e)return e()}finally{je=r,$t.transition=n,Se=t,!(Se&6)&&Gn()}}function Ha(){Tt=jr.current,Re(jr)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fh(n)),qe!==null)for(n=qe.return;n!==null;){var r=n;switch(Na(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ao();break;case 3:Fr(),Re(kt),Re(pt),Oa();break;case 5:Ra(r);break;case 4:Fr();break;case 13:Re(ze);break;case 19:Re(ze);break;case 10:Ia(r.type._context);break;case 22:case 23:Ha()}n=n.return}if(tt=e,qe=e=Mn(e.current,null),ot=Tt=t,Ze=0,Ul=null,Ba=is=sr=0,wt=wl=null,Zn!==null){for(t=0;t<Zn.length;t++)if(n=Zn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,o=n.pending;if(o!==null){var i=o.next;o.next=l,r.next=i}n.pending=r}Zn=null}return e}function Rf(e,t){do{var n=qe;try{if(ja(),xo.current=Vo,Go){for(var r=Fe.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}Go=!1}if(or=0,et=Xe=Fe=null,vl=!1,Al=0,$a.current=null,n===null||n.return===null){Ze=1,Ul=t,qe=null;break}e:{var o=e,i=n.return,a=n,u=t;if(t=ot,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=a,y=f.tag;if(!(f.mode&1)&&(y===0||y===11||y===15)){var k=f.alternate;k?(f.updateQueue=k.updateQueue,f.memoizedState=k.memoizedState,f.lanes=k.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=oc(i);if(_!==null){_.flags&=-257,sc(_,i,a,o,t),_.mode&1&&lc(o,c,t),t=_,u=c;var j=t.updateQueue;if(j===null){var N=new Set;N.add(u),t.updateQueue=N}else j.add(u);break e}else{if(!(t&1)){lc(o,c,t),Wa();break e}u=Error(M(426))}}else if(Le&&a.mode&1){var A=oc(i);if(A!==null){!(A.flags&65536)&&(A.flags|=256),sc(A,i,a,o,t),Ta($r(u,a));break e}}o=u=$r(u,a),Ze!==4&&(Ze=2),wl===null?wl=[o]:wl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var v=yf(o,u,t);Xu(o,v);break e;case 1:a=u;var d=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(An===null||!An.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var m=gf(o,a,t);Xu(o,m);break e}}o=o.return}while(o!==null)}Lf(n)}catch(b){t=b,qe===n&&n!==null&&(qe=n=n.return);continue}break}while(!0)}function Of(){var e=Ho.current;return Ho.current=Vo,e===null?Vo:e}function Wa(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),tt===null||!(sr&268435455)&&!(is&268435455)||Tn(tt,ot)}function Jo(e,t){var n=Se;Se|=2;var r=Of();(tt!==e||ot!==t)&&(cn=null,tr(e,t));do try{Mh();break}catch(l){Rf(e,l)}while(!0);if(ja(),Se=n,Ho.current=r,qe!==null)throw Error(M(261));return tt=null,ot=0,Ze}function Mh(){for(;qe!==null;)Af(qe)}function Uh(){for(;qe!==null&&!um();)Af(qe)}function Af(e){var t=Uf(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?Lf(e):qe=t,$a.current=null}function Lf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Dh(n,t),n!==null){n.flags&=32767,qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,qe=null;return}}else if(n=_h(n,t,Tt),n!==null){qe=n;return}if(t=t.sibling,t!==null){qe=t;return}qe=t=e}while(t!==null);Ze===0&&(Ze=5)}function Qn(e,t,n){var r=je,l=$t.transition;try{$t.transition=null,je=1,zh(e,t,n,r)}finally{$t.transition=l,je=r}return null}function zh(e,t,n,r){do Ar();while(jn!==null);if(Se&6)throw Error(M(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(xm(e,o),e===tt&&(qe=tt=null,ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uo||(uo=!0,zf(Io,function(){return Ar(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=$t.transition,$t.transition=null;var i=je;je=1;var a=Se;Se|=4,$a.current=null,Rh(e,n),_f(n,e),oh(Di),Do=!!_i,Di=_i=null,e.current=n,Oh(n),cm(),Se=a,je=i,$t.transition=o}else e.current=n;if(uo&&(uo=!1,jn=e,Ko=l),o=e.pendingLanes,o===0&&(An=null),pm(n.stateNode),Et(e,Je()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Wo)throw Wo=!1,e=Qi,Qi=null,e;return Ko&1&&e.tag!==0&&Ar(),o=e.pendingLanes,o&1?e===Xi?Cl++:(Cl=0,Xi=e):Cl=0,Gn(),null}function Ar(){if(jn!==null){var e=hd(Ko),t=$t.transition,n=je;try{if($t.transition=null,je=16>e?16:e,jn===null)var r=!1;else{if(e=jn,jn=null,Ko=0,Se&6)throw Error(M(331));var l=Se;for(Se|=4,Q=e.current;Q!==null;){var o=Q,i=o.child;if(Q.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Q=c;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:xl(8,f,o)}var y=f.child;if(y!==null)y.return=f,Q=y;else for(;Q!==null;){f=Q;var k=f.sibling,_=f.return;if(bf(f),f===c){Q=null;break}if(k!==null){k.return=_,Q=k;break}Q=_}}}var j=o.alternate;if(j!==null){var N=j.child;if(N!==null){j.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}Q=o}}if(o.subtreeFlags&2064&&i!==null)i.return=o,Q=i;else e:for(;Q!==null;){if(o=Q,o.flags&2048)switch(o.tag){case 0:case 11:case 15:xl(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,Q=v;break e}Q=o.return}}var d=e.current;for(Q=d;Q!==null;){i=Q;var p=i.child;if(i.subtreeFlags&2064&&p!==null)p.return=i,Q=p;else e:for(i=d;Q!==null;){if(a=Q,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ss(9,a)}}catch(b){He(a,a.return,b)}if(a===i){Q=null;break e}var m=a.sibling;if(m!==null){m.return=a.return,Q=m;break e}Q=a.return}}if(Se=l,Gn(),sn&&typeof sn.onPostCommitFiberRoot=="function")try{sn.onPostCommitFiberRoot(Xo,e)}catch{}r=!0}return r}finally{je=n,$t.transition=t}}return!1}function xc(e,t,n){t=$r(n,t),t=yf(e,t,1),e=On(e,t,1),t=ht(),e!==null&&(Fl(e,1,t),Et(e,t))}function He(e,t,n){if(e.tag===3)xc(e,e,n);else for(;t!==null;){if(t.tag===3){xc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(An===null||!An.has(r))){e=$r(n,e),e=gf(t,e,1),t=On(t,e,1),e=ht(),t!==null&&(Fl(t,1,e),Et(t,e));break}}t=t.return}}function Fh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(ot&n)===n&&(Ze===4||Ze===3&&(ot&130023424)===ot&&500>Je()-Ga?tr(e,0):Ba|=n),Et(e,t)}function Mf(e,t){t===0&&(e.mode&1?(t=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):t=1);var n=ht();e=gn(e,t),e!==null&&(Fl(e,t,n),Et(e,n))}function $h(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Mf(e,n)}function Bh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),Mf(e,n)}var Uf;Uf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)Ct=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ct=!1,Ih(e,t,n);Ct=!!(e.flags&131072)}else Ct=!1,Le&&t.flags&1048576&&$d(t,Uo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Co(e,t),e=t.pendingProps;var l=Mr(t,pt.current);Or(t,n),l=La(null,t,r,e,l,n);var o=Ma();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(r)?(o=!0,Lo(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Da(t),l.updater=os,t.stateNode=l,l._reactInternals=t,Fi(t,r,e,n),t=Gi(null,t,r,!0,o,n)):(t.tag=0,Le&&o&&Ea(t),mt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Co(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Vh(r),e=qt(r,e),l){case 0:t=Bi(null,t,r,e,n);break e;case 1:t=uc(null,t,r,e,n);break e;case 11:t=ic(null,t,r,e,n);break e;case 14:t=ac(null,t,r,qt(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:qt(r,l),Bi(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:qt(r,l),uc(e,t,r,l,n);case 3:e:{if(Cf(t),e===null)throw Error(M(387));r=t.pendingProps,o=t.memoizedState,l=o.element,Kd(e,t),$o(t,r,null,n);var i=t.memoizedState;if(r=i.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=$r(Error(M(423)),t),t=cc(e,t,r,n,l);break e}else if(r!==l){l=$r(Error(M(424)),t),t=cc(e,t,r,n,l);break e}else for(bt=Rn(t.stateNode.containerInfo.firstChild),jt=t,Le=!0,Xt=null,n=Hd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ur(),r===l){t=vn(e,t,n);break e}mt(e,t,r,n)}t=t.child}return t;case 5:return Jd(t),e===null&&Mi(t),r=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,i=l.children,Pi(r,l)?i=null:o!==null&&Pi(r,o)&&(t.flags|=32),wf(e,t),mt(e,t,i,n),t.child;case 6:return e===null&&Mi(t),null;case 13:return kf(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=zr(t,null,r,n):mt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:qt(r,l),ic(e,t,r,l,n);case 7:return mt(e,t,t.pendingProps,n),t.child;case 8:return mt(e,t,t.pendingProps.children,n),t.child;case 12:return mt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,o=t.memoizedProps,i=l.value,Ie(zo,r._currentValue),r._currentValue=i,o!==null)if(tn(o.value,i)){if(o.children===l.children&&!kt.current){t=vn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){i=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=mn(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ui(o.return,n,t),a.lanes|=n;break}u=u.next}}else if(o.tag===10)i=o.type===t.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(M(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Ui(i,n,t),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}mt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Or(t,n),l=Bt(l),r=r(l),t.flags|=1,mt(e,t,r,n),t.child;case 14:return r=t.type,l=qt(r,t.pendingProps),l=qt(r.type,l),ac(e,t,r,l,n);case 15:return vf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:qt(r,l),Co(e,t),t.tag=1,St(r)?(e=!0,Lo(t)):e=!1,Or(t,n),hf(t,r,l),Fi(t,r,l,n),Gi(null,t,r,!0,e,n);case 19:return Sf(e,t,n);case 22:return xf(e,t,n)}throw Error(M(156,t.tag))};function zf(e,t){return dd(e,t)}function Gh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,n,r){return new Gh(e,t,n,r)}function Ka(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vh(e){if(typeof e=="function")return Ka(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fa)return 11;if(e===pa)return 14}return 2}function Mn(e,t){var n=e.alternate;return n===null?(n=zt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Eo(e,t,n,r,l,o){var i=2;if(r=e,typeof e=="function")Ka(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case vr:return nr(n.children,l,o,t);case da:i=8,l|=8;break;case ci:return e=zt(12,n,t,l|2),e.elementType=ci,e.lanes=o,e;case di:return e=zt(13,n,t,l),e.elementType=di,e.lanes=o,e;case fi:return e=zt(19,n,t,l),e.elementType=fi,e.lanes=o,e;case Jc:return as(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wc:i=10;break e;case Kc:i=9;break e;case fa:i=11;break e;case pa:i=14;break e;case Sn:i=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=zt(i,n,t,l),t.elementType=e,t.type=r,t.lanes=o,t}function nr(e,t,n,r){return e=zt(7,e,r,t),e.lanes=n,e}function as(e,t,n,r){return e=zt(22,e,r,t),e.elementType=Jc,e.lanes=n,e.stateNode={isHidden:!1},e}function ni(e,t,n){return e=zt(6,e,null,t),e.lanes=n,e}function ri(e,t,n){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hh(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ms(0),this.expirationTimes=Ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ja(e,t,n,r,l,o,i,a,u){return e=new Hh(e,t,n,a,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=zt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(o),e}function Wh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ff(e){if(!e)return Fn;e=e._reactInternals;e:{if(ur(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(St(n))return zd(e,n,t)}return t}function $f(e,t,n,r,l,o,i,a,u){return e=Ja(n,r,!0,e,l,o,i,a,u),e.context=Ff(null),n=e.current,r=ht(),l=Ln(n),o=mn(r,l),o.callback=t??null,On(n,o,l),e.current.lanes=l,Fl(e,l,r),Et(e,r),e}function us(e,t,n,r){var l=t.current,o=ht(),i=Ln(l);return n=Ff(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(o,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=On(l,t,i),e!==null&&(en(e,l,i,o),vo(e,l,i)),i}function Yo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ya(e,t){wc(e,t),(e=e.alternate)&&wc(e,t)}function Kh(){return null}var Bf=typeof reportError=="function"?reportError:function(e){console.error(e)};function qa(e){this._internalRoot=e}cs.prototype.render=qa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));us(e,t,null,null)};cs.prototype.unmount=qa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ir(function(){us(null,e,null,null)}),t[yn]=null}};function cs(e){this._internalRoot=e}cs.prototype.unstable_scheduleHydration=function(e){if(e){var t=vd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nn.length&&t!==0&&t<Nn[n].priority;n++);Nn.splice(n,0,e),n===0&&wd(e)}};function Qa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ds(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cc(){}function Jh(e,t,n,r,l){if(l){if(typeof r=="function"){var o=r;r=function(){var c=Yo(i);o.call(c)}}var i=$f(t,r,e,0,null,!1,!1,"",Cc);return e._reactRootContainer=i,e[yn]=i.current,_l(e.nodeType===8?e.parentNode:e),ir(),i}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var a=r;r=function(){var c=Yo(u);a.call(c)}}var u=Ja(e,0,!1,null,null,!1,!1,"",Cc);return e._reactRootContainer=u,e[yn]=u.current,_l(e.nodeType===8?e.parentNode:e),ir(function(){us(t,u,n,r)}),u}function fs(e,t,n,r,l){var o=n._reactRootContainer;if(o){var i=o;if(typeof l=="function"){var a=l;l=function(){var u=Yo(i);a.call(u)}}us(t,i,e,l)}else i=Jh(n,t,e,l,r);return Yo(i)}yd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dl(t.pendingLanes);n!==0&&(ya(t,n|1),Et(t,Je()),!(Se&6)&&(Br=Je()+500,Gn()))}break;case 13:ir(function(){var r=gn(e,1);if(r!==null){var l=ht();en(r,e,1,l)}}),Ya(e,1)}};ga=function(e){if(e.tag===13){var t=gn(e,134217728);if(t!==null){var n=ht();en(t,e,134217728,n)}Ya(e,134217728)}};gd=function(e){if(e.tag===13){var t=Ln(e),n=gn(e,t);if(n!==null){var r=ht();en(n,e,t,r)}Ya(e,t)}};vd=function(){return je};xd=function(e,t){var n=je;try{return je=e,t()}finally{je=n}};ki=function(e,t,n){switch(t){case"input":if(hi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=ns(r);if(!l)throw Error(M(90));qc(r),hi(r,l)}}}break;case"textarea":Xc(e,n);break;case"select":t=n.value,t!=null&&_r(e,!!n.multiple,t,!1)}};od=Va;sd=ir;var Yh={usingClientEntryPoint:!1,Events:[Bl,kr,ns,rd,ld,Va]},al={findFiberByHostInstance:Xn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qh={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ud(e),e===null?null:e.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||Kh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!co.isDisabled&&co.supportsFiber)try{Xo=co.inject(qh),sn=co}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yh;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qa(t))throw Error(M(200));return Wh(e,t,null,n)};_t.createRoot=function(e,t){if(!Qa(e))throw Error(M(299));var n=!1,r="",l=Bf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Ja(e,1,!1,null,null,n,!1,r,l),e[yn]=t.current,_l(e.nodeType===8?e.parentNode:e),new qa(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=ud(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return ir(e)};_t.hydrate=function(e,t,n){if(!ds(t))throw Error(M(200));return fs(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Qa(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,l=!1,o="",i=Bf;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=$f(t,null,e,1,n??null,l,!1,o,i),e[yn]=t.current,_l(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new cs(t)};_t.render=function(e,t,n){if(!ds(t))throw Error(M(200));return fs(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!ds(e))throw Error(M(40));return e._reactRootContainer?(ir(function(){fs(null,null,e,!1,function(){e._reactRootContainer=null,e[yn]=null})}),!0):!1};_t.unstable_batchedUpdates=Va;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ds(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return fs(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function Gf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gf)}catch(e){console.error(e)}}Gf(),Bc.exports=_t;var ps=Bc.exports,kc=ps;ai.createRoot=kc.createRoot,ai.hydrateRoot=kc.hydrateRoot;var ke=(e=>(e.SynchroTech="SynchroTech",e.Hoods="Hoods",e.Optimates="Optimates",e.Fusion="Fusion",e.Command="Command",e.Tokens="Tokens",e.Custom="Custom",e))(ke||{}),Un=(e=>(e.FreeForAll="FFA",e.TwoVTwo="2v2",e.ThreeVOne="3v1",e))(Un||{});const Qh={ipDeptAgent:{name:"IP Dept Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253319/SYN_IP_DEPT_AGENT_mhwphu.png",fallbackImage:"/images/cards/SYN_IP_DEPT_AGENT.png",power:2,ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`,types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},tacticalAgent:{name:"Tactical Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253342/SYN_TACTICAL_AGENT_xbb7i0.png",fallbackImage:"/images/cards/SYN_TACTICAL_AGENT.png",power:3,ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},patrolAgent:{name:"Patrol Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253325/SYN_PATROL_AGENT_ioetlu.png",fallbackImage:"/images/cards/SYN_PATROL_AGENT.png",power:2,ability:`Setup: Move this card to any cell in a line.
Support  Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink.",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},riotAgent:{name:"Riot Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",fallbackImage:"/images/cards/SYN_RIOT_AGENT.png",power:3,ability:`Deploy: Push an opponent card 1 cell. ay take its place.
Support  Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},threatAnalyst:{name:"Threat Analyst",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253338/SYN_THREAT_ANALYST_sqnpgw.png",fallbackImage:"/images/cards/SYN_THREAT_ANALYST.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:"",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},recklessProvocateur:{name:"Reckless Provocateur",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253315/HOO_RECKLESS_PROVOCATEUR_hi7a9z.png",fallbackImage:"/images/cards/HOO_RECKLESS_PROVOCATEUR.png",power:3,ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},dataLiberator:{name:"Data Liberator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253317/HOO_DATA_LIBERATOR_lbtqa2.png",fallbackImage:"/images/cards/HOO_DATA_LIBERATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`,types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},cautiousAvenger:{name:"Cautious Avenger",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253309/HOO_CAUTIOUS_AVENGER_x4g4g3.png",fallbackImage:"/images/cards/HOO_CAUTIOUS_AVENGER.png",power:2,ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},vigilantSpotter:{name:"Vigilant Spotter",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253311/HOO_VIGILANT_SPOTTER_eiephm.png",fallbackImage:"/images/cards/HOO_VIGILANT_SPOTTER.png",power:1,ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},inventiveMaker:{name:"Inventive Maker",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253313/HOO_INVENTIVE_MAKER_uzrbg1.png",fallbackImage:"/images/cards/HOO_INVENTIVE_MAKER.png",power:1,ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},faber:{name:"Faber",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253324/OPT_FABER_d7uxew.png",fallbackImage:"/images/cards/OPT_FABER.png",power:1,ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},censor:{name:"Censor",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253321/OPT_CENSOR_wtxtc2.png",fallbackImage:"/images/cards/OPT_CENSOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 of your exploits for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},princeps:{name:"Princeps",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",fallbackImage:"/images/cards/OPT_PRINCEPS.png",power:3,ability:`Deploy: Shield 1. Aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},immunis:{name:"Immunis",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253327/OPT_IMMUNIS_bjlncl.png",fallbackImage:"/images/cards/OPT_IMMUNIS.png",power:2,ability:"Support  Deploy: Return your Optimate from the discard pile to an adjacent cell. At the end of the phase, return the Optimate for 2 stuns.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},centurion:{name:"Centurion",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253330/OPT_CENTURION_aaushl.png",fallbackImage:"/images/cards/OPT_CENTURION.png",power:2,ability:"Support  Setup: The power of other allied cards in the line increases by 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},codeKeeper:{name:"Code Keeper",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253298/FUS_CODE_KEEPER_qotsym.png",fallbackImage:"/images/cards/FUS_CODE_KEEPER.png",power:3,ability:`Deploy: Exploit opponent cards with threat.
Support  Commit: Move opponent card with exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},devoutSynthetic:{name:"Devout Synthetic",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253305/FUS_DEVOUT_SYNTHETIC_bavg9k.png",fallbackImage:"/images/cards/FUS_DEVOUT_SYNTHETIC.png",power:4,ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},unwaveringIntegrator:{name:"Unwavering Integrator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253303/FUS_UNWAVERING_INTEGRATOR_emret1.png",fallbackImage:"/images/cards/FUS_UNWAVERING_INTEGRATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},signalProphet:{name:"Signal Prophet",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253299/FUS_SIGNAL_PROPHET_nzd7w3.png",fallbackImage:"/images/cards/FUS_SIGNAL_PROPHET.png",power:3,ability:`Deploy: Exploit each of your cards with support.
Support  Commit: Move your card with your exploit 1 cell.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},zealousMissionary:{name:"Zealous Missionary",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253301/FUS_ZEALOUS_MISSIONARY_mfv9xl.png",fallbackImage:"/images/cards/FUS_ZEALOUS_MISSIONARY.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reduce the power of any card with your exploit by 1.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},overwatch:{name:"Overwatch",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253291/CMD_OVERWATCH_hrba9x.png",fallbackImage:"/images/cards/CMD_OVERWATCH.png",power:0,ability:`Aim any card. Choose 2 of 3:
 Move units with your aim 1 or 2 cells.
 Reveal 1 card for each of your aim.
 Draw 1 card for each of your aim.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},tacticalManeuver:{name:"Tactical Maneuver",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253296/CMD_REPOSITIONING_m7k4kf.png",fallbackImage:"/images/cards/CMD_REPOSITIONING.png",power:0,ability:`Move your unit to any cell in a line. Choose 2 of 3: 
 Draw cards equal to the power of an adjacent allied unit. 
 Move your unit 1 or 2 cells. 
 Gain points equal to the power of one of the moved units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},inspiration:{name:"Inspiration",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763260942/CMD_INSPIRATION_nxifhu.png",fallbackImage:"/images/cards/CMD_INSPIRATION.png",power:0,ability:`Remove any number of counters from your unit. Choose 2 of 3: 
 Move this unit 1 or 2 cells. 
 Draw 1 card for each counter removed. 
 Gain 1 point for each counter removed.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},dataInterception:{name:"Data Interception",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253290/CMD_DATA_INTERCEPTION_ks4lcv.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Exploit any card. Choose 2 of 3: 
 Move a unit with your exploit to any cell in a line. 
 Reveal 1 card for each of your exploits. 
 Draw cards equal to the power of the highest power revealed unit.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},falseOrders:{name:"False Orders",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763640484/CMD_FALSE_ORDERS_ghi01y.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Move an opponent unit 1 or 2 cells. Choose 2 of 3: 
 Move an opponent unit 1 or 2 cells. 
 Stun the moved opponent unit. 
 Draw cards equal to the power of one of the moved opponent units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization1:{name:"Line Breach",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894862/line_ocsoyj.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen line of the battlefield.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization2:{name:"Logistics Chain",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894861/diagonal_u96ulk.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen diagonal of the battlefield.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization3:{name:"Sector Capture",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763895447/support_tgjhgd.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points from 4 adjacent allied cards.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]}},Xh={reconDrone:{name:"Recon Drone",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253333/TKN_RECON_DRONE_esfknf.png",fallbackImage:"/images/cards/TKN_RECON_DRONE.png",power:1,ability:`Setup: Move to any cell.
Commit: You may reveal a card from the hand of your opponent who owns an adjacent card.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them.",color:"bg-gray-400",types:["Unit","Device"],allowedPanels:["TOKEN_PANEL"]},walkingTurret:{name:"Walking Turret",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253307/TKN_WALKING_TURRET_uq6owm.png",fallbackImage:"/images/cards/TKN_WALKING_TURRET.png",power:2,ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets.",color:"bg-gray-400",types:["Unit","Optimates","Device"],allowedPanels:["TOKEN_PANEL"]}},Zh={Aim:{name:"Aim",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Aim_dcct45.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`,sortOrder:1,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Exploit:{name:"Exploit",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Exploit_foomty.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`,sortOrder:2,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},LastPlayed:{name:"LastPlayed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/LastPlayed_bfkbwb.png",description:"This card was last played by its owner.",sortOrder:99,allowedPanels:[],allowedTargets:["board"]},Revealed:{name:"Revealed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Revealed_w1gbe7.png",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand.",sortOrder:7,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board","hand"]},Stun:{name:"Stun",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Stun_cwqroz.png",description:`A stunned card cannot activate abilities or gain points. Its owner's effects cannot move it, but opponent effects can.
Remove 1 stun counter from the card at the end of the Commit Phase.`,sortOrder:4,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Shield:{name:"Shield",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Shield_z9sjr1.png",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead.",sortOrder:3,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Support:{name:"Support",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Support_ui9qpl.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`,sortOrder:5,allowedPanels:[],allowedTargets:["board"]},Threat:{name:"Threat",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Threat_i1pbko.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`,sortOrder:6,allowedPanels:[],allowedTargets:["board"]},"Power+":{name:"Power+",imageUrl:"",description:"Increases the power of the card by 1.",sortOrder:10,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]},"Power-":{name:"Power-",imageUrl:"",description:"Decreases the power of the card by 1.",sortOrder:11,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]}},ey=[{id:"SynchroTech",name:"SynchroTech",isSelectable:!0,cards:[{cardId:"ipDeptAgent",quantity:3},{cardId:"tacticalAgent",quantity:3},{cardId:"patrolAgent",quantity:3},{cardId:"riotAgent",quantity:3},{cardId:"threatAnalyst",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Hoods",name:"Hoods",isSelectable:!0,cards:[{cardId:"recklessProvocateur",quantity:3},{cardId:"dataLiberator",quantity:3},{cardId:"cautiousAvenger",quantity:3},{cardId:"vigilantSpotter",quantity:3},{cardId:"inventiveMaker",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Optimates",name:"Optimates",isSelectable:!0,cards:[{cardId:"faber",quantity:3},{cardId:"censor",quantity:3},{cardId:"princeps",quantity:3},{cardId:"immunis",quantity:3},{cardId:"centurion",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Fusion",name:"Fusion",isSelectable:!0,cards:[{cardId:"codeKeeper",quantity:3},{cardId:"devoutSynthetic",quantity:3},{cardId:"unwaveringIntegrator",quantity:3},{cardId:"signalProphet",quantity:3},{cardId:"zealousMissionary",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]}],Vf={cardDatabase:Qh,tokenDatabase:Xh,countersDatabase:Zh,deckFiles:ey},{cardDatabase:ty,tokenDatabase:ny,countersDatabase:ry,deckFiles:ly}=Vf,Yn=Vf,ms=new Map(Object.entries(ty)),oy=new Map(Object.entries(ny)),Vl=ry,Hf=ly,Xa=new Set(["overwatch","repositioning","mobilization","inspiration","dataInterception"]);function sy(){const e={};for(const t of Hf){const n=[];for(const r of t.cards){const l=ms.get(r.cardId);if(!l){console.warn(`Card definition not found for ID: ${r.cardId} in deck: ${t.name}`);continue}const o=Xa.has(r.cardId);for(let i=0;i<r.quantity;i++){const a=r.cardId.toUpperCase().replace(/-/g,"_");o?n.push({...l,deck:ke.Command,id:`CMD_${a}`,faction:l.faction||"Command"}):n.push({...l,deck:t.id,id:`${t.id.substring(0,3).toUpperCase()}_${a}_${i+1}`,faction:l.faction||t.id})}}e[t.id]=n}return e[ke.Tokens]=Array.from(oy.values()).map(t=>{const n=t.types?[...t.types]:["Unit"];return n.includes("Device")||n.push("Device"),{id:`TKN_${t.name.toUpperCase().replace(/\s/g,"_")}`,deck:ke.Tokens,name:t.name,imageUrl:t.imageUrl,fallbackImage:t.fallbackImage,power:t.power,ability:t.ability,color:t.color,types:n,flavorText:t.flavorText,faction:"Tokens"}}),e}const ta=sy(),Wf=()=>Hf.filter(e=>e.isSelectable);function Za(e){return ms.get(e)}function li(e){return Array.from(ms.values()).find(t=>t.name===e)}function iy(){return Array.from(ms.entries()).map(([e,t])=>({id:e,card:t}))}const Kf={[ke.SynchroTech]:{prefix:"SYN",color:"border-cyan-400"},[ke.Hoods]:{prefix:"HOO",color:"border-purple-500"},[ke.Optimates]:{prefix:"OPT",color:"border-red-500"},[ke.Fusion]:{prefix:"FUS",color:"border-green-400"},[ke.Command]:{prefix:"CMD",color:"border-yellow-500"},[ke.Tokens]:{prefix:"TKN",color:"border-gray-400"},[ke.Custom]:{prefix:"CUS",color:"border-purple-400"}},Ft={blue:{bg:"bg-blue-600",border:"border-blue-600",outline:"outline-blue-600",glow:"shadow-[0_0_15px_#2563eb]"},purple:{bg:"bg-purple-600",border:"border-purple-600",outline:"outline-purple-600",glow:"shadow-[0_0_15px_#9333ea]"},red:{bg:"bg-red-600",border:"border-red-600",outline:"outline-red-600",glow:"shadow-[0_0_15px_#dc2626]"},green:{bg:"bg-green-600",border:"border-green-600",outline:"outline-green-600",glow:"shadow-[0_0_15px_#16a34a]"},yellow:{bg:"bg-yellow-500",border:"border-yellow-500",outline:"outline-yellow-500",glow:"shadow-[0_0_15px_#eab308]"},orange:{bg:"bg-orange-500",border:"border-orange-500",outline:"outline-orange-500",glow:"shadow-[0_0_15px_#f97316]"},pink:{bg:"bg-pink-500",border:"border-pink-500",outline:"outline-pink-500",glow:"shadow-[0_0_15px_#ec4899]"},brown:{bg:"bg-[#8B4513]",border:"border-[#8B4513]",outline:"outline-[#8B4513]",glow:"shadow-[0_0_15px_#8B4513]"}},Jf=["blue","purple","red","green","yellow","orange","pink","brown"],na=["Setup","Command Phase #1","Deploy","Command Phase #2","Commit"],eu=Object.fromEntries(Object.entries(Vl).map(([e,t])=>[e,t.imageUrl])),qo=Object.fromEntries(Object.entries(Vl).map(([e,t])=>[e,t.description])),ay=Object.entries(Vl).filter(([,e])=>!e.allowedPanels||e.allowedPanels.includes("COUNTER_PANEL")).sort(([,e],[,t])=>e.sortOrder-t.sortOrder).map(([e,t])=>({type:e,label:t.name})),oi=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},uy={1:"top-[59px] left-2",2:"top-[59px] right-2",3:"bottom-[3px] left-2",4:"bottom-[3px] right-2"},cy=e=>{const t={bold:["Support","support","Threat","threat","threaten","Act","Pas","Trg","Int","ETB","Deploy","Setup","Commit","Exploit","exploits","Aim","Stun","Shield","Gain points","gain points"],italic:["This counter has no effect on its own, but it can modify the abilities of cards."]},n=t.bold.map(o=>o.toLowerCase()),r=t.italic.map(o=>o.toLowerCase());return e.split(/(\s+|[.,:()])/).map((o,i)=>{if(!o)return null;const a=o.replace(/[.,:()]/g,"").toLowerCase();return a&&n.includes(a)?In.createElement("strong",{key:i,className:"text-white"},o):a&&r.includes(a)?In.createElement("em",{key:i,className:"text-gray-300 italic font-semibold"},o):o})},Yf=e=>e?e.split(`
`).map((t,n)=>{const r=[];return n>0&&r.push(In.createElement("br",{key:`br-${n}`})),r.push(...cy(t)),In.createElement(In.Fragment,{key:n},...r.filter(Boolean))}):"",qf=({x:e,y:t,children:n})=>{const r=T.useRef(null),[l,o]=T.useState({top:t+20,left:e+20});return T.useLayoutEffect(()=>{if(r.current){const{innerWidth:i,innerHeight:a}=window,{offsetWidth:u,offsetHeight:c}=r.current;let f=e+20;f+u>i&&(f=e-u-20),f<5&&(f=5);let y=t+20;y+c>a&&(y=t-c-20),y<5&&(y=5),o({top:y,left:f})}},[e,t,n]),ps.createPortal(s.jsx("div",{ref:r,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[99999] p-3 text-white text-base pointer-events-none transition-opacity duration-100",style:{top:l.top,left:l.left,opacity:1},children:n}),document.body)},tu=({card:e,statusDescriptions:t,className:n,hideOwner:r=!1,powerPosition:l="default"})=>{var d;const o=(d=e.types)!=null&&d.length?e.types.join(", "):e.deck==="counter"?"":`${e.deck} Card`,i=e.powerModifier||0,a=Math.max(0,e.power+i),u=(e.statuses??[]).reduce((p,m)=>(p[m.type]=(p[m.type]||0)+1,p),{}),c=Object.keys(u).length>0,f=e.ownerName||(e.ownerId?`Player ${e.ownerId}`:null);let y="bg-gray-700 border-gray-500",k="text-white";i>0?(y="bg-green-900 border-green-500",k="text-green-400"):i<0&&(y="bg-red-900 border-red-500",k="text-red-400");const _=e.ability?e.ability.length:0,j=c?Object.keys(u).length*10:0,N=_>35||j>35,A=n||"relative flex flex-col text-left w-max max-w-[90vw]",v=l==="inner"?"top-0.5 right-0.5":"-top-1 -right-1";return s.jsxs("div",{className:A,children:[e.power>0&&s.jsx("div",{className:`absolute ${v} w-[37px] h-[37px] flex items-center justify-center rounded border-2 ${y} shadow-sm z-10`,children:s.jsx("span",{className:`font-bold text-lg ${k}`,children:a})}),s.jsxs("div",{className:"mb-1 pr-8 whitespace-nowrap",children:[s.jsx("div",{className:"font-bold text-white text-lg leading-tight mb-0.5",children:e.name}),o&&s.jsx("div",{className:"text-xs text-gray-400 font-semibold",children:o})]}),s.jsxs("div",{className:`flex flex-col ${!n&&N?"w-[16rem]":"w-full"} whitespace-normal break-words`,children:[e.ability&&s.jsx("hr",{className:"border-gray-600 mt-[0px] mb-[2px]"}),e.ability&&s.jsx("div",{className:"text-sm text-gray-200 leading-snug",children:Yf(e.ability)}),e.ability&&s.jsx("hr",{className:"border-gray-600 my-[4px]"}),c&&s.jsx("div",{className:"text-xs text-gray-200 leading-snug",children:Object.entries(u).map(([p,m],b,O)=>s.jsxs("span",{children:[s.jsx("span",{className:"font-bold text-indigo-300",children:p}),m>1&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(x",m,")"]}),b<O.length-1?s.jsx("span",{className:"text-gray-400 mr-1",children:", "}):""]},p))}),c&&f&&!r&&s.jsx("hr",{className:"border-gray-600 my-[2px]"}),f&&!r&&s.jsxs("div",{className:"text-xs text-gray-500 font-semibold",children:["Owner: ",s.jsx("span",{className:"text-gray-300",children:f})]})]})]})},Sc=(e,t,n,r)=>e===n||t===r,yr=(e,t,n,r)=>Math.abs(e-n)+Math.abs(t-r)===1,pe=(e,t,n)=>e.statuses?e.statuses.some(r=>r.type===t&&(n===void 0||r.addedByPlayerId===n)):!1,ra=(e,t,n)=>{var i;if(n!==e.ownerId||e.abilityUsedInPhase===t||(i=e.statuses)!=null&&i.some(a=>a.type==="Stun"))return!1;const r=e.name.toLowerCase(),l=e.ability?e.ability.toLowerCase():"";if((pe(e,"Resurrected")||e.enteredThisTurn)&&l.includes("deploy:"))return!e.deployAbilityConsumed;if((t===1||t===3)&&l.includes("act:"))return!0;if(t===2){if(e.deployAbilityConsumed)return!1;if(l.includes("deploy:"))return!0;if(r.includes("immunis"))return pe(e,"Support",n)}if(t===4&&(l.includes("commit:")||r.includes("censor")||r.includes("walking turret")||r.includes("reckless provocateur")||r.includes("vigilant spotter")||r.includes("threat analyst")||r.includes("patrol agent")||r.includes("zealous missionary")||r.includes("code keeper")||r.includes("signal prophet")||r.includes("riot agent")||r.includes("ip dept agent")||r.includes("recon drone")))return!0;if(t===0){if(r.includes("centurion")||r.includes("cautious avenger")||r.includes("inventive maker")||r.includes("devout synthetic")||r.includes("unwavering integrator"))return pe(e,"Support",n);if(l.includes("setup:")||r.includes("princeps")||r.includes("tactical agent")||r.includes("patrol agent")||r.includes("recon drone"))return!0}return!1},dy=(e,t,n,r)=>{const l=e.name.toLowerCase(),o=t.currentPhase,i=e.ownerId,a=pe(e,"Resurrected"),u=o===2||a||e.enteredThisTurn;if(n!==i||u&&e.deployAbilityConsumed)return null;if(l.includes("ip dept agent")){if(u)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenType:"Stun",count:2,filter:c=>pe(c,"Exploit")}};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:c=>c.ownerId!==i&&pe(c,"Revealed",n)}}:null}if(l.includes("tactical agent")){if(u)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenType:"Aim",filter:c=>pe(c,"Threat",n)}};if(o===0)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:c=>pe(c,"Aim")}}}if(l.includes("patrol agent")){if(o===0)return{type:"ENTER_MODE",mode:"PATROL_MOVE",sourceCard:e,sourceCoords:r,payload:{}};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Stun",filter:(c,f,y)=>c.ownerId!==i&&yr(f,y,r.row,r.col)&&pe(c,"Threat")}}:null}if(l.includes("riot agent")){if(u)return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{}};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Stun",filter:(c,f,y)=>c.ownerId!==i&&yr(f,y,r.row,r.col)&&pe(c,"Threat")}}:null}if(l.includes("threat analyst")){if(u)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,isDeployAbility:!0};if(o===4){if(!pe(e,"Support",i))return null;let c=0;if(t.board.forEach(f=>{f.forEach(y=>{y.card&&pe(y.card,"Exploit",n)&&c++})}),c>0)return{type:"CREATE_STACK",tokenType:"Revealed",count:c}}}if(l.includes("reckless provocateur")){if(u)return{type:"ENTER_MODE",mode:"SWAP_POSITIONS",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{filter:(c,f,y)=>yr(f,y,r.row,r.col)}};if(o===4)return{type:"ENTER_MODE",mode:"TRANSFER_ALL_STATUSES",sourceCard:e,sourceCoords:r,payload:{filter:c=>{if(c.id===e.id)return!1;const f=t.players.find(_=>_.id===c.ownerId),y=t.players.find(_=>_.id===i);return c.ownerId===i||(f==null?void 0:f.teamId)!==void 0&&(y==null?void 0:y.teamId)!==void 0&&f.teamId===y.teamId}}}}if(l.includes("data liberator")&&u)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,isDeployAbility:!0};if(l.includes("cautious avenger")){if(u)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenType:"Aim",filter:(c,f,y)=>Sc(f,y,r.row,r.col)}};if(o===0)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:c=>pe(c,"Aim")}}:null}if(l.includes("vigilant spotter")&&o===4)return{type:"CREATE_STACK",tokenType:"Revealed",count:1,onlyFaceDown:!0,targetOwnerId:void 0,excludeOwnerId:i};if(l.includes("inventive maker")){if(u)return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenName:"Recon Drone"}};if(o===0)return pe(e,"Support",i)?{type:"OPEN_MODAL",mode:"RETRIEVE_DEVICE",sourceCard:e,sourceCoords:r,payload:{}}:null}if(l.includes("recon drone")){if(o===0)return{type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:e,sourceCoords:r,payload:{allowSelf:!1,range:"global"}};if(o===4)return{type:"ENTER_MODE",mode:"REVEAL_ENEMY",sourceCard:e,sourceCoords:r,payload:{filter:(c,f,y)=>yr(f,y,r.row,r.col)&&c.ownerId!==i}}}if(l.includes("censor")){if(u)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,isDeployAbility:!0};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"CENSOR_SWAP",sourceCard:e,sourceCoords:r,payload:{filter:c=>pe(c,"Exploit",i)}}:null}if(l.includes("centurion")&&o===0&&pe(e,"Support",i))return{type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:e,sourceCoords:r,payload:{actionType:"CENTURION_BUFF",firstCoords:r}};if(l.includes("faber")&&u)return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenName:"Walking Turret"}};if(l.includes("princeps")){if(u)return{type:"ENTER_MODE",mode:"PRINCEPS_SHIELD_THEN_AIM",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{}};if(o===0)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(c,f,y)=>Sc(f,y,r.row,r.col)?pe(c,"Aim",i):!1}}}if(l.includes("immunis")&&u){if(!pe(e,"Support",i))return null;const c=t.players.find(f=>f.id===i);return c==null||c.discard.some(f=>{var y,k;return(((y=f.types)==null?void 0:y.includes("Optimates"))||f.faction==="Optimates"||f.deck==="Optimates")&&((k=f.types)==null?void 0:k.includes("Unit"))}),{type:"OPEN_MODAL",mode:"IMMUNIS_RETRIEVE",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{filter:(f,y)=>yr(f,y,r.row,r.col)}}}if(l.includes("walking turret")&&o===4)return!pe(e,"Support",i)||pe(e,"Shield")?null:{type:"ENTER_MODE",mode:"WALKING_TURRET_SHIELD",sourceCard:e,sourceCoords:r,payload:{}};if(l.includes("code keeper")){if(u)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenType:"Exploit",filter:c=>c.ownerId!==i&&pe(c,"Threat",i)}};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:c=>c.ownerId!==i&&pe(c,"Exploit",i)}}:null}if(l.includes("devout synthetic")){if(u)return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{}};if(o===0)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(c,f,y)=>!yr(f,y,r.row,r.col)||c.ownerId===i?!1:pe(c,"Threat",i)||pe(c,"Stun",i)}}:null}if(l.includes("unwavering integrator")){if(u)return{type:"CREATE_STACK",tokenType:"Exploit",count:1,isDeployAbility:!0};if(o===0)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"INTEGRATOR_SCORE",sourceCard:e,sourceCoords:r,payload:{}}:null}if(l.includes("signal prophet")){if(u)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,isDeployAbility:!0,payload:{tokenType:"Exploit",filter:c=>c.ownerId===i&&pe(c,"Support",i)}};if(o===4)return pe(e,"Support",i)?{type:"ENTER_MODE",mode:"SELECT_UNIT_FOR_MOVE",sourceCard:e,sourceCoords:r,payload:{filter:c=>c.ownerId===i&&pe(c,"Exploit",i)}}:null}return l.includes("zealous missionary")&&o===4?pe(e,"Support",i)?{type:"ENTER_MODE",mode:"ZEALOUS_WEAKEN",sourceCard:e,sourceCoords:r,payload:{filter:c=>pe(c,"Exploit",i)}}:null:u&&e.ability.toLowerCase().includes("shield 1")?{type:"CREATE_STACK",tokenType:"Shield",count:1,isDeployAbility:!0}:(o===1||o===3)&&e.ability.toLowerCase().includes("stun 1")?{type:"CREATE_STACK",tokenType:"Stun",count:1}:(o===1||o===3)&&e.ability.toLowerCase().includes("aim 1")?{type:"CREATE_STACK",tokenType:"Aim",count:1}:null},Ut=({card:e,isFaceUp:t,playerColorMap:n,localPlayerId:r,imageRefreshVersion:l,disableTooltip:o,smallStatusIcons:i,activePhaseIndex:a,activeTurnPlayerId:u,disableActiveHighlights:c})=>{const[f,y]=T.useState(!1),[k,_]=T.useState({x:0,y:0}),j=T.useRef(null),[N,A]=T.useState(!1);T.useEffect(()=>{A(!1)},[a]),T.useEffect(()=>{c||A(!1)},[c]);const[v,d]=T.useState(e.imageUrl);T.useEffect(()=>{let L=e.imageUrl;if(l&&L){const te=L.includes("?")?"&":"?";L=`${L}${te}v=${l}`}d(L)},[e.imageUrl,l]);const p=()=>{let L=e.fallbackImage;if(l&&L){const te=L.includes("?")?"&":"?";L=`${L}${te}v=${l}`}v!==L&&d(L)},m=L=>{o||L.clientX===0&&L.clientY===0||(_({x:L.clientX,y:L.clientY}),!f&&!j.current&&(j.current=window.setTimeout(()=>{y(!0)},250)))},b=L=>{o||((L.clientX!==0||L.clientY!==0)&&_({x:L.clientX,y:L.clientY}),j.current&&clearTimeout(j.current),j.current=window.setTimeout(()=>{y(!0)},250))},O=()=>{j.current&&(clearTimeout(j.current),j.current=null),y(!1)},U=()=>{j.current&&(clearTimeout(j.current),j.current=null),y(!1)},G=a!==void 0&&u!==void 0?ra(e,a,u):!1,W=!c&&!N&&G,V=L=>{W&&r===e.ownerId&&A(!0)},le=(e.statuses??[]).reduce((L,te)=>{const de=`${te.type}_${te.addedByPlayerId}`;return L[de]||(L[de]={type:te.type,playerId:te.addedByPlayerId,count:0}),L[de].count++,L},{}),ue=({type:L,playerId:te,count:de})=>{const Oe=n.get(te),me=Oe&&Ft[Oe]?Ft[Oe].bg:"bg-gray-500";let Te=eu[L];if(Te&&l){const Ge=Te.includes("?")?"&":"?";Te=`${Te}${Ge}v=${l}`}const Be=["Support","Threat","Revealed","LastPlayed"].includes(L),ne=!Be&&de>1,q=ne?"p-1.5":"p-1",Ne=i?"w-6 h-6":"w-8 h-8",nt=i?ne?"text-xs":"text-base":ne?"text-base":"text-lg",ge=i?"text-[10px]":"text-xs";return s.jsxs("div",{className:`relative ${Ne} flex items-center justify-center ${me} bg-opacity-80 rounded-sm shadow-md flex-shrink-0`,title:`${L} (Player ${te}) ${!Be&&de>0?`x${de}`:""}`,children:[Te?s.jsx("img",{src:Te,alt:L,className:`object-contain w-full h-full transition-all duration-150 ${q}`}):s.jsx("span",{className:`text-white font-black transition-all duration-150 ${nt}`,style:{textShadow:"0 0 2px black"},children:L.charAt(0)}),ne&&s.jsx("span",{className:`absolute top-0 right-0.5 text-white font-bold ${ge} leading-none`,style:{textShadow:"1px 1px 2px black"},children:de})]})};if(e.deck==="counter")return s.jsx("div",{title:e.name,className:`w-full h-full ${e.color} shadow-md`,style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)"}});const ce=e.ownerId?n.get(e.ownerId):null,fe=ce&&Ft[ce]?Ft[ce]:null,_e=Object.values(le).sort((L,te)=>L.type!==te.type?L.type.localeCompare(te.type):L.playerId-te.playerId),we=e.powerModifier||0,se=Math.max(0,e.power+we);let $="text-white";we>0?$="text-green-400":we<0&&($="text-red-500");const ee=f&&t&&!o&&k.x>0&&k.y>0;return s.jsxs(s.Fragment,{children:[t?(()=>{var nt;const L=fe?fe.border:((nt=Kf[e.deck])==null?void 0:nt.color)||"border-gray-300",te=e.deck===ke.Tokens?e.color:"bg-card-face",de=(e.deck===ke.Tokens,"text-black"),Oe=["Support","Shield"],me=_e.filter(ge=>Oe.includes(ge.type)),Te=_e.filter(ge=>!Oe.includes(ge.type)&&ge.type!=="LastPlayed"),Be=_e.find(ge=>ge.type==="LastPlayed"),ne=Be?[Be,...me]:me,q=fe?fe.glow:"shadow-[0_0_15px_#ffffff]",Ne=W?`border-[6px] shadow-2xl ${q}`:"border-4";return s.jsxs("div",{onMouseEnter:b,onMouseLeave:O,onMouseMove:m,onMouseDown:U,onClick:V,className:`relative w-full h-full ${te} rounded-md shadow-md ${Ne} ${L} ${de} flex-shrink-0 select-none overflow-hidden transition-all duration-300 ${W?"scale-[1.15] z-10":""}`,children:[v?s.jsx("img",{src:v,onError:p,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full p-1 flex items-center justify-center",children:s.jsx("span",{className:"text-center text-sm font-bold",children:e.name})}),_e.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-[3px] left-[3px] right-[3px] flex flex-row-reverse flex-wrap justify-start items-start z-10 pointer-events-none",children:Te.map(ge=>s.jsx(ue,{type:ge.type,playerId:ge.playerId,count:ge.count},`${ge.type}_${ge.playerId}`))}),s.jsx("div",{className:"absolute bottom-[3px] left-[3px] right-[30px] flex flex-wrap-reverse content-start items-end z-10 pointer-events-none",children:ne.map(ge=>s.jsx(ue,{type:ge.type,playerId:ge.playerId,count:ge.count},`${ge.type}_${ge.playerId}`))})]}),e.power>0&&s.jsx("div",{className:`absolute bottom-[5px] right-[5px] w-8 h-8 rounded-full ${fe?fe.bg:"bg-gray-600"} border-[3px] border-white flex items-center justify-center z-20 shadow-md`,children:s.jsx("span",{className:`${$} font-bold text-lg leading-none`,style:{textShadow:"0 0 2px black"},children:se})})]})})():(()=>{const L=fe?fe.bg:"bg-card-back",te=fe?fe.border:"border-blue-300",de=_e.find(Oe=>Oe.type==="LastPlayed");return s.jsx("div",{onMouseEnter:b,onMouseLeave:O,onMouseMove:m,onMouseDown:U,className:`relative w-full h-full ${L} rounded-md shadow-md border-2 ${te} flex-shrink-0 transition-transform duration-300 ${W?"scale-[1.15] z-10":""}`,children:de&&s.jsx("div",{className:"absolute bottom-[3px] left-[3px] pointer-events-none",children:s.jsx(ue,{type:de.type,playerId:de.playerId,count:de.count})})})})(),ee&&s.jsx(qf,{x:k.x,y:k.y,children:s.jsx(tu,{card:e})})]})},fy=({row:e,col:t,cell:n,isGameStarted:r,handleDrop:l,draggedItem:o,setDraggedItem:i,openContextMenu:a,playMode:u,setPlayMode:c,playerColorMap:f,localPlayerId:y,onCardDoubleClick:k,onEmptyCellDoubleClick:_,imageRefreshVersion:j,cursorStack:N,setCursorStack:A,currentPhase:v,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,isValidTarget:b,showNoTarget:O,disableActiveHighlights:U})=>{const[G,W]=In.useState(!1),V=me=>{me.preventDefault(),o&&l(o,{target:"board",boardCoords:{row:e,col:t}}),W(!1)},le=()=>{if(u){const me={...u.sourceItem,card:{...u.sourceItem.card}};me.card.isFaceDown=!!u.faceDown,l(me,{target:"board",boardCoords:{row:e,col:t}}),c(null)}else n.card&&p?p(n.card,{row:e,col:t}):!n.card&&m&&m({row:e,col:t})},ue=me=>{me.preventDefault();const Te=(o==null?void 0:o.source)==="counter_panel";(!n.card||n.card&&Te)&&W(!0)},ce=()=>{W(!1)},fe=!!u,_e=!!N,we=!!n.card,se="w-full h-full rounded-lg transition-colors duration-200 flex items-center justify-center relative",$=!!o&&(!we||we&&o.source==="counter_panel"),te=b||fe&&!we||_e&&b,Oe=`bg-board-cell-active ${G&&$?"bg-indigo-400 opacity-80":""} ${fe&&we?"cursor-not-allowed":""} ${te?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] cursor-pointer z-10":""}`;return s.jsxs("div",{onDrop:V,onDragOver:ue,onDragLeave:ce,onClick:le,onContextMenu:me=>{n.card||a(me,"emptyBoardCell",{boardCoords:{row:e,col:t}})},onDoubleClick:()=>{n.card||_({row:e,col:t})},className:`${se} ${Oe}`,"data-interactive":!n.card,"data-board-coords":`${e},${t}`,children:[te&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-cyan-400 bg-opacity-30 animate-pulse pointer-events-none"}),n.card&&s.jsxs("div",{draggable:r,onDragStart:()=>i({card:n.card,source:"board",boardCoords:{row:e,col:t},isManual:!0}),onDragEnd:()=>i(null),onContextMenu:me=>a(me,"boardItem",{card:n.card,boardCoords:{row:e,col:t}}),onDoubleClick:me=>{me.stopPropagation(),N?le():k(n.card,{row:e,col:t})},className:`w-full h-full ${r?"cursor-grab":"cursor-default"} relative`,"data-interactive":"true",children:[s.jsx(Ut,{card:n.card,isFaceUp:(()=>{var q;const me=n.card;if(!me)return!1;const Te=me.revealedTo==="all",Be=y!==null&&Array.isArray(me.revealedTo)&&me.revealedTo.includes(y),ne=y!==null&&((q=me.statuses)==null?void 0:q.some(Ne=>Ne.type==="Revealed"&&Ne.addedByPlayerId===y));return!me.isFaceDown||Te||Be||ne})(),playerColorMap:f,localPlayerId:y,imageRefreshVersion:j,activePhaseIndex:v,activeTurnPlayerId:d,disableActiveHighlights:U}),O&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none animate-pulse",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763978163/no_tarket_mic5sm.png",alt:"No Target",className:"w-4/5 h-4/5 object-contain drop-shadow-lg opacity-90"})})]},n.card.id)]})},Ec={4:"grid-cols-4 grid-rows-4",5:"grid-cols-5 grid-rows-5",6:"grid-cols-6 grid-rows-6",7:"grid-cols-7 grid-rows-7"},Nc=({board:e,isGameStarted:t,activeGridSize:n,handleDrop:r,draggedItem:l,setDraggedItem:o,openContextMenu:i,playMode:a,setPlayMode:u,highlight:c,playerColorMap:f,localPlayerId:y,onCardDoubleClick:k,onEmptyCellDoubleClick:_,imageRefreshVersion:j,cursorStack:N,setCursorStack:A,currentPhase:v,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,validTargets:b,noTargetOverlay:O,disableActiveHighlights:U})=>{const G=e.length,W=Math.floor((G-n)/2),V=e.slice(W,W+n).map(ue=>ue.slice(W,W+n)),le=()=>{if(!c)return null;const{type:ue,row:ce,col:fe,playerId:_e}=c,we=f.get(_e),$=`outline outline-[8px] ${we&&Ft[we]?Ft[we].outline:"outline-yellow-400"} rounded-lg`;if(ue==="row"&&ce!==void 0&&ce>=W&&ce<W+n){const ee=ce-W+1;return s.jsx("div",{className:$,style:{gridArea:`${ee} / 1 / ${ee+1} / ${n+1}`}})}if(ue==="col"&&fe!==void 0&&fe>=W&&fe<W+n){const ee=fe-W+1;return s.jsx("div",{className:$,style:{gridArea:`1 / ${ee} / ${n+1} / ${ee+1}`}})}if(ue==="cell"&&ce!==void 0&&fe!==void 0&&ce>=W&&ce<W+n&&fe>=W&&fe<W+n){const ee=ce-W+1,L=fe-W+1;return s.jsx("div",{className:$,style:{gridArea:`${ee} / ${L} / ${ee+1} / ${L+1}`}})}return null};return s.jsxs("div",{className:"relative p-2 bg-board-bg rounded-xl shadow-2xl h-full aspect-square transition-all duration-300",children:[s.jsx("div",{className:`grid ${Ec[n]} gap-0.5 h-full w-full`,children:V.map((ue,ce)=>ue.map((fe,_e)=>{const we=ce+W,se=_e+W,$=b==null?void 0:b.some(L=>L.row===we&&L.col===se),ee=O&&O.row===we&&O.col===se;return s.jsx(fy,{row:we,col:se,cell:fe,isGameStarted:t,handleDrop:r,draggedItem:l,setDraggedItem:o,openContextMenu:i,playMode:a,setPlayMode:u,playerColorMap:f,localPlayerId:y,onCardDoubleClick:k,onEmptyCellDoubleClick:_,imageRefreshVersion:j,cursorStack:N,setCursorStack:A,currentPhase:v,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,isValidTarget:$,showNoTarget:ee,disableActiveHighlights:U},`${we}-${se}`)}))}),c&&s.jsx("div",{className:`absolute top-2 right-2 bottom-2 left-2 grid ${Ec[n]} gap-0.5 pointer-events-none z-20`,children:s.jsx(le,{})})]})},At=({onDrop:e,children:t,className:n,isOverClassName:r="bg-indigo-500",onContextMenu:l,style:o})=>{const[i,a]=T.useState(!1),u=y=>{y.preventDefault(),a(!0)},c=y=>{a(!1)},f=y=>{y.preventDefault(),a(!1),e()};return s.jsx("div",{onDragOver:u,onDragLeave:c,onDrop:f,onContextMenu:l,className:`${n} transition-colors ${i?r:""}`,"data-interactive":!!l,style:o,children:t})},si=({player:e,canEditSettings:t,selectedColors:n,onColorChange:r,compact:l=!1})=>{const[o,i]=T.useState(!1),[a,u]=T.useState({top:0,left:0}),c=T.useRef(null),f=T.useRef(null),y=Ft[e.color]?e.color:"blue",k=Ft[y];T.useEffect(()=>{const j=N=>{const A=N.target;o&&c.current&&!c.current.contains(A)&&f.current&&!f.current.contains(A)&&i(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[o]);const _=()=>{if(t)if(!o&&c.current){const j=c.current.getBoundingClientRect();u({top:j.bottom+window.scrollY+4,left:j.left+window.scrollX}),i(!0)}else i(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:c,type:"button",onClick:_,disabled:!t,className:`flex items-center gap-2 bg-gray-700 p-1.5 rounded-md border border-gray-600 justify-center disabled:opacity-100 disabled:cursor-default hover:bg-gray-600 ${l?"px-2 py-1":"w-28"} flex-shrink-0`,title:t?"Change Color":void 0,children:[s.jsx("div",{className:`rounded-full ${k.bg} border border-white/50 ${l?"w-3 h-3":"w-4 h-4"}`}),!l&&s.jsx("span",{className:"capitalize font-medium truncate",children:y})]}),o&&ps.createPortal(s.jsx("div",{ref:f,className:"fixed bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 left-0 z-[9990]",style:{top:a.top,left:a.left,width:"9rem"},children:Jf.map(j=>{const N=n.has(j),A=Ft[j];return s.jsxs("button",{type:"button",disabled:N,onClick:()=>{r(j),i(!1)},className:"w-full flex items-center gap-3 px-3 py-1.5 text-sm text-left hover:bg-indigo-600 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${A.bg} border border-white/50`}),s.jsx("span",{className:"capitalize font-medium text-white",children:j})]},j)})}),document.body)]})},ii=({player:e,isLocalPlayer:t,localPlayerId:n,isSpectator:r,isGameStarted:l,position:o,onNameChange:i,onColorChange:a,onScoreChange:u,onDeckChange:c,onLoadCustomDeck:f,onDrawCard:y,handleDrop:k,draggedItem:_,setDraggedItem:j,openContextMenu:N,onHandCardDoubleClick:A,playerColorMap:v,allPlayers:d,localPlayerTeamId:p,activeTurnPlayerId:m,onToggleActiveTurn:b,imageRefreshVersion:O,layoutMode:U="standard",onCardClick:G,validHandTargets:W,onAnnouncedCardDoubleClick:V,currentPhase:le,disableActiveHighlights:ue})=>{const ce=!!e.isDisconnected,fe=p!==void 0&&e.teamId===p,_e=T.useRef(null),we=!l&&!r&&(t||!!e.isDummy),se=!r&&l&&(t||ce||!!e.isDummy),$=t&&!ce,ee=new Set(d.filter(ne=>!ne.isDummy&&ne.id!==e.id).map(ne=>ne.color)),L=T.useMemo(()=>Wf(),[]),te=e.id===m,de=ne=>{const q=ne.target.value;c(q)},Oe=()=>{var ne;(ne=_e.current)==null||ne.click()},me=ne=>{var nt;const q=(nt=ne.target.files)==null?void 0:nt[0];if(!q)return;const Ne=new FileReader;Ne.onload=ge=>{var Ge;try{const vt=(Ge=ge.target)==null?void 0:Ge.result,Pt=JSON.parse(vt);f(Pt)}catch(vt){alert(`Error loading deck: ${vt instanceof Error?vt.message:"Unknown error"}`)}finally{ne.target&&(ne.target.value="")}},Ne.readAsText(q)};if(U==="list-remote"){const ne=te?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full bg-panel-bg rounded-lg shadow-lg p-3 border-2 ${ne} ${ce?"opacity-60":""} flex flex-col overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-grow",children:[s.jsx(si,{player:e,canEditSettings:we,selectedColors:ee,onColorChange:a,compact:!0}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:`font-bold text-base truncate ${te?"text-yellow-400":"text-white"}`,children:e.name}),e.isDummy&&!l&&s.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:s.jsx("select",{value:e.selectedDeck,onChange:de,className:"bg-gray-800 border border-gray-600 text-xs rounded p-0.5 text-gray-300 max-w-[120px]",onClick:q=>q.stopPropagation(),children:L.map(q=>s.jsx("option",{value:q.id,children:q.name},q.id))})})]})]}),s.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:s.jsx("input",{type:"checkbox",checked:te,onChange:()=>b(e.id),disabled:!t&&!e.isDummy,className:"w-4 h-4 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Mark as Active Turn"})})]}),s.jsxs("div",{className:"grid grid-cols-6 gap-1 mb-2 flex-shrink-0",children:[s.jsx(At,{onDrop:()=>_&&k(_,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:q=>se&&N(q,"deckPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-card-back rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:ring-1 ring-white shadow-sm",onClick:se?y:void 0,title:"Deck",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-white drop-shadow-md",children:"DECK"}),s.jsx("span",{className:"text-xl font-bold text-white drop-shadow-md",children:e.deck.length})]})}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"discard",playerId:e.id}),onContextMenu:q=>se&&N(q,"discardPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-gray-700 rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 shadow-sm",title:"Discard",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-xl font-bold text-white",children:e.discard.length})]})}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"announced",playerId:e.id}),className:"w-full aspect-square bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",isOverClassName:"bg-indigo-600",children:e.announcedCard?s.jsx("div",{className:"w-full h-full cursor-pointer",draggable:se,onDragStart:()=>se&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:q=>se&&N(q,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Ut,{card:e.announcedCard,isFaceUp:!0,playerColorMap:v,imageRefreshVersion:O,activePhaseIndex:le,activeTurnPlayerId:m,disableActiveHighlights:ue})}):s.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Showcase"})}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{className:"flex justify-end h-full w-full",children:s.jsxs("div",{className:"flex flex-col items-center justify-between h-full w-6",children:[s.jsx("button",{onClick:()=>u(1),disabled:!se,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"+"}),s.jsx("span",{className:"font-bold text-lg leading-none",children:e.score}),s.jsx("button",{onClick:()=>u(-1),disabled:!se,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"-"})]})})]}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"hand",playerId:e.id}),className:"w-full bg-gray-900/50 rounded p-1 grid grid-cols-6 gap-1 flex-grow overflow-y-scroll content-start",children:e.hand.map((q,Ne)=>{const ge=(W==null?void 0:W.some(Ge=>Ge.playerId===e.id&&Ge.cardIndex===Ne))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-full aspect-square ${ge}`,draggable:se,onDragStart:()=>se&&j({card:q,source:"hand",playerId:e.id,cardIndex:Ne}),onDragEnd:()=>j(null),onContextMenu:Ge=>l&&N(Ge,"handCard",{card:q,player:e,cardIndex:Ne}),onDoubleClick:()=>A(e,q,Ne),onClick:()=>G&&G(e,q,Ne),"data-hand-card":`${e.id},${Ne}`,children:s.jsx(Ut,{card:q,isFaceUp:(()=>{var un;const Ge=q.revealedTo==="all",vt=n!==null&&Array.isArray(q.revealedTo)&&q.revealedTo.includes(n),Pt=n!==null&&((un=q.statuses)==null?void 0:un.some(cr=>cr.type==="Revealed"&&cr.addedByPlayerId===n));return t||fe||!!e.isDummy||ce||Ge||vt||Pt})(),playerColorMap:v,localPlayerId:n,imageRefreshVersion:O,disableActiveHighlights:ue})},`${q.id}-${Ne}`)})})]})}if(U==="list-local"){const ne=te?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full flex flex-col p-4 bg-panel-bg border-2 ${ne} rounded-lg shadow-2xl ${ce?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-[3px] flex-shrink-0",children:[s.jsx(si,{player:e,canEditSettings:we,selectedColors:ee,onColorChange:a}),s.jsxs("div",{className:"flex-grow relative flex items-center",children:[s.jsx("input",{type:"text",value:e.name,onChange:q=>i(q.target.value),readOnly:!we,className:"bg-transparent font-bold text-xl p-1 flex-grow focus:bg-gray-800 rounded focus:outline-none border-b border-gray-600 mr-3"}),s.jsx("input",{type:"checkbox",checked:te,onChange:()=>b(e.id),disabled:!t&&!e.isDummy,className:"w-6 h-6 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Active Turn"})]})]}),s.jsxs("div",{className:"flex justify-between items-start gap-4 bg-gray-800 p-[2px] rounded-lg mb-[3px] flex-shrink-0",children:[s.jsxs("div",{className:"p-0 border border-transparent flex gap-[3px]",children:[s.jsx(At,{onDrop:()=>_&&k(_,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:q=>se&&N(q,"deckPile",{player:e}),children:s.jsxs("div",{onClick:se?y:void 0,className:"w-[120px] h-[120px] bg-card-back rounded flex flex-col items-center justify-center cursor-pointer hover:ring-2 ring-indigo-400 transition-all shadow-lg",children:[s.jsx("span",{className:"text-xs font-bold mb-1",children:"DECK"}),s.jsx("span",{className:"text-lg font-bold",children:e.deck.length})]})}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"discard",playerId:e.id}),onContextMenu:q=>se&&N(q,"discardPile",{player:e}),isOverClassName:"bg-indigo-600 ring-2",children:s.jsxs("div",{className:"w-[120px] h-[120px] bg-gray-700 rounded flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 transition-all shadow-lg border border-gray-600",children:[s.jsx("span",{className:"text-xs font-bold mb-1 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-lg font-bold",children:e.discard.length})]})}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"announced",playerId:e.id}),className:"w-[120px] h-[120px] bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",children:e.announcedCard?s.jsx("div",{className:"w-full h-full p-1 cursor-pointer",draggable:se,onDragStart:()=>se&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:q=>se&&N(q,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Ut,{card:e.announcedCard,isFaceUp:!0,playerColorMap:v,imageRefreshVersion:O,activePhaseIndex:le,activeTurnPlayerId:m,disableActiveHighlights:ue})}):s.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Showcase"})})]}),s.jsxs("div",{className:"flex flex-col items-center justify-between h-[120px] w-12 flex-shrink-0 py-0",children:[s.jsx("button",{onClick:()=>u(1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"+"}),s.jsx("span",{className:"font-bold text-3xl",children:e.score}),s.jsx("button",{onClick:()=>u(-1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"-"})]})]}),!l&&s.jsxs("div",{className:"mb-[3px] flex-shrink-0",children:[s.jsxs("select",{value:e.selectedDeck,onChange:de,className:"w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2",children:[L.map(q=>s.jsx("option",{value:q.id,children:q.name},q.id)),s.jsx("option",{value:ke.Custom,children:"Custom Deck"})]}),e.selectedDeck===ke.Custom&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",ref:_e,onChange:me,accept:".json",className:"hidden"}),s.jsx("button",{onClick:Oe,className:"w-full bg-indigo-600 hover:bg-indigo-700 py-1 rounded font-bold",children:"Load Custom Deck"})]})]}),s.jsx("div",{className:"flex-grow flex flex-col min-h-0",children:s.jsx(At,{onDrop:()=>_&&k(_,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 overflow-y-scroll border border-gray-700",children:s.jsx("div",{className:"flex flex-col gap-[2px]",children:e.hand.map((q,Ne)=>{const ge=(W==null?void 0:W.some(Ge=>Ge.playerId===e.id&&Ge.cardIndex===Ne))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsxs("div",{className:`flex bg-gray-900 border border-gray-700 rounded p-2 ${ge}`,draggable:se,onDragStart:()=>se&&j({card:q,source:"hand",playerId:e.id,cardIndex:Ne}),onDragEnd:()=>j(null),onContextMenu:Ge=>se&&N(Ge,"handCard",{card:q,player:e,cardIndex:Ne}),onDoubleClick:()=>A(e,q,Ne),onClick:()=>G&&G(e,q,Ne),"data-hand-card":`${e.id},${Ne}`,children:[s.jsx("div",{className:"w-[120px] h-[120px] flex-shrink-0 mr-3",children:s.jsx(Ut,{card:q,isFaceUp:!0,playerColorMap:v,localPlayerId:n,imageRefreshVersion:O,disableTooltip:!0,disableActiveHighlights:ue})}),s.jsx("div",{className:"flex-grow min-w-0",children:s.jsx(tu,{card:q,className:"relative flex flex-col text-left w-full h-full justify-start whitespace-normal break-words",hideOwner:q.ownerId===e.id,powerPosition:"inner"})})]},`${q.id}-${Ne}`)})})})})]})}const Te=uy[o]||"top-2 left-2",Be=te?"border-yellow-400":$?"border-indigo-500":"border-gray-700";return s.jsxs("div",{className:`fixed ${Te} min-w-[30rem] bg-panel-bg rounded-lg shadow-2xl p-3 flex flex-col z-10 border-2 ${Be} ${ce?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[s.jsx(si,{player:e,canEditSettings:we,selectedColors:ee,onColorChange:a}),s.jsx("input",{type:"text",value:ce?`${e.name} (Disconnected)`:e.name,onChange:ne=>i(ne.target.value),readOnly:!we||ce,className:"bg-transparent font-bold text-xl p-1.5 flex-grow focus:bg-gray-800 rounded focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:cursor-default"})]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("input",{type:"checkbox",checked:te,onChange:()=>b(e.id),disabled:!t&&!e.isDummy,className:"w-5 h-5 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Mark as active turn"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>u(-1),disabled:!se,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),s.jsx("span",{className:"font-bold text-2xl w-10 text-center",children:e.score}),s.jsx("button",{onClick:()=>u(1),disabled:!se,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]})]})]}),s.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[s.jsxs("select",{value:e.selectedDeck,onChange:de,disabled:!we,className:"bg-gray-700 border border-gray-600 text-white text-base rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[e.selectedDeck===ke.Custom&&s.jsx("option",{value:ke.Custom,children:"Custom Deck"}),L.map(ne=>s.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),s.jsx("input",{type:"file",ref:_e,onChange:me,accept:".json",style:{display:"none"}}),s.jsx("button",{onClick:Oe,disabled:!we,title:"Load Custom Deck",className:"bg-gray-600 hover:bg-gray-500 text-white font-bold p-2 rounded disabled:opacity-70 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),s.jsxs("div",{className:"flex-grow flex space-x-3",children:[s.jsxs("div",{className:"flex flex-col w-28 space-y-2",children:[s.jsx(At,{onDrop:()=>_&&k(_,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:ne=>se&&N(ne,"deckPile",{player:e}),children:s.jsxs("div",{onClick:se?y:void 0,className:`relative w-28 h-28 bg-card-back rounded-md flex items-center justify-center text-center text-sm font-bold p-1 ${se?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,children:["DECK ",s.jsx("br",{})," (",e.deck.length,")"]})}),s.jsxs(At,{onDrop:()=>{_&&k(_,{target:"discard",playerId:e.id})},onContextMenu:ne=>se&&N(ne,"discardPile",{player:e}),className:`relative w-28 h-28 bg-gray-700 rounded-md flex items-center justify-center text-center text-sm font-bold p-1 ${se?"cursor-pointer":""}`,isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:["DISCARD ",s.jsx("br",{})," (",e.discard.length,")"]}),s.jsx("div",{className:"relative w-28 h-28",children:s.jsxs(At,{onDrop:()=>_&&k(_,{target:"announced",playerId:e.id}),className:"w-full h-full bg-gray-700 rounded-md flex items-center justify-center text-center text-sm p-1",isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:[!e.announcedCard&&s.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Showcase"}),e.announcedCard&&s.jsx("div",{draggable:se,onDragStart:()=>se&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:ne=>se&&N(ne,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),className:"w-full h-full cursor-pointer","data-interactive":"true",children:s.jsx(Ut,{card:e.announcedCard,isFaceUp:!0,playerColorMap:v,localPlayerId:n,imageRefreshVersion:O,activePhaseIndex:le,activeTurnPlayerId:m,disableActiveHighlights:ue})})]})})]}),s.jsx(At,{onDrop:()=>_&&k(_,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 min-h-[16rem] max-h-[22.25rem] overflow-y-auto",isOverClassName:"bg-gray-900 ring-2 ring-indigo-400",children:s.jsx("div",{className:"grid grid-cols-3 gap-0.5",children:e.hand.map((ne,q)=>{const nt=(W==null?void 0:W.some(ge=>ge.playerId===e.id&&ge.cardIndex===q))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-28 h-28 ${nt}`,draggable:se,onDragStart:()=>se&&j({card:ne,source:"hand",playerId:e.id,cardIndex:q}),onDragEnd:()=>j(null),onContextMenu:ge=>{n!==null&&l&&N(ge,"handCard",{card:ne,player:e,cardIndex:q})},onDoubleClick:()=>A(e,ne,q),onClick:()=>G&&G(e,ne,q),"data-interactive":"true","data-hand-card":`${e.id},${q}`,children:s.jsx(Ut,{card:ne,isFaceUp:(()=>{var Pt;const ge=ne.revealedTo==="all",Ge=n!==null&&Array.isArray(ne.revealedTo)&&ne.revealedTo.includes(n),vt=n!==null&&((Pt=ne.statuses)==null?void 0:Pt.some(un=>un.type==="Revealed"&&un.addedByPlayerId===n));return t||fe||!!e.isDummy||ce||ge||Ge||vt})(),playerColorMap:v,localPlayerId:n,imageRefreshVersion:O,disableActiveHighlights:ue})},`${ne.id}-${q}`)})})})]})]})},py=4,my=({gameId:e,isGameStarted:t,onStartGame:n,onResetGame:r,activeGridSize:l,onGridSizeChange:o,dummyPlayerCount:i,onDummyPlayerCountChange:a,realPlayerCount:u,connectionStatus:c,onExitGame:f,onOpenTokensModal:y,onOpenCountersModal:k,gameMode:_,onGameModeChange:j,isPrivate:N,onPrivacyChange:A,isHost:v,onSyncGame:d,currentPhase:p,onNextPhase:m,onPrevPhase:b,onSetPhase:O,isAutoAbilitiesEnabled:U,onToggleAutoAbilities:G})=>{const W=[0,1,2,3],V=()=>{let le="bg-gray-500",ue="Connecting to server...";return c==="Connected"?(le="bg-green-500 animate-pulse",ue="Connected"):c==="Disconnected"&&(le="bg-red-500",ue="Disconnected. Retrying..."),s.jsxs("div",{className:"flex items-center space-x-2",title:ue,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${le} transition-colors`}),s.jsx("span",{className:"text-sm text-gray-400 hidden sm:block",children:c})]})};return s.jsxs("header",{className:"fixed top-0 left-0 right-0 h-14 bg-panel-bg bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-between px-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-bold text-indigo-400 hidden lg:block",children:"New Avalon"}),s.jsx(V,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400 hidden md:inline",children:"ID:"}),s.jsx("span",{className:"font-mono bg-gray-700 px-2 py-1 rounded text-indigo-300 w-24 md:w-44 text-center truncate",children:e})]}),s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer hidden md:flex",title:"Hidden games do not appear in the 'Join Game' list.",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:le=>A(le.target.checked),disabled:t||!v,className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Hidden"})]}),s.jsx("span",{className:"text-gray-600 hidden md:inline",children:"|"}),s.jsx("button",{onClick:y,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Tokens"}),s.jsx("button",{onClick:k,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Counters"})]})]}),t&&s.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center bg-gray-800 rounded-lg p-1 border border-gray-700 shadow-md",children:[s.jsx("button",{onClick:b,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",title:"Previous Phase",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M15 6 L8 12 L15 18 Z"})})}),s.jsx("select",{value:p,onChange:le=>O(parseInt(le.target.value)),className:"bg-gray-800 text-white font-bold text-sm text-center border-none focus:ring-0 cursor-pointer appearance-none px-2 min-w-[120px]",children:na.map((le,ue)=>s.jsx("option",{value:ue,children:le},ue))}),s.jsx("button",{onClick:m,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",title:"Next Phase",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M9 6 L16 12 L9 18 Z"})})})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[t&&s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer bg-gray-800 px-2 py-1 rounded border border-gray-600",title:"Automatically attach counters/tokens when clicking your cards.",children:[s.jsx("input",{type:"checkbox",checked:U,onChange:le=>G(le.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Auto-Ability"})]}),t?v&&s.jsx("button",{onClick:r,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded text-sm hidden md:block",children:"New Game"}):s.jsx("button",{onClick:n,disabled:!v,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm animate-pulse disabled:bg-gray-600 disabled:opacity-70 disabled:cursor-not-allowed disabled:animate-none",children:"Start Game"}),s.jsxs("div",{className:"flex items-center space-x-2 hidden lg:flex",children:[s.jsx("label",{htmlFor:"game-mode",className:"text-sm font-medium text-gray-300",children:"Mode:"}),s.jsxs("select",{id:"game-mode",value:_,onChange:le=>j(le.target.value),disabled:t||!v,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[s.jsx("option",{value:Un.FreeForAll,children:"FFA"}),s.jsx("option",{value:Un.TwoVTwo,children:"2v2"}),s.jsx("option",{value:Un.ThreeVOne,children:"3v1"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsx("label",{htmlFor:"grid-size",className:"text-sm font-medium text-gray-300",children:"Size:"}),s.jsxs("select",{id:"grid-size",value:l,onChange:le=>o(parseInt(le.target.value,10)),disabled:t||!v,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"4",children:"4x4"}),s.jsx("option",{value:"5",children:"5x5"}),s.jsx("option",{value:"6",children:"6x6"}),s.jsx("option",{value:"7",children:"7x7"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsx("label",{htmlFor:"dummy-players",className:"text-sm font-medium text-gray-300",children:"Dummies:"}),s.jsx("select",{id:"dummy-players",value:i,onChange:le=>a(parseInt(le.target.value,10)),disabled:t||!v,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:W.map(le=>s.jsx("option",{value:le,disabled:u+le>py,children:le},le))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[v&&t&&s.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold p-2 rounded text-sm",title:"Force sync game state and refresh images.",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded text-sm",title:"Return to Main Menu",children:"Exit"})]})]})]})},hy=({isOpen:e,onClose:t,onJoin:n,games:r})=>{const[l,o]=T.useState("");if(!e)return null;const i=()=>{l.trim()&&n(l.trim().toUpperCase())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Join an Existing Game"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Active Games"}),s.jsx("div",{className:"h-[40rem] overflow-y-auto pr-2 border-b border-gray-700 pb-2 mb-6",children:r.length>0?s.jsx("ul",{className:"space-y-2",children:r.map(a=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(a.gameId),className:"w-full text-left p-3 bg-gray-700 hover:bg-indigo-600 rounded-lg transition-colors flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Game ID:"}),s.jsx("span",{className:"block font-mono text-indigo-300",children:a.gameId})]}),s.jsxs("span",{className:"bg-gray-600 px-2 py-1 rounded-full text-sm font-bold",children:[a.playerCount," / 4"]})]})},a.gameId))}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("p",{className:"text-gray-400 text-center",children:["No active games found. ",s.jsx("br",{})," Why not create one?"]})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Or Join with Code"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:l,onChange:a=>o(a.target.value),placeholder:"Enter Game ID",className:"flex-grow bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:a=>a.key==="Enter"&&i()}),s.jsx("button",{onClick:i,disabled:!l.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Join"})]}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})})]})})},Tc=({isOpen:e,onClose:t,title:n,player:r,cards:l,setDraggedItem:o,onCardContextMenu:i,onCardDoubleClick:a,onCardClick:u,canInteract:c,isDeckView:f=!1,playerColorMap:y,localPlayerId:k,imageRefreshVersion:_})=>{const[j,N]=T.useState(null),A=T.useRef(null);if(!e)return null;const v=b=>{j!==null&&A.current&&!A.current.contains(b.relatedTarget)&&t()},p=Math.ceil(l.length/5)>5;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 pointer-events-auto",onClick:t,children:s.jsxs("div",{ref:A,onClick:b=>b.stopPropagation(),onDragLeave:v,className:"bg-gray-800 rounded-lg p-4 shadow-xl w-auto max-w-4xl max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold",children:n}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:`bg-gray-900 rounded p-2 ${p?"overflow-y-auto":""}`,style:p?{height:"calc(5 * 7rem + 4 * 0.5rem + 1rem)"}:{},children:s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[l.map((b,O)=>s.jsx("div",{style:{visibility:j===O?"hidden":"visible"},draggable:c,onDragStart:()=>{c&&(N(O),o({card:b,source:f?"deck":"discard",playerId:r.id,cardIndex:O}))},onDragEnd:()=>{N(null),o(null)},onContextMenu:U=>c&&(i==null?void 0:i(U,O)),onClick:()=>c&&(u==null?void 0:u(O)),onDoubleClick:()=>c&&a(O),"data-interactive":c,className:`w-28 h-28 ${c?"cursor-grab":"cursor-default"}`,children:s.jsx(Ut,{card:b,isFaceUp:!0,playerColorMap:y,localPlayerId:k,imageRefreshVersion:_})},`${b.id}-${O}`)),l.length===0&&s.jsx("p",{className:"col-span-5 w-full text-center text-gray-400 py-8",children:"Empty"})]})})]})})},yy=({isOpen:e,onClose:t,setDraggedItem:n,openContextMenu:r,canInteract:l,anchorEl:o,imageRefreshVersion:i,draggedItem:a})=>{if(!e||!o)return null;const u=(ta[ke.Tokens]||[]).filter(y=>!y.allowedPanels||y.allowedPanels.includes("TOKEN_PANEL")),c={position:"fixed",top:`${o.top}px`,left:`${o.left}px`,zIndex:60},f=y=>{if(a&&a.source==="token_panel"){const k=y.currentTarget.getBoundingClientRect(),_=y.clientX,j=y.clientY;(_<k.left||_>=k.right||j<k.top||j>=k.bottom)&&t()}};return s.jsx("div",{style:c,className:"pointer-events-auto",onDragLeave:f,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-96 max-w-[90vw] h-auto flex flex-col",onClick:y=>y.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Tokens"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:"flex-grow bg-gray-900 rounded p-2 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.map(y=>s.jsx("div",{draggable:l,onDragStart:()=>l&&n({card:y,source:"token_panel"}),onDragEnd:()=>n(null),onContextMenu:k=>l&&r(k,"token_panel_item",{card:y}),"data-interactive":l,className:`w-24 h-24 ${l?"cursor-grab":"cursor-not-allowed"}`,children:s.jsx(Ut,{card:y,isFaceUp:!0,playerColorMap:new Map,imageRefreshVersion:i})},y.id))})})]})})},gy="https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png",vy=({isOpen:e,onClose:t,setDraggedItem:n,canInteract:r,anchorEl:l,imageRefreshVersion:o,onCounterMouseDown:i,cursorStack:a})=>{const[u,c]=T.useState(null),[f,y]=T.useState({x:0,y:0});if(!e||!l)return null;const k={position:"fixed",top:`${l.top}px`,left:`${l.left}px`,zIndex:60},_=p=>{let m=eu[p];if(m&&o){const b=m.includes("?")?"&":"?";m=`${m}${b}v=${o}`}return m},j=(p,m,b)=>{if(p.button===2){const O={id:`tooltip_${m}`,deck:"counter",name:b,imageUrl:"",fallbackImage:"",power:0,ability:qo[m]||"",types:[],statuses:[]};c(O),y({x:p.clientX,y:p.clientY})}else p.button===0&&r&&i(m,p)},N=()=>{c(null)},A=p=>{u&&y({x:p.clientX,y:p.clientY})},v=()=>{a&&t(),c(null)},d=p=>{const m=p.currentTarget.getBoundingClientRect(),b=p.clientX,O=p.clientY;(b<m.left||b>=m.right||O<m.top||O>=m.bottom)&&t()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:k,className:"pointer-events-auto counter-modal-content",onMouseLeave:v,onDragLeave:d,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-80 max-w-[90vw] h-auto flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Counters"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hold right click to view hints"})]}),s.jsx("div",{className:"bg-gray-900 rounded p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-1",children:ay.map(p=>{const m=_(p.type),b=p.type.startsWith("Power");return s.jsx("button",{onContextMenu:O=>O.preventDefault(),onMouseDown:O=>j(O,p.type,p.label),onMouseUp:N,onMouseMove:A,className:`w-12 h-12 rounded-full border-white flex items-center justify-center shadow-lg mx-auto relative select-none ${r?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,style:{backgroundImage:`url(${gy})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:m?s.jsx("img",{src:m,alt:p.label,className:"w-full h-full object-contain p-1 pointer-events-none"}):s.jsx("span",{className:`font-bold text-white pointer-events-none ${b?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:b?p.label:p.type.charAt(0)})},p.type)})})})]})}),u&&s.jsx(qf,{x:f.x,y:f.y,children:s.jsx(tu,{card:u,statusDescriptions:qo})})]})},Qf=({player:e,onDragStart:t})=>{const n=Ft[e.color]||Ft.blue;return s.jsxs("div",{draggable:!0,onDragStart:r=>t(r,e.id),className:"flex items-center gap-2 bg-gray-600 p-2 rounded-md cursor-grab active:cursor-grabbing",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.bg} border border-white/50`}),s.jsx("span",{className:"font-medium",children:e.name})]})},bc=({teamId:e,teamName:t,players:n,capacity:r,onDrop:l,onDragOver:o,onPlayerDragStart:i,isOver:a})=>s.jsxs("div",{onDrop:u=>l(u,e),onDragOver:o,className:`bg-gray-800 p-4 rounded-lg border-2 ${a?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:[t," (",n.length,"/",r,")"]}),s.jsx("div",{className:"space-y-2 min-h-[4rem]",children:n.map(u=>s.jsx(Qf,{player:u,onDragStart:i},u.id))})]}),xy=({players:e,gameMode:t,onCancel:n,onConfirm:r})=>{const[l,o]=T.useState(e),[i,a]=T.useState([]),[u,c]=T.useState([]),[f,y]=T.useState(null),[k,_]=T.useState(null),{team1Capacity:j,team2Capacity:N}=T.useMemo(()=>t===Un.TwoVTwo?{team1Capacity:2,team2Capacity:2}:t===Un.ThreeVOne?{team1Capacity:3,team2Capacity:1}:{team1Capacity:0,team2Capacity:0},[t]),A=l.length===0&&i.length===j&&u.length===N,v=(b,O)=>{b.dataTransfer.effectAllowed="move",y(O)},d=b=>{b.preventDefault(),b.dataTransfer.dropEffect="move"},p=(b,O)=>{if(b.preventDefault(),f===null)return;const U=e.find(fe=>fe.id===f);if(!U)return;const G=[...l],W=[...i],V=[...u],le=G.findIndex(fe=>fe.id===f);le>-1&&G.splice(le,1);const ue=W.findIndex(fe=>fe.id===f);ue>-1&&W.splice(ue,1);const ce=V.findIndex(fe=>fe.id===f);ce>-1&&V.splice(ce,1),O===1&&W.length<j?W.push(U):O===2&&V.length<N?V.push(U):G.push(U),o(G),a(W),c(V),y(null),_(null)},m=()=>{if(!A)return;const b={1:i.map(O=>O.id),2:u.map(O=>O.id)};r(b)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-8 shadow-xl w-full max-w-4xl",children:[s.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Assign Teams"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Drag and drop players into their teams."}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{onDrop:b=>p(b,"unassigned"),onDragOver:b=>{d(b),_("unassigned")},onDragLeave:()=>_(null),className:`bg-gray-800 p-4 rounded-lg border-2 ${k==="unassigned"?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsx("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:"Unassigned Players"}),s.jsx("div",{className:"space-y-2",children:l.map(b=>s.jsx(Qf,{player:b,onDragStart:v},b.id))})]}),s.jsx(bc,{teamId:1,teamName:"Team 1",players:i,capacity:j,onDrop:p,onDragOver:b=>{d(b),_(1)},onPlayerDragStart:v,isOver:k===1}),s.jsx(bc,{teamId:2,teamName:"Team 2",players:u,capacity:N,onDrop:p,onDragOver:b=>{d(b),_(2)},onPlayerDragStart:v,isOver:k===2})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-4",children:[s.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{type:"button",onClick:m,disabled:!A,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Confirm Teams & Start"})]})]})})},wy=({players:e,localPlayer:t,onReady:n,onCancel:r})=>{const l=()=>{t.isReady||n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Ready to Start?"}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The game will begin once all players are ready. You can still change your name and deck."}),s.jsx("ul",{className:"space-y-3 mb-8",children:e.map(o=>s.jsxs("li",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[s.jsxs("span",{className:"font-medium",children:[o.name," ",o.id===t.id&&"(You)"]}),o.isReady?s.jsxs("span",{className:"flex items-center text-green-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Ready"]}):s.jsxs("span",{className:"flex items-center text-yellow-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zM9 14a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"})}),"Waiting..."]})]},o.id))}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:l,disabled:t.isReady,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors text-lg",children:t.isReady?"Waiting for others...":"I'm Ready"}),s.jsx("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Cancel Start"})]})]})})},jc=({card:e,ownerPlayer:t,onClose:n,statusDescriptions:r,allPlayers:l,imageRefreshVersion:o})=>{var _,j,N;const[i,a]=T.useState(e.imageUrl);T.useEffect(()=>{let A=e.imageUrl;if(o&&A){const v=A.includes("?")?"&":"?";A=`${A}${v}v=${o}`}a(A)},[e.imageUrl,o]);const u=()=>{let A=e.fallbackImage;if(o&&A){const v=A.includes("?")?"&":"?";A=`${A}${v}v=${o}`}i!==A&&a(A)},c=t==null?void 0:t.color,f=c?Ft[c].border:((_=Kf[e.deck])==null?void 0:_.color)||"border-gray-300",y=T.useMemo(()=>!t||t.teamId===void 0?null:`Team ${t.teamId}`,[t]),k=(e.statuses??[]).reduce((A,v)=>(A[v.type]||(A[v.type]=[]),A[v.type].push(v.addedByPlayerId),A),{});return s.jsx("div",{onClick:n,className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[102]",children:s.jsxs("div",{onClick:A=>A.stopPropagation(),className:`bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl h-[40rem] p-6 flex gap-6 border-4 ${f}`,children:[s.jsx("div",{className:"w-1/2 h-full flex-shrink-0",children:i?s.jsx("img",{src:i,onError:u,alt:e.name,className:"w-full h-full object-contain rounded-lg"}):s.jsx("div",{className:"w-full h-full bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-center p-4",children:e.name})}),s.jsxs("div",{className:"w-1/2 h-full flex flex-col gap-4 overflow-y-auto pr-2 text-left",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold",children:e.name}),s.jsx("p",{className:"text-lg text-gray-400 capitalize",children:((j=e.types)==null?void 0:j.join(", "))||`${e.deck} Card`})]}),s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Power:"})," ",s.jsx("span",{className:"text-xl font-bold",children:e.power})]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Ability:"})," ",s.jsx("span",{className:"text-gray-200 text-base",children:Yf(e.ability)})]})]}),t&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400",children:"Owner:"})," ",t.name]}),y&&s.jsxs("p",{className:"mt-1",children:[s.jsx("strong",{className:"text-indigo-400",children:"Team:"})," ",y]})]}),e.statuses&&e.statuses.length>0&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 text-lg font-bold mb-2",children:"Statuses"}),s.jsx("ul",{className:"space-y-2 text-sm",children:Object.entries(k).map(([A,v])=>{const d=v.reduce((m,b)=>(m[b]=(m[b]||0)+1,m),{}),p=Object.entries(d).map(([m,b])=>{var U;return`${((U=l.find(G=>G.id===Number(m)))==null?void 0:U.name)||`Player ${m}`} (x${b})`}).join(", ");return s.jsxs("li",{children:[s.jsx("strong",{className:"text-gray-200",children:A})," ",s.jsxs("span",{className:"text-gray-400 text-xs ml-1",children:["- ",p]}),s.jsx("p",{className:"text-gray-400 text-xs pl-2 mt-0.5",children:r[A]||"No description available."})]},A)})})]}),e.flavorText&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 font-bold mb-1",children:"Flavor Text"}),s.jsx("p",{className:"italic text-gray-400",children:(N=e.flavorText)==null?void 0:N.split(`
`).map((A,v)=>s.jsxs(In.Fragment,{children:[v>0&&s.jsx("br",{}),A]},v))})]}),s.jsx("button",{onClick:n,className:"mt-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded self-end",children:"Close"})]})]})})},Cy=({fromPlayer:e,cardCount:t,onAccept:n,onDecline:r})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[105]",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reveal Request"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:[s.jsx("span",{className:"font-bold",children:e.name})," would like to see ",t>1?`${t} of your hidden cards`:"one of your hidden cards","."]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Decline"}),s.jsx("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Accept"})]})]})}),ky=iy(),Sy=Wf(),Ir=100,Ey=e=>{if(typeof e.deckName!="string"||!Array.isArray(e.cards))return{isValid:!1,error:"Invalid file structure. Must have 'deckName' (string) and 'cards' (array)."};let t=0;for(const n of e.cards){if(typeof n.cardId!="string"||typeof n.quantity!="number"||n.quantity<1||!Number.isInteger(n.quantity))return{isValid:!1,error:`Invalid card entry: ${JSON.stringify(n)}`};if(!Za(n.cardId))return{isValid:!1,error:`Card with ID '${n.cardId}' does not exist.`};t+=n.quantity}return t>Ir?{isValid:!1,error:`Deck exceeds the ${Ir} card limit (found ${t} cards).`}:t===0&&e.cards.length>0?{isValid:!1,error:"Deck contains cards with zero quantity."}:{isValid:!0,deckFile:e}},Ny=({isOpen:e,onClose:t,setViewingCard:n})=>{const[r,l]=T.useState("My Custom Deck"),[o,i]=T.useState(new Map),[a,u]=T.useState("All"),c=T.useRef(null),f=T.useMemo(()=>{let d=ky;return a!=="All"&&(d=d.filter(p=>{var m;return a==="Command"?Xa.has(p.id)||((m=p.card.types)==null?void 0:m.includes("Command")):p.card.faction===a})),d.sort((p,m)=>p.card.name.localeCompare(m.card.name))},[a]),y=T.useMemo(()=>{let d=0;return o.forEach(p=>d+=p),d},[o]),k=d=>{if(y>=Ir){alert(`Deck cannot exceed ${Ir} cards.`);return}i(p=>{const m=new Map(p),b=m.get(d)||0;return b<3&&m.set(d,b+1),m})},_=d=>{i(p=>{const m=new Map(p),b=m.get(d)||0;return b>1?m.set(d,b-1):m.delete(d),m})},j=()=>{confirm("Are you sure you want to clear the current deck?")&&(i(new Map),l("My Custom Deck"))},N=()=>{if(y===0){alert("Cannot save an empty deck.");return}const d={deckName:r.trim()||"Untitled Deck",cards:Array.from(o.entries()).map(([O,U])=>({cardId:O,quantity:U}))},p=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),m=URL.createObjectURL(p),b=document.createElement("a");b.href=m,b.download=`${d.deckName.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.json`,document.body.appendChild(b),b.click(),document.body.removeChild(b),URL.revokeObjectURL(m)},A=()=>{var d;(d=c.current)==null||d.click()},v=d=>{var b;const p=(b=d.target.files)==null?void 0:b[0];if(!p)return;const m=new FileReader;m.onload=O=>{var U;try{const G=(U=O.target)==null?void 0:U.result,W=JSON.parse(G),V=Ey(W);if(!V.isValid){alert(V.error);return}const{deckFile:le}=V;l(le.deckName);const ue=new Map;le.cards.forEach(ce=>ue.set(ce.cardId,ce.quantity)),i(ue)}catch{alert("Failed to parse deck file.")}finally{d.target&&(d.target.value="")}},m.readAsText(p)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 w-full h-full md:w-[95vw] md:h-[90vh] md:rounded-xl flex flex-col overflow-hidden shadow-2xl border border-gray-700",children:[s.jsxs("div",{className:"bg-gray-800 p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold text-white",children:"Deck Builder"}),s.jsx("input",{type:"text",value:r,onChange:d=>l(d.target.value),className:"bg-gray-700 text-white px-3 py-1 rounded border border-gray-600 focus:outline-none focus:border-indigo-500 font-bold",placeholder:"Deck Name"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:j,className:"px-4 py-2 bg-red-900 hover:bg-red-800 text-white rounded text-sm font-bold transition-colors",children:"Clear"}),s.jsx("button",{onClick:A,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm font-bold transition-colors",children:"Load"}),s.jsx("input",{type:"file",ref:c,onChange:v,accept:".json",className:"hidden"}),s.jsx("button",{onClick:N,className:"px-4 py-2 bg-green-700 hover:bg-green-600 text-white rounded text-sm font-bold transition-colors",children:"Save"}),s.jsx("div",{className:"w-px h-8 bg-gray-600 mx-2"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-sm font-bold transition-colors",children:"Close"})]})]}),s.jsxs("div",{className:"flex flex-grow overflow-hidden",children:[s.jsxs("div",{className:"flex-grow flex flex-col p-4 overflow-hidden border-r border-gray-700 bg-gray-900/50",children:[s.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[s.jsx("label",{className:"text-gray-400 font-bold text-sm",children:"Filter:"}),s.jsxs("select",{value:a,onChange:d=>u(d.target.value),className:"bg-gray-800 text-white border border-gray-600 rounded px-2 py-1 text-sm focus:outline-none focus:border-indigo-500",children:[s.jsx("option",{value:"All",children:"All Factions"}),Sy.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id)),s.jsx("option",{value:"Command",children:"Command Cards"})]}),s.jsx("span",{className:"ml-auto text-gray-500 text-xs",children:"Right-click to view card details"})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3",children:f.map(({id:d,card:p})=>{const m={...p,id:d,deck:p.faction||ke.Custom,ownerId:0};return s.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>k(d),onContextMenu:b=>{b.preventDefault(),n({card:m})},children:[s.jsx("div",{className:"w-full aspect-square transition-transform duration-100 hover:scale-105 hover:shadow-lg hover:z-10",children:s.jsx(Ut,{card:m,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0})}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/80 text-white text-xs text-center py-1 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:"Add to Deck"})]},d)})})})]}),s.jsxs("div",{className:"w-80 md:w-96 bg-gray-800 flex flex-col border-l border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"p-4 bg-gray-800 border-b border-gray-600",children:[s.jsx("h3",{className:"text-xl font-bold text-white",children:"Current Deck"}),s.jsxs("p",{className:`text-sm font-bold mt-1 ${y>Ir?"text-red-500":"text-indigo-400"}`,children:[y," / ",Ir," Cards"]})]}),s.jsxs("div",{className:"flex-grow overflow-y-auto p-2 space-y-2",children:[o.size===0&&s.jsxs("div",{className:"text-center text-gray-500 mt-10",children:[s.jsx("p",{children:"Your deck is empty."}),s.jsx("p",{className:"text-xs mt-2",children:"Click cards on the left to add them."})]}),Array.from(o.entries()).map(([d,p])=>{const m=Za(d);if(!m)return null;const b={...m,id:d,deck:m.faction||ke.Custom,ownerId:0};return s.jsxs("div",{className:"flex items-center bg-gray-700 rounded p-2 group hover:bg-gray-600 transition-colors select-none",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 mr-3 cursor-pointer",onContextMenu:O=>{O.preventDefault(),n({card:b})},children:s.jsx(Ut,{card:b,isFaceUp:!0,playerColorMap:new Map,disableTooltip:!0})}),s.jsxs("div",{className:"flex-grow min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-white truncate",children:m.name}),s.jsx("div",{className:"text-xs text-gray-400 truncate",children:m.faction})]}),s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[s.jsx("button",{onClick:()=>_(d),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-red-900 text-gray-300 rounded text-sm font-bold",title:"Remove one",children:"-"}),s.jsx("span",{className:"font-bold text-white w-4 text-center",children:p}),s.jsx("button",{onClick:()=>k(d),className:"w-6 h-6 flex items-center justify-center bg-gray-800 hover:bg-green-900 text-gray-300 rounded text-sm font-bold",title:"Add one",disabled:p>=3,children:"+"})]})]},d)})]})]})]})]})}):null},Ty=({isOpen:e,onClose:t,onSave:n})=>{const[r,l]=T.useState(""),[o,i]=T.useState(!1);if(T.useEffect(()=>{if(e){const u=localStorage.getItem("custom_ws_url")||"";l(u);const c=localStorage.getItem("ui_list_mode");i(c===null?!0:c==="true")}},[e]),!e)return null;const a=()=>{localStorage.setItem("ui_list_mode",String(o)),window.dispatchEvent(new Event("storage")),n(r)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"server-url",className:"block text-sm font-medium text-gray-300 mb-1",children:"Server Address"}),s.jsx("input",{id:"server-url",type:"text",value:r,onChange:u=>l(u.target.value),placeholder:"e.g., ws://localhost:8080 or wss://my-server.com",className:"w-full bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:u=>u.key==="Enter"&&a()}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full WebSocket address for the server. Leave blank to use the default."})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:"List Mode Interface"}),s.jsx("p",{className:"text-xs text-gray-400",children:"In List Mode, your panel occupies the full left side of the screen, and cards in hand are shown as a list."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o,onChange:u=>i(u.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{onClick:a,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Save & Apply"})]})]})})},Xf="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",Zf="/images/cards/SYN_RIOT_AGENT.png",ep="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",tp="/images/cards/OPT_PRINCEPS.png",by=e=>e===1?{id:`demo-riot-${Math.random()}`,deck:ke.SynchroTech,name:"Riot Agent",imageUrl:Xf,fallbackImage:Zf,power:3,ability:`Support  Act: Place 1 stun on adjacent card. 
Act: Push an adjacent card 1 cell. ay take its place.`,ownerId:1,ownerName:"Player 1",statuses:[],types:["Unit","SynchroTech"]}:{id:`demo-princeps-${Math.random()}`,deck:ke.Optimates,name:"Princeps",imageUrl:ep,fallbackImage:tp,power:3,ability:`Act: Destroy a card in a row if it has a target or threat. 
Support  Shield 1.`,ownerId:2,ownerName:"Player 2",statuses:[],types:["Unit","Optimates"]},jy=new Map([[1,"blue"],[2,"red"]]),fo=[{id:"intro",title:"1. Introduction",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:'"New Avalon: Skirmish"'})," is a tactical card game where opponents control units simultaneously on a limited battlefield (grid)."]}),s.jsxs("p",{children:["The game uses a ",s.jsx("strong",{children:"Priority System"}),": whenever a player performs an action, other players get a chance to respond with Command cards."]})]}),demoConfig:[null,1,null,null,2,null,null,null,null]},{id:"components",title:"2. Components",content:s.jsx("div",{className:"text-left",children:s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Deck:"})," 15100 cards (Units and Commands)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Battlefield:"})," Grid of 5x5, 6x6, or 7x7 cells."]})]})})},{id:"turn_order",title:"3. Turn Order",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"mb-2",children:"A turn consists of the following phases:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Deployment Phase:"})," Players place units on the board."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Abilities Phase:"})," Players trigger unit abilities."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Scoring Phase:"})," Players score points from rows/columns."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Draw Phase:"})," Draw cards up to 6."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"End Phase:"})," Pass the First Player token."]})]}),s.jsx("p",{className:"mt-2 italic text-gray-400",children:"Note: Command cards can be played at any time a player has Priority."})]})},{id:"priority",title:"4. Priority",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"Priority"})," is the right to perform an action."]}),s.jsx("p",{className:"mb-2",children:"A player receives priority:"}),s.jsxs("ul",{className:"list-disc list-inside ml-2 mb-2",children:[s.jsx("li",{children:"After declaring an action."}),s.jsx("li",{children:"After their action fully resolves."}),s.jsx("li",{children:"When phases change."}),s.jsx("li",{children:"After an opponent declares an action (to respond)."})]}),s.jsxs("p",{children:["When you have priority, you can: ",s.jsx("strong",{children:"Play a Command"}),", ",s.jsx("strong",{children:"Activate an Ability"}),", or ",s.jsx("strong",{children:"Pass"}),"."]})]})},{id:"stack",title:"5. The Stack",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:["Actions that can be interrupted go into the ",s.jsx("strong",{children:"Stack"}),"."]}),s.jsxs("ul",{className:"list-disc list-inside ml-2 mb-2",children:[s.jsx("li",{children:"Commands"}),s.jsx("li",{children:"Active Abilities"}),s.jsx("li",{children:"Triggered Abilities"})]}),s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"LIFO (Last In, First Out):"})," The last action added to the stack is resolved first."]}),s.jsx("p",{className:"text-gray-400 italic",children:"Passive abilities do not use the stack."})]})},{id:"statuses_support",title:"6. Status: Support",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-4",children:["A unit gains ",s.jsx("strong",{children:"Support"})," if an allied unit is orthogonally adjacent (up, down, left, or right) to it."]}),s.jsx("p",{children:"Many card abilities become stronger if the unit has Support."})]}),demoConfig:[null,null,null,null,1,1,null,null,null],demoCardStatuses:{4:[{type:"Support",addedByPlayerId:1}],5:[{type:"Support",addedByPlayerId:1}]}},{id:"statuses_threat",title:"6. Status: Threat",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-4",children:["A unit gains ",s.jsx("strong",{children:"Threat"})," in two situations:"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:'It is "sandwiched" between two enemy units (orthogonally).'}),s.jsx("li",{children:'It is "pinned" against the edge of the board by an enemy unit.'})]}),s.jsx("p",{className:"mt-2",children:"Threatened units are often vulnerable to destruction or debuffs."})]}),demoConfig:[null,2,null,null,1,null,null,2,null],demoCardStatuses:{4:[{type:"Threat",addedByPlayerId:2}]}},{id:"deployment",title:"7. Deployment Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"mb-2",children:'Replaces old mechanics. The Active Player declares: "I am placing a unit."'}),s.jsx("p",{children:"Priority passes around. If everyone passes, the unit is placed face-up on an empty cell."}),s.jsx("p",{className:"mt-2",children:"Units cannot be placed on occupied cells."})]}),demoConfig:[null,null,null,null,1,null,null,null,null]},{id:"abilities",title:"8. Abilities Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{children:"Players take turns activating their units' abilities."}),s.jsx("p",{children:"Announce ability  Place in Stack  Opponents respond  Resolve."})]})},{id:"scoring",title:"9. Scoring Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{children:["A player selects ",s.jsx("strong",{children:"one row or column"}),"."]}),s.jsxs("p",{children:["They gain points equal to the total ",s.jsx("strong",{children:"Power"})," of all their units in that line."]}),s.jsx("p",{children:"Bonuses and penalties from statuses are applied."})]}),demoConfig:[1,1,1,null,null,null,null,null,null]},{id:"draw",title:"10. Draw Phase",content:s.jsx("div",{className:"text-left",children:s.jsxs("p",{children:["Each player draws cards from their deck until they have ",s.jsx("strong",{children:"6 cards"})," in hand."]})})},{id:"endgame",title:"12. End Game",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{children:["The first player to reach ",s.jsx("strong",{children:"30 points"})," triggers the final round."]}),s.jsx("p",{children:"Every other player gets one last turn to try and beat that score."}),s.jsx("p",{children:"The player with the highest score wins."})]})},{id:"glossary",title:"13. Glossary",content:s.jsxs("dl",{className:"space-y-2 text-left",children:[s.jsx("dt",{className:"font-bold text-indigo-400",children:"Priority"}),s.jsx("dd",{className:"ml-4",children:"The right to act."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Stack"}),s.jsx("dd",{className:"ml-4",children:"LIFO queue for resolving actions."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Command"}),s.jsx("dd",{className:"ml-4",children:"One-time use card played from hand."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Unit"}),s.jsx("dd",{className:"ml-4",children:"Card placed on the battlefield."})]})}],Iy=({config:e,cardStatuses:t})=>{const n=e||Array(9).fill(null);return s.jsx("div",{className:"bg-board-bg p-2 rounded-lg shadow-xl aspect-square w-full max-w-[400px] mx-auto grid grid-cols-3 grid-rows-3 gap-1",children:n.map((r,l)=>{const o=r?by(r):null;return o&&t&&t[l]&&(o.statuses=t[l]),s.jsx("div",{className:"bg-board-cell rounded flex items-center justify-center relative",children:o?s.jsx("div",{className:"w-full h-full p-0.5",children:s.jsx(Ut,{card:o,isFaceUp:!0,playerColorMap:jy,localPlayerId:1})}):s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full opacity-20"})},l)})})},_y=({isOpen:e,onClose:t})=>{const[n,r]=T.useState(fo[0].id),l=T.useMemo(()=>fo.find(o=>o.id===n)||fo[0],[n]);return T.useEffect(()=>{e&&[Xf,ep,Zf,tp].forEach(i=>{const a=new Image;a.src=i})},[e]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[100]",onClick:t,children:s.jsxs("div",{className:"bg-gray-900 w-[95vw] h-[90vh] rounded-xl shadow-2xl flex overflow-hidden border border-gray-700",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"w-1/4 min-w-[250px] bg-gray-800 border-r border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-800",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:"Encyclopedia"})}),s.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:fo.map(o=>s.jsx("button",{onClick:()=>r(o.id),className:`w-full text-left px-4 py-3 rounded-md transition-colors text-sm font-medium ${n===o.id?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:o.title},o.id))}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 rounded transition-colors",children:"Close Rules"})})]}),s.jsxs("div",{className:"w-2/5 p-8 overflow-y-auto border-r border-gray-700 bg-gray-900 text-left",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-6 border-b border-indigo-500 pb-2 inline-block",children:l.title}),s.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed text-left",children:l.content})]}),s.jsxs("div",{className:"w-[35%] bg-gray-800 flex flex-col items-center justify-center p-8 relative",children:[s.jsx("h3",{className:"absolute top-6 left-0 right-0 text-center text-gray-400 text-sm uppercase tracking-widest font-bold",children:"Visual Demonstration"}),s.jsx("div",{className:"w-full",children:s.jsx(Iy,{config:l.demoConfig,cardStatuses:l.demoCardStatuses})}),s.jsxs("div",{className:"mt-8 text-center text-gray-500 text-sm italic max-w-xs",children:["Example of the rule in action on a 3x3 grid snippet. ",s.jsx("br",{}),s.jsx("span",{className:"text-blue-400 font-bold",children:"Riot Agent"})," = Friendly, ",s.jsx("span",{className:"text-red-400 font-bold",children:"Princeps"})," = Enemy."]})]})]})}):null},Dy=({x:e,y:t,items:n,onClose:r})=>{const l=T.useRef(null),[o,i]=T.useState({top:t,left:e});return T.useEffect(()=>{if(l.current){const{innerWidth:a,innerHeight:u}=window,{offsetWidth:c,offsetHeight:f}=l.current,y=e+c>a?a-c-10:e,k=t+f>u?u-f-10:t;i({top:k,left:y})}},[e,t,n]),ps.createPortal(s.jsx("div",{ref:l,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[100] py-1",style:{top:o.top,left:o.left},onClick:a=>a.stopPropagation(),children:n.map((a,u)=>"isDivider"in a?s.jsx("hr",{className:"border-gray-700 my-1"},`divider-${u}`):"onClick"in a?s.jsx("button",{onClick:()=>{a.disabled||(a.onClick(),r())},disabled:a.disabled,className:"block w-full text-left px-4 py-1 text-sm text-white hover:bg-indigo-600 disabled:text-gray-500 disabled:cursor-not-allowed disabled:bg-gray-800",style:{fontWeight:a.isBold?"bold":"normal"},children:a.label},u):s.jsxs("div",{className:"flex items-center justify-between px-4 py-1 text-sm text-white w-full space-x-2",children:[s.jsx("button",{onClick:c=>{c.stopPropagation(),a.onRemove()},disabled:a.removeDisabled,className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-red-600 rounded disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed font-mono text-lg",children:"-"}),s.jsx("span",{className:"flex-grow text-center",children:a.label}),s.jsx("button",{onClick:c=>{c.stopPropagation(),a.onAdd()},className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-green-600 rounded font-mono text-lg",children:"+"})]},u))}),document.body)},Ic=7,_c=()=>Array(Ic).fill(null).map(()=>Array(Ic).fill({card:null})),Yt=e=>{const{board:t,activeGridSize:n,players:r}=e,l=JSON.parse(JSON.stringify(t)),o=l.length,i=Math.floor((o-n)/2),a=new Map;r.forEach(u=>a.set(u.id,u.teamId));for(let u=0;u<o;u++)for(let c=0;c<o;c++){const f=l[u][c].card;f&&f.statuses&&(f.statuses=f.statuses.filter(y=>y.type!=="Support"&&y.type!=="Threat"))}for(let u=0;u<o;u++)for(let c=0;c<o;c++){const f=l[u][c].card;if(!f||f.ownerId===void 0||f.isFaceDown)continue;const y=f.ownerId,k=a.get(y),_=[{r:u-1,c},{r:u+1,c},{r:u,c:c-1},{r:u,c:c+1}],j={};let N=!1;for(const v of _){const{r:d,c:p}=v;if(d>=0&&d<o&&p>=0&&p<o){const m=l[d][p].card;if(m&&m.ownerId!==void 0&&!m.isFaceDown){const b=m.ownerId,O=a.get(b);y===b||k!==void 0&&k===O?N=!0:(j[b]||(j[b]=[]),j[b].push({r:d,c:p}))}}}N&&(f.statuses||(f.statuses=[]),f.statuses.some(v=>v.type==="Support")||f.statuses.push({type:"Support",addedByPlayerId:y}));let A=null;for(const v in j)if(j[v].length>=2){A=parseInt(v,10);break}if(A===null&&u>=i&&u<i+n&&c>=i&&c<i+n){const d=u===i||u===i+n-1||c===i||c===i+n-1,p=Object.keys(j).length>0;d&&p&&(A=parseInt(Object.keys(j)[0],10))}A!==null&&(f.statuses||(f.statuses=[]),f.statuses.some(v=>v.type==="Threat")||f.statuses.push({type:"Threat",addedByPlayerId:A}))}return l},Py=4,Ry=()=>{const e=localStorage.getItem("custom_ws_url");if(e&&e.trim()!=="")return console.log(`Using custom WebSocket URL: ${e}`),e.trim();const t=window.location.protocol==="https:"?"wss":"ws",n=window.location.hostname||"localhost";return window.location.port&&window.location.port!=="80"&&window.location.port!=="443"&&window.location.hostname==="localhost"?"wss://platinocyanic-unsceptically-belia.ngrok-free.dev":`${t}://${n}`},Oy=()=>Math.random().toString(36).substring(2,18).toUpperCase(),Ay=()=>{const e=T.useCallback((g,x,w)=>{const S=ta[g];if(!S)return console.error(`Deck data for ${g} not loaded! Returning empty deck.`),[];const E=[...S].map(D=>({...D,ownerId:x,ownerName:w}));return oi(E)},[]),t=T.useCallback((g,x=!1)=>{const w=Object.keys(ta)[0],S={id:g,name:x?`Dummy ${g-1}`:`Player ${g}`,score:0,hand:[],deck:[],discard:[],announcedCard:null,selectedDeck:w,color:Jf[g-1]||"blue",isDummy:x,isReady:!1};return S.deck=e(w,g,S.name),S},[e]),n=T.useCallback(()=>({players:[],board:_c(),activeGridSize:7,gameId:null,dummyPlayerCount:0,isGameStarted:!1,gameMode:Un.FreeForAll,isPrivate:!0,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,currentPhase:0}),[]),[r,l]=T.useState(n),[o,i]=T.useState(null),[a,u]=T.useState(null),[c,f]=T.useState("Connecting"),[y,k]=T.useState([]),[_,j]=T.useState(null),N=T.useRef(null),A=T.useRef(null),v=T.useRef(null),d=T.useRef(r);T.useEffect(()=>{d.current=r},[r]);const p=T.useRef(o);T.useEffect(()=>{p.current=o},[o]);const m=T.useCallback(g=>{l(x=>{const w=typeof g=="function"?g(x):g;return N.current&&N.current.readyState===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"UPDATE_STATE",gameState:w})),w})},[]),b=T.useCallback(()=>{if(N.current&&N.current.readyState!==WebSocket.CLOSED)return;const g=Ry();try{N.current=new WebSocket(g)}catch(x){console.error("Failed to create WebSocket:",x),f("Disconnected"),A.current&&clearTimeout(A.current),A.current=window.setTimeout(b,3e3);return}f("Connecting"),N.current.onopen=()=>{var w;console.log("WebSocket connection established"),f("Connected");const x=d.current;x&&x.gameId&&((w=N.current)==null?void 0:w.readyState)===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:x.gameId})),p.current===1&&N.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Yn})))},N.current.onmessage=x=>{try{const w=JSON.parse(x.data);if(w.type==="GAMES_LIST")k(w.games);else if(w.type==="JOIN_SUCCESS"){i(w.playerId);const S=v.current;S&&w.playerId!==null&&w.playerToken?localStorage.setItem("reconnection_data",JSON.stringify({gameId:S,playerId:w.playerId,playerToken:w.playerToken,timestamp:Date.now()})):w.playerId===null&&localStorage.removeItem("reconnection_data"),v.current=null,w.playerId===1&&setTimeout(()=>{var E;((E=N.current)==null?void 0:E.readyState)===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Yn}))},500)}else w.type==="ERROR"?(alert(w.message),localStorage.removeItem("reconnection_data"),l(n()),i(null)):w.type==="HIGHLIGHT_TRIGGERED"?j(w.highlightData):l(w)}catch(w){console.error("Failed to parse message from server:",x.data,w)}},N.current.onclose=()=>{console.log("WebSocket connection closed. Attempting to reconnect..."),f("Disconnected"),A.current&&clearTimeout(A.current),A.current=window.setTimeout(b,3e3)},N.current.onerror=x=>console.error("WebSocket error event:",x)},[l,n]),O=T.useCallback(()=>{N.current&&(console.log("Forcing WebSocket reconnection..."),N.current.close())},[]),U=T.useCallback(g=>{var x;if(((x=N.current)==null?void 0:x.readyState)===WebSocket.OPEN){v.current=g;let w=null;try{const E=localStorage.getItem("reconnection_data");E&&(w=JSON.parse(E))}catch(E){console.error("Could not parse reconnection data:",E),localStorage.removeItem("reconnection_data")}const S={type:"JOIN_GAME",gameId:g};w&&w.gameId===g&&w.playerToken&&(S.playerToken=w.playerToken),N.current.send(JSON.stringify(S))}else alert("Could not connect to the server. Please try refreshing the page.")},[]);T.useEffect(()=>(localStorage.removeItem("reconnection_data"),b(),()=>{A.current&&clearTimeout(A.current),N.current&&(N.current.onclose=null,N.current.close())}),[b]);const G=T.useCallback(()=>{var w;localStorage.removeItem("reconnection_data");const g=Oy(),x={...n(),gameId:g,players:[t(1)]};m(x),((w=N.current)==null?void 0:w.readyState)===WebSocket.OPEN&&(N.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:g})),N.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Yn})))},[m,n,t]),W=T.useCallback(()=>{var g;((g=N.current)==null?void 0:g.readyState)===WebSocket.OPEN&&N.current.send(JSON.stringify({type:"GET_GAMES_LIST"}))},[]),V=T.useCallback(()=>{var w;const g=d.current.gameId,x=p.current;l(n()),i(null),localStorage.removeItem("reconnection_data"),((w=N.current)==null?void 0:w.readyState)===WebSocket.OPEN&&g&&x!==null&&N.current.send(JSON.stringify({type:"LEAVE_GAME",gameId:g,playerId:x}))},[n]),le=T.useCallback(()=>{var g;((g=N.current)==null?void 0:g.readyState)===WebSocket.OPEN&&d.current.gameId&&N.current.send(JSON.stringify({type:"START_READY_CHECK",gameId:d.current.gameId}))},[]),ue=T.useCallback(()=>{var g;((g=N.current)==null?void 0:g.readyState)===WebSocket.OPEN&&d.current.gameId&&N.current.send(JSON.stringify({type:"CANCEL_READY_CHECK",gameId:d.current.gameId}))},[]),ce=T.useCallback(()=>{var g;((g=N.current)==null?void 0:g.readyState)===WebSocket.OPEN&&d.current.gameId&&p.current!==null&&N.current.send(JSON.stringify({type:"PLAYER_READY",gameId:d.current.gameId,playerId:p.current}))},[]),fe=T.useCallback(g=>{var x;((x=N.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&N.current.send(JSON.stringify({type:"ASSIGN_TEAMS",gameId:d.current.gameId,assignments:g}))},[]),_e=T.useCallback(g=>{var x;((x=N.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&N.current.send(JSON.stringify({type:"SET_GAME_MODE",gameId:d.current.gameId,mode:g}))},[]),we=T.useCallback(g=>{var x;((x=N.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&N.current.send(JSON.stringify({type:"SET_GAME_PRIVACY",gameId:d.current.gameId,isPrivate:g}))},[]),se=T.useCallback(()=>{var g;if(((g=N.current)==null?void 0:g.readyState)===WebSocket.OPEN&&d.current.gameId&&p.current===1){N.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Yn}));const x=d.current,w=JSON.parse(JSON.stringify(x));w.players.forEach(S=>{if(["hand","deck","discard"].forEach(E=>{S[E]&&(S[E]=S[E].map(D=>{const P=li(D.name);return P?{...D,...P}:D}))}),S.announcedCard){const E=li(S.announcedCard.name);E&&(S.announcedCard={...S.announcedCard,...E})}}),w.board.forEach(S=>{S.forEach(E=>{if(E.card){const D=li(E.card.name);D&&(E.card={...E.card,...D})}})}),N.current.send(JSON.stringify({type:"FORCE_SYNC",gameState:w})),l(w)}},[]),$=T.useCallback(()=>{m(g=>{if(p.current!==1)return g;const x=g.players.map(w=>{const S=e(w.selectedDeck,w.id,w.name);return{...w,hand:[],deck:S,discard:[],announcedCard:null,score:0,isReady:!1}});return{...g,players:x,board:_c(),isGameStarted:!1,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,currentPhase:0}})},[m,e]),ee=T.useCallback(g=>{m(x=>{if(x.isGameStarted)return x;const w={...x,activeGridSize:g};return w.board=Yt(w),w})},[m]),L=T.useCallback(g=>{m(x=>{if(x.isGameStarted)return x;const w=x.players.filter(E=>!E.isDummy);if(w.length+g>Py)return x;const S=[...w];for(let E=0;E<g;E++){const D=S.length+1,P=t(D,!0);P.name=`Dummy ${E+1}`,S.push(P)}return{...x,players:S,dummyPlayerCount:g}})},[m,t]),te=T.useCallback((g,x,w)=>{m(S=>{var P;if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=E.board[g.row][g.col].card;if(D){if(["Support","Threat","Revealed"].includes(x)&&((P=D.statuses)==null?void 0:P.some(J=>J.type===x&&J.addedByPlayerId===w)))return S;D.statuses||(D.statuses=[]),D.statuses.push({type:x,addedByPlayerId:w})}return E})},[m]),de=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.board[g.row][g.col].card;if(E!=null&&E.statuses){const D=E.statuses.map(P=>P.type).lastIndexOf(x);D>-1&&E.statuses.splice(D,1)}return S})},[m]),Oe=T.useCallback((g,x,w)=>{m(S=>{if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=E.board[g.row][g.col].card;if(D!=null&&D.statuses){const P=D.statuses.findIndex(z=>z.type===x&&z.addedByPlayerId===w);P>-1&&D.statuses.splice(P,1)}return E})},[m]),me=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.board[g.row][g.col].card;return E&&(E.powerModifier===void 0&&(E.powerModifier=0),E.powerModifier+=x),S})},[m]),Te=T.useCallback((g,x,w)=>{m(S=>{var P;if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=E.players.find(z=>z.id===g);if(D&&D.announcedCard){if(["Support","Threat","Revealed"].includes(x)&&((P=D.announcedCard.statuses)==null?void 0:P.some(J=>J.type===x&&J.addedByPlayerId===w)))return S;D.announcedCard.statuses||(D.announcedCard.statuses=[]),D.announcedCard.statuses.push({type:x,addedByPlayerId:w})}return E})},[m]),Be=T.useCallback((g,x)=>{m(w=>{var D;if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.players.find(P=>P.id===g);if(E&&((D=E.announcedCard)!=null&&D.statuses)){const P=E.announcedCard.statuses.map(z=>z.type).lastIndexOf(x);P>-1&&E.announcedCard.statuses.splice(P,1)}return S})},[m]),ne=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.players.find(D=>D.id===g);return E&&E.announcedCard&&(E.announcedCard.powerModifier===void 0&&(E.announcedCard.powerModifier=0),E.announcedCard.powerModifier+=x),S})},[m]),q=T.useCallback((g,x,w,S)=>{m(E=>{var z;if(!E.isGameStarted)return E;const D=JSON.parse(JSON.stringify(E)),P=D.players.find(J=>J.id===g);if(P&&P.hand[x]){const J=P.hand[x];if(["Support","Threat","Revealed"].includes(w)&&((z=J.statuses)==null?void 0:z.some(oe=>oe.type===w&&oe.addedByPlayerId===S)))return E;J.statuses||(J.statuses=[]),J.statuses.push({type:w,addedByPlayerId:S})}return D})},[m]),Ne=T.useCallback((g,x,w)=>{m(S=>{if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=E.players.find(z=>z.id===g),P=D==null?void 0:D.hand[x];if(P!=null&&P.statuses){const z=P.statuses.map(J=>J.type).lastIndexOf(w);z>-1&&P.statuses.splice(z,1),w==="Revealed"&&(P.statuses.some(F=>F.type==="Revealed")||delete P.revealedTo)}return E})},[m]),nt=T.useCallback(g=>{m(x=>{if(!x.isGameStarted)return x;const w=JSON.parse(JSON.stringify(x)),S=w.board[g.row][g.col].card;return S&&(S.isFaceDown=!1),w.board=Yt(w),w})},[m]),ge=T.useCallback(g=>{m(x=>{if(!x.isGameStarted)return x;const w=JSON.parse(JSON.stringify(x)),S=w.board[g.row][g.col].card;return S&&(S.isFaceDown=!0),w.board=Yt(w),w})},[m]),Ge=T.useCallback((g,x,w)=>{m(S=>{const E=S.players.find(z=>z.id===g);if(!E||!E.hand[x])return S;const D=JSON.parse(JSON.stringify(S)),P=D.players.find(z=>z.id===g).hand[x];if(w==="all")P.revealedTo="all",P.statuses||(P.statuses=[]),P.statuses.some(z=>z.type==="Revealed"&&z.addedByPlayerId===g)||P.statuses.push({type:"Revealed",addedByPlayerId:g});else{(!P.revealedTo||P.revealedTo==="all"||!Array.isArray(P.revealedTo))&&(P.revealedTo=[]);const z=w.filter(J=>!P.revealedTo.includes(J));P.revealedTo.push(...z)}return D})},[m]),vt=T.useCallback((g,x)=>{m(w=>{if(!w.board[g.row][g.col].card)return w;const E=JSON.parse(JSON.stringify(w)),D=E.board[g.row][g.col].card,P=D.ownerId;if(x==="all")D.revealedTo="all",P!==void 0&&(D.statuses||(D.statuses=[]),D.statuses.some(z=>z.type==="Revealed"&&z.addedByPlayerId===P)||D.statuses.push({type:"Revealed",addedByPlayerId:P}));else{(!D.revealedTo||D.revealedTo==="all"||!Array.isArray(D.revealedTo))&&(D.revealedTo=[]);const z=x.filter(J=>!D.revealedTo.includes(J));D.revealedTo.push(...z)}return E})},[m]),Pt=T.useCallback((g,x)=>{m(w=>{var P;const S=g.boardCoords?(P=w.board[g.boardCoords.row][g.boardCoords.col].card)==null?void 0:P.ownerId:g.ownerId;if(!S)return w;const E=JSON.parse(JSON.stringify(w)),D=E.revealRequests.find(z=>z.fromPlayerId===x&&z.toPlayerId===S);return D?D.cardIdentifiers.some(J=>JSON.stringify(J)===JSON.stringify(g))||D.cardIdentifiers.push(g):E.revealRequests.push({fromPlayerId:x,toPlayerId:S,cardIdentifiers:[g]}),E})},[m]),un=T.useCallback((g,x)=>{m(w=>{const S=w.revealRequests.findIndex(P=>P.toPlayerId===p.current&&P.fromPlayerId===g);if(S===-1)return w;const E=JSON.parse(JSON.stringify(w)),D=E.revealRequests[S];if(x){const{toPlayerId:P,cardIdentifiers:z}=D;for(const J of z){let F=null;if(J.source==="board"&&J.boardCoords)F=E.board[J.boardCoords.row][J.boardCoords.col].card;else if(J.source==="hand"&&J.ownerId&&J.cardIndex!==void 0){const oe=E.players.find(he=>he.id===J.ownerId);oe&&(F=oe.hand[J.cardIndex])}F&&(F.statuses||(F.statuses=[]),F.statuses.some(oe=>oe.type==="Revealed"&&oe.addedByPlayerId===g)||F.statuses.push({type:"Revealed",addedByPlayerId:g}))}}return E.revealRequests.splice(S,1),E})},[m]),cr=T.useCallback(g=>{m(x=>{const w=JSON.parse(JSON.stringify(x));let S=null;if(g.source==="board"&&g.boardCoords)S=w.board[g.boardCoords.row][g.boardCoords.col].card;else if(g.source==="hand"&&g.playerId&&g.cardIndex!==void 0){const E=w.players.find(D=>D.id===g.playerId);E&&(S=E.hand[g.cardIndex])}return S&&(S.statuses&&(S.statuses=S.statuses.filter(E=>E.type!=="Revealed")),delete S.revealedTo),w})},[m]),Ce=T.useCallback((g,x)=>{m(w=>w.isGameStarted?w:{...w,players:w.players.map(S=>S.id===g?{...S,name:x}:S)})},[m]),hs=T.useCallback((g,x)=>{m(w=>w.isGameStarted||w.players.some(E=>E.id!==g&&!E.isDummy&&E.color===x)?w:{...w,players:w.players.map(E=>E.id===g?{...E,color:x}:E)})},[m]),ys=T.useCallback((g,x)=>{m(w=>w.isGameStarted?{...w,players:w.players.map(S=>S.id===g?{...S,score:S.score+x}:S)}:w)},[m]),gs=T.useCallback((g,x)=>{m(w=>w.isGameStarted?w:{...w,players:w.players.map(S=>S.id===g?{...S,deck:e(x,g,S.name),selectedDeck:x,hand:[],discard:[],announcedCard:null}:S)})},[m,e]),vs=T.useCallback((g,x)=>{m(w=>{if(w.isGameStarted)return w;const S=w.players.find(P=>P.id===g);if(!S)return w;const E=[];let D=new Map;for(const{cardId:P,quantity:z}of x.cards){const J=Za(P);if(!J)continue;const F=Xa.has(P),oe=F?ke.Command:ke.Custom,he=F?"CMD":"CUS";for(let ye=0;ye<z;ye++){const xe=(D.get(P)||0)+1;D.set(P,xe),E.push({...J,id:`${he}_${P.toUpperCase()}_${xe}`,deck:oe,ownerId:g,ownerName:S.name})}}return{...w,players:w.players.map(P=>P.id===g?{...P,deck:oi(E),selectedDeck:ke.Custom,hand:[],discard:[],announcedCard:null}:P)}})},[m]),xs=T.useCallback(g=>{m(x=>{if(!x.isGameStarted)return x;const w=x.players.find(P=>P.id===g);if(!w||w.deck.length===0)return x;const S=JSON.parse(JSON.stringify(x)),E=S.players.find(P=>P.id===g),D=E.deck.shift();return D&&E.hand.push(D),S})},[m]),ws=T.useCallback(g=>{m(x=>{if(!x.isGameStarted||!x.players.find(D=>D.id===g))return x;const S=JSON.parse(JSON.stringify(x)),E=S.players.find(D=>D.id===g);return E.deck=oi(E.deck),S})},[m]),Cs=T.useCallback(g=>{m(x=>{const w=x.activeTurnPlayerId===g?void 0:g;return{...x,activeTurnPlayerId:w}})},[m]),ks=T.useCallback(g=>{m(x=>x.isGameStarted?{...x,currentPhase:Math.max(0,Math.min(g,na.length-1))}:x)},[m]),Wr=T.useCallback(()=>{m(g=>{if(!g.isGameStarted)return g;const x=g.currentPhase+1;if(x>=na.length){const w=g.activeTurnPlayerId,S=JSON.parse(JSON.stringify(g));w!==void 0&&S.board.forEach(D=>{D.forEach(P=>{if(P.card&&P.card.ownerId===w&&P.card.statuses){const z=P.card.statuses.findIndex(J=>J.type==="Stun");z!==-1&&P.card.statuses.splice(z,1)}})});let E=w;if(E!==void 0){const D=[...S.players].sort((z,J)=>z.id-J.id),P=D.findIndex(z=>z.id===E);if(P!==-1){let z=(P+1)%D.length;E=D[z].id}}return S.currentPhase=0,S.activeTurnPlayerId=E,S.board.forEach(D=>{D.forEach(P=>{P.card&&(delete P.card.enteredThisTurn,delete P.card.abilityUsedInPhase)})}),S.board.forEach(D=>{D.forEach(P=>{if(P.card&&P.card.statuses){const z=P.card.statuses.findIndex(J=>J.type==="Resurrected");if(z!==-1){const J=P.card.statuses[z].addedByPlayerId;P.card.statuses.splice(z,1),P.card.statuses.push({type:"Stun",addedByPlayerId:J}),P.card.statuses.push({type:"Stun",addedByPlayerId:J})}}})}),S}else{const w=JSON.parse(JSON.stringify(g));return w.board.forEach(S=>{S.forEach(E=>{if(E.card&&E.card.statuses){const D=E.card.statuses.findIndex(P=>P.type==="Resurrected");if(D!==-1){const P=E.card.statuses[D].addedByPlayerId;E.card.statuses.splice(D,1),E.card.statuses.push({type:"Stun",addedByPlayerId:P}),E.card.statuses.push({type:"Stun",addedByPlayerId:P})}}})}),{...w,currentPhase:x}}})},[m]),Ss=T.useCallback(()=>{m(g=>g.isGameStarted?{...g,currentPhase:Math.max(0,g.currentPhase-1)}:g)},[m]),Kr=T.useCallback((g,x)=>{m(w=>{var P,z,J;if(!w.isGameStarted||x.target==="board"&&x.boardCoords&&w.board[x.boardCoords.row][x.boardCoords.col].card!==null&&g.source!=="counter_panel")return w;const S=JSON.parse(JSON.stringify(w));if(g.source==="board"&&["hand","deck","discard"].includes(x.target)&&!g.bypassOwnershipCheck){const F=g.card.ownerId,oe=S.players.find(xe=>xe.id===F),he=F===p.current,ye=!!(oe!=null&&oe.isDummy);if(!he&&!ye)return w}if(g.source==="board"&&x.target==="board"){let oe=g.card;if(g.boardCoords){const ye=w.board[g.boardCoords.row][g.boardCoords.col];ye.card&&(oe=ye.card)}if((P=oe.statuses)==null?void 0:P.some(ye=>ye.type==="Stun")){const ye=p.current,xe=oe.ownerId,Qe=w.players.find(Me=>Me.id===ye),it=w.players.find(Me=>Me.id===xe),Ye=ye===xe,We=(Qe==null?void 0:Qe.teamId)!==void 0&&(it==null?void 0:it.teamId)!==void 0&&Qe.teamId===it.teamId;if((Ye||We)&&!g.isManual)return w}}if(g.source==="counter_panel"&&g.statusType){const F=Vl[g.statusType];if(!((F==null?void 0:F.allowedTargets)||["board","hand"]).includes(x.target))return w;let he=null;if(x.target==="board"&&x.boardCoords)he=S.board[x.boardCoords.row][x.boardCoords.col].card;else if(x.playerId!==void 0){const ye=S.players.find(xe=>xe.id===x.playerId);ye&&(x.target==="hand"&&x.cardIndex!==void 0&&(he=ye.hand[x.cardIndex]),x.target==="announced"&&(he=ye.announcedCard||null),x.target==="deck"&&ye.deck.length>0?x.deckPosition==="top"||!x.deckPosition?he=ye.deck[0]:he=ye.deck[ye.deck.length-1]:x.target==="discard"&&ye.discard.length>0&&(he=ye.discard[ye.discard.length-1]))}if(he){const ye=g.count||1,xe=S.players.find(it=>it.id===S.activeTurnPlayerId),Qe=xe&&xe.isDummy?xe.id:p.current!==null?p.current:0;if(g.statusType==="Power+")he.powerModifier===void 0&&(he.powerModifier=0),he.powerModifier+=1*ye;else if(g.statusType==="Power-")he.powerModifier===void 0&&(he.powerModifier=0),he.powerModifier-=1*ye;else{he.statuses||(he.statuses=[]);for(let it=0;it<ye;it++)["Support","Threat","Revealed"].includes(g.statusType)?he.statuses.some(We=>We.type===g.statusType&&We.addedByPlayerId===Qe)||he.statuses.push({type:g.statusType,addedByPlayerId:Qe}):he.statuses.push({type:g.statusType,addedByPlayerId:Qe})}return x.target==="board"&&(S.board=Yt(S)),S}return w}let E={...g.card};if(g.source==="hand"&&g.playerId!==void 0&&g.cardIndex!==void 0){const F=S.players.find(oe=>oe.id===g.playerId);F&&F.hand.splice(g.cardIndex,1)}else if(g.source==="board"&&g.boardCoords)S.board[g.boardCoords.row][g.boardCoords.col].card=null;else if(g.source==="discard"&&g.playerId!==void 0&&g.cardIndex!==void 0){const F=S.players.find(oe=>oe.id===g.playerId);F&&F.discard.splice(g.cardIndex,1)}else if(g.source==="deck"&&g.playerId!==void 0&&g.cardIndex!==void 0){const F=S.players.find(oe=>oe.id===g.playerId);F&&F.deck.splice(g.cardIndex,1)}else if(g.source==="announced"&&g.playerId!==void 0){const F=S.players.find(oe=>oe.id===g.playerId);F&&(F.announcedCard=null)}if(["hand","deck","discard"].includes(x.target)?(E.statuses&&(E.statuses=E.statuses.filter(F=>F.type==="Revealed")),E.isFaceDown=!1,delete E.powerModifier,delete E.enteredThisTurn,delete E.abilityUsedInPhase,delete E.deployAbilityConsumed):x.target==="board"&&(E.statuses||(E.statuses=[]),g.source!=="board"&&E.isFaceDown===void 0&&(E.isFaceDown=!1),g.source!=="board"&&(E.enteredThisTurn=!0,delete E.deployAbilityConsumed)),x.target==="hand"&&x.playerId!==void 0){if(E.deck===ke.Tokens||E.deck==="counter")return S;const F=S.players.find(oe=>oe.id===x.playerId);F&&F.hand.push(E)}else if(x.target==="board"&&x.boardCoords){if(S.board[x.boardCoords.row][x.boardCoords.col].card===null){if(E.ownerId===void 0&&p.current!==null){const F=S.players.find(oe=>oe.id===p.current);F&&(E.ownerId=F.id,E.ownerName=F.name)}S.board[x.boardCoords.row][x.boardCoords.col].card=E}}else if(x.target==="discard"&&x.playerId!==void 0){if(!(E.deck===ke.Tokens||E.deck==="counter")){const F=S.players.find(oe=>oe.id===x.playerId);F&&F.discard.push(E)}}else if(x.target==="deck"&&x.playerId!==void 0){if(E.deck===ke.Tokens||E.deck==="counter")return S;const F=S.players.find(oe=>oe.id===x.playerId);F&&(x.deckPosition==="top"?F.deck.unshift(E):F.deck.push(E))}else if(x.target==="announced"&&x.playerId!==void 0){const F=S.players.find(oe=>oe.id===x.playerId);F&&(F.announcedCard&&(F.announcedCard.statuses&&(F.announcedCard.statuses=F.announcedCard.statuses.filter(oe=>oe.type==="Revealed")),delete F.announcedCard.enteredThisTurn,delete F.announcedCard.abilityUsedInPhase,delete F.announcedCard.powerModifier,delete F.announcedCard.deployAbilityConsumed,F.hand.push(F.announcedCard)),F.announcedCard=E)}if(g.source==="hand"&&x.target==="board"){const F=E;if(F.revealedTo==="all"||((z=F.statuses)==null?void 0:z.some(he=>he.type==="Revealed"))){const he=S.board.length;for(let ye=0;ye<he;ye++)for(let xe=0;xe<he;xe++){const Qe=S.board[ye][xe].card;if(Qe&&Qe.name.toLowerCase().includes("vigilant spotter")&&Qe.ownerId!==F.ownerId&&(S.board=Yt(S),(J=S.board[ye][xe].card.statuses)!=null&&J.some(Ye=>Ye.type==="Support"))){const Ye=S.players.find(We=>We.id===Qe.ownerId);Ye&&(Ye.score+=2)}}}}return(g.source==="board"||x.target==="board")&&(S.board=Yt(S)),S})},[m]),Es=T.useCallback((g,x,w,S)=>{m(E=>{if(!E.isGameStarted||E.board[w.row][w.col].card!==null)return E;const D=JSON.parse(JSON.stringify(E)),P=D.players.find(z=>z.id===g);if(P&&P.discard.length>x){const[z]=P.discard.splice(x,1);z.enteredThisTurn=!0,delete z.deployAbilityConsumed,z.statuses||(z.statuses=[]),z.statuses.push({type:"Resurrected",addedByPlayerId:g}),S&&S.forEach(J=>{var F;J.type!=="Resurrected"&&((F=z.statuses)==null||F.push({type:J.type,addedByPlayerId:g}))}),D.board[w.row][w.col].card=z,D.board=Yt(D)}return D})},[m]),Jr=T.useCallback(g=>{var x;if(((x=N.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId){const w={...g,timestamp:Date.now()};N.current.send(JSON.stringify({type:"TRIGGER_HIGHLIGHT",gameId:d.current.gameId,highlightData:w}))}},[]),Hl=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.board[g.row][g.col].card;return E&&(E.abilityUsedInPhase=S.currentPhase,x&&(E.deployAbilityConsumed=!0)),S})},[m]),Vn=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.board[g.row][g.col].card,D=S.board[x.row][x.col].card;return S.board[g.row][g.col].card=D,S.board[x.row][x.col].card=E,S.board=Yt(S),S})},[m]),Wl=T.useCallback((g,x,w)=>{m(S=>{if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=E.board[g.row][g.col].card,P=E.board[x.row][x.col].card;if(D&&P&&D.statuses){const z=D.statuses.findIndex(J=>J.type===w);if(z>-1){const[J]=D.statuses.splice(z,1);P.statuses||(P.statuses=[]),P.statuses.push(J)}}return E.board=Yt(E),E})},[m]),Hn=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.board[g.row][g.col].card,D=S.board[x.row][x.col].card,P=["Support","Threat"];if(E&&D&&E.statuses){const z=E.statuses.filter(F=>!P.includes(F.type)),J=E.statuses.filter(F=>P.includes(F.type));z.length>0&&(D.statuses||(D.statuses=[]),D.statuses.push(...z),E.statuses=J)}return S.board=Yt(S),S})},[m]),Ns=T.useCallback((g,x)=>{m(w=>{if(!w.isGameStarted)return w;const S=JSON.parse(JSON.stringify(w)),E=S.players.find(D=>D.id===g);if(E&&E.discard.length>x){const[D]=E.discard.splice(x,1);E.hand.push(D)}return S})},[m]),Yr=T.useCallback((g,x,w)=>{m(S=>{if(!S.isGameStarted)return S;const E=JSON.parse(JSON.stringify(S)),D=Object.keys(Yn.tokenDatabase).find(J=>Yn.tokenDatabase[J].name===x);if(!D)return S;const P=Yn.tokenDatabase[D],z=E.players.find(J=>J.id===w);if(P&&E.board[g.row][g.col].card===null){const J={id:`TKN_${x.toUpperCase().replace(/\s/g,"_")}_${Date.now()}`,deck:ke.Tokens,name:x,imageUrl:P.imageUrl,fallbackImage:P.fallbackImage,power:P.power,ability:P.ability,color:P.color,types:P.types||["Unit"],faction:"Tokens",ownerId:w,ownerName:z==null?void 0:z.name,enteredThisTurn:!0};E.board[g.row][g.col].card=J}return E.board=Yt(E),E})},[m]),Ts=T.useCallback((g,x,w,S,E)=>{m(D=>{var it;if(!D.isGameStarted)return D;const P=JSON.parse(JSON.stringify(D)),z=P.players.find(Ye=>Ye.id===E);if(!z)return D;let J=0;const F=P.board.length,oe=(Ye,We)=>{var Ke,Nt;if(Ye.ownerId===We)return!0;const Me=(Ke=Ye.statuses)==null?void 0:Ke.some(Vt=>Vt.type==="Exploit"&&Vt.addedByPlayerId===We);let K=!1;for(let Vt=0;Vt<F;Vt++)for(let dr=0;dr<F;dr++){const Wn=P.board[Vt][dr].card;Wn&&Wn.ownerId===We&&Wn.name.toLowerCase().includes("data liberator")&&(Nt=Wn.statuses)!=null&&Nt.some(qr=>qr.type==="Support")&&(K=!0)}return!!(Me&&K)};let he=g,ye=g,xe=x,Qe=x;if(g===w)he=g,ye=g,xe=0,Qe=F-1;else if(x===S)xe=x,Qe=x,he=0,ye=F-1;else return D;for(let Ye=he;Ye<=ye;Ye++)for(let We=xe;We<=Qe;We++){const Me=P.board[Ye][We];Me.card&&!((it=Me.card.statuses)!=null&&it.some(K=>K.type==="Stun"))&&oe(Me.card,E)&&(J+=Math.max(0,Me.card.power+(Me.card.powerModifier||0)))}return z.score+=J,P})},[m]);return{gameState:r,localPlayerId:o,setLocalPlayerId:i,draggedItem:a,setDraggedItem:u,connectionStatus:c,gamesList:y,latestHighlight:_,createGame:G,joinGame:U,requestGamesList:W,exitGame:V,startReadyCheck:le,cancelReadyCheck:ue,playerReady:ce,assignTeams:fe,setGameMode:_e,setGamePrivacy:we,setActiveGridSize:ee,setDummyPlayerCount:L,updatePlayerName:Ce,changePlayerColor:hs,updatePlayerScore:ys,changePlayerDeck:gs,loadCustomDeck:vs,drawCard:xs,shufflePlayerDeck:ws,moveItem:Kr,handleDrop:Kr,addBoardCardStatus:te,removeBoardCardStatus:de,removeBoardCardStatusByOwner:Oe,modifyBoardCardPower:me,addAnnouncedCardStatus:Te,removeAnnouncedCardStatus:Be,modifyAnnouncedCardPower:ne,addHandCardStatus:q,removeHandCardStatus:Ne,flipBoardCard:nt,flipBoardCardFaceDown:ge,revealHandCard:Ge,revealBoardCard:vt,requestCardReveal:Pt,respondToRevealRequest:un,syncGame:se,removeRevealedStatus:cr,resetGame:$,toggleActiveTurnPlayer:Cs,forceReconnect:O,triggerHighlight:Jr,nextPhase:Wr,prevPhase:Ss,setPhase:ks,markAbilityUsed:Hl,swapCards:Vn,transferStatus:Wl,transferAllCounters:Hn,recoverDiscardedCard:Ns,resurrectDiscardedCard:Es,spawnToken:Yr,scoreLine:Ts}},No=(e,t,n,r)=>{var a;const{card:l,ownerId:o,location:i}=e;if(t.targetOwnerId!==void 0&&t.targetOwnerId!==o||t.excludeOwnerId!==void 0&&t.excludeOwnerId===o)return!1;if(t.onlyOpponents){if(o===n)return!1;const u=r.find(f=>f.id===n),c=r.find(f=>f.id===o);if(u&&c&&u.teamId!==void 0&&u.teamId===c.teamId)return!1}return!(t.onlyFaceDown&&((a=l.statuses)!=null&&a.some(u=>u.type==="Revealed")||i==="board"&&!l.isFaceDown))},np=(e,t,n)=>{if(!e||e.type!=="ENTER_MODE"&&e.type!=="CREATE_STACK")return[];const r=[],l=t.board,o=l.length;if(e.type==="CREATE_STACK"){const c={targetOwnerId:e.targetOwnerId,excludeOwnerId:e.excludeOwnerId,onlyOpponents:e.onlyOpponents,onlyFaceDown:e.onlyFaceDown};for(let f=0;f<o;f++)for(let y=0;y<o;y++){const k=l[f][y];k.card&&No({card:k.card,ownerId:k.card.ownerId||0,location:"board"},c,n,t.players)&&r.push({row:f,col:y})}return r}const{mode:i,payload:a,sourceCoords:u}=e;if((i==="SELECT_TARGET"||i==="CENSOR_SWAP"||i==="ZEALOUS_WEAKEN"||i==="CENTURION_BUFF"||i==="SELECT_UNIT_FOR_MOVE")&&a.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=l[c][f];y.card&&a.filter(y.card,c,f)&&r.push({row:c,col:f})}else if(i==="PATROL_MOVE"&&u)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=c===u.row||f===u.col,k=c===u.row&&f===u.col,_=!l[c][f].card;y&&(_||k)&&r.push({row:c,col:f})}else if(i==="RIOT_PUSH"&&u)[{r:u.row-1,c:u.col},{r:u.row+1,c:u.col},{r:u.row,c:u.col-1},{r:u.row,c:u.col+1}].forEach(f=>{if(f.r>=0&&f.r<o&&f.c>=0&&f.c<o){const y=l[f.r][f.c].card;if(y&&y.ownerId!==n){const k=f.r-u.row,_=f.c-u.col,j=f.r+k,N=f.c+_;j>=0&&j<o&&N>=0&&N<o&&(l[j][N].card||r.push({row:f.r,col:f.c}))}}});else if(i==="RIOT_MOVE"&&a.vacatedCoords)r.push(a.vacatedCoords),u&&r.push(u);else if(i==="SWAP_POSITIONS"&&a.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=l[c][f];y.card&&a.filter(y.card,c,f)&&r.push({row:c,col:f})}else if((i==="TRANSFER_STATUS_SELECT"||i==="TRANSFER_ALL_STATUSES")&&a.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=l[c][f];y.card&&a.filter(y.card,c,f)&&r.push({row:c,col:f})}else if((i==="SPAWN_TOKEN"||i==="SELECT_CELL"||i==="IMMUNIS_RETRIEVE")&&u)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=!l[c][f].card;if(i==="IMMUNIS_RETRIEVE"&&a.filter){y&&a.filter(c,f)&&r.push({row:c,col:f});continue}if(i==="SELECT_CELL"){const k=Math.abs(c-u.row)+Math.abs(f-u.col)===1,_=c===u.row&&f===u.col,j=a.range==="global";y&&(k||j)&&r.push({row:c,col:f}),a.allowSelf&&_&&r.push({row:c,col:f})}else if(i==="SPAWN_TOKEN"){const k=Math.abs(c-u.row)+Math.abs(f-u.col)===1;y&&k&&r.push({row:c,col:f})}}else if(i==="REVEAL_ENEMY"&&a.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=l[c][f];y.card&&a.filter(y.card,c,f)&&r.push({row:c,col:f})}else if(i==="SELECT_LINE_START")for(let c=0;c<o;c++)for(let f=0;f<o;f++)r.push({row:c,col:f});else if(i==="SELECT_LINE_END"&&a.firstCoords)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const y=c===a.firstCoords.row,k=f===a.firstCoords.col;(y||k)&&r.push({row:c,col:f})}return r},Ly=(e,t,n)=>{var l;if(e.type==="OPEN_MODAL"||e.type==="CREATE_STACK"||np(e,t,n).length>0)return!0;if(e.mode==="SELECT_TARGET"&&((l=e.payload)!=null&&l.filter)){for(const o of t.players)if(o.hand.some(i=>e.payload.filter(i)))return!0}return!1};function My(){var du,fu,pu;const{gameState:e,localPlayerId:t,setLocalPlayerId:n,createGame:r,joinGame:l,startReadyCheck:o,cancelReadyCheck:i,playerReady:a,assignTeams:u,setGameMode:c,setGamePrivacy:f,setActiveGridSize:y,setDummyPlayerCount:k,updatePlayerName:_,changePlayerColor:j,updatePlayerScore:N,changePlayerDeck:A,loadCustomDeck:v,drawCard:d,handleDrop:p,draggedItem:m,setDraggedItem:b,connectionStatus:O,gamesList:U,requestGamesList:G,exitGame:W,moveItem:V,shufflePlayerDeck:le,addBoardCardStatus:ue,removeBoardCardStatus:ce,removeBoardCardStatusByOwner:fe,modifyBoardCardPower:_e,addAnnouncedCardStatus:we,removeAnnouncedCardStatus:se,modifyAnnouncedCardPower:$,addHandCardStatus:ee,removeHandCardStatus:L,flipBoardCard:te,flipBoardCardFaceDown:de,revealHandCard:Oe,revealBoardCard:me,requestCardReveal:Te,respondToRevealRequest:Be,syncGame:ne,removeRevealedStatus:q,resetGame:Ne,toggleActiveTurnPlayer:nt,forceReconnect:ge,triggerHighlight:Ge,latestHighlight:vt,nextPhase:Pt,prevPhase:un,setPhase:cr,markAbilityUsed:Ce,swapCards:hs,transferStatus:ys,transferAllCounters:gs,recoverDiscardedCard:vs,resurrectDiscardedCard:xs,spawnToken:ws,scoreLine:Cs}=Ay(),[ks,Wr]=T.useState(!1),[Ss,Kr]=T.useState(!1),[Es,Jr]=T.useState(!1),[Hl,Vn]=T.useState(!1),[Wl,Hn]=T.useState(!1),[Ns,Yr]=T.useState(!1),[Ts,g]=T.useState(null),[x,w]=T.useState(null),[S,E]=T.useState(!1),[D,P]=T.useState(null),[z,J]=T.useState(null),[F,oe]=T.useState(null),[he,ye]=T.useState(!0),[xe,Qe]=T.useState(()=>{try{const C=localStorage.getItem("image_refresh_data");if(C){const{version:R,timestamp:X}=JSON.parse(C),I=12*60*60*1e3;if(Date.now()-X<I)return R}}catch(C){console.error("Error parsing image refresh data",C)}const h=Date.now();return localStorage.setItem("image_refresh_data",JSON.stringify({version:h,timestamp:h})),h}),[it,Ye]=T.useState(null),[We,Me]=T.useState(null),[K,Ke]=T.useState(null),Nt=T.useRef(null),Vt=T.useRef(null),[dr,Wn]=T.useState(null),[qr,lp]=T.useState(!1),[Y,be]=T.useState(null),[nu,op]=T.useState([]),[bs,sp]=T.useState([]),[ru,fr]=T.useState(null),Qr=T.useRef({x:0,y:0}),ip=T.useRef(null),Xr=T.useRef(null),[ap,lu]=T.useState(void 0),rt=T.useRef(!1);T.useMemo(()=>e.players.filter(h=>!h.isDummy&&!h.isDisconnected).length,[e.players]);const pr=t===null&&e.gameId!==null,up=T.useMemo(()=>e.players.filter(h=>!h.isDummy).length,[e.players]),js=t===1,Ve=T.useMemo(()=>e.players.find(h=>h.id===t),[e.players,t]),cp=e.gameId&&(Ve||pr),Kn=T.useMemo(()=>{const h=new Map;return e.players.forEach(C=>h.set(C.id,C.color)),h},[e.players]),Zr=!!Y||!!K;T.useEffect(()=>{const h=()=>{const C=localStorage.getItem("ui_list_mode");ye(C===null?!0:C==="true")};return h(),window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[]),T.useLayoutEffect(()=>{if(!he){lu(void 0);return}const h=()=>{if(Xr.current){const X=window.innerWidth,I=Xr.current.getBoundingClientRect();if(I.width===0)return;const ie=(X-I.width)/2-10;lu(Math.max(0,ie))}},C=new ResizeObserver(h);Xr.current&&C.observe(Xr.current),window.addEventListener("resize",h),h();const R=setTimeout(h,100);return()=>{C.disconnect(),window.removeEventListener("resize",h),clearTimeout(R)}},[he,t,e.activeGridSize]),T.useLayoutEffect(()=>{K&&Nt.current&&Vt.current&&(Nt.current.style.left=`${Vt.current.x-2}px`,Nt.current.style.top=`${Vt.current.y-2}px`)},[K]),T.useEffect(()=>{const h=C=>{Qr.current={x:C.clientX,y:C.clientY},Nt.current&&(K||Y)&&(Nt.current.style.left=`${C.clientX-2}px`,Nt.current.style.top=`${C.clientY-2}px`)};return window.addEventListener("mousemove",h),(K||Y)&&Nt.current&&(Nt.current.style.left=`${Qr.current.x-2}px`,Nt.current.style.top=`${Qr.current.y-2}px`),()=>{window.removeEventListener("mousemove",h)}},[K,Y]),T.useEffect(()=>{const h=C=>{if(!K)return;const R=document.elementFromPoint(C.clientX,C.clientY),X=R==null?void 0:R.closest("[data-hand-card]");if(X){const Z=X.getAttribute("data-hand-card");if(Z){const[B,ie]=Z.split(","),H=parseInt(B,10),re=parseInt(ie,10),ae=e.players.find(Ae=>Ae.id===H),Ee=ae==null?void 0:ae.hand[re];if(ae&&Ee){if(!No({card:Ee,ownerId:H,location:"hand"},K,t,e.players))return;if(K.type==="Revealed"&&H!==t&&!ae.isDummy){t!==null&&(Te({source:"hand",ownerId:H,cardIndex:re},t),K.sourceCoords&&Ce(K.sourceCoords),K.count>1?Ke(Ue=>Ue?{...Ue,count:Ue.count-1}:null):Ke(null),rt.current=!0,setTimeout(()=>{rt.current=!1},300));return}p({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:K.type,count:1},{target:"hand",playerId:H,cardIndex:re,boardCoords:void 0}),K.sourceCoords&&Ce(K.sourceCoords),K.count>1?Ke(Ue=>Ue?{...Ue,count:Ue.count-1}:null):Ke(null),rt.current=!0,setTimeout(()=>{rt.current=!1},300);return}}}const I=R==null?void 0:R.closest("[data-board-coords]");if(I){const Z=I.getAttribute("data-board-coords");if(Z){const[B,ie]=Z.split(","),H=parseInt(B,10),re=parseInt(ie,10),ae=e.board[H][re].card;if(ae&&ae.ownerId!==void 0){if(!No({card:ae,ownerId:ae.ownerId,location:"board"},K,t,e.players))return;const Ae=e.players.find(Ue=>Ue.id===ae.ownerId);if(K.type==="Revealed"&&ae.ownerId!==t&&!(Ae!=null&&Ae.isDummy)){t!==null&&(Te({source:"board",ownerId:ae.ownerId,boardCoords:{row:H,col:re}},t),K.sourceCoords&&Ce(K.sourceCoords),K.count>1?Ke(Ue=>Ue?{...Ue,count:Ue.count-1}:null):Ke(null),rt.current=!0,setTimeout(()=>{rt.current=!1},300));return}}ae&&(p({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:K.type,count:1},{target:"board",boardCoords:{row:H,col:re}}),K.sourceCoords&&Ce(K.sourceCoords),K.count>1?Ke(Ee=>Ee?{...Ee,count:Ee.count-1}:null):Ke(null),rt.current=!0,setTimeout(()=>{rt.current=!1},300))}}else{const Z=R==null?void 0:R.closest(".counter-modal-content");K.isDragging?Ke(Z?B=>B?{...B,isDragging:!1}:null:null):Z||Ke(null)}};return window.addEventListener("mouseup",h),()=>{window.removeEventListener("mouseup",h)}},[K,p,e,t,Oe,Te,Ce]),T.useEffect(()=>{const h=C=>{rt.current&&(C.stopPropagation(),C.preventDefault())};return window.addEventListener("click",h,!0),()=>window.removeEventListener("click",h,!0)},[]),T.useEffect(()=>{const h=R=>{["INPUT","TEXTAREA","SELECT"].includes(R.target.tagName)||(R.code==="Space"&&(R.preventDefault(),e.isGameStarted&&Pt()),R.key==="Escape"&&(Y&&Y.sourceCoords&&Y.sourceCoords.row>=0&&Ce(Y.sourceCoords,Y.isDeployAbility),K&&K.sourceCoords&&Ce(K.sourceCoords),Ke(null),Me(null),be(null),P(null)))},C=R=>{(K||We||Y)&&(R.preventDefault(),Y&&Y.sourceCoords&&Y.sourceCoords.row>=0&&Ce(Y.sourceCoords,Y.isDeployAbility),K&&K.sourceCoords&&Ce(K.sourceCoords),Ke(null),Me(null),be(null),P(null))};return window.addEventListener("keydown",h),window.addEventListener("contextmenu",C),()=>{window.removeEventListener("keydown",h),window.removeEventListener("contextmenu",C)}},[K,We,Y,Ce,e.isGameStarted,Pt]),T.useEffect(()=>{let h=Y;K&&!Y&&(h={type:"CREATE_STACK",tokenType:K.type,count:K.count,onlyFaceDown:K.onlyFaceDown,onlyOpponents:K.onlyOpponents,targetOwnerId:K.targetOwnerId,excludeOwnerId:K.excludeOwnerId});const C=np(h,e,t),R=[];if(Y&&Y.type==="ENTER_MODE"&&Y.mode==="SELECT_TARGET")Y.payload.filter&&e.players.forEach(X=>{X.hand.forEach((I,Z)=>{Y.payload.filter(I)&&R.push({playerId:X.id,cardIndex:Z})})});else if(K){const X=Vl[K.type];X&&X.allowedTargets&&X.allowedTargets.includes("hand")&&e.players.forEach(I=>{I.hand.forEach((Z,B)=>{No({card:Z,ownerId:I.id,location:"hand"},K,t,e.players)&&R.push({playerId:I.id,cardIndex:B})})})}op(C),sp(R)},[Y,K,e.board,e.players,t]),T.useEffect(()=>{if(vt){Wn(vt);const h=setTimeout(()=>Wn(null),1e3);return()=>clearTimeout(h)}},[vt]);const Jn=()=>{Vn(!1),Hn(!1),P(null),J(null),oe(null),Yr(!1)},dp=()=>{js&&(e.gameMode===Un.FreeForAll?o():E(!0))},fp=h=>{u(h),E(!1),o()},pp=h=>{l(h),Wr(!1)},mp=()=>{r(),n(1)},hp=()=>{G(),Wr(!0)},yp=h=>{localStorage.setItem("custom_ws_url",h.trim());const C=localStorage.getItem("ui_list_mode");ye(C===null?!0:C==="true"),Jr(!1),ge()},gp=()=>{const h=Date.now();Qe(h),localStorage.setItem("image_refresh_data",JSON.stringify({version:h,timestamp:h})),ne()},wn=h=>{t!==null&&Ge({...h,playerId:t})},Kl=(h,C)=>{var X;if(Y||K||!qr||!e.isGameStarted||t===null||t!==e.activeTurnPlayerId||h.ownerId!==t||!ra(h,e.currentPhase,e.activeTurnPlayerId))return;const R=dy(h,e,t,C);if(R){if(R.mode==="PRINCEPS_SHIELD_THEN_AIM"){ue(C,"Shield",t),Ce(C,!0),be({type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:h,sourceCoords:C,payload:{tokenType:"Aim",count:1,filter:I=>{var Z;return((Z=I.statuses)==null?void 0:Z.some(B=>B.type==="Threat"&&B.addedByPlayerId===t))||!1}}});return}if(R.mode==="WALKING_TURRET_SHIELD"){ue(C,"Shield",t),Ce(C,R.isDeployAbility);return}if(R.mode==="INTEGRATOR_SCORE"){const I=e.board.length,{row:Z,col:B}=C;let ie=0;for(let H=0;H<I;H++)for(let re=0;re<I;re++){const ae=e.board[H][re];(H===Z||re===B)&&ae.card&&(ie+=((X=ae.card.statuses)==null?void 0:X.filter(Ee=>Ee.type==="Exploit"&&Ee.addedByPlayerId===t).length)||0)}ie>0&&N(t,ie),Ce(C,R.isDeployAbility),fr(C),setTimeout(()=>fr(null),500);return}if(R.type==="CREATE_STACK"&&R.tokenType&&R.count)Ke({type:R.tokenType,count:R.count,isDragging:!1,sourceCoords:C,excludeOwnerId:R.excludeOwnerId,onlyOpponents:R.onlyOpponents,onlyFaceDown:R.onlyFaceDown}),R.isDeployAbility;else if(R.type==="ENTER_MODE"){if(!Ly(R,e,t)){C.row>=0&&(fr(C),Ce(C,R.isDeployAbility),setTimeout(()=>fr(null),750));return}be(R)}else if(R.type==="OPEN_MODAL"){if(R.mode==="RETRIEVE_DEVICE"){const I=e.players.find(Z=>Z.id===t);I&&(I.discard.some(B=>{var ie;return(ie=B.types)==null?void 0:ie.includes("Device")})?(P({player:I,pickConfig:{filterType:"Device",action:"recover"}}),C.row>=0&&Ce(C,R.isDeployAbility)):C.row>=0&&(fr(C),Ce(C,R.isDeployAbility),setTimeout(()=>fr(null),750)))}if(R.mode==="IMMUNIS_RETRIEVE"){const I=e.players.find(Z=>Z.id===t);I&&(P({player:I,pickConfig:{filterType:"Optimates",action:"resurrect"}}),be({type:"ENTER_MODE",mode:"IMMUNIS_RETRIEVE",sourceCard:h,sourceCoords:C,isDeployAbility:R.isDeployAbility,payload:R.payload}))}}}},ou=h=>{if(!Y)return;const{mode:C,sourceCard:R,sourceCoords:X,payload:I,isDeployAbility:Z}=Y;if(C==="SELECT_LINE_START"){be({type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:R,sourceCoords:X,isDeployAbility:Z,payload:{...I,firstCoords:h}});return}if(C==="SELECT_LINE_END"&&(I!=null&&I.firstCoords)){const{row:B,col:ie}=I.firstCoords,{row:H,col:re}=h;if(B!==H&&ie!==re)return;const ae=I.actionType;if(ae==="CENTURION_BUFF"&&R&&X){const Ee=e.board.length;let Ae=0,Ue=Ee-1,Rt=0,mr=Ee-1;B===H?Ae=Ue=B:Rt=mr=ie;for(let Ht=Ae;Ht<=Ue;Ht++)for(let Wt=Rt;Wt<=mr;Wt++){const xt=e.board[Ht][Wt].card;if(xt){const Kt=xt.id===R.id,De=xt.ownerId===t,at=e.players.find(nn=>nn.id===t),ut=e.players.find(nn=>nn.id===xt.ownerId),Ot=(at==null?void 0:at.teamId)!==void 0&&(ut==null?void 0:ut.teamId)!==void 0&&at.teamId===ut.teamId;!Kt&&(De||Ot)&&_e({row:Ht,col:Wt},1)}}Ce(X,Z)}else(ae==="SCORE_LINE"||!ae)&&(Cs(B,ie,H,re,t),R&&V({card:R,source:"announced",playerId:t},{target:"discard",playerId:t}));setTimeout(()=>be(null),100)}},su=(h,C)=>{var R;if(!We&&!K&&!rt.current){if(Y&&Y.type==="ENTER_MODE"){if(Y.sourceCard&&Y.sourceCard.id===h.id&&Y.mode!=="SELECT_LINE_START")return;const{mode:X,payload:I,sourceCard:Z,sourceCoords:B,isDeployAbility:ie}=Y;if(X==="SELECT_LINE_START"||X==="SELECT_LINE_END"){ou(C);return}if(X==="SELECT_TARGET"&&I.actionType==="DESTROY"){if(I.filter&&!I.filter(h,C.row,C.col))return;((R=h.statuses)==null?void 0:R.some(re=>re.type==="Shield"))?ce(C,"Shield"):V({card:h,source:"board",boardCoords:C,bypassOwnershipCheck:!0},{target:"discard",playerId:h.ownerId}),B&&B.row>=0&&Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="SELECT_TARGET"&&I.tokenType){if(I.filter&&!I.filter(h,C.row,C.col))return;p({card:{id:"dummy",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:I.tokenType,count:I.count||1},{target:"board",boardCoords:C}),B&&B.row>=0&&Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="RIOT_PUSH"&&B&&B.row>=0){if(!(Math.abs(C.row-B.row)+Math.abs(C.col-B.col)===1)||h.ownerId===t)return;const re=C.row-B.row,ae=C.col-B.col,Ee=C.row+re,Ae=C.col+ae,Ue=e.board.length;if(Ee<0||Ee>=Ue||Ae<0||Ae>=Ue||e.board[Ee][Ae].card!==null)return;V({card:h,source:"board",boardCoords:C,bypassOwnershipCheck:!0},{target:"board",boardCoords:{row:Ee,col:Ae}}),be({type:"ENTER_MODE",mode:"RIOT_MOVE",sourceCard:Y.sourceCard,sourceCoords:Y.sourceCoords,isDeployAbility:ie,payload:{vacatedCoords:C}});return}if(X==="RIOT_MOVE"&&B&&B.row>=0){C.row===B.row&&C.col===B.col&&(Ce(B,ie),setTimeout(()=>be(null),100));return}if(X==="SWAP_POSITIONS"&&B&&B.row>=0){if(Z&&Z.id===h.id||I.filter&&!I.filter(h,C.row,C.col))return;hs(B,C),Ce(C,ie),setTimeout(()=>be(null),100);return}if(X==="TRANSFER_STATUS_SELECT"&&B&&B.row>=0){if(Z&&Z.id===h.id||I.filter&&!I.filter(h,C.row,C.col))return;h.statuses&&h.statuses.length>0&&(ys(C,B,h.statuses[0].type),Ce(B,ie),setTimeout(()=>be(null),100));return}if(X==="TRANSFER_ALL_STATUSES"&&B&&B.row>=0){if(Z&&Z.id===h.id||I.filter&&!I.filter(h,C.row,C.col))return;gs(C,B),Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="REVEAL_ENEMY"){if(Z&&Z.id===h.id||I.filter&&!I.filter(h,C.row,C.col))return;Ke({type:"Revealed",count:1,isDragging:!1,sourceCoords:B,targetOwnerId:h.ownerId,onlyFaceDown:!0,onlyOpponents:!0}),setTimeout(()=>be(null),100);return}if(X==="CENSOR_SWAP"&&B&&B.row>=0){if(I.filter&&!I.filter(h))return;fe(C,"Exploit",t),ue(C,"Stun",t),Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="ZEALOUS_WEAKEN"&&B&&B.row>=0){if(I.filter&&!I.filter(h))return;_e(C,-1),Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="CENTURION_BUFF"&&B&&B.row>=0){Ce(B,ie),setTimeout(()=>be(null),100);return}if(X==="SELECT_UNIT_FOR_MOVE"&&B&&B.row>=0){if(I.filter&&!I.filter(h))return;be({type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:h,sourceCoords:C,isDeployAbility:ie,payload:{allowSelf:!1}});return}return}!Y&&!K&&Kl(h,C)}},Is=(h,C,R)=>{if(!rt.current&&Y&&Y.type==="ENTER_MODE"&&Y.mode==="SELECT_TARGET"){const{payload:X,sourceCoords:I,isDeployAbility:Z}=Y;if(X.actionType==="DESTROY"){if(X.filter&&!X.filter(C))return;V({card:C,source:"hand",playerId:h.id,cardIndex:R,bypassOwnershipCheck:!0},{target:"discard",playerId:h.id}),I&&I.row>=0&&Ce(I,Z),setTimeout(()=>be(null),100)}}},_s=(h,C)=>{Y||K||rt.current||h.id===t&&(!qr||!e.isGameStarted||e.activeTurnPlayerId===t&&ra(C,e.currentPhase,e.activeTurnPlayerId)&&Kl(C,{row:-1,col:-1}))},iu=h=>{if(rt.current||!Y||Y.type!=="ENTER_MODE")return;const{mode:C,sourceCoords:R,sourceCard:X,payload:I,isDeployAbility:Z}=Y;if(C==="SELECT_LINE_START"||C==="SELECT_LINE_END"){ou(h);return}if(C==="PATROL_MOVE"&&R&&X&&R.row>=0){const B=h.row===R.row,ie=h.col===R.col;if(h.row===R.row&&h.col===R.col){setTimeout(()=>be(null),100);return}(B||ie)&&(V({card:X,source:"board",boardCoords:R},{target:"board",boardCoords:h}),Ce(h,Z),setTimeout(()=>be(null),100));return}if(C==="RIOT_MOVE"&&R&&X&&I.vacatedCoords){h.row===I.vacatedCoords.row&&h.col===I.vacatedCoords.col&&(V({card:X,source:"board",boardCoords:R},{target:"board",boardCoords:h}),Ce(h,Z),setTimeout(()=>be(null),100));return}if(C==="SPAWN_TOKEN"&&R&&I.tokenName&&R.row>=0){Math.abs(h.row-R.row)+Math.abs(h.col-R.col)===1&&(ws(h,I.tokenName,t),Ce(R,Z),setTimeout(()=>be(null),100));return}if(C==="SELECT_CELL"&&R&&X&&R.row>=0){const B=Math.abs(h.row-R.row)+Math.abs(h.col-R.col)===1,ie=I.range==="global";if(B||ie){I.allowSelf&&h.row===R.row&&h.col===R.col||V({card:X,source:"board",boardCoords:R,bypassOwnershipCheck:!0},{target:"board",boardCoords:h}),Ce(h,Z),setTimeout(()=>be(null),100);return}return}if(C==="IMMUNIS_RETRIEVE"&&R&&R.row>=0){if(I.selectedCardIndex!==void 0&&I.filter&&I.filter(h.row,h.col)){xs(t,I.selectedCardIndex,h),Ce(R,Z),setTimeout(()=>be(null),100);return}if(I.selectedCardIndex===void 0)return}},el=()=>{Ye(null)},Cn=(h,C,R)=>{h.preventDefault(),!(Y||K||We)&&(h.stopPropagation(),!(t===null||!e.isGameStarted)&&Ye({x:h.clientX,y:h.clientY,type:C,data:R}))},au=(h,C)=>{var B;if(Y||K||rt.current)return;const R=h.ownerId===t;if(R&&h.isFaceDown){te(C);return}const X=h.ownerId?e.players.find(ie=>ie.id===h.ownerId):void 0,I=(B=h.statuses)==null?void 0:B.some(ie=>ie.type==="Revealed"&&ie.addedByPlayerId===t);!h.isFaceDown||h.revealedTo==="all"||Array.isArray(h.revealedTo)&&h.revealedTo.includes(t)||I||R?oe({card:h,player:X}):t!==null&&Te({source:"board",ownerId:h.ownerId,boardCoords:C},t)},uu=h=>{Y||K||rt.current||wn({type:"cell",row:h.row,col:h.col})},Ds=(h,C,R)=>{var X;if(!(Y||K)&&!rt.current){if(h.id===t){Jn();const I={card:C,source:"hand",playerId:h.id,cardIndex:R};Me({card:C,sourceItem:I,faceDown:!1})}else if(t!==null){const I=C.revealedTo==="all",Z=Array.isArray(C.revealedTo)&&C.revealedTo.includes(t),B=(X=C.statuses)==null?void 0:X.some(H=>H.type==="Revealed"&&H.addedByPlayerId===t);I||Z||B||!!h.isDummy||!!h.isDisconnected?oe({card:C,player:h}):Te({source:"hand",ownerId:h.id,cardIndex:R},t)}}},cu=(h,C,R,X)=>{if(Y||K||rt.current)return;const I={card:C,source:X,playerId:h.id,cardIndex:R};V(I,{target:"hand",playerId:h.id})},vp=h=>{P(null),J(h)},xp=h=>{J(null),P({player:h})},wp=T.useMemo(()=>{var Z,B,ie;if(!it||t===null)return null;const{type:h,data:C,x:R,y:X}=it;let I=[];if(h==="emptyBoardCell")I.push({label:"Highlight Cell",onClick:()=>wn({type:"cell",row:C.boardCoords.row,col:C.boardCoords.col})}),I.push({label:"Highlight Column",onClick:()=>wn({type:"col",col:C.boardCoords.col})}),I.push({label:"Highlight Row",onClick:()=>wn({type:"row",row:C.boardCoords.row})});else if(h==="boardItem"||h==="announcedCard"){const H=h==="boardItem";let re=H?e.board[C.boardCoords.row][C.boardCoords.col].card:C.card,ae=H?null:C.player;if(!H&&ae){const De=e.players.find(at=>at.id===ae.id);De&&(ae=De,re=De.announcedCard||re)}if(!re)return Ye(null),null;const Ee=re.ownerId?e.players.find(De=>De.id===re.ownerId):void 0,Ae=re.ownerId===t,Ue=!!(Ee!=null&&Ee.isDummy),Rt=Ae||Ue,mr=(Z=re.statuses)==null?void 0:Z.some(De=>De.type==="Revealed"&&De.addedByPlayerId===t),Ht=!re.isFaceDown||re.revealedTo==="all"||Array.isArray(re.revealedTo)&&re.revealedTo.includes(t)||mr;(Ht||Ae&&re.isFaceDown)&&I.push({label:"View",isBold:!0,onClick:()=>oe({card:re,player:Ee})}),!H&&Rt&&re.deck===ke.Command&&(e.currentPhase===1||e.currentPhase===3)&&I.push({label:"Play",isBold:!0,onClick:()=>{Kl(re,{row:-1,col:-1})}}),H&&Rt&&(re.isFaceDown?I.push({label:"Flip Face Up",isBold:!0,onClick:()=>te(C.boardCoords)}):I.push({label:"Flip Face Down",onClick:()=>de(C.boardCoords)}));const Wt=H?{card:re,source:"board",boardCoords:C.boardCoords}:{card:re,source:"announced",playerId:ae.id},xt=re.ownerId,Kt=(re==null?void 0:re.deck)===ke.Tokens||(re==null?void 0:re.deck)==="counter";if(H&&(Rt&&re.isFaceDown&&I.push({label:"Reveal to All",onClick:()=>me(C.boardCoords,"all")}),!Ae&&!Ht&&I.push({label:"Request Reveal",onClick:()=>Te({source:"board",ownerId:re.ownerId,boardCoords:C.boardCoords},t)})),I.length>0&&I.push({isDivider:!0}),Rt&&Ht&&(I.push({label:"To Hand",disabled:Kt,onClick:()=>V(Wt,{target:"hand",playerId:xt})}),xt)){const De=Kt?"Remove":"To Discard";I.push({label:De,onClick:()=>V(Wt,{target:"discard",playerId:xt})}),I.push({label:"To Deck Top",disabled:Kt,onClick:()=>V(Wt,{target:"deck",playerId:xt,deckPosition:"top"})}),I.push({label:"To Deck Bottom",disabled:Kt,onClick:()=>V(Wt,{target:"deck",playerId:xt,deckPosition:"bottom"})})}if(H&&(I.push({isDivider:!0}),I.push({label:"Highlight Cell",onClick:()=>wn({type:"cell",row:C.boardCoords.row,col:C.boardCoords.col})}),I.push({label:"Highlight Column",onClick:()=>wn({type:"col",col:C.boardCoords.col})}),I.push({label:"Highlight Row",onClick:()=>wn({type:"row",row:C.boardCoords.row})})),Ht){const De=["Aim","Exploit","Stun","Shield","Support","Threat","Revealed"],at=[];De.forEach(ut=>{var nn;(((nn=re.statuses)==null?void 0:nn.filter(Ep=>Ep.type===ut).length)||0)>0&&at.push({type:"statusControl",label:ut,onAdd:()=>H?ue(C.boardCoords,ut,t):we(ae.id,ut,t),onRemove:()=>H?ce(C.boardCoords,ut):se(ae.id,ut),removeDisabled:!1})}),at.length>0&&(I.length>0&&!("isDivider"in I[I.length-1])&&I.push({isDivider:!0}),I.push(...at)),I.length>0&&!("isDivider"in I[I.length-1])&&I.push({isDivider:!0}),I.push({type:"statusControl",label:"Power",onAdd:()=>H?_e(C.boardCoords,1):$(ae.id,1),onRemove:()=>H?_e(C.boardCoords,-1):$(ae.id,-1),removeDisabled:!1})}}else if(h==="token_panel_item"){const{card:H}=C,re={card:H,source:"token_panel"};I.push({label:"View",isBold:!0,onClick:()=>oe({card:H})}),I.push({isDivider:!0}),I.push({label:"Play Face Up",isBold:!0,onClick:()=>{Jn(),Me({card:H,sourceItem:re,faceDown:!1})}}),I.push({label:"Play Face Down",onClick:()=>{Jn(),Me({card:H,sourceItem:re,faceDown:!0})}})}else if(["handCard","discardCard","deckCard"].includes(h)){let{card:H,boardCoords:re,player:ae,cardIndex:Ee}=C;const Ae=e.players.find(Ot=>Ot.id===ae.id);Ae&&(ae=Ae,h==="handCard"?H=Ae.hand[Ee]||H:h==="discardCard"?H=Ae.discard[Ee]||H:h==="deckCard"&&(H=Ae.deck[Ee]||H));const Ue=ae.id===t||!!ae.isDummy,Rt=e.players.find(Ot=>Ot.id===t),mr=(Rt==null?void 0:Rt.teamId)!==void 0&&ae.teamId===Rt.teamId,Ht=H.revealedTo==="all"||Array.isArray(H.revealedTo)&&H.revealedTo.includes(t),Wt=(B=H.statuses)==null?void 0:B.some(Ot=>Ot.type==="Revealed"&&Ot.addedByPlayerId===t),xt=h!=="handCard"?!0:ae.id===t||mr||!!ae.isDummy||!!ae.isDisconnected||Ht||Wt;let Kt;h==="handCard"?Kt="hand":h==="discardCard"?Kt="discard":Kt="deck";const De={card:H,source:Kt,playerId:ae==null?void 0:ae.id,cardIndex:Ee,boardCoords:re},at=H.ownerId,ut=(H==null?void 0:H.deck)===ke.Tokens||(H==null?void 0:H.deck)==="counter";if(xt){const Ot=H.ownerId?e.players.find(nn=>nn.id===H.ownerId):void 0;I.push({label:"View",isBold:!0,onClick:()=>oe({card:H,player:Ot})})}Ue?(h==="handCard"?(I.push({label:"Play",isBold:!0,onClick:()=>{Jn(),Me({card:H,sourceItem:De,faceDown:!1})}}),I.push({label:"Play Face Down",onClick:()=>{Jn(),Me({card:H,sourceItem:De,faceDown:!0})}})):xt&&["discardCard","deckCard"].includes(h)&&(I.push({label:"Play Face Up",isBold:!0,onClick:()=>{Jn(),Me({card:H,sourceItem:De,faceDown:!1})}}),I.push({label:"Play Face Down",onClick:()=>{Jn(),Me({card:H,sourceItem:De,faceDown:!0})}})),I.length>0&&I.push({isDivider:!0}),h==="handCard"&&I.push({label:"Reveal to All",onClick:()=>Oe(ae.id,Ee,"all")}),I.length>0&&!("isDivider"in I[I.length-1])&&I.push({isDivider:!0}),h==="discardCard"?I.push({label:"To Hand",disabled:ut,onClick:()=>V(De,{target:"hand",playerId:at})}):h==="handCard"&&I.push({label:"To Discard",onClick:()=>V(De,{target:"discard",playerId:at})}),["handCard","discardCard"].includes(h)&&at&&(I.push({label:"To Deck Top",disabled:ut,onClick:()=>V(De,{target:"deck",playerId:at,deckPosition:"top"})}),I.push({label:"To Deck Bottom",disabled:ut,onClick:()=>V(De,{target:"deck",playerId:at,deckPosition:"bottom"})})),h==="deckCard"&&(I.push({label:"To Hand",disabled:ut,onClick:()=>V(De,{target:"hand",playerId:ae.id})}),I.push({label:"To Discard",onClick:()=>V(De,{target:"discard",playerId:ae.id})})),h==="handCard"&&(((ie=H.statuses)==null?void 0:ie.filter(nn=>nn.type==="Revealed").length)||0)>0&&(I.length>0&&!("isDivider"in I[I.length-1])&&I.push({isDivider:!0}),I.push({type:"statusControl",label:"Revealed",onAdd:()=>ee(ae.id,Ee,"Revealed",t),onRemove:()=>L(ae.id,Ee,"Revealed"),removeDisabled:!1}))):h==="handCard"&&!xt&&I.push({label:"Request Reveal",onClick:()=>Te({source:"hand",ownerId:ae.id,cardIndex:Ee},t)})}else if(h==="deckPile"){const{player:H}=C;(H.id===t||!!H.isDummy)&&(I.push({label:"Draw Card",onClick:()=>d(H.id)}),I.push({label:"Shuffle",onClick:()=>le(H.id)})),I.push({label:"View",onClick:()=>vp(H)})}else if(h==="discardPile"){const{player:H}=C;I.push({label:"View",onClick:()=>xp(H)})}return I=I.filter((H,re)=>"isDivider"in H?!(re===0||re===I.length-1||"isDivider"in I[re-1]):!0),s.jsx(Dy,{x:R,y:X,items:I,onClose:el})},[e,t,V,wn,ue,ce,_e,we,se,$,ee,L,d,le,te,de,Oe,me,Te,q,Kl]);T.useEffect(()=>{window.addEventListener("click",el);const h=C=>{C.target.closest("[data-interactive]")||el()};return window.addEventListener("contextmenu",h),()=>{window.removeEventListener("click",el),window.removeEventListener("contextmenu",h)}},[]),T.useEffect(()=>{m&&el()},[m]);const Cp=h=>{if(Hl)Vn(!1),g(null);else{Hn(!1),w(null);const C=h.currentTarget.getBoundingClientRect();g({top:C.top,left:C.left}),Vn(!0)}},kp=h=>{if(Wl)Hn(!1),w(null);else{Vn(!1),g(null);const C=h.currentTarget.getBoundingClientRect();w({top:C.top,left:C.left}),Hn(!0)}},Sp=(h,C)=>{Vt.current={x:C.clientX,y:C.clientY},Ke(R=>R&&R.type===h?{type:h,count:R.count+1,isDragging:!0,sourceCoords:R.sourceCoords}:{type:h,count:1,isDragging:!0})};if(!cp){const h="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg text-lg w-full transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",C="text-gray-400 hover:text-white transition-colors";return s.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-800",children:s.jsxs("div",{className:"text-center p-4 flex flex-col items-center",children:[s.jsx("h1",{className:"text-5xl font-bold mb-12",children:"New Avalon: Skirmish"}),s.jsxs("div",{className:"flex flex-col space-y-4 w-64",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:mp,className:`${h} flex-grow`,children:"Start Game"}),s.jsx("button",{onClick:()=>Jr(!0),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold p-3 rounded-lg transition-colors aspect-square",title:"Settings",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),s.jsx("button",{onClick:hp,className:h,children:"Join Game"}),s.jsx("button",{onClick:()=>Kr(!0),className:h,children:"Deck Building"}),s.jsx("button",{disabled:!0,className:h,children:"Story Mode"}),s.jsx("button",{disabled:!0,className:h,children:"Puzzles"}),s.jsx("button",{onClick:()=>Yr(!0),className:h,children:"Rules & Tutorial"})]}),s.jsxs("div",{className:"mt-16 flex items-center space-x-8",children:[s.jsx("a",{href:"https://t.me/NikitaAnahoretTriakin",target:"_blank",rel:"noopener noreferrer",className:C,title:"Telegram",children:s.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5c/Telegram_Messenger.png",alt:"Telegram",className:"h-8 w-8 object-contain"})}),s.jsx("a",{href:"https://discord.gg/U5zKADsZZY",target:"_blank",rel:"noopener noreferrer",className:C,title:"Discord",children:s.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/2111/2111370.png",alt:"Discord",className:"h-8 w-8 object-contain"})}),s.jsx("a",{href:"https://www.patreon.com/c/AnchoriteComics",target:"_blank",rel:"noopener noreferrer",className:C,title:"Patreon",children:s.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/5968/5968722.png",alt:"Patreon",className:"h-8 w-8 object-contain"})})]}),s.jsx(hy,{isOpen:ks,onClose:()=>Wr(!1),onJoin:pp,games:U}),s.jsx(Ny,{isOpen:Ss,onClose:()=>Kr(!1),setViewingCard:oe}),s.jsx(Ty,{isOpen:Es,onClose:()=>Jr(!1),onSave:yp}),s.jsx(_y,{isOpen:Ns,onClose:()=>Yr(!1)}),F&&s.jsx(jc,{card:F.card,ownerPlayer:F.player,onClose:()=>oe(null),statusDescriptions:qo,allPlayers:e.players,imageRefreshVersion:xe})]})})}return s.jsxs("div",{className:`relative w-screen h-screen overflow-hidden ${K?"cursor-none":""}`,children:[s.jsx(my,{gameId:e.gameId,isGameStarted:e.isGameStarted,onStartGame:dp,onResetGame:Ne,activeGridSize:e.activeGridSize,onGridSizeChange:y,dummyPlayerCount:e.dummyPlayerCount,onDummyPlayerCountChange:k,realPlayerCount:up,connectionStatus:O,onExitGame:W,onOpenTokensModal:Cp,onOpenCountersModal:kp,gameMode:e.gameMode,onGameModeChange:c,isPrivate:e.isPrivate,onPrivacyChange:f,isHost:js,onSyncGame:gp,currentPhase:e.currentPhase,onNextPhase:Pt,onPrevPhase:un,onSetPhase:cr,isAutoAbilitiesEnabled:qr,onToggleAutoAbilities:lp}),he?s.jsxs("div",{className:"relative h-full w-full pt-14 overflow-hidden bg-gray-900",children:[Ve&&s.jsx("div",{ref:ip,className:"absolute left-0 top-14 bottom-[2px] z-30 bg-panel-bg shadow-xl flex flex-col border-r border-gray-700 w-fit min-w-0 pl-[2px] py-[2px] pr-0 transition-all duration-100 overflow-hidden",style:{width:ap},children:s.jsx(ii,{player:Ve,isLocalPlayer:!0,localPlayerId:t,isSpectator:pr,isGameStarted:e.isGameStarted,position:Ve.id,onNameChange:h=>_(Ve.id,h),onColorChange:h=>j(Ve.id,h),onScoreChange:h=>N(Ve.id,h),onDeckChange:h=>A(Ve.id,h),onLoadCustomDeck:h=>v(Ve.id,h),onDrawCard:()=>d(Ve.id),handleDrop:p,draggedItem:m,setDraggedItem:b,openContextMenu:Cn,onHandCardDoubleClick:Ds,playerColorMap:Kn,allPlayers:e.players,localPlayerTeamId:Ve==null?void 0:Ve.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:nt,imageRefreshVersion:xe,layoutMode:"list-local",onCardClick:Is,validHandTargets:bs,onAnnouncedCardDoubleClick:_s,currentPhase:e.currentPhase,disableActiveHighlights:Zr},Ve.id)}),s.jsx("div",{className:"absolute top-14 bottom-0 z-10 flex items-center justify-center pointer-events-none w-full left-0",children:s.jsx("div",{ref:Xr,className:"pointer-events-auto h-full aspect-square flex items-center justify-center py-[2px]",children:s.jsx(Nc,{board:e.board,isGameStarted:e.isGameStarted,activeGridSize:e.activeGridSize,handleDrop:p,draggedItem:m,setDraggedItem:b,openContextMenu:Cn,playMode:We,setPlayMode:Me,highlight:dr,playerColorMap:Kn,localPlayerId:t,onCardDoubleClick:au,onEmptyCellDoubleClick:uu,imageRefreshVersion:xe,cursorStack:K,setCursorStack:Ke,currentPhase:e.currentPhase,activeTurnPlayerId:e.activeTurnPlayerId,onCardClick:su,onEmptyCellClick:iu,validTargets:nu,noTargetOverlay:ru,disableActiveHighlights:Zr})})}),s.jsx("div",{className:"absolute right-0 top-14 bottom-0 z-30 w-[34.2rem] bg-panel-bg shadow-xl flex flex-col pt-[3px] pb-[3px] border-l border-gray-700 gap-[3px]",children:e.players.filter(h=>h.id!==t).map(h=>s.jsx("div",{className:"w-full flex-1 min-h-0",children:s.jsx(ii,{player:h,isLocalPlayer:!1,localPlayerId:t,isSpectator:pr,isGameStarted:e.isGameStarted,position:h.id,onNameChange:C=>_(h.id,C),onColorChange:C=>j(h.id,C),onScoreChange:C=>N(h.id,C),onDeckChange:C=>A(h.id,C),onLoadCustomDeck:C=>v(h.id,C),onDrawCard:()=>d(h.id),handleDrop:p,draggedItem:m,setDraggedItem:b,openContextMenu:Cn,onHandCardDoubleClick:Ds,playerColorMap:Kn,allPlayers:e.players,localPlayerTeamId:Ve==null?void 0:Ve.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:nt,imageRefreshVersion:xe,layoutMode:"list-remote",onCardClick:Is,validHandTargets:bs,onAnnouncedCardDoubleClick:_s,currentPhase:e.currentPhase,disableActiveHighlights:Zr})},h.id))})]}):s.jsxs("main",{className:"pt-14 h-screen w-full flex items-center justify-center py-[2px] px-[2px]",children:[s.jsx(Nc,{board:e.board,isGameStarted:e.isGameStarted,activeGridSize:e.activeGridSize,handleDrop:p,draggedItem:m,setDraggedItem:b,openContextMenu:Cn,playMode:We,setPlayMode:Me,highlight:dr,playerColorMap:Kn,localPlayerId:t,onCardDoubleClick:au,onEmptyCellDoubleClick:uu,imageRefreshVersion:xe,cursorStack:K,setCursorStack:Ke,currentPhase:e.currentPhase,activeTurnPlayerId:e.activeTurnPlayerId,onCardClick:su,onEmptyCellClick:iu,validTargets:nu,noTargetOverlay:ru,disableActiveHighlights:Zr}),e.players.map(h=>s.jsx(ii,{player:h,isLocalPlayer:h.id===t,localPlayerId:t,isSpectator:pr,isGameStarted:e.isGameStarted,position:h.id,onNameChange:C=>_(h.id,C),onColorChange:C=>j(h.id,C),onScoreChange:C=>N(h.id,C),onDeckChange:C=>A(h.id,C),onLoadCustomDeck:C=>v(h.id,C),onDrawCard:()=>d(h.id),handleDrop:p,draggedItem:m,setDraggedItem:b,openContextMenu:Cn,onHandCardDoubleClick:Ds,playerColorMap:Kn,allPlayers:e.players,localPlayerTeamId:Ve==null?void 0:Ve.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:nt,imageRefreshVersion:xe,layoutMode:"standard",onCardClick:Is,validHandTargets:bs,onAnnouncedCardDoubleClick:_s,currentPhase:e.currentPhase,disableActiveHighlights:Zr},h.id))]}),(K||Y&&((du=Y.payload)==null?void 0:du.tokenType))&&s.jsx("div",{ref:Nt,className:"fixed pointer-events-none select-none z-[100000] flex items-center justify-center",style:{left:Qr.current.x-2,top:Qr.current.y-2},children:(K||((fu=Y==null?void 0:Y.payload)==null?void 0:fu.tokenType))&&s.jsxs("div",{className:"relative w-12 h-12 rounded-full bg-gray-500 border-[3px] border-white flex items-center justify-center shadow-xl",children:[(()=>{var X;const h=K?K.type:Y.payload.tokenType;K?K.count:(X=Y==null?void 0:Y.payload)!=null&&X.count;let C=eu[h];C&&xe&&(C=`${C}?v=${xe}`);const R=h.startsWith("Power");return C?s.jsx("img",{src:C,alt:h,className:"w-full h-full object-contain p-1",draggable:"false"}):s.jsx("span",{className:`font-bold text-white ${R?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:R?h==="Power+"?"+P":"-P":h.charAt(0)})})(),s.jsx("div",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center border border-white",children:K?K.count:((pu=Y==null?void 0:Y.payload)==null?void 0:pu.count)||1})]})}),pr&&!he&&s.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-70 p-4 rounded-lg z-50",children:[s.jsx("p",{className:"text-xl font-bold text-center",children:"Spectator Mode"}),s.jsx("p",{className:"text-center text-gray-300",children:"You are watching the game."})]}),(()=>{const h=e.revealRequests.find(R=>R.toPlayerId===t);if(!h)return null;const C=e.players.find(R=>R.id===h.fromPlayerId);return C?s.jsx(Cy,{fromPlayer:C,cardCount:h.cardIdentifiers.length,onAccept:()=>Be(h.fromPlayerId,!0),onDecline:()=>Be(h.fromPlayerId,!1)}):null})(),S&&js&&s.jsx(xy,{players:e.players.filter(h=>!h.isDisconnected),gameMode:e.gameMode,onCancel:()=>E(!1),onConfirm:fp}),e.isReadyCheckActive&&!pr&&Ve&&s.jsx(wy,{players:e.players.filter(h=>!h.isDummy&&!h.isDisconnected),localPlayer:Ve,onReady:a,onCancel:i}),D&&(()=>{const h=e.players.find(Z=>Z.id===D.player.id),C=h?h.discard:[];let R=C,X=`${D.player.name}'s Discard Pile`;if(D.pickConfig){const{filterType:Z,action:B}=D.pickConfig;Z==="Device"?(R=C.filter(ie=>{var H;return(H=ie.types)==null?void 0:H.includes("Device")}),X+=" (Pick a Device)"):Z==="Optimates"&&(R=C.filter(ie=>ie.deck===ke.Optimates||ie.faction==="Optimates"),X+=" (Pick an Optimates Unit)")}const I=Z=>{const B=C.indexOf(R[Z]);if(B>-1&&D.pickConfig){const{action:ie}=D.pickConfig;ie==="recover"?(vs(D.player.id,B),P(null),Y&&be(null)):ie==="resurrect"&&Y&&Y.mode==="IMMUNIS_RETRIEVE"&&(be({...Y,payload:{...Y.payload,selectedCardIndex:B}}),P(null))}};return s.jsx(Tc,{isOpen:!!D,onClose:()=>{P(null),Y&&(Y.mode==="RETRIEVE_DEVICE"||Y.mode==="IMMUNIS_RETRIEVE")&&be(null)},title:X,player:D.player,cards:R,setDraggedItem:b,onCardContextMenu:(Z,B)=>Cn(Z,"discardCard",{card:R[B],player:D.player,cardIndex:B}),onCardClick:Z=>{D.pickConfig&&I(Z)},onCardDoubleClick:Z=>{D.pickConfig?I(Z):C.indexOf(R[Z])>-1&&cu(D.player,R[Z],Z,"discard")},canInteract:t!==null&&e.isGameStarted&&(D.player.id===t||!!D.player.isDummy),playerColorMap:Kn,localPlayerId:t,imageRefreshVersion:xe})})(),z&&(()=>{const h=e.players.find(R=>R.id===z.id),C=h?h.deck:[];return s.jsx(Tc,{isOpen:!!z,onClose:()=>J(null),title:`${z.name}'s Deck`,player:z,cards:C,setDraggedItem:b,onCardContextMenu:(R,X)=>Cn(R,"deckCard",{card:C[X],player:z,cardIndex:X}),onCardDoubleClick:R=>cu(z,C[R],R,"deck"),canInteract:t!==null&&e.isGameStarted&&(z.id===t||!!z.isDummy),isDeckView:!0,playerColorMap:Kn,localPlayerId:t,imageRefreshVersion:xe})})(),s.jsx(yy,{isOpen:Hl,onClose:()=>Vn(!1),setDraggedItem:b,openContextMenu:Cn,canInteract:t!==null&&e.isGameStarted,anchorEl:Ts,imageRefreshVersion:xe,draggedItem:m}),s.jsx(vy,{isOpen:Wl,onClose:()=>Hn(!1),setDraggedItem:b,canInteract:t!==null&&e.isGameStarted,anchorEl:x,imageRefreshVersion:xe,onCounterMouseDown:Sp,cursorStack:K}),F&&s.jsx(jc,{card:F.card,ownerPlayer:F.player,onClose:()=>oe(null),statusDescriptions:qo,allPlayers:e.players,imageRefreshVersion:xe}),wp]})}class Uy extends In.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){return this.state.hasError?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-4 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong"}),s.jsx("p",{className:"mb-6 text-gray-400",children:"The application encountered an unexpected error."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-bold shadow-lg",children:"Reload Game"})]}):this.props.children}}const rp=document.getElementById("root");if(!rp)throw new Error("Could not find root element to mount to");const zy=ai.createRoot(rp);zy.render(s.jsx(Uy,{children:s.jsx(My,{})}));
