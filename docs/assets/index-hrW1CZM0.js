(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function Ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _c={exports:{}},Qo={},Pc={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),bp=Symbol.for("react.portal"),jp=Symbol.for("react.fragment"),Tp=Symbol.for("react.strict_mode"),Ip=Symbol.for("react.profiler"),_p=Symbol.for("react.provider"),Pp=Symbol.for("react.context"),Dp=Symbol.for("react.forward_ref"),Rp=Symbol.for("react.suspense"),Op=Symbol.for("react.memo"),Ap=Symbol.for("react.lazy"),fu=Symbol.iterator;function Lp(e){return e===null||typeof e!="object"?null:(e=fu&&e[fu]||e["@@iterator"],typeof e=="function"?e:null)}var Dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rc=Object.assign,Oc={};function zr(e,t,n){this.props=e,this.context=t,this.refs=Oc,this.updater=n||Dc}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ac(){}Ac.prototype=zr.prototype;function li(e,t,n){this.props=e,this.context=t,this.refs=Oc,this.updater=n||Dc}var oi=li.prototype=new Ac;oi.constructor=li;Rc(oi,zr.prototype);oi.isPureReactComponent=!0;var pu=Array.isArray,Lc=Object.prototype.hasOwnProperty,si={current:null},Mc={key:!0,ref:!0,__self:!0,__source:!0};function Uc(e,t,n){var r,l={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)Lc.call(t,r)&&!Mc.hasOwnProperty(r)&&(l[r]=t[r]);var i=arguments.length-2;if(i===1)l.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)l[r]===void 0&&(l[r]=i[r]);return{$$typeof:Ol,type:e,key:o,ref:a,props:l,_owner:si.current}}function Mp(e,t){return{$$typeof:Ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ai(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ol}function Up(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mu=/\/+/g;function Ds(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Up(""+e.key):t.toString(36)}function co(e,t,n,r,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ol:case bp:a=!0}}if(a)return a=e,l=l(a),e=r===""?"."+Ds(a,0):r,pu(l)?(n="",e!=null&&(n=e.replace(mu,"$&/")+"/"),co(l,t,n,"",function(c){return c})):l!=null&&(ai(l)&&(l=Mp(l,n+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(mu,"$&/")+"/")+e)),t.push(l)),1;if(a=0,r=r===""?".":r+":",pu(e))for(var i=0;i<e.length;i++){o=e[i];var u=r+Ds(o,i);a+=co(o,t,n,u,l)}else if(u=Lp(e),typeof u=="function")for(e=u.call(e),i=0;!(o=e.next()).done;)o=o.value,u=r+Ds(o,i++),a+=co(o,t,n,u,l);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Hl(e,t,n){if(e==null)return e;var r=[],l=0;return co(e,r,"","",function(o){return t.call(n,o,l++)}),r}function zp(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pt={current:null},fo={transition:null},Fp={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:fo,ReactCurrentOwner:si};function zc(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Hl,forEach:function(e,t,n){Hl(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hl(e,function(){t++}),t},toArray:function(e){return Hl(e,function(t){return t})||[]},only:function(e){if(!ai(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ge.Component=zr;ge.Fragment=jp;ge.Profiler=Ip;ge.PureComponent=li;ge.StrictMode=Tp;ge.Suspense=Rp;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fp;ge.act=zc;ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Rc({},e.props),l=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=si.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)Lc.call(t,u)&&!Mc.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:Ol,type:e.type,key:l,ref:o,props:r,_owner:a}};ge.createContext=function(e){return e={$$typeof:Pp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_p,_context:e},e.Consumer=e};ge.createElement=Uc;ge.createFactory=function(e){var t=Uc.bind(null,e);return t.type=e,t};ge.createRef=function(){return{current:null}};ge.forwardRef=function(e){return{$$typeof:Dp,render:e}};ge.isValidElement=ai;ge.lazy=function(e){return{$$typeof:Ap,_payload:{_status:-1,_result:e},_init:zp}};ge.memo=function(e,t){return{$$typeof:Op,type:e,compare:t===void 0?null:t}};ge.startTransition=function(e){var t=fo.transition;fo.transition={};try{e()}finally{fo.transition=t}};ge.unstable_act=zc;ge.useCallback=function(e,t){return pt.current.useCallback(e,t)};ge.useContext=function(e){return pt.current.useContext(e)};ge.useDebugValue=function(){};ge.useDeferredValue=function(e){return pt.current.useDeferredValue(e)};ge.useEffect=function(e,t){return pt.current.useEffect(e,t)};ge.useId=function(){return pt.current.useId()};ge.useImperativeHandle=function(e,t,n){return pt.current.useImperativeHandle(e,t,n)};ge.useInsertionEffect=function(e,t){return pt.current.useInsertionEffect(e,t)};ge.useLayoutEffect=function(e,t){return pt.current.useLayoutEffect(e,t)};ge.useMemo=function(e,t){return pt.current.useMemo(e,t)};ge.useReducer=function(e,t,n){return pt.current.useReducer(e,t,n)};ge.useRef=function(e){return pt.current.useRef(e)};ge.useState=function(e){return pt.current.useState(e)};ge.useSyncExternalStore=function(e,t,n){return pt.current.useSyncExternalStore(e,t,n)};ge.useTransition=function(){return pt.current.useTransition()};ge.version="18.3.1";Pc.exports=ge;var S=Pc.exports;const bn=Ep(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p=S,Bp=Symbol.for("react.element"),Gp=Symbol.for("react.fragment"),Vp=Object.prototype.hasOwnProperty,Hp=$p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wp={key:!0,ref:!0,__self:!0,__source:!0};function Fc(e,t,n){var r,l={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Vp.call(t,r)&&!Wp.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Bp,type:e,key:o,ref:a,props:l,_owner:Hp.current}}Qo.Fragment=Gp;Qo.jsx=Fc;Qo.jsxs=Fc;_c.exports=Qo;var s=_c.exports,ia={},$c={exports:{}},bt={},Bc={exports:{}},Gc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,A){var $=M.length;M.push(A);e:for(;0<$;){var ne=$-1>>>1,fe=M[ne];if(0<l(fe,A))M[ne]=A,M[$]=fe,$=ne;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var A=M[0],$=M.pop();if($!==A){M[0]=$;e:for(var ne=0,fe=M.length,je=fe>>>1;ne<je;){var ae=2*(ne+1)-1,_e=M[ae],Me=ae+1,oe=M[Me];if(0>l(_e,$))Me<fe&&0>l(oe,_e)?(M[ne]=oe,M[Me]=$,ne=Me):(M[ne]=_e,M[ae]=$,ne=ae);else if(Me<fe&&0>l(oe,$))M[ne]=oe,M[Me]=$,ne=Me;else break e}}return A}function l(M,A){var $=M.sortIndex-A.sortIndex;return $!==0?$:M.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],f=1,v=null,C=3,T=!1,j=!1,E=!1,U=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,d=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(M){for(var A=n(c);A!==null;){if(A.callback===null)r(c);else if(A.startTime<=M)r(c),A.sortIndex=A.expirationTime,t(u,A);else break;A=n(c)}}function m(M){if(E=!1,p(M),!j)if(n(u)!==null)j=!0,W(I);else{var A=n(c);A!==null&&H(m,A.startTime-M)}}function I(M,A){j=!1,E&&(E=!1,h(G),G=-1),T=!0;var $=C;try{for(p(A),v=n(u);v!==null&&(!(v.expirationTime>A)||M&&!re());){var ne=v.callback;if(typeof ne=="function"){v.callback=null,C=v.priorityLevel;var fe=ne(v.expirationTime<=A);A=e.unstable_now(),typeof fe=="function"?v.callback=fe:v===n(u)&&r(u),p(A)}else r(u);v=n(u)}if(v!==null)var je=!0;else{var ae=n(c);ae!==null&&H(m,ae.startTime-A),je=!1}return je}finally{v=null,C=$,T=!1}}var O=!1,F=null,G=-1,J=5,V=-1;function re(){return!(e.unstable_now()-V<J)}function de(){if(F!==null){var M=e.unstable_now();V=M;var A=!0;try{A=F(!0,M)}finally{A?pe():(O=!1,F=null)}}else O=!1}var pe;if(typeof d=="function")pe=function(){d(de)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Z=R.port2;R.port1.onmessage=de,pe=function(){Z.postMessage(null)}}else pe=function(){U(de,0)};function W(M){F=M,O||(O=!0,pe())}function H(M,A){G=U(function(){M(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){j||T||(j=!0,W(I))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return C},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(C){case 1:case 2:case 3:var A=3;break;default:A=C}var $=C;C=A;try{return M()}finally{C=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,A){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var $=C;C=M;try{return A()}finally{C=$}},e.unstable_scheduleCallback=function(M,A,$){var ne=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ne+$:ne):$=ne,M){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,M={id:f++,callback:A,priorityLevel:M,startTime:$,expirationTime:fe,sortIndex:-1},$>ne?(M.sortIndex=$,t(c,M),n(u)===null&&M===n(c)&&(E?(h(G),G=-1):E=!0,H(m,$-ne))):(M.sortIndex=fe,t(u,M),j||T||(j=!0,W(I))),M},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(M){var A=C;return function(){var $=C;C=A;try{return M.apply(this,arguments)}finally{C=$}}}})(Gc);Bc.exports=Gc;var Kp=Bc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=S,Et=Kp;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vc=new Set,yl={};function or(e,t){Dr(e,t),Dr(e+"Capture",t)}function Dr(e,t){for(yl[e]=t,e=0;e<t.length;e++)Vc.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ua=Object.prototype.hasOwnProperty,Yp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hu={},gu={};function qp(e){return ua.call(gu,e)?!0:ua.call(hu,e)?!1:Yp.test(e)?gu[e]=!0:(hu[e]=!0,!1)}function Qp(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xp(e,t,n,r){if(t===null||typeof t>"u"||Qp(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,l,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){lt[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];lt[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){lt[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){lt[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){lt[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){lt[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){lt[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){lt[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){lt[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var ii=/[\-:]([a-z])/g;function ui(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ii,ui);lt[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ii,ui);lt[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ii,ui);lt[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){lt[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});lt.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){lt[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ci(e,t,n,r){var l=lt.hasOwnProperty(t)?lt[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xp(t,n,l,r)&&(n=null),r||l===null?qp(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var gn=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),mr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),di=Symbol.for("react.strict_mode"),ca=Symbol.for("react.profiler"),Hc=Symbol.for("react.provider"),Wc=Symbol.for("react.context"),fi=Symbol.for("react.forward_ref"),da=Symbol.for("react.suspense"),fa=Symbol.for("react.suspense_list"),pi=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),Kc=Symbol.for("react.offscreen"),yu=Symbol.iterator;function qr(e){return e===null||typeof e!="object"?null:(e=yu&&e[yu]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,Rs;function ll(e){if(Rs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Rs=t&&t[1]||""}return`
`+Rs+e}var Os=!1;function As(e,t){if(!e||Os)return"";Os=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var l=c.stack.split(`
`),o=r.stack.split(`
`),a=l.length-1,i=o.length-1;1<=a&&0<=i&&l[a]!==o[i];)i--;for(;1<=a&&0<=i;a--,i--)if(l[a]!==o[i]){if(a!==1||i!==1)do if(a--,i--,0>i||l[a]!==o[i]){var u=`
`+l[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{Os=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ll(e):""}function Zp(e){switch(e.tag){case 5:return ll(e.type);case 16:return ll("Lazy");case 13:return ll("Suspense");case 19:return ll("SuspenseList");case 0:case 2:case 15:return e=As(e.type,!1),e;case 11:return e=As(e.type.render,!1),e;case 1:return e=As(e.type,!0),e;default:return""}}function pa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hr:return"Fragment";case mr:return"Portal";case ca:return"Profiler";case di:return"StrictMode";case da:return"Suspense";case fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wc:return(e.displayName||"Context")+".Consumer";case Hc:return(e._context.displayName||"Context")+".Provider";case fi:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pi:return t=e.displayName||null,t!==null?t:pa(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return pa(e(t))}catch{}}return null}function em(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return pa(t);case 8:return t===di?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ln(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tm(e){var t=Jc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Kl(e){e._valueTracker||(e._valueTracker=tm(e))}function Yc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Jc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function No(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ma(e,t){var n=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ln(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qc(e,t){t=t.checked,t!=null&&ci(e,"checked",t,!1)}function ha(e,t){qc(e,t);var n=Ln(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ga(e,t.type,n):t.hasOwnProperty("defaultValue")&&ga(e,t.type,Ln(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ga(e,t,n){(t!=="number"||No(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ol=Array.isArray;function br(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ln(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ya(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(z(92));if(ol(n)){if(1<n.length)throw Error(z(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ln(n)}}function Qc(e,t){var n=Ln(t.value),r=Ln(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Cu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function va(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jl,Zc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nm=["Webkit","ms","Moz","O"];Object.keys(il).forEach(function(e){nm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),il[t]=il[e]})});function ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||il.hasOwnProperty(e)&&il[e]?(""+t).trim():t+"px"}function td(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var rm=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xa(e,t){if(t){if(rm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ca=null;function mi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ka=null,jr=null,Tr=null;function ku(e){if(e=Ml(e)){if(typeof ka!="function")throw Error(z(280));var t=e.stateNode;t&&(t=ns(t),ka(e.stateNode,e.type,t))}}function nd(e){jr?Tr?Tr.push(e):Tr=[e]:jr=e}function rd(){if(jr){var e=jr,t=Tr;if(Tr=jr=null,ku(e),t)for(e=0;e<t.length;e++)ku(t[e])}}function ld(e,t){return e(t)}function od(){}var Ls=!1;function sd(e,t,n){if(Ls)return e(t,n);Ls=!0;try{return ld(e,t,n)}finally{Ls=!1,(jr!==null||Tr!==null)&&(od(),rd())}}function xl(e,t){var n=e.stateNode;if(n===null)return null;var r=ns(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(z(231,t,typeof n));return n}var Sa=!1;if(fn)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{Sa=!1}function lm(e,t,n,r,l,o,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(f){this.onError(f)}}var ul=!1,Eo=null,bo=!1,Na=null,om={onError:function(e){ul=!0,Eo=e}};function sm(e,t,n,r,l,o,a,i,u){ul=!1,Eo=null,lm.apply(om,arguments)}function am(e,t,n,r,l,o,a,i,u){if(sm.apply(this,arguments),ul){if(ul){var c=Eo;ul=!1,Eo=null}else throw Error(z(198));bo||(bo=!0,Na=c)}}function sr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Su(e){if(sr(e)!==e)throw Error(z(188))}function im(e){var t=e.alternate;if(!t){if(t=sr(e),t===null)throw Error(z(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Su(l),e;if(o===r)return Su(l),t;o=o.sibling}throw Error(z(188))}if(n.return!==r.return)n=l,r=o;else{for(var a=!1,i=l.child;i;){if(i===n){a=!0,n=l,r=o;break}if(i===r){a=!0,r=l,n=o;break}i=i.sibling}if(!a){for(i=o.child;i;){if(i===n){a=!0,n=o,r=l;break}if(i===r){a=!0,r=o,n=l;break}i=i.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?e:t}function id(e){return e=im(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var cd=Et.unstable_scheduleCallback,Nu=Et.unstable_cancelCallback,um=Et.unstable_shouldYield,cm=Et.unstable_requestPaint,Ge=Et.unstable_now,dm=Et.unstable_getCurrentPriorityLevel,hi=Et.unstable_ImmediatePriority,dd=Et.unstable_UserBlockingPriority,jo=Et.unstable_NormalPriority,fm=Et.unstable_LowPriority,fd=Et.unstable_IdlePriority,Xo=null,Zt=null;function pm(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Xo,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:gm,mm=Math.log,hm=Math.LN2;function gm(e){return e>>>=0,e===0?32:31-(mm(e)/hm|0)|0}var Yl=64,ql=4194304;function sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function To(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~l;i!==0?r=sl(i):(o&=a,o!==0&&(r=sl(o)))}else a=n&~l,a!==0?r=sl(a):o!==0&&(r=sl(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),l=1<<n,r|=e[n],t&=~l;return r}function ym(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Vt(o),i=1<<a,u=l[a];u===-1?(!(i&n)||i&r)&&(l[a]=ym(i,t)):u<=t&&(e.expiredLanes|=i),o&=~i}}function Ea(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pd(){var e=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),e}function Ms(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Al(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function xm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Vt(n),o=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~o}}function gi(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var Se=0;function md(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hd,yi,gd,yd,vd,ba=!1,Ql=[],jn=null,Tn=null,In=null,wl=new Map,Cl=new Map,kn=[],wm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eu(e,t){switch(e){case"focusin":case"focusout":jn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cl.delete(t.pointerId)}}function Xr(e,t,n,r,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[l]},t!==null&&(t=Ml(t),t!==null&&yi(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Cm(e,t,n,r,l){switch(t){case"focusin":return jn=Xr(jn,e,t,n,r,l),!0;case"dragenter":return Tn=Xr(Tn,e,t,n,r,l),!0;case"mouseover":return In=Xr(In,e,t,n,r,l),!0;case"pointerover":var o=l.pointerId;return wl.set(o,Xr(wl.get(o)||null,e,t,n,r,l)),!0;case"gotpointercapture":return o=l.pointerId,Cl.set(o,Xr(Cl.get(o)||null,e,t,n,r,l)),!0}return!1}function xd(e){var t=Yn(e.target);if(t!==null){var n=sr(t);if(n!==null){if(t=n.tag,t===13){if(t=ad(n),t!==null){e.blockedOn=t,vd(e.priority,function(){gd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function po(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ja(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ca=r,n.target.dispatchEvent(r),Ca=null}else return t=Ml(n),t!==null&&yi(t),e.blockedOn=n,!1;t.shift()}return!0}function bu(e,t,n){po(e)&&n.delete(t)}function km(){ba=!1,jn!==null&&po(jn)&&(jn=null),Tn!==null&&po(Tn)&&(Tn=null),In!==null&&po(In)&&(In=null),wl.forEach(bu),Cl.forEach(bu)}function Zr(e,t){e.blockedOn===t&&(e.blockedOn=null,ba||(ba=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,km)))}function kl(e){function t(l){return Zr(l,e)}if(0<Ql.length){Zr(Ql[0],e);for(var n=1;n<Ql.length;n++){var r=Ql[n];r.blockedOn===e&&(r.blockedOn=null)}}for(jn!==null&&Zr(jn,e),Tn!==null&&Zr(Tn,e),In!==null&&Zr(In,e),wl.forEach(t),Cl.forEach(t),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)xd(n),n.blockedOn===null&&kn.shift()}var Ir=gn.ReactCurrentBatchConfig,Io=!0;function Sm(e,t,n,r){var l=Se,o=Ir.transition;Ir.transition=null;try{Se=1,vi(e,t,n,r)}finally{Se=l,Ir.transition=o}}function Nm(e,t,n,r){var l=Se,o=Ir.transition;Ir.transition=null;try{Se=4,vi(e,t,n,r)}finally{Se=l,Ir.transition=o}}function vi(e,t,n,r){if(Io){var l=ja(e,t,n,r);if(l===null)Ks(e,t,r,_o,n),Eu(e,r);else if(Cm(l,e,t,n,r))r.stopPropagation();else if(Eu(e,r),t&4&&-1<wm.indexOf(e)){for(;l!==null;){var o=Ml(l);if(o!==null&&hd(o),o=ja(e,t,n,r),o===null&&Ks(e,t,r,_o,n),o===l)break;l=o}l!==null&&r.stopPropagation()}else Ks(e,t,r,null,n)}}var _o=null;function ja(e,t,n,r){if(_o=null,e=mi(r),e=Yn(e),e!==null)if(t=sr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _o=e,null}function wd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dm()){case hi:return 1;case dd:return 4;case jo:case fm:return 16;case fd:return 536870912;default:return 16}default:return 16}}var Nn=null,xi=null,mo=null;function Cd(){if(mo)return mo;var e,t=xi,n=t.length,r,l="value"in Nn?Nn.value:Nn.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===l[o-r];r++);return mo=l.slice(e,1<r?1-r:void 0)}function ho(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xl(){return!0}function ju(){return!1}function jt(e){function t(n,r,l,o,a){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xl:ju,this.isPropagationStopped=ju,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xl)},persist:function(){},isPersistent:Xl}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=jt(Fr),Ll=Le({},Fr,{view:0,detail:0}),Em=jt(Ll),Us,zs,el,Zo=Le({},Ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ci,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==el&&(el&&e.type==="mousemove"?(Us=e.screenX-el.screenX,zs=e.screenY-el.screenY):zs=Us=0,el=e),Us)},movementY:function(e){return"movementY"in e?e.movementY:zs}}),Tu=jt(Zo),bm=Le({},Zo,{dataTransfer:0}),jm=jt(bm),Tm=Le({},Ll,{relatedTarget:0}),Fs=jt(Tm),Im=Le({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=jt(Im),Pm=Le({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dm=jt(Pm),Rm=Le({},Fr,{data:0}),Iu=jt(Rm),Om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lm[e])?!!t[e]:!1}function Ci(){return Mm}var Um=Le({},Ll,{key:function(e){if(e.key){var t=Om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ho(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ci,charCode:function(e){return e.type==="keypress"?ho(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ho(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zm=jt(Um),Fm=Le({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_u=jt(Fm),$m=Le({},Ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ci}),Bm=jt($m),Gm=Le({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vm=jt(Gm),Hm=Le({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wm=jt(Hm),Km=[9,13,27,32],ki=fn&&"CompositionEvent"in window,cl=null;fn&&"documentMode"in document&&(cl=document.documentMode);var Jm=fn&&"TextEvent"in window&&!cl,kd=fn&&(!ki||cl&&8<cl&&11>=cl),Pu=" ",Du=!1;function Sd(e,t){switch(e){case"keyup":return Km.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gr=!1;function Ym(e,t){switch(e){case"compositionend":return Nd(t);case"keypress":return t.which!==32?null:(Du=!0,Pu);case"textInput":return e=t.data,e===Pu&&Du?null:e;default:return null}}function qm(e,t){if(gr)return e==="compositionend"||!ki&&Sd(e,t)?(e=Cd(),mo=xi=Nn=null,gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kd&&t.locale!=="ko"?null:t.data;default:return null}}var Qm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ru(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Qm[e.type]:t==="textarea"}function Ed(e,t,n,r){nd(r),t=Po(t,"onChange"),0<t.length&&(n=new wi("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var dl=null,Sl=null;function Xm(e){Ld(e,0)}function es(e){var t=xr(e);if(Yc(t))return e}function Zm(e,t){if(e==="change")return t}var bd=!1;if(fn){var $s;if(fn){var Bs="oninput"in document;if(!Bs){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),Bs=typeof Ou.oninput=="function"}$s=Bs}else $s=!1;bd=$s&&(!document.documentMode||9<document.documentMode)}function Au(){dl&&(dl.detachEvent("onpropertychange",jd),Sl=dl=null)}function jd(e){if(e.propertyName==="value"&&es(Sl)){var t=[];Ed(t,Sl,e,mi(e)),sd(Xm,t)}}function eh(e,t,n){e==="focusin"?(Au(),dl=t,Sl=n,dl.attachEvent("onpropertychange",jd)):e==="focusout"&&Au()}function th(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return es(Sl)}function nh(e,t){if(e==="click")return es(t)}function rh(e,t){if(e==="input"||e==="change")return es(t)}function lh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wt=typeof Object.is=="function"?Object.is:lh;function Nl(e,t){if(Wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!ua.call(t,l)||!Wt(e[l],t[l]))return!1}return!0}function Lu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mu(e,t){var n=Lu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lu(n)}}function Td(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Td(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Id(){for(var e=window,t=No();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=No(e.document)}return t}function Si(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oh(e){var t=Id(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Td(n.ownerDocument.documentElement,n)){if(r!==null&&Si(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,o=Math.min(r.start,l);r=r.end===void 0?o:Math.min(r.end,l),!e.extend&&o>r&&(l=r,r=o,o=l),l=Mu(n,o);var a=Mu(n,r);l&&a&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sh=fn&&"documentMode"in document&&11>=document.documentMode,yr=null,Ta=null,fl=null,Ia=!1;function Uu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ia||yr==null||yr!==No(r)||(r=yr,"selectionStart"in r&&Si(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fl&&Nl(fl,r)||(fl=r,r=Po(Ta,"onSelect"),0<r.length&&(t=new wi("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Zl(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},Gs={},_d={};fn&&(_d=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function ts(e){if(Gs[e])return Gs[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _d)return Gs[e]=t[n];return e}var Pd=ts("animationend"),Dd=ts("animationiteration"),Rd=ts("animationstart"),Od=ts("transitionend"),Ad=new Map,zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(e,t){Ad.set(e,t),or(t,[e])}for(var Vs=0;Vs<zu.length;Vs++){var Hs=zu[Vs],ah=Hs.toLowerCase(),ih=Hs[0].toUpperCase()+Hs.slice(1);Un(ah,"on"+ih)}Un(Pd,"onAnimationEnd");Un(Dd,"onAnimationIteration");Un(Rd,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(Od,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));or("onBeforeInput",["compositionend","keypress","textInput","paste"]);or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uh=new Set("cancel close invalid load scroll toggle".split(" ").concat(al));function Fu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,am(r,t,void 0,e),e.currentTarget=null}function Ld(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==o&&l.isPropagationStopped())break e;Fu(l,i,c),o=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==o&&l.isPropagationStopped())break e;Fu(l,i,c),o=u}}}if(bo)throw e=Na,bo=!1,Na=null,e}function Ee(e,t){var n=t[Oa];n===void 0&&(n=t[Oa]=new Set);var r=e+"__bubble";n.has(r)||(Md(t,e,2,!1),n.add(r))}function Ws(e,t,n){var r=0;t&&(r|=4),Md(n,e,r,t)}var eo="_reactListening"+Math.random().toString(36).slice(2);function El(e){if(!e[eo]){e[eo]=!0,Vc.forEach(function(n){n!=="selectionchange"&&(uh.has(n)||Ws(n,!1,e),Ws(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eo]||(t[eo]=!0,Ws("selectionchange",!1,t))}}function Md(e,t,n,r){switch(wd(t)){case 1:var l=Sm;break;case 4:l=Nm;break;default:l=vi}n=l.bind(null,t,n,e),l=void 0,!Sa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Ks(e,t,n,r,l){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===l||i.nodeType===8&&i.parentNode===l)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===l||u.nodeType===8&&u.parentNode===l))return;a=a.return}for(;i!==null;){if(a=Yn(i),a===null)return;if(u=a.tag,u===5||u===6){r=o=a;continue e}i=i.parentNode}}r=r.return}sd(function(){var c=o,f=mi(n),v=[];e:{var C=Ad.get(e);if(C!==void 0){var T=wi,j=e;switch(e){case"keypress":if(ho(n)===0)break e;case"keydown":case"keyup":T=zm;break;case"focusin":j="focus",T=Fs;break;case"focusout":j="blur",T=Fs;break;case"beforeblur":case"afterblur":T=Fs;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=jm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Bm;break;case Pd:case Dd:case Rd:T=_m;break;case Od:T=Vm;break;case"scroll":T=Em;break;case"wheel":T=Wm;break;case"copy":case"cut":case"paste":T=Dm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=_u}var E=(t&4)!==0,U=!E&&e==="scroll",h=E?C!==null?C+"Capture":null:C;E=[];for(var d=c,p;d!==null;){p=d;var m=p.stateNode;if(p.tag===5&&m!==null&&(p=m,h!==null&&(m=xl(d,h),m!=null&&E.push(bl(d,m,p)))),U)break;d=d.return}0<E.length&&(C=new T(C,j,null,n,f),v.push({event:C,listeners:E}))}}if(!(t&7)){e:{if(C=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",C&&n!==Ca&&(j=n.relatedTarget||n.fromElement)&&(Yn(j)||j[pn]))break e;if((T||C)&&(C=f.window===f?f:(C=f.ownerDocument)?C.defaultView||C.parentWindow:window,T?(j=n.relatedTarget||n.toElement,T=c,j=j?Yn(j):null,j!==null&&(U=sr(j),j!==U||j.tag!==5&&j.tag!==6)&&(j=null)):(T=null,j=c),T!==j)){if(E=Tu,m="onMouseLeave",h="onMouseEnter",d="mouse",(e==="pointerout"||e==="pointerover")&&(E=_u,m="onPointerLeave",h="onPointerEnter",d="pointer"),U=T==null?C:xr(T),p=j==null?C:xr(j),C=new E(m,d+"leave",T,n,f),C.target=U,C.relatedTarget=p,m=null,Yn(f)===c&&(E=new E(h,d+"enter",j,n,f),E.target=p,E.relatedTarget=U,m=E),U=m,T&&j)t:{for(E=T,h=j,d=0,p=E;p;p=fr(p))d++;for(p=0,m=h;m;m=fr(m))p++;for(;0<d-p;)E=fr(E),d--;for(;0<p-d;)h=fr(h),p--;for(;d--;){if(E===h||h!==null&&E===h.alternate)break t;E=fr(E),h=fr(h)}E=null}else E=null;T!==null&&$u(v,C,T,E,!1),j!==null&&U!==null&&$u(v,U,j,E,!0)}}e:{if(C=c?xr(c):window,T=C.nodeName&&C.nodeName.toLowerCase(),T==="select"||T==="input"&&C.type==="file")var I=Zm;else if(Ru(C))if(bd)I=rh;else{I=th;var O=eh}else(T=C.nodeName)&&T.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(I=nh);if(I&&(I=I(e,c))){Ed(v,I,n,f);break e}O&&O(e,C,c),e==="focusout"&&(O=C._wrapperState)&&O.controlled&&C.type==="number"&&ga(C,"number",C.value)}switch(O=c?xr(c):window,e){case"focusin":(Ru(O)||O.contentEditable==="true")&&(yr=O,Ta=c,fl=null);break;case"focusout":fl=Ta=yr=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,Uu(v,n,f);break;case"selectionchange":if(sh)break;case"keydown":case"keyup":Uu(v,n,f)}var F;if(ki)e:{switch(e){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else gr?Sd(e,n)&&(G="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(kd&&n.locale!=="ko"&&(gr||G!=="onCompositionStart"?G==="onCompositionEnd"&&gr&&(F=Cd()):(Nn=f,xi="value"in Nn?Nn.value:Nn.textContent,gr=!0)),O=Po(c,G),0<O.length&&(G=new Iu(G,e,null,n,f),v.push({event:G,listeners:O}),F?G.data=F:(F=Nd(n),F!==null&&(G.data=F)))),(F=Jm?Ym(e,n):qm(e,n))&&(c=Po(c,"onBeforeInput"),0<c.length&&(f=new Iu("onBeforeInput","beforeinput",null,n,f),v.push({event:f,listeners:c}),f.data=F))}Ld(v,t)})}function bl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Po(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=xl(e,n),o!=null&&r.unshift(bl(e,o,l)),o=xl(e,t),o!=null&&r.push(bl(e,o,l))),e=e.return}return r}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,n,r,l){for(var o=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,l?(u=xl(n,o),u!=null&&a.unshift(bl(n,u,i))):l||(u=xl(n,o),u!=null&&a.push(bl(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var ch=/\r\n?/g,dh=/\u0000|\uFFFD/g;function Bu(e){return(typeof e=="string"?e:""+e).replace(ch,`
`).replace(dh,"")}function to(e,t,n){if(t=Bu(t),Bu(e)!==t&&n)throw Error(z(425))}function Do(){}var _a=null,Pa=null;function Da(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ra=typeof setTimeout=="function"?setTimeout:void 0,fh=typeof clearTimeout=="function"?clearTimeout:void 0,Gu=typeof Promise=="function"?Promise:void 0,ph=typeof queueMicrotask=="function"?queueMicrotask:typeof Gu<"u"?function(e){return Gu.resolve(null).then(e).catch(mh)}:Ra;function mh(e){setTimeout(function(){throw e})}function Js(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),kl(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);kl(t)}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Xt="__reactFiber$"+$r,jl="__reactProps$"+$r,pn="__reactContainer$"+$r,Oa="__reactEvents$"+$r,hh="__reactListeners$"+$r,gh="__reactHandles$"+$r;function Yn(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vu(e);e!==null;){if(n=e[Xt])return n;e=Vu(e)}return t}e=n,n=e.parentNode}return null}function Ml(e){return e=e[Xt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function ns(e){return e[jl]||null}var Aa=[],wr=-1;function zn(e){return{current:e}}function be(e){0>wr||(e.current=Aa[wr],Aa[wr]=null,wr--)}function Ne(e,t){wr++,Aa[wr]=e.current,e.current=t}var Mn={},ct=zn(Mn),vt=zn(!1),er=Mn;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function xt(e){return e=e.childContextTypes,e!=null}function Ro(){be(vt),be(ct)}function Hu(e,t,n){if(ct.current!==Mn)throw Error(z(168));Ne(ct,t),Ne(vt,n)}function Ud(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(z(108,em(e)||"Unknown",l));return Le({},n,r)}function Oo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mn,er=ct.current,Ne(ct,e),Ne(vt,vt.current),!0}function Wu(e,t,n){var r=e.stateNode;if(!r)throw Error(z(169));n?(e=Ud(e,t,er),r.__reactInternalMemoizedMergedChildContext=e,be(vt),be(ct),Ne(ct,e)):be(vt),Ne(vt,n)}var an=null,rs=!1,Ys=!1;function zd(e){an===null?an=[e]:an.push(e)}function yh(e){rs=!0,zd(e)}function Fn(){if(!Ys&&an!==null){Ys=!0;var e=0,t=Se;try{var n=an;for(Se=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}an=null,rs=!1}catch(l){throw an!==null&&(an=an.slice(e+1)),cd(hi,Fn),l}finally{Se=t,Ys=!1}}return null}var Cr=[],kr=0,Ao=null,Lo=0,It=[],_t=0,tr=null,un=1,cn="";function Kn(e,t){Cr[kr++]=Lo,Cr[kr++]=Ao,Ao=e,Lo=t}function Fd(e,t,n){It[_t++]=un,It[_t++]=cn,It[_t++]=tr,tr=e;var r=un;e=cn;var l=32-Vt(r)-1;r&=~(1<<l),n+=1;var o=32-Vt(t)+l;if(30<o){var a=l-l%5;o=(r&(1<<a)-1).toString(32),r>>=a,l-=a,un=1<<32-Vt(t)+l|n<<l|r,cn=o+e}else un=1<<o|n<<l|r,cn=e}function Ni(e){e.return!==null&&(Kn(e,1),Fd(e,1,0))}function Ei(e){for(;e===Ao;)Ao=Cr[--kr],Cr[kr]=null,Lo=Cr[--kr],Cr[kr]=null;for(;e===tr;)tr=It[--_t],It[_t]=null,cn=It[--_t],It[_t]=null,un=It[--_t],It[_t]=null}var Nt=null,St=null,Ie=!1,Bt=null;function $d(e,t){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ku(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nt=e,St=_n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nt=e,St=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tr!==null?{id:un,overflow:cn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,St=null,!0):!1;default:return!1}}function La(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ma(e){if(Ie){var t=St;if(t){var n=t;if(!Ku(e,t)){if(La(e))throw Error(z(418));t=_n(n.nextSibling);var r=Nt;t&&Ku(e,t)?$d(r,n):(e.flags=e.flags&-4097|2,Ie=!1,Nt=e)}}else{if(La(e))throw Error(z(418));e.flags=e.flags&-4097|2,Ie=!1,Nt=e}}}function Ju(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function no(e){if(e!==Nt)return!1;if(!Ie)return Ju(e),Ie=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Da(e.type,e.memoizedProps)),t&&(t=St)){if(La(e))throw Bd(),Error(z(418));for(;t;)$d(e,t),t=_n(t.nextSibling)}if(Ju(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){St=_n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}St=null}}else St=Nt?_n(e.stateNode.nextSibling):null;return!0}function Bd(){for(var e=St;e;)e=_n(e.nextSibling)}function Or(){St=Nt=null,Ie=!1}function bi(e){Bt===null?Bt=[e]:Bt.push(e)}var vh=gn.ReactCurrentBatchConfig;function tl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,e));var l=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var i=l.refs;a===null?delete i[o]:i[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,e))}return e}function ro(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yu(e){var t=e._init;return t(e._payload)}function Gd(e){function t(h,d){if(e){var p=h.deletions;p===null?(h.deletions=[d],h.flags|=16):p.push(d)}}function n(h,d){if(!e)return null;for(;d!==null;)t(h,d),d=d.sibling;return null}function r(h,d){for(h=new Map;d!==null;)d.key!==null?h.set(d.key,d):h.set(d.index,d),d=d.sibling;return h}function l(h,d){return h=On(h,d),h.index=0,h.sibling=null,h}function o(h,d,p){return h.index=p,e?(p=h.alternate,p!==null?(p=p.index,p<d?(h.flags|=2,d):p):(h.flags|=2,d)):(h.flags|=1048576,d)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function i(h,d,p,m){return d===null||d.tag!==6?(d=na(p,h.mode,m),d.return=h,d):(d=l(d,p),d.return=h,d)}function u(h,d,p,m){var I=p.type;return I===hr?f(h,d,p.props.children,m,p.key):d!==null&&(d.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wn&&Yu(I)===d.type)?(m=l(d,p.props),m.ref=tl(h,d,p),m.return=h,m):(m=ko(p.type,p.key,p.props,null,h.mode,m),m.ref=tl(h,d,p),m.return=h,m)}function c(h,d,p,m){return d===null||d.tag!==4||d.stateNode.containerInfo!==p.containerInfo||d.stateNode.implementation!==p.implementation?(d=ra(p,h.mode,m),d.return=h,d):(d=l(d,p.children||[]),d.return=h,d)}function f(h,d,p,m,I){return d===null||d.tag!==7?(d=Zn(p,h.mode,m,I),d.return=h,d):(d=l(d,p),d.return=h,d)}function v(h,d,p){if(typeof d=="string"&&d!==""||typeof d=="number")return d=na(""+d,h.mode,p),d.return=h,d;if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Wl:return p=ko(d.type,d.key,d.props,null,h.mode,p),p.ref=tl(h,null,d),p.return=h,p;case mr:return d=ra(d,h.mode,p),d.return=h,d;case wn:var m=d._init;return v(h,m(d._payload),p)}if(ol(d)||qr(d))return d=Zn(d,h.mode,p,null),d.return=h,d;ro(h,d)}return null}function C(h,d,p,m){var I=d!==null?d.key:null;if(typeof p=="string"&&p!==""||typeof p=="number")return I!==null?null:i(h,d,""+p,m);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Wl:return p.key===I?u(h,d,p,m):null;case mr:return p.key===I?c(h,d,p,m):null;case wn:return I=p._init,C(h,d,I(p._payload),m)}if(ol(p)||qr(p))return I!==null?null:f(h,d,p,m,null);ro(h,p)}return null}function T(h,d,p,m,I){if(typeof m=="string"&&m!==""||typeof m=="number")return h=h.get(p)||null,i(d,h,""+m,I);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Wl:return h=h.get(m.key===null?p:m.key)||null,u(d,h,m,I);case mr:return h=h.get(m.key===null?p:m.key)||null,c(d,h,m,I);case wn:var O=m._init;return T(h,d,p,O(m._payload),I)}if(ol(m)||qr(m))return h=h.get(p)||null,f(d,h,m,I,null);ro(d,m)}return null}function j(h,d,p,m){for(var I=null,O=null,F=d,G=d=0,J=null;F!==null&&G<p.length;G++){F.index>G?(J=F,F=null):J=F.sibling;var V=C(h,F,p[G],m);if(V===null){F===null&&(F=J);break}e&&F&&V.alternate===null&&t(h,F),d=o(V,d,G),O===null?I=V:O.sibling=V,O=V,F=J}if(G===p.length)return n(h,F),Ie&&Kn(h,G),I;if(F===null){for(;G<p.length;G++)F=v(h,p[G],m),F!==null&&(d=o(F,d,G),O===null?I=F:O.sibling=F,O=F);return Ie&&Kn(h,G),I}for(F=r(h,F);G<p.length;G++)J=T(F,h,G,p[G],m),J!==null&&(e&&J.alternate!==null&&F.delete(J.key===null?G:J.key),d=o(J,d,G),O===null?I=J:O.sibling=J,O=J);return e&&F.forEach(function(re){return t(h,re)}),Ie&&Kn(h,G),I}function E(h,d,p,m){var I=qr(p);if(typeof I!="function")throw Error(z(150));if(p=I.call(p),p==null)throw Error(z(151));for(var O=I=null,F=d,G=d=0,J=null,V=p.next();F!==null&&!V.done;G++,V=p.next()){F.index>G?(J=F,F=null):J=F.sibling;var re=C(h,F,V.value,m);if(re===null){F===null&&(F=J);break}e&&F&&re.alternate===null&&t(h,F),d=o(re,d,G),O===null?I=re:O.sibling=re,O=re,F=J}if(V.done)return n(h,F),Ie&&Kn(h,G),I;if(F===null){for(;!V.done;G++,V=p.next())V=v(h,V.value,m),V!==null&&(d=o(V,d,G),O===null?I=V:O.sibling=V,O=V);return Ie&&Kn(h,G),I}for(F=r(h,F);!V.done;G++,V=p.next())V=T(F,h,G,V.value,m),V!==null&&(e&&V.alternate!==null&&F.delete(V.key===null?G:V.key),d=o(V,d,G),O===null?I=V:O.sibling=V,O=V);return e&&F.forEach(function(de){return t(h,de)}),Ie&&Kn(h,G),I}function U(h,d,p,m){if(typeof p=="object"&&p!==null&&p.type===hr&&p.key===null&&(p=p.props.children),typeof p=="object"&&p!==null){switch(p.$$typeof){case Wl:e:{for(var I=p.key,O=d;O!==null;){if(O.key===I){if(I=p.type,I===hr){if(O.tag===7){n(h,O.sibling),d=l(O,p.props.children),d.return=h,h=d;break e}}else if(O.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===wn&&Yu(I)===O.type){n(h,O.sibling),d=l(O,p.props),d.ref=tl(h,O,p),d.return=h,h=d;break e}n(h,O);break}else t(h,O);O=O.sibling}p.type===hr?(d=Zn(p.props.children,h.mode,m,p.key),d.return=h,h=d):(m=ko(p.type,p.key,p.props,null,h.mode,m),m.ref=tl(h,d,p),m.return=h,h=m)}return a(h);case mr:e:{for(O=p.key;d!==null;){if(d.key===O)if(d.tag===4&&d.stateNode.containerInfo===p.containerInfo&&d.stateNode.implementation===p.implementation){n(h,d.sibling),d=l(d,p.children||[]),d.return=h,h=d;break e}else{n(h,d);break}else t(h,d);d=d.sibling}d=ra(p,h.mode,m),d.return=h,h=d}return a(h);case wn:return O=p._init,U(h,d,O(p._payload),m)}if(ol(p))return j(h,d,p,m);if(qr(p))return E(h,d,p,m);ro(h,p)}return typeof p=="string"&&p!==""||typeof p=="number"?(p=""+p,d!==null&&d.tag===6?(n(h,d.sibling),d=l(d,p),d.return=h,h=d):(n(h,d),d=na(p,h.mode,m),d.return=h,h=d),a(h)):n(h,d)}return U}var Ar=Gd(!0),Vd=Gd(!1),Mo=zn(null),Uo=null,Sr=null,ji=null;function Ti(){ji=Sr=Uo=null}function Ii(e){var t=Mo.current;be(Mo),e._currentValue=t}function Ua(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){Uo=e,ji=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(yt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(ji!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Uo===null)throw Error(z(308));Sr=e,Uo.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var qn=null;function _i(e){qn===null?qn=[e]:qn.push(e)}function Hd(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,_i(t)):(n.next=l.next,l.next=n),t.interleaved=n,mn(e,r)}function mn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cn=!1;function Pi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,we&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,mn(e,n)}return l=r.interleaved,l===null?(t.next=t,_i(r)):(t.next=l.next,l.next=t),r.interleaved=t,mn(e,n)}function go(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gi(e,n)}}function qu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zo(e,t,n,r){var l=e.updateQueue;Cn=!1;var o=l.firstBaseUpdate,a=l.lastBaseUpdate,i=l.shared.pending;if(i!==null){l.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var f=e.alternate;f!==null&&(f=f.updateQueue,i=f.lastBaseUpdate,i!==a&&(i===null?f.firstBaseUpdate=c:i.next=c,f.lastBaseUpdate=u))}if(o!==null){var v=l.baseState;a=0,f=c=u=null,i=o;do{var C=i.lane,T=i.eventTime;if((r&C)===C){f!==null&&(f=f.next={eventTime:T,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var j=e,E=i;switch(C=t,T=n,E.tag){case 1:if(j=E.payload,typeof j=="function"){v=j.call(T,v,C);break e}v=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=E.payload,C=typeof j=="function"?j.call(T,v,C):j,C==null)break e;v=Le({},v,C);break e;case 2:Cn=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,C=l.effects,C===null?l.effects=[i]:C.push(i))}else T={eventTime:T,lane:C,tag:i.tag,payload:i.payload,callback:i.callback,next:null},f===null?(c=f=T,u=v):f=f.next=T,a|=C;if(i=i.next,i===null){if(i=l.shared.pending,i===null)break;C=i,i=C.next,C.next=null,l.lastBaseUpdate=C,l.shared.pending=null}}while(!0);if(f===null&&(u=v),l.baseState=u,l.firstBaseUpdate=c,l.lastBaseUpdate=f,t=l.shared.interleaved,t!==null){l=t;do a|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);rr|=a,e.lanes=a,e.memoizedState=v}}function Qu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(z(191,l));l.call(r)}}}var Ul={},en=zn(Ul),Tl=zn(Ul),Il=zn(Ul);function Qn(e){if(e===Ul)throw Error(z(174));return e}function Di(e,t){switch(Ne(Il,t),Ne(Tl,e),Ne(en,Ul),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:va(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=va(t,e)}be(en),Ne(en,t)}function Lr(){be(en),be(Tl),be(Il)}function Kd(e){Qn(Il.current);var t=Qn(en.current),n=va(t,e.type);t!==n&&(Ne(Tl,e),Ne(en,n))}function Ri(e){Tl.current===e&&(be(en),be(Tl))}var Oe=zn(0);function Fo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=[];function Oi(){for(var e=0;e<qs.length;e++)qs[e]._workInProgressVersionPrimary=null;qs.length=0}var yo=gn.ReactCurrentDispatcher,Qs=gn.ReactCurrentBatchConfig,nr=0,Ae=null,Ye=null,Xe=null,$o=!1,pl=!1,_l=0,xh=0;function at(){throw Error(z(321))}function Ai(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wt(e[n],t[n]))return!1;return!0}function Li(e,t,n,r,l,o){if(nr=o,Ae=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,yo.current=e===null||e.memoizedState===null?Sh:Nh,e=n(r,l),pl){o=0;do{if(pl=!1,_l=0,25<=o)throw Error(z(301));o+=1,Xe=Ye=null,t.updateQueue=null,yo.current=Eh,e=n(r,l)}while(pl)}if(yo.current=Bo,t=Ye!==null&&Ye.next!==null,nr=0,Xe=Ye=Ae=null,$o=!1,t)throw Error(z(300));return e}function Mi(){var e=_l!==0;return _l=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?Ae.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function At(){if(Ye===null){var e=Ae.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=Xe===null?Ae.memoizedState:Xe.next;if(t!==null)Xe=t,Ye=e;else{if(e===null)throw Error(z(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},Xe===null?Ae.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Pl(e,t){return typeof t=="function"?t(e):t}function Xs(e){var t=At(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=Ye,l=r.baseQueue,o=n.pending;if(o!==null){if(l!==null){var a=l.next;l.next=o.next,o.next=a}r.baseQueue=l=o,n.pending=null}if(l!==null){o=l.next,r=r.baseState;var i=a=null,u=null,c=o;do{var f=c.lane;if((nr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var v={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=v,a=r):u=u.next=v,Ae.lanes|=f,rr|=f}c=c.next}while(c!==null&&c!==o);u===null?a=r:u.next=i,Wt(r,t.memoizedState)||(yt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do o=l.lane,Ae.lanes|=o,rr|=o,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zs(e){var t=At(),n=t.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var a=l=l.next;do o=e(o,a.action),a=a.next;while(a!==l);Wt(o,t.memoizedState)||(yt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Jd(){}function Yd(e,t){var n=Ae,r=At(),l=t(),o=!Wt(r.memoizedState,l);if(o&&(r.memoizedState=l,yt=!0),r=r.queue,Ui(Xd.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Xe!==null&&Xe.memoizedState.tag&1){if(n.flags|=2048,Dl(9,Qd.bind(null,n,r,l,t),void 0,null),Ze===null)throw Error(z(349));nr&30||qd(n,t,l)}return l}function qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Qd(e,t,n,r){t.value=n,t.getSnapshot=r,Zd(t)&&ef(e)}function Xd(e,t,n){return n(function(){Zd(t)&&ef(e)})}function Zd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Wt(e,n)}catch{return!0}}function ef(e){var t=mn(e,1);t!==null&&Ht(t,e,1,-1)}function Xu(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pl,lastRenderedState:e},t.queue=e,e=e.dispatch=kh.bind(null,Ae,e),[t.memoizedState,e]}function Dl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ae.updateQueue,t===null?(t={lastEffect:null,stores:null},Ae.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tf(){return At().memoizedState}function vo(e,t,n,r){var l=Qt();Ae.flags|=e,l.memoizedState=Dl(1|t,n,void 0,r===void 0?null:r)}function ls(e,t,n,r){var l=At();r=r===void 0?null:r;var o=void 0;if(Ye!==null){var a=Ye.memoizedState;if(o=a.destroy,r!==null&&Ai(r,a.deps)){l.memoizedState=Dl(t,n,o,r);return}}Ae.flags|=e,l.memoizedState=Dl(1|t,n,o,r)}function Zu(e,t){return vo(8390656,8,e,t)}function Ui(e,t){return ls(2048,8,e,t)}function nf(e,t){return ls(4,2,e,t)}function rf(e,t){return ls(4,4,e,t)}function lf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function of(e,t,n){return n=n!=null?n.concat([e]):null,ls(4,4,lf.bind(null,t,e),n)}function zi(){}function sf(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function af(e,t){var n=At();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ai(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function uf(e,t,n){return nr&21?(Wt(n,t)||(n=pd(),Ae.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yt=!0),e.memoizedState=n)}function wh(e,t){var n=Se;Se=n!==0&&4>n?n:4,e(!0);var r=Qs.transition;Qs.transition={};try{e(!1),t()}finally{Se=n,Qs.transition=r}}function cf(){return At().memoizedState}function Ch(e,t,n){var r=Rn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},df(e))ff(t,n);else if(n=Hd(e,t,n,r),n!==null){var l=ft();Ht(n,e,r,l),pf(n,t,r)}}function kh(e,t,n){var r=Rn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(df(e))ff(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,i=o(a,n);if(l.hasEagerState=!0,l.eagerState=i,Wt(i,a)){var u=t.interleaved;u===null?(l.next=l,_i(t)):(l.next=u.next,u.next=l),t.interleaved=l;return}}catch{}finally{}n=Hd(e,t,l,r),n!==null&&(l=ft(),Ht(n,e,r,l),pf(n,t,r))}}function df(e){var t=e.alternate;return e===Ae||t!==null&&t===Ae}function ff(e,t){pl=$o=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gi(e,n)}}var Bo={readContext:Ot,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},Sh={readContext:Ot,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Zu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vo(4194308,4,lf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return vo(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Qt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ch.bind(null,Ae,e),[r.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:Xu,useDebugValue:zi,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=Xu(!1),t=e[0];return e=wh.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ae,l=Qt();if(Ie){if(n===void 0)throw Error(z(407));n=n()}else{if(n=t(),Ze===null)throw Error(z(349));nr&30||qd(r,t,n)}l.memoizedState=n;var o={value:n,getSnapshot:t};return l.queue=o,Zu(Xd.bind(null,r,o,e),[e]),r.flags|=2048,Dl(9,Qd.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Qt(),t=Ze.identifierPrefix;if(Ie){var n=cn,r=un;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=_l++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=xh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nh={readContext:Ot,useCallback:sf,useContext:Ot,useEffect:Ui,useImperativeHandle:of,useInsertionEffect:nf,useLayoutEffect:rf,useMemo:af,useReducer:Xs,useRef:tf,useState:function(){return Xs(Pl)},useDebugValue:zi,useDeferredValue:function(e){var t=At();return uf(t,Ye.memoizedState,e)},useTransition:function(){var e=Xs(Pl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Jd,useSyncExternalStore:Yd,useId:cf,unstable_isNewReconciler:!1},Eh={readContext:Ot,useCallback:sf,useContext:Ot,useEffect:Ui,useImperativeHandle:of,useInsertionEffect:nf,useLayoutEffect:rf,useMemo:af,useReducer:Zs,useRef:tf,useState:function(){return Zs(Pl)},useDebugValue:zi,useDeferredValue:function(e){var t=At();return Ye===null?t.memoizedState=e:uf(t,Ye.memoizedState,e)},useTransition:function(){var e=Zs(Pl)[0],t=At().memoizedState;return[e,t]},useMutableSource:Jd,useSyncExternalStore:Yd,useId:cf,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Le({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return(e=e._reactInternals)?sr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ft(),l=Rn(e),o=dn(r,l);o.payload=t,n!=null&&(o.callback=n),t=Pn(e,o,l),t!==null&&(Ht(t,e,l,r),go(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ft(),l=Rn(e),o=dn(r,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=Pn(e,o,l),t!==null&&(Ht(t,e,l,r),go(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ft(),r=Rn(e),l=dn(n,r);l.tag=2,t!=null&&(l.callback=t),t=Pn(e,l,r),t!==null&&(Ht(t,e,r,n),go(t,e,r))}};function ec(e,t,n,r,l,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Nl(n,r)||!Nl(l,o):!0}function mf(e,t,n){var r=!1,l=Mn,o=t.contextType;return typeof o=="object"&&o!==null?o=Ot(o):(l=xt(t)?er:ct.current,r=t.contextTypes,o=(r=r!=null)?Rr(e,l):Mn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function tc(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function Fa(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Pi(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=Ot(o):(o=xt(t)?er:ct.current,l.context=Rr(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(za(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&os.enqueueReplaceState(l,l.state,null),zo(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Mr(e,t){try{var n="",r=t;do n+=Zp(r),r=r.return;while(r);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function ea(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $a(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var bh=typeof WeakMap=="function"?WeakMap:Map;function hf(e,t,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vo||(Vo=!0,Qa=r),$a(e,t)},n}function gf(e,t,n){n=dn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){$a(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){$a(e,t),typeof r!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function nc(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new bh;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Fh.bind(null,e,t,n),t.then(e,e))}function rc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lc(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var jh=gn.ReactCurrentOwner,yt=!1;function dt(e,t,n,r){t.child=e===null?Vd(t,null,n,r):Ar(t,e.child,n,r)}function oc(e,t,n,r,l){n=n.render;var o=t.ref;return _r(t,l),r=Li(e,t,n,r,o,l),n=Mi(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,hn(e,t,l)):(Ie&&n&&Ni(t),t.flags|=1,dt(e,t,r,l),t.child)}function sc(e,t,n,r,l){if(e===null){var o=n.type;return typeof o=="function"&&!Ki(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,yf(e,t,o,r,l)):(e=ko(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&l)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(a,r)&&e.ref===t.ref)return hn(e,t,l)}return t.flags|=1,e=On(o,r),e.ref=t.ref,e.return=t,t.child=e}function yf(e,t,n,r,l){if(e!==null){var o=e.memoizedProps;if(Nl(o,r)&&e.ref===t.ref)if(yt=!1,t.pendingProps=r=o,(e.lanes&l)!==0)e.flags&131072&&(yt=!0);else return t.lanes=e.lanes,hn(e,t,l)}return Ba(e,t,n,r,l)}function vf(e,t,n){var r=t.pendingProps,l=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ne(Er,kt),kt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ne(Er,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ne(Er,kt),kt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ne(Er,kt),kt|=r;return dt(e,t,l,n),t.child}function xf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ba(e,t,n,r,l){var o=xt(n)?er:ct.current;return o=Rr(t,o),_r(t,l),n=Li(e,t,n,r,o,l),r=Mi(),e!==null&&!yt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,hn(e,t,l)):(Ie&&r&&Ni(t),t.flags|=1,dt(e,t,n,l),t.child)}function ac(e,t,n,r,l){if(xt(n)){var o=!0;Oo(t)}else o=!1;if(_r(t,l),t.stateNode===null)xo(e,t),mf(t,n,r),Fa(t,n,r,l),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ot(c):(c=xt(n)?er:ct.current,c=Rr(t,c));var f=n.getDerivedStateFromProps,v=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&tc(t,a,r,c),Cn=!1;var C=t.memoizedState;a.state=C,zo(t,r,a,l),u=t.memoizedState,i!==r||C!==u||vt.current||Cn?(typeof f=="function"&&(za(t,n,f,r),u=t.memoizedState),(i=Cn||ec(t,n,i,r,C,u,c))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Wd(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Ft(t.type,i),a.props=c,v=t.pendingProps,C=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ot(u):(u=xt(n)?er:ct.current,u=Rr(t,u));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==v||C!==u)&&tc(t,a,r,u),Cn=!1,C=t.memoizedState,a.state=C,zo(t,r,a,l);var j=t.memoizedState;i!==v||C!==j||vt.current||Cn?(typeof T=="function"&&(za(t,n,T,r),j=t.memoizedState),(c=Cn||ec(t,n,c,r,C,j,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,j,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,j,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=j),a.props=r,a.state=j,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&C===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&C===e.memoizedState||(t.flags|=1024),r=!1)}return Ga(e,t,n,r,o,l)}function Ga(e,t,n,r,l,o){xf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return l&&Wu(t,n,!1),hn(e,t,o);r=t.stateNode,jh.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Ar(t,e.child,null,o),t.child=Ar(t,null,i,o)):dt(e,t,i,o),t.memoizedState=r.state,l&&Wu(t,n,!0),t.child}function wf(e){var t=e.stateNode;t.pendingContext?Hu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hu(e,t.context,!1),Di(e,t.containerInfo)}function ic(e,t,n,r,l){return Or(),bi(l),t.flags|=256,dt(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0};function Ha(e){return{baseLanes:e,cachePool:null,transitions:null}}function Cf(e,t,n){var r=t.pendingProps,l=Oe.current,o=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(l&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Ne(Oe,l&1),e===null)return Ma(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=is(a,r,0,null),e=Zn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ha(n),t.memoizedState=Va,e):Fi(t,a));if(l=e.memoizedState,l!==null&&(i=l.dehydrated,i!==null))return Th(e,t,a,r,i,l,n);if(o){o=r.fallback,a=t.mode,l=e.child,i=l.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=On(l,u),r.subtreeFlags=l.subtreeFlags&14680064),i!==null?o=On(i,o):(o=Zn(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Ha(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=Va,r}return o=e.child,e=o.sibling,r=On(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fi(e,t){return t=is({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function lo(e,t,n,r){return r!==null&&bi(r),Ar(t,e.child,null,n),e=Fi(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Th(e,t,n,r,l,o,a){if(n)return t.flags&256?(t.flags&=-257,r=ea(Error(z(422))),lo(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,l=t.mode,r=is({mode:"visible",children:r.children},l,0,null),o=Zn(o,l,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&Ar(t,e.child,null,a),t.child.memoizedState=Ha(a),t.memoizedState=Va,o);if(!(t.mode&1))return lo(e,t,a,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var i=r.dgst;return r=i,o=Error(z(419)),r=ea(o,r,void 0),lo(e,t,a,r)}if(i=(a&e.childLanes)!==0,yt||i){if(r=Ze,r!==null){switch(a&-a){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|a)?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,mn(e,l),Ht(r,e,l,-1))}return Wi(),r=ea(Error(z(421))),lo(e,t,a,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=$h.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,St=_n(l.nextSibling),Nt=t,Ie=!0,Bt=null,e!==null&&(It[_t++]=un,It[_t++]=cn,It[_t++]=tr,un=e.id,cn=e.overflow,tr=t),t=Fi(t,r.children),t.flags|=4096,t)}function uc(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ua(e.return,t,n)}function ta(e,t,n,r,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=l)}function kf(e,t,n){var r=t.pendingProps,l=r.revealOrder,o=r.tail;if(dt(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uc(e,n,t);else if(e.tag===19)uc(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ne(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Fo(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ta(t,!1,l,n,o);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Fo(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ta(t,!0,n,null,o);break;case"together":ta(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,n=On(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=On(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ih(e,t,n){switch(t.tag){case 3:wf(t),Or();break;case 5:Kd(t);break;case 1:xt(t.type)&&Oo(t);break;case 4:Di(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;Ne(Mo,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ne(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?Cf(e,t,n):(Ne(Oe,Oe.current&1),e=hn(e,t,n),e!==null?e.sibling:null);Ne(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return kf(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Ne(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,vf(e,t,n)}return hn(e,t,n)}var Sf,Wa,Nf,Ef;Sf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wa=function(){};Nf=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Qn(en.current);var o=null;switch(n){case"input":l=ma(e,l),r=ma(e,r),o=[];break;case"select":l=Le({},l,{value:void 0}),r=Le({},r,{value:void 0}),o=[];break;case"textarea":l=ya(e,l),r=ya(e,r),o=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Do)}xa(n,r);var a;n=null;for(c in l)if(!r.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!=null)if(c==="style"){var i=l[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yl.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(i=l!=null?l[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yl.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ee("scroll",e),o||i===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}};Ef=function(e,t,n,r){n!==r&&(t.flags|=4)};function nl(e,t){if(!Ie)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function _h(e,t,n){var r=t.pendingProps;switch(Ei(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return xt(t.type)&&Ro(),it(t),null;case 3:return r=t.stateNode,Lr(),be(vt),be(ct),Oi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(no(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(ei(Bt),Bt=null))),Wa(e,t),it(t),null;case 5:Ri(t);var l=Qn(Il.current);if(n=t.type,e!==null&&t.stateNode!=null)Nf(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(z(166));return it(t),null}if(e=Qn(en.current),no(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Xt]=t,r[jl]=o,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(l=0;l<al.length;l++)Ee(al[l],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":vu(r,o),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ee("invalid",r);break;case"textarea":wu(r,o),Ee("invalid",r)}xa(n,o),l=null;for(var a in o)if(o.hasOwnProperty(a)){var i=o[a];a==="children"?typeof i=="string"?r.textContent!==i&&(o.suppressHydrationWarning!==!0&&to(r.textContent,i,e),l=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&to(r.textContent,i,e),l=["children",""+i]):yl.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Kl(r),xu(r,o,!0);break;case"textarea":Kl(r),Cu(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Do)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xc(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Xt]=t,e[jl]=r,Sf(e,t,!1,!1),t.stateNode=e;e:{switch(a=wa(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),l=r;break;case"iframe":case"object":case"embed":Ee("load",e),l=r;break;case"video":case"audio":for(l=0;l<al.length;l++)Ee(al[l],e);l=r;break;case"source":Ee("error",e),l=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),l=r;break;case"details":Ee("toggle",e),l=r;break;case"input":vu(e,r),l=ma(e,r),Ee("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=Le({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":wu(e,r),l=ya(e,r),Ee("invalid",e);break;default:l=r}xa(n,l),i=l;for(o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="style"?td(e,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Zc(e,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&vl(e,u):typeof u=="number"&&vl(e,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(yl.hasOwnProperty(o)?u!=null&&o==="onScroll"&&Ee("scroll",e):u!=null&&ci(e,o,u,a))}switch(n){case"input":Kl(e),xu(e,r,!1);break;case"textarea":Kl(e),Cu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ln(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?br(e,!!r.multiple,o,!1):r.defaultValue!=null&&br(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Do)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Ef(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(z(166));if(n=Qn(Il.current),Qn(en.current),no(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(o=r.nodeValue!==n)&&(e=Nt,e!==null))switch(e.tag){case 3:to(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&to(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return it(t),null;case 13:if(be(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ie&&St!==null&&t.mode&1&&!(t.flags&128))Bd(),Or(),t.flags|=98560,o=!1;else if(o=no(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(z(317));o[Xt]=t}else Or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;it(t),o=!1}else Bt!==null&&(ei(Bt),Bt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?qe===0&&(qe=3):Wi())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return Lr(),Wa(e,t),e===null&&El(t.stateNode.containerInfo),it(t),null;case 10:return Ii(t.type._context),it(t),null;case 17:return xt(t.type)&&Ro(),it(t),null;case 19:if(be(Oe),o=t.memoizedState,o===null)return it(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)nl(o,!1);else{if(qe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Fo(e),a!==null){for(t.flags|=128,nl(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ne(Oe,Oe.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ge()>Ur&&(t.flags|=128,r=!0,nl(o,!1),t.lanes=4194304)}else{if(!r)if(e=Fo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ie)return it(t),null}else 2*Ge()-o.renderingStartTime>Ur&&n!==1073741824&&(t.flags|=128,r=!0,nl(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ge(),t.sibling=null,n=Oe.current,Ne(Oe,r?n&1|2:n&1),t):(it(t),null);case 22:case 23:return Hi(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function Ph(e,t){switch(Ei(t),t.tag){case 1:return xt(t.type)&&Ro(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lr(),be(vt),be(ct),Oi(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ri(t),null;case 13:if(be(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return be(Oe),null;case 4:return Lr(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return Hi(),null;case 24:return null;default:return null}}var oo=!1,ut=!1,Dh=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fe(e,t,r)}else n.current=null}function Ka(e,t,n){try{n()}catch(r){Fe(e,t,r)}}var cc=!1;function Rh(e,t){if(_a=Io,e=Id(),Si(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,f=0,v=e,C=null;t:for(;;){for(var T;v!==n||l!==0&&v.nodeType!==3||(i=a+l),v!==o||r!==0&&v.nodeType!==3||(u=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(T=v.firstChild)!==null;)C=v,v=T;for(;;){if(v===e)break t;if(C===n&&++c===l&&(i=a),C===o&&++f===r&&(u=a),(T=v.nextSibling)!==null)break;v=C,C=v.parentNode}v=T}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pa={focusedElem:e,selectionRange:n},Io=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var E=j.memoizedProps,U=j.memoizedState,h=t.stateNode,d=h.getSnapshotBeforeUpdate(t.elementType===t.type?E:Ft(t.type,E),U);h.__reactInternalSnapshotBeforeUpdate=d}break;case 3:var p=t.stateNode.containerInfo;p.nodeType===1?p.textContent="":p.nodeType===9&&p.documentElement&&p.removeChild(p.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(m){Fe(t,t.return,m)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return j=cc,cc=!1,j}function ml(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&Ka(t,n,o)}l=l.next}while(l!==r)}}function ss(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Ja(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bf(e){var t=e.alternate;t!==null&&(e.alternate=null,bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[jl],delete t[Oa],delete t[hh],delete t[gh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jf(e){return e.tag===5||e.tag===3||e.tag===4}function dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ya(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Do));else if(r!==4&&(e=e.child,e!==null))for(Ya(e,t,n),e=e.sibling;e!==null;)Ya(e,t,n),e=e.sibling}function qa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(qa(e,t,n),e=e.sibling;e!==null;)qa(e,t,n),e=e.sibling}var nt=null,$t=!1;function xn(e,t,n){for(n=n.child;n!==null;)Tf(e,t,n),n=n.sibling}function Tf(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Xo,n)}catch{}switch(n.tag){case 5:ut||Nr(n,t);case 6:var r=nt,l=$t;nt=null,xn(e,t,n),nt=r,$t=l,nt!==null&&($t?(e=nt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&($t?(e=nt,n=n.stateNode,e.nodeType===8?Js(e.parentNode,n):e.nodeType===1&&Js(e,n),kl(e)):Js(nt,n.stateNode));break;case 4:r=nt,l=$t,nt=n.stateNode.containerInfo,$t=!0,xn(e,t,n),nt=r,$t=l;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var o=l,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ka(n,t,a),l=l.next}while(l!==r)}xn(e,t,n);break;case 1:if(!ut&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Fe(n,t,i)}xn(e,t,n);break;case 21:xn(e,t,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,xn(e,t,n),ut=r):xn(e,t,n);break;default:xn(e,t,n)}}function fc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Dh),t.forEach(function(r){var l=Bh.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var o=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:nt=i.stateNode,$t=!1;break e;case 3:nt=i.stateNode.containerInfo,$t=!0;break e;case 4:nt=i.stateNode.containerInfo,$t=!0;break e}i=i.return}if(nt===null)throw Error(z(160));Tf(o,a,l),nt=null,$t=!1;var u=l.alternate;u!==null&&(u.return=null),l.return=null}catch(c){Fe(l,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)If(t,e),t=t.sibling}function If(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Yt(e),r&4){try{ml(3,e,e.return),ss(3,e)}catch(E){Fe(e,e.return,E)}try{ml(5,e,e.return)}catch(E){Fe(e,e.return,E)}}break;case 1:zt(t,e),Yt(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(zt(t,e),Yt(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var l=e.stateNode;try{vl(l,"")}catch(E){Fe(e,e.return,E)}}if(r&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&qc(l,o),wa(i,a);var c=wa(i,o);for(a=0;a<u.length;a+=2){var f=u[a],v=u[a+1];f==="style"?td(l,v):f==="dangerouslySetInnerHTML"?Zc(l,v):f==="children"?vl(l,v):ci(l,f,v,c)}switch(i){case"input":ha(l,o);break;case"textarea":Qc(l,o);break;case"select":var C=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var T=o.value;T!=null?br(l,!!o.multiple,T,!1):C!==!!o.multiple&&(o.defaultValue!=null?br(l,!!o.multiple,o.defaultValue,!0):br(l,!!o.multiple,o.multiple?[]:"",!1))}l[jl]=o}catch(E){Fe(e,e.return,E)}}break;case 6:if(zt(t,e),Yt(e),r&4){if(e.stateNode===null)throw Error(z(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(E){Fe(e,e.return,E)}}break;case 3:if(zt(t,e),Yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{kl(t.containerInfo)}catch(E){Fe(e,e.return,E)}break;case 4:zt(t,e),Yt(e);break;case 13:zt(t,e),Yt(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(Gi=Ge())),r&4&&fc(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(ut=(c=ut)||f,zt(t,e),ut=c):zt(t,e),Yt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!f&&e.mode&1)for(ee=e,f=e.child;f!==null;){for(v=ee=f;ee!==null;){switch(C=ee,T=C.child,C.tag){case 0:case 11:case 14:case 15:ml(4,C,C.return);break;case 1:Nr(C,C.return);var j=C.stateNode;if(typeof j.componentWillUnmount=="function"){r=C,n=C.return;try{t=r,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(E){Fe(r,n,E)}}break;case 5:Nr(C,C.return);break;case 22:if(C.memoizedState!==null){mc(v);continue}}T!==null?(T.return=C,ee=T):mc(v)}f=f.sibling}e:for(f=null,v=e;;){if(v.tag===5){if(f===null){f=v;try{l=v.stateNode,c?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=v.stateNode,u=v.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=ed("display",a))}catch(E){Fe(e,e.return,E)}}}else if(v.tag===6){if(f===null)try{v.stateNode.nodeValue=c?"":v.memoizedProps}catch(E){Fe(e,e.return,E)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;f===v&&(f=null),v=v.return}f===v&&(f=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:zt(t,e),Yt(e),r&4&&fc(e);break;case 21:break;default:zt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jf(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(vl(l,""),r.flags&=-33);var o=dc(e);qa(e,o,l);break;case 3:case 4:var a=r.stateNode.containerInfo,i=dc(e);Ya(e,i,a);break;default:throw Error(z(161))}}catch(u){Fe(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Oh(e,t,n){ee=e,_f(e)}function _f(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var l=ee,o=l.child;if(l.tag===22&&r){var a=l.memoizedState!==null||oo;if(!a){var i=l.alternate,u=i!==null&&i.memoizedState!==null||ut;i=oo;var c=ut;if(oo=a,(ut=u)&&!c)for(ee=l;ee!==null;)a=ee,u=a.child,a.tag===22&&a.memoizedState!==null?hc(l):u!==null?(u.return=a,ee=u):hc(l);for(;o!==null;)ee=o,_f(o),o=o.sibling;ee=l,oo=i,ut=c}pc(e)}else l.subtreeFlags&8772&&o!==null?(o.return=l,ee=o):pc(e)}}function pc(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ut||ss(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ut)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&Qu(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Qu(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var v=f.dehydrated;v!==null&&kl(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}ut||t.flags&512&&Ja(t)}catch(C){Fe(t,t.return,C)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function mc(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function hc(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ss(4,t)}catch(u){Fe(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(u){Fe(t,l,u)}}var o=t.return;try{Ja(t)}catch(u){Fe(t,o,u)}break;case 5:var a=t.return;try{Ja(t)}catch(u){Fe(t,a,u)}}}catch(u){Fe(t,t.return,u)}if(t===e){ee=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ee=i;break}ee=t.return}}var Ah=Math.ceil,Go=gn.ReactCurrentDispatcher,$i=gn.ReactCurrentOwner,Rt=gn.ReactCurrentBatchConfig,we=0,Ze=null,Ke=null,rt=0,kt=0,Er=zn(0),qe=0,Rl=null,rr=0,as=0,Bi=0,hl=null,gt=null,Gi=0,Ur=1/0,on=null,Vo=!1,Qa=null,Dn=null,so=!1,En=null,Ho=0,gl=0,Xa=null,wo=-1,Co=0;function ft(){return we&6?Ge():wo!==-1?wo:wo=Ge()}function Rn(e){return e.mode&1?we&2&&rt!==0?rt&-rt:vh.transition!==null?(Co===0&&(Co=pd()),Co):(e=Se,e!==0||(e=window.event,e=e===void 0?16:wd(e.type)),e):1}function Ht(e,t,n,r){if(50<gl)throw gl=0,Xa=null,Error(z(185));Al(e,n,r),(!(we&2)||e!==Ze)&&(e===Ze&&(!(we&2)&&(as|=n),qe===4&&Sn(e,rt)),wt(e,r),n===1&&we===0&&!(t.mode&1)&&(Ur=Ge()+500,rs&&Fn()))}function wt(e,t){var n=e.callbackNode;vm(e,t);var r=To(e,e===Ze?rt:0);if(r===0)n!==null&&Nu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nu(n),t===1)e.tag===0?yh(gc.bind(null,e)):zd(gc.bind(null,e)),ph(function(){!(we&6)&&Fn()}),n=null;else{switch(md(r)){case 1:n=hi;break;case 4:n=dd;break;case 16:n=jo;break;case 536870912:n=fd;break;default:n=jo}n=Uf(n,Pf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pf(e,t){if(wo=-1,Co=0,we&6)throw Error(z(327));var n=e.callbackNode;if(Pr()&&e.callbackNode!==n)return null;var r=To(e,e===Ze?rt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Wo(e,r);else{t=r;var l=we;we|=2;var o=Rf();(Ze!==e||rt!==t)&&(on=null,Ur=Ge()+500,Xn(e,t));do try{Uh();break}catch(i){Df(e,i)}while(!0);Ti(),Go.current=o,we=l,Ke!==null?t=0:(Ze=null,rt=0,t=qe)}if(t!==0){if(t===2&&(l=Ea(e),l!==0&&(r=l,t=Za(e,l))),t===1)throw n=Rl,Xn(e,0),Sn(e,r),wt(e,Ge()),n;if(t===6)Sn(e,r);else{if(l=e.current.alternate,!(r&30)&&!Lh(l)&&(t=Wo(e,r),t===2&&(o=Ea(e),o!==0&&(r=o,t=Za(e,o))),t===1))throw n=Rl,Xn(e,0),Sn(e,r),wt(e,Ge()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(z(345));case 2:Jn(e,gt,on);break;case 3:if(Sn(e,r),(r&130023424)===r&&(t=Gi+500-Ge(),10<t)){if(To(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){ft(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Ra(Jn.bind(null,e,gt,on),t);break}Jn(e,gt,on);break;case 4:if(Sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var a=31-Vt(r);o=1<<a,a=t[a],a>l&&(l=a),r&=~o}if(r=l,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ah(r/1960))-r,10<r){e.timeoutHandle=Ra(Jn.bind(null,e,gt,on),r);break}Jn(e,gt,on);break;case 5:Jn(e,gt,on);break;default:throw Error(z(329))}}}return wt(e,Ge()),e.callbackNode===n?Pf.bind(null,e):null}function Za(e,t){var n=hl;return e.current.memoizedState.isDehydrated&&(Xn(e,t).flags|=256),e=Wo(e,t),e!==2&&(t=gt,gt=n,t!==null&&ei(t)),e}function ei(e){gt===null?gt=e:gt.push.apply(gt,e)}function Lh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],o=l.getSnapshot;l=l.value;try{if(!Wt(o(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sn(e,t){for(t&=~Bi,t&=~as,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function gc(e){if(we&6)throw Error(z(327));Pr();var t=To(e,0);if(!(t&1))return wt(e,Ge()),null;var n=Wo(e,t);if(e.tag!==0&&n===2){var r=Ea(e);r!==0&&(t=r,n=Za(e,r))}if(n===1)throw n=Rl,Xn(e,0),Sn(e,t),wt(e,Ge()),n;if(n===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jn(e,gt,on),wt(e,Ge()),null}function Vi(e,t){var n=we;we|=1;try{return e(t)}finally{we=n,we===0&&(Ur=Ge()+500,rs&&Fn())}}function lr(e){En!==null&&En.tag===0&&!(we&6)&&Pr();var t=we;we|=1;var n=Rt.transition,r=Se;try{if(Rt.transition=null,Se=1,e)return e()}finally{Se=r,Rt.transition=n,we=t,!(we&6)&&Fn()}}function Hi(){kt=Er.current,be(Er)}function Xn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fh(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Ei(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ro();break;case 3:Lr(),be(vt),be(ct),Oi();break;case 5:Ri(r);break;case 4:Lr();break;case 13:be(Oe);break;case 19:be(Oe);break;case 10:Ii(r.type._context);break;case 22:case 23:Hi()}n=n.return}if(Ze=e,Ke=e=On(e.current,null),rt=kt=t,qe=0,Rl=null,Bi=as=rr=0,gt=hl=null,qn!==null){for(t=0;t<qn.length;t++)if(n=qn[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=l,r.next=a}n.pending=r}qn=null}return e}function Df(e,t){do{var n=Ke;try{if(Ti(),yo.current=Bo,$o){for(var r=Ae.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}$o=!1}if(nr=0,Xe=Ye=Ae=null,pl=!1,_l=0,$i.current=null,n===null||n.return===null){qe=1,Rl=t,Ke=null;break}e:{var o=e,a=n.return,i=n,u=t;if(t=rt,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=i,v=f.tag;if(!(f.mode&1)&&(v===0||v===11||v===15)){var C=f.alternate;C?(f.updateQueue=C.updateQueue,f.memoizedState=C.memoizedState,f.lanes=C.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=rc(a);if(T!==null){T.flags&=-257,lc(T,a,i,o,t),T.mode&1&&nc(o,c,t),t=T,u=c;var j=t.updateQueue;if(j===null){var E=new Set;E.add(u),t.updateQueue=E}else j.add(u);break e}else{if(!(t&1)){nc(o,c,t),Wi();break e}u=Error(z(426))}}else if(Ie&&i.mode&1){var U=rc(a);if(U!==null){!(U.flags&65536)&&(U.flags|=256),lc(U,a,i,o,t),bi(Mr(u,i));break e}}o=u=Mr(u,i),qe!==4&&(qe=2),hl===null?hl=[o]:hl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var h=hf(o,u,t);qu(o,h);break e;case 1:i=u;var d=o.type,p=o.stateNode;if(!(o.flags&128)&&(typeof d.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Dn===null||!Dn.has(p)))){o.flags|=65536,t&=-t,o.lanes|=t;var m=gf(o,i,t);qu(o,m);break e}}o=o.return}while(o!==null)}Af(n)}catch(I){t=I,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function Rf(){var e=Go.current;return Go.current=Bo,e===null?Bo:e}function Wi(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(rr&268435455)&&!(as&268435455)||Sn(Ze,rt)}function Wo(e,t){var n=we;we|=2;var r=Rf();(Ze!==e||rt!==t)&&(on=null,Xn(e,t));do try{Mh();break}catch(l){Df(e,l)}while(!0);if(Ti(),we=n,Go.current=r,Ke!==null)throw Error(z(261));return Ze=null,rt=0,qe}function Mh(){for(;Ke!==null;)Of(Ke)}function Uh(){for(;Ke!==null&&!um();)Of(Ke)}function Of(e){var t=Mf(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?Af(e):Ke=t,$i.current=null}function Af(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ph(n,t),n!==null){n.flags&=32767,Ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qe=6,Ke=null;return}}else if(n=_h(n,t,kt),n!==null){Ke=n;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);qe===0&&(qe=5)}function Jn(e,t,n){var r=Se,l=Rt.transition;try{Rt.transition=null,Se=1,zh(e,t,n,r)}finally{Rt.transition=l,Se=r}return null}function zh(e,t,n,r){do Pr();while(En!==null);if(we&6)throw Error(z(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(xm(e,o),e===Ze&&(Ke=Ze=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||so||(so=!0,Uf(jo,function(){return Pr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Rt.transition,Rt.transition=null;var a=Se;Se=1;var i=we;we|=4,$i.current=null,Rh(e,n),If(n,e),oh(Pa),Io=!!_a,Pa=_a=null,e.current=n,Oh(n),cm(),we=i,Se=a,Rt.transition=o}else e.current=n;if(so&&(so=!1,En=e,Ho=l),o=e.pendingLanes,o===0&&(Dn=null),pm(n.stateNode),wt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(Vo)throw Vo=!1,e=Qa,Qa=null,e;return Ho&1&&e.tag!==0&&Pr(),o=e.pendingLanes,o&1?e===Xa?gl++:(gl=0,Xa=e):gl=0,Fn(),null}function Pr(){if(En!==null){var e=md(Ho),t=Rt.transition,n=Se;try{if(Rt.transition=null,Se=16>e?16:e,En===null)var r=!1;else{if(e=En,En=null,Ho=0,we&6)throw Error(z(331));var l=we;for(we|=4,ee=e.current;ee!==null;){var o=ee,a=o.child;if(ee.flags&16){var i=o.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(ee=c;ee!==null;){var f=ee;switch(f.tag){case 0:case 11:case 15:ml(8,f,o)}var v=f.child;if(v!==null)v.return=f,ee=v;else for(;ee!==null;){f=ee;var C=f.sibling,T=f.return;if(bf(f),f===c){ee=null;break}if(C!==null){C.return=T,ee=C;break}ee=T}}}var j=o.alternate;if(j!==null){var E=j.child;if(E!==null){j.child=null;do{var U=E.sibling;E.sibling=null,E=U}while(E!==null)}}ee=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ee=a;else e:for(;ee!==null;){if(o=ee,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ml(9,o,o.return)}var h=o.sibling;if(h!==null){h.return=o.return,ee=h;break e}ee=o.return}}var d=e.current;for(ee=d;ee!==null;){a=ee;var p=a.child;if(a.subtreeFlags&2064&&p!==null)p.return=a,ee=p;else e:for(a=d;ee!==null;){if(i=ee,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:ss(9,i)}}catch(I){Fe(i,i.return,I)}if(i===a){ee=null;break e}var m=i.sibling;if(m!==null){m.return=i.return,ee=m;break e}ee=i.return}}if(we=l,Fn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Xo,e)}catch{}r=!0}return r}finally{Se=n,Rt.transition=t}}return!1}function yc(e,t,n){t=Mr(n,t),t=hf(e,t,1),e=Pn(e,t,1),t=ft(),e!==null&&(Al(e,1,t),wt(e,t))}function Fe(e,t,n){if(e.tag===3)yc(e,e,n);else for(;t!==null;){if(t.tag===3){yc(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dn===null||!Dn.has(r))){e=Mr(n,e),e=gf(t,e,1),t=Pn(t,e,1),e=ft(),t!==null&&(Al(t,1,e),wt(t,e));break}}t=t.return}}function Fh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&n,Ze===e&&(rt&n)===n&&(qe===4||qe===3&&(rt&130023424)===rt&&500>Ge()-Gi?Xn(e,0):Bi|=n),wt(e,t)}function Lf(e,t){t===0&&(e.mode&1?(t=ql,ql<<=1,!(ql&130023424)&&(ql=4194304)):t=1);var n=ft();e=mn(e,t),e!==null&&(Al(e,t,n),wt(e,n))}function $h(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Lf(e,n)}function Bh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(t),Lf(e,n)}var Mf;Mf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||vt.current)yt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return yt=!1,Ih(e,t,n);yt=!!(e.flags&131072)}else yt=!1,Ie&&t.flags&1048576&&Fd(t,Lo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xo(e,t),e=t.pendingProps;var l=Rr(t,ct.current);_r(t,n),l=Li(null,t,r,e,l,n);var o=Mi();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xt(r)?(o=!0,Oo(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Pi(t),l.updater=os,t.stateNode=l,l._reactInternals=t,Fa(t,r,e,n),t=Ga(null,t,r,!0,o,n)):(t.tag=0,Ie&&o&&Ni(t),dt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xo(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Vh(r),e=Ft(r,e),l){case 0:t=Ba(null,t,r,e,n);break e;case 1:t=ac(null,t,r,e,n);break e;case 11:t=oc(null,t,r,e,n);break e;case 14:t=sc(null,t,r,Ft(r.type,e),n);break e}throw Error(z(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Ft(r,l),Ba(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Ft(r,l),ac(e,t,r,l,n);case 3:e:{if(wf(t),e===null)throw Error(z(387));r=t.pendingProps,o=t.memoizedState,l=o.element,Wd(e,t),zo(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=Mr(Error(z(423)),t),t=ic(e,t,r,n,l);break e}else if(r!==l){l=Mr(Error(z(424)),t),t=ic(e,t,r,n,l);break e}else for(St=_n(t.stateNode.containerInfo.firstChild),Nt=t,Ie=!0,Bt=null,n=Vd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===l){t=hn(e,t,n);break e}dt(e,t,r,n)}t=t.child}return t;case 5:return Kd(t),e===null&&Ma(t),r=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,a=l.children,Da(r,l)?a=null:o!==null&&Da(r,o)&&(t.flags|=32),xf(e,t),dt(e,t,a,n),t.child;case 6:return e===null&&Ma(t),null;case 13:return Cf(e,t,n);case 4:return Di(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ar(t,null,r,n):dt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Ft(r,l),oc(e,t,r,l,n);case 7:return dt(e,t,t.pendingProps,n),t.child;case 8:return dt(e,t,t.pendingProps.children,n),t.child;case 12:return dt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,o=t.memoizedProps,a=l.value,Ne(Mo,r._currentValue),r._currentValue=a,o!==null)if(Wt(o.value,a)){if(o.children===l.children&&!vt.current){t=hn(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){a=o.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=dn(-1,n&-n),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Ua(o.return,n,t),i.lanes|=n;break}u=u.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(z(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Ua(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}dt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,_r(t,n),l=Ot(l),r=r(l),t.flags|=1,dt(e,t,r,n),t.child;case 14:return r=t.type,l=Ft(r,t.pendingProps),l=Ft(r.type,l),sc(e,t,r,l,n);case 15:return yf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Ft(r,l),xo(e,t),t.tag=1,xt(r)?(e=!0,Oo(t)):e=!1,_r(t,n),mf(t,r,l),Fa(t,r,l,n),Ga(null,t,r,!0,e,n);case 19:return kf(e,t,n);case 22:return vf(e,t,n)}throw Error(z(156,t.tag))};function Uf(e,t){return cd(e,t)}function Gh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,r){return new Gh(e,t,n,r)}function Ki(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vh(e){if(typeof e=="function")return Ki(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fi)return 11;if(e===pi)return 14}return 2}function On(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ko(e,t,n,r,l,o){var a=2;if(r=e,typeof e=="function")Ki(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case hr:return Zn(n.children,l,o,t);case di:a=8,l|=8;break;case ca:return e=Pt(12,n,t,l|2),e.elementType=ca,e.lanes=o,e;case da:return e=Pt(13,n,t,l),e.elementType=da,e.lanes=o,e;case fa:return e=Pt(19,n,t,l),e.elementType=fa,e.lanes=o,e;case Kc:return is(n,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hc:a=10;break e;case Wc:a=9;break e;case fi:a=11;break e;case pi:a=14;break e;case wn:a=16,r=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=Pt(a,n,t,l),t.elementType=e,t.type=r,t.lanes=o,t}function Zn(e,t,n,r){return e=Pt(7,e,r,t),e.lanes=n,e}function is(e,t,n,r){return e=Pt(22,e,r,t),e.elementType=Kc,e.lanes=n,e.stateNode={isHidden:!1},e}function na(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function ra(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hh(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ms(0),this.expirationTimes=Ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Ji(e,t,n,r,l,o,a,i,u){return e=new Hh(e,t,n,i,u),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Pt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pi(o),e}function Wh(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function zf(e){if(!e)return Mn;e=e._reactInternals;e:{if(sr(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var n=e.type;if(xt(n))return Ud(e,n,t)}return t}function Ff(e,t,n,r,l,o,a,i,u){return e=Ji(n,r,!0,e,l,o,a,i,u),e.context=zf(null),n=e.current,r=ft(),l=Rn(n),o=dn(r,l),o.callback=t??null,Pn(n,o,l),e.current.lanes=l,Al(e,l,r),wt(e,r),e}function us(e,t,n,r){var l=t.current,o=ft(),a=Rn(l);return n=zf(n),t.context===null?t.context=n:t.pendingContext=n,t=dn(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pn(l,t,a),e!==null&&(Ht(e,l,a,o),go(e,l,a)),a}function Ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Yi(e,t){vc(e,t),(e=e.alternate)&&vc(e,t)}function Kh(){return null}var $f=typeof reportError=="function"?reportError:function(e){console.error(e)};function qi(e){this._internalRoot=e}cs.prototype.render=qi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));us(e,t,null,null)};cs.prototype.unmount=qi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lr(function(){us(null,e,null,null)}),t[pn]=null}};function cs(e){this._internalRoot=e}cs.prototype.unstable_scheduleHydration=function(e){if(e){var t=yd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&xd(e)}};function Qi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ds(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xc(){}function Jh(e,t,n,r,l){if(l){if(typeof r=="function"){var o=r;r=function(){var c=Ko(a);o.call(c)}}var a=Ff(t,r,e,0,null,!1,!1,"",xc);return e._reactRootContainer=a,e[pn]=a.current,El(e.nodeType===8?e.parentNode:e),lr(),a}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var i=r;r=function(){var c=Ko(u);i.call(c)}}var u=Ji(e,0,!1,null,null,!1,!1,"",xc);return e._reactRootContainer=u,e[pn]=u.current,El(e.nodeType===8?e.parentNode:e),lr(function(){us(t,u,n,r)}),u}function fs(e,t,n,r,l){var o=n._reactRootContainer;if(o){var a=o;if(typeof l=="function"){var i=l;l=function(){var u=Ko(a);i.call(u)}}us(t,a,e,l)}else a=Jh(n,t,e,l,r);return Ko(a)}hd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=sl(t.pendingLanes);n!==0&&(gi(t,n|1),wt(t,Ge()),!(we&6)&&(Ur=Ge()+500,Fn()))}break;case 13:lr(function(){var r=mn(e,1);if(r!==null){var l=ft();Ht(r,e,1,l)}}),Yi(e,1)}};yi=function(e){if(e.tag===13){var t=mn(e,134217728);if(t!==null){var n=ft();Ht(t,e,134217728,n)}Yi(e,134217728)}};gd=function(e){if(e.tag===13){var t=Rn(e),n=mn(e,t);if(n!==null){var r=ft();Ht(n,e,t,r)}Yi(e,t)}};yd=function(){return Se};vd=function(e,t){var n=Se;try{return Se=e,t()}finally{Se=n}};ka=function(e,t,n){switch(t){case"input":if(ha(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=ns(r);if(!l)throw Error(z(90));Yc(r),ha(r,l)}}}break;case"textarea":Qc(e,n);break;case"select":t=n.value,t!=null&&br(e,!!n.multiple,t,!1)}};ld=Vi;od=lr;var Yh={usingClientEntryPoint:!1,Events:[Ml,xr,ns,nd,rd,Vi]},rl={findFiberByHostInstance:Yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qh={bundleType:rl.bundleType,version:rl.version,rendererPackageName:rl.rendererPackageName,rendererConfig:rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=id(e),e===null?null:e.stateNode},findFiberByHostInstance:rl.findFiberByHostInstance||Kh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{Xo=ao.inject(qh),Zt=ao}catch{}}bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yh;bt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qi(t))throw Error(z(200));return Wh(e,t,null,n)};bt.createRoot=function(e,t){if(!Qi(e))throw Error(z(299));var n=!1,r="",l=$f;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Ji(e,1,!1,null,null,n,!1,r,l),e[pn]=t.current,El(e.nodeType===8?e.parentNode:e),new qi(t)};bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=id(t),e=e===null?null:e.stateNode,e};bt.flushSync=function(e){return lr(e)};bt.hydrate=function(e,t,n){if(!ds(t))throw Error(z(200));return fs(null,e,t,!0,n)};bt.hydrateRoot=function(e,t,n){if(!Qi(e))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,l=!1,o="",a=$f;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=Ff(t,null,e,1,n??null,l,!1,o,a),e[pn]=t.current,El(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new cs(t)};bt.render=function(e,t,n){if(!ds(t))throw Error(z(200));return fs(null,e,t,!1,n)};bt.unmountComponentAtNode=function(e){if(!ds(e))throw Error(z(40));return e._reactRootContainer?(lr(function(){fs(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};bt.unstable_batchedUpdates=Vi;bt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ds(n))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return fs(e,t,n,!1,r)};bt.version="18.3.1-next-f1338f8080-20240426";function Bf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bf)}catch(e){console.error(e)}}Bf(),$c.exports=bt;var ps=$c.exports,wc=ps;ia.createRoot=wc.createRoot,ia.hydrateRoot=wc.hydrateRoot;var ve=(e=>(e.SynchroTech="SynchroTech",e.Hoods="Hoods",e.Optimates="Optimates",e.Fusion="Fusion",e.Command="Command",e.Tokens="Tokens",e.Custom="Custom",e))(ve||{}),An=(e=>(e.FreeForAll="FFA",e.TwoVTwo="2v2",e.ThreeVOne="3v1",e))(An||{});const Qh={ipDeptAgent:{name:"IP Dept Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253319/SYN_IP_DEPT_AGENT_mhwphu.png",fallbackImage:"/images/cards/SYN_IP_DEPT_AGENT.png",power:2,ability:`Deploy: 2 stuns a card with exploit.
Support  Commit: A player discards a revealed card of your choice.`,flavorText:`- "You've violated copyright. Open the door. We have a search warrant."`,types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},tacticalAgent:{name:"Tactical Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253342/SYN_TACTICAL_AGENT_xbb7i0.png",fallbackImage:"/images/cards/SYN_TACTICAL_AGENT.png",power:3,ability:`Deploy: Aim a card with threat.
Setup: Destroy the card with aim.`,flavorText:'- "Nobody move! SynchroTech Security Service!"',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},patrolAgent:{name:"Patrol Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253325/SYN_PATROL_AGENT_ioetlu.png",fallbackImage:"/images/cards/SYN_PATROL_AGENT.png",power:2,ability:`Setup: Move this card to any cell in a line.
Support  Commit: Stun an adjacent opponent card with threat.`,flavorText:"They say the city never sleeps. We make sure it doesn't even blink.",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},riotAgent:{name:"Riot Agent",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",fallbackImage:"/images/cards/SYN_RIOT_AGENT.png",power:3,ability:`Deploy: Push an opponent card 1 cell, . ay take its place.
Support  Commit: Stun an adjacent opponent card with threat.`,flavorText:'- "Citizens, disperse! This meeting is unauthorized by SynchroTech."',types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},threatAnalyst:{name:"Threat Analyst",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253338/SYN_THREAT_ANALYST_sqnpgw.png",fallbackImage:"/images/cards/SYN_THREAT_ANALYST.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Reveal 1 card for each of your exploits on the battlefield.`,flavorText:"",types:["Unit","SynchroTech"],faction:"SynchroTech",allowedPanels:["DECK_BUILDER"]},recklessProvocateur:{name:"Reckless Provocateur",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253315/HOO_RECKLESS_PROVOCATEUR_hi7a9z.png",fallbackImage:"/images/cards/HOO_RECKLESS_PROVOCATEUR.png",power:3,ability:`Deploy: Swap positions with a card in an adjacent cell.
Commit: Move all counters from an allied card on the battlefield to this card.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},dataLiberator:{name:"Data Liberator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253317/HOO_DATA_LIBERATOR_lbtqa2.png",fallbackImage:"/images/cards/HOO_DATA_LIBERATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Pas: Cards with your exploit counters give you points.`,flavorText:`- "Information doesn't want to be free. It needs to be."`,types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},cautiousAvenger:{name:"Cautious Avenger",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253309/HOO_CAUTIOUS_AVENGER_x4g4g3.png",fallbackImage:"/images/cards/HOO_CAUTIOUS_AVENGER.png",power:2,ability:`Deploy: Aim a card in a line.
Support  Setup: Destroy the card with aim.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},vigilantSpotter:{name:"Vigilant Spotter",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253311/HOO_VIGILANT_SPOTTER_eiephm.png",fallbackImage:"/images/cards/HOO_VIGILANT_SPOTTER.png",power:1,ability:`Support  Pas: When an opponent's revealed card enters the battlefield, gain 2 points.
Commit: Each opponent reveals 1 cards to you.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},inventiveMaker:{name:"Inventive Maker",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253313/HOO_INVENTIVE_MAKER_uzrbg1.png",fallbackImage:"/images/cards/HOO_INVENTIVE_MAKER.png",power:1,ability:`Deploy: Place the Recon Drone token in a free adjacent cell.
Support  Setup: Return a device card from the discard pile to your hand.`,flavorText:'- "Patience is a weapon. Vengeance is an art."',types:["Unit","Hoods"],faction:"Hoods",allowedPanels:["DECK_BUILDER"]},faber:{name:"Faber",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253324/OPT_FABER_d7uxew.png",fallbackImage:"/images/cards/OPT_FABER.png",power:1,ability:"Deploy: Place the Walking Turret card in a free adjacent cell.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},censor:{name:"Censor",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253321/OPT_CENSOR_wtxtc2.png",fallbackImage:"/images/cards/OPT_CENSOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Commit: Swap 1 exploit for 1 stun.`,flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},princeps:{name:"Princeps",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",fallbackImage:"/images/cards/OPT_PRINCEPS.png",power:3,ability:`Deploy: Shield 1 and aim a card with threat.
Setup: Destroy a card with aim in a line.`,flavorText:"Order is not requested. It is imposed.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},immunis:{name:"Immunis",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253327/OPT_IMMUNIS_bjlncl.png",fallbackImage:"/images/cards/OPT_IMMUNIS.png",power:2,ability:"Support  Setup: Return Optimat from the discard pile to the adjacent cell. Activate its deploy ability, and it gains stun 1.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},centurion:{name:"Centurion",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253330/OPT_CENTURION_aaushl.png",fallbackImage:"/images/cards/OPT_CENTURION.png",power:2,ability:"Support  Increase the power of two other units in the line by 2.",flavorText:"In the gilded halls of the Optimates, even the tools of war are works of art.",types:["Unit","Optimates"],faction:"Optimates",allowedPanels:["DECK_BUILDER"]},codeKeeper:{name:"Code Keeper",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253298/FUS_CODE_KEEPER_qotsym.png",fallbackImage:"/images/cards/FUS_CODE_KEEPER.png",power:3,ability:"Deploy: Exploit opponent cards with threat in the line.",flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},devoutSynthetic:{name:"Devout Synthetic",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253305/FUS_DEVOUT_SYNTHETIC_bavg9k.png",fallbackImage:"/images/cards/FUS_DEVOUT_SYNTHETIC.png",power:4,ability:`Deploy: Push an adjacent card 1 cell. May take its place.
Support  Setup: Destroy an adjacent card with threat or stun.`,flavorText:"Flesh is a bug. The Signal is the patch.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},unwaveringIntegrator:{name:"Unwavering Integrator",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253303/FUS_UNWAVERING_INTEGRATOR_emret1.png",fallbackImage:"/images/cards/FUS_UNWAVERING_INTEGRATOR.png",power:2,ability:`Deploy: Exploit any card.
Support  Setup: Gain 1 point for each of your exploits in the line.`,flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},signalProphet:{name:"Signal Prophet",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253299/FUS_SIGNAL_PROPHET_nzd7w3.png",fallbackImage:"/images/cards/FUS_SIGNAL_PROPHET.png",power:3,ability:"Deploy: Exploit each of your cards with support in the line.",flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},zealousMissionary:{name:"Zealous Missionary",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253301/FUS_ZEALOUS_MISSIONARY_mfv9xl.png",fallbackImage:"/images/cards/FUS_ZEALOUS_MISSIONARY.png",power:2,ability:"Support  Commit: Reduce the power of any card with your exploit by 1.",flavorText:"The Signal is truth. All else is noise.",types:["Unit","Fusion"],faction:"Fusion",allowedPanels:["DECK_BUILDER"]},overwatch:{name:"Overwatch",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253291/CMD_OVERWATCH_hrba9x.png",fallbackImage:"/images/cards/CMD_OVERWATCH.png",power:0,ability:`Aim any card. Choose 2 of 3:
 Move units with your aim 1 or 2 cells.
 Reveal 1 card for each of your aim.
 Draw 1 card for each of your aim.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},tacticalManeuver:{name:"Tactical Maneuver",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253296/CMD_REPOSITIONING_m7k4kf.png",fallbackImage:"/images/cards/CMD_REPOSITIONING.png",power:0,ability:`Move your unit to any cell in a line. Choose 2 of 3: 
 Draw cards equal to the power of an adjacent allied unit. 
 Move your unit 1 or 2 cells. 
 Gain points equal to the power of one of the moved units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},inspiration:{name:"Inspiration",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763260942/CMD_INSPIRATION_nxifhu.png",fallbackImage:"/images/cards/CMD_INSPIRATION.png",power:0,ability:`Remove any number of counters from your unit. Choose 2 of 3: 
 Move this unit 1 or 2 cells. 
 Draw 1 card for each counter removed. 
 Gain 1 point for each counter removed.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},dataInterception:{name:"Data Interception",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253290/CMD_DATA_INTERCEPTION_ks4lcv.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Exploit any card. Choose 2 of 3: 
 Move a unit with your exploit to any cell in a line. 
 Reveal 1 card for each of your exploits. 
 Draw cards equal to the power of the highest power revealed unit.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},falseOrders:{name:"False Orders",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763640484/CMD_FALSE_ORDERS_ghi01y.png",fallbackImage:"/images/cards/CMD_DATA_INTERCEPTION.png",power:0,ability:`Move an opponent unit 1 or 2 cells. Choose 2 of 3: 
 Move an opponent unit 1 or 2 cells. 
 Stun the moved opponent unit. 
 Draw cards equal to the power of one of the moved opponent units.`,types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization1:{name:"Line Breach",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894862/line_ocsoyj.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen line of the battlefield.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization2:{name:"Logistics Chain",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763894861/diagonal_u96ulk.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points in a chosen diagonal of the battlefield.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]},mobilization3:{name:"Sector Capture",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763895447/support_tgjhgd.png",fallbackImage:"/images/cards/CMD_MOBILIZATION.png",power:0,ability:"Gain points from 4 adjacent allied cards.",types:["Command"],faction:"Command",allowedPanels:["DECK_BUILDER"]}},Xh={reconDrone:{name:"Recon Drone",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253333/TKN_RECON_DRONE_esfknf.png",fallbackImage:"/images/cards/TKN_RECON_DRONE.png",power:1,ability:`Setup: Move to any cell.
Commit: You may reveal a card in the hand of the adjacent card's owner.`,flavorText:"SynchroTech has created lightweight drones to patrol the streets, but the Hoods have other plans for them.",color:"bg-gray-400",types:["Unit","Device"],allowedPanels:["TOKEN_PANEL"]},walkingTurret:{name:"Walking Turret",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763253307/TKN_WALKING_TURRET_uq6owm.png",fallbackImage:"/images/cards/TKN_WALKING_TURRET.png",power:2,ability:"Support  Commit: If without shield, gain shield 1.",flavorText:"This military monster clearly has no place on the city streets.",color:"bg-gray-400",types:["Unit","Optimates","Device"],allowedPanels:["TOKEN_PANEL"]}},Zh={Aim:{name:"Aim",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Aim_dcct45.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is easier to destroy.`,sortOrder:1,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Exploit:{name:"Exploit",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Exploit_foomty.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
Hacker and programmer cards will have a greater effect on this card.`,sortOrder:2,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},LastPlayed:{name:"LastPlayed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/LastPlayed_bfkbwb.png",description:"This card was last played by its owner.",sortOrder:99,allowedPanels:[],allowedTargets:["board"]},Revealed:{name:"Revealed",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Revealed_w1gbe7.png",description:"This card's face is visible to the owner of the counter revealed. Can be placed on cards in hand.",sortOrder:7,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board","hand"]},Stun:{name:"Stun",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478811/Stun_cwqroz.png",description:"Stunned cards cannot move, activate abilities, or gain points. Remove 1 stun counter during the Commit Phase.",sortOrder:4,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Shield:{name:"Shield",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478810/Shield_z9sjr1.png",description:"If an effect attempts to destroy this card, remove 1 shield counter from it instead.",sortOrder:3,allowedPanels:["COUNTER_PANEL"],allowedTargets:["board"]},Support:{name:"Support",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Support_ui9qpl.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is adjacent to its ally.`,sortOrder:5,allowedPanels:[],allowedTargets:["board"]},Threat:{name:"Threat",imageUrl:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763478809/Threat_i1pbko.png",description:`This counter has no effect on its own, but it can modify the abilities of cards.
This card is surrounded and pinned to the edge of the battlefield by an opponent's cards.`,sortOrder:6,allowedPanels:[],allowedTargets:["board"]},"Power+":{name:"Power+",imageUrl:"",description:"Increases the power of the card by 1.",sortOrder:10,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]},"Power-":{name:"Power-",imageUrl:"",description:"Decreases the power of the card by 1.",sortOrder:11,allowedPanels:[],allowedTargets:["board","hand","deck","discard"]}},eg=[{id:"SynchroTech",name:"SynchroTech",isSelectable:!0,cards:[{cardId:"ipDeptAgent",quantity:3},{cardId:"tacticalAgent",quantity:3},{cardId:"patrolAgent",quantity:3},{cardId:"riotAgent",quantity:3},{cardId:"threatAnalyst",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Hoods",name:"Hoods",isSelectable:!0,cards:[{cardId:"recklessProvocateur",quantity:3},{cardId:"dataLiberator",quantity:3},{cardId:"cautiousAvenger",quantity:3},{cardId:"vigilantSpotter",quantity:3},{cardId:"inventiveMaker",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Optimates",name:"Optimates",isSelectable:!0,cards:[{cardId:"faber",quantity:3},{cardId:"censor",quantity:3},{cardId:"princeps",quantity:3},{cardId:"immunis",quantity:3},{cardId:"centurion",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]},{id:"Fusion",name:"Fusion",isSelectable:!0,cards:[{cardId:"codeKeeper",quantity:3},{cardId:"devoutSynthetic",quantity:3},{cardId:"unwaveringIntegrator",quantity:3},{cardId:"signalProphet",quantity:3},{cardId:"zealousMissionary",quantity:3},{cardId:"overwatch",quantity:2},{cardId:"tacticalManeuver",quantity:2},{cardId:"inspiration",quantity:2},{cardId:"dataInterception",quantity:2},{cardId:"mobilization1",quantity:3},{cardId:"mobilization2",quantity:2},{cardId:"mobilization3",quantity:1}]}],Gf={cardDatabase:Qh,tokenDatabase:Xh,countersDatabase:Zh,deckFiles:eg},{cardDatabase:tg,tokenDatabase:ng,countersDatabase:rg,deckFiles:lg}=Gf,Wn=Gf,ms=new Map(Object.entries(tg)),og=new Map(Object.entries(ng)),zl=rg,Vf=lg,Jo=new Set(["overwatch","repositioning","mobilization","inspiration","dataInterception"]);function sg(){const e={};for(const t of Vf){const n=[];for(const r of t.cards){const l=ms.get(r.cardId);if(!l){console.warn(`Card definition not found for ID: ${r.cardId} in deck: ${t.name}`);continue}const o=Jo.has(r.cardId);for(let a=0;a<r.quantity;a++){const i=r.cardId.toUpperCase().replace(/-/g,"_");o?n.push({...l,deck:ve.Command,id:`CMD_${i}`,faction:l.faction||"Command"}):n.push({...l,deck:t.id,id:`${t.id.substring(0,3).toUpperCase()}_${i}_${a+1}`,faction:l.faction||t.id})}}e[t.id]=n}return e[ve.Tokens]=Array.from(og.values()).map(t=>{const n=t.types?[...t.types]:["Unit"];return n.includes("Device")||n.push("Device"),{id:`TKN_${t.name.toUpperCase().replace(/\s/g,"_")}`,deck:ve.Tokens,name:t.name,imageUrl:t.imageUrl,fallbackImage:t.fallbackImage,power:t.power,ability:t.ability,color:t.color,types:n,flavorText:t.flavorText,faction:"Tokens"}}),e}const ti=sg(),Hf=()=>Vf.filter(e=>e.isSelectable);function Yo(e){return ms.get(e)}function la(e){return Array.from(ms.values()).find(t=>t.name===e)}function ag(){return Array.from(ms.entries()).map(([e,t])=>({id:e,card:t}))}const Wf={[ve.SynchroTech]:{prefix:"SYN",color:"border-cyan-400"},[ve.Hoods]:{prefix:"HOO",color:"border-purple-500"},[ve.Optimates]:{prefix:"OPT",color:"border-red-500"},[ve.Fusion]:{prefix:"FUS",color:"border-green-400"},[ve.Command]:{prefix:"CMD",color:"border-yellow-500"},[ve.Tokens]:{prefix:"TKN",color:"border-gray-400"},[ve.Custom]:{prefix:"CUS",color:"border-purple-400"}},Dt={blue:{bg:"bg-blue-600",border:"border-blue-600",outline:"outline-blue-600",glow:"shadow-[0_0_15px_#2563eb]"},purple:{bg:"bg-purple-600",border:"border-purple-600",outline:"outline-purple-600",glow:"shadow-[0_0_15px_#9333ea]"},red:{bg:"bg-red-600",border:"border-red-600",outline:"outline-red-600",glow:"shadow-[0_0_15px_#dc2626]"},green:{bg:"bg-green-600",border:"border-green-600",outline:"outline-green-600",glow:"shadow-[0_0_15px_#16a34a]"},yellow:{bg:"bg-yellow-500",border:"border-yellow-500",outline:"outline-yellow-500",glow:"shadow-[0_0_15px_#eab308]"},orange:{bg:"bg-orange-500",border:"border-orange-500",outline:"outline-orange-500",glow:"shadow-[0_0_15px_#f97316]"},pink:{bg:"bg-pink-500",border:"border-pink-500",outline:"outline-pink-500",glow:"shadow-[0_0_15px_#ec4899]"},brown:{bg:"bg-[#8B4513]",border:"border-[#8B4513]",outline:"outline-[#8B4513]",glow:"shadow-[0_0_15px_#8B4513]"}},Kf=["blue","purple","red","green","yellow","orange","pink","brown"],ni=["Setup","Command Phase #1","Deploy","Command Phase #2","Commit"],Xi=Object.fromEntries(Object.entries(zl).map(([e,t])=>[e,t.imageUrl])),qo=Object.fromEntries(Object.entries(zl).map(([e,t])=>[e,t.description])),ig=Object.entries(zl).filter(([,e])=>!e.allowedPanels||e.allowedPanels.includes("COUNTER_PANEL")).sort(([,e],[,t])=>e.sortOrder-t.sortOrder).map(([e,t])=>({type:e,label:t.name})),oa=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},ug={1:"top-[59px] left-2",2:"top-[59px] right-2",3:"bottom-[3px] left-2",4:"bottom-[3px] right-2"},cg=e=>{const t={bold:["Support","support","Threat","threat","threaten","Act","Pas","Trg","Int","ETB","Deploy","Setup","Commit","Exploit","exploits","Aim","Stun","Shield","Gain points","gain points"],italic:["This counter has no effect on its own, but it can modify the abilities of cards."]},n=t.bold.map(o=>o.toLowerCase()),r=t.italic.map(o=>o.toLowerCase());return e.split(/(\s+|[.,:()])/).map((o,a)=>{if(!o)return null;const i=o.replace(/[.,:()]/g,"").toLowerCase();return i&&n.includes(i)?bn.createElement("strong",{key:a,className:"text-white"},o):i&&r.includes(i)?bn.createElement("em",{key:a,className:"text-gray-300 italic font-semibold"},o):o})},Jf=e=>e?e.split(`
`).map((t,n)=>{const r=[];return n>0&&r.push(bn.createElement("br",{key:`br-${n}`})),r.push(...cg(t)),bn.createElement(bn.Fragment,{key:n},...r.filter(Boolean))}):"",Zi=({x:e,y:t,children:n})=>{const r=S.useRef(null),[l,o]=S.useState({top:t+20,left:e+20});return S.useLayoutEffect(()=>{if(r.current){const{innerWidth:a,innerHeight:i}=window,{offsetWidth:u,offsetHeight:c}=r.current;let f=e+20;f+u>a&&(f=e-u-20),f<5&&(f=5);let v=t+20;v+c>i&&(v=t-c-20),v<5&&(v=5),o({top:v,left:f})}},[e,t,n]),ps.createPortal(s.jsx("div",{ref:r,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[99999] p-3 text-white text-base pointer-events-none transition-opacity duration-100",style:{top:l.top,left:l.left,opacity:1},children:n}),document.body)},hs=({card:e,statusDescriptions:t,className:n,hideOwner:r=!1,powerPosition:l="default"})=>{var d;const o=(d=e.types)!=null&&d.length?e.types.join(", "):e.deck==="counter"?"":`${e.deck} Card`,a=e.powerModifier||0,i=Math.max(0,e.power+a),u=(e.statuses??[]).reduce((p,m)=>(p[m.type]=(p[m.type]||0)+1,p),{}),c=Object.keys(u).length>0,f=e.ownerName||(e.ownerId?`Player ${e.ownerId}`:null);let v="bg-gray-700 border-gray-500",C="text-white";a>0?(v="bg-green-900 border-green-500",C="text-green-400"):a<0&&(v="bg-red-900 border-red-500",C="text-red-400");const T=e.ability?e.ability.length:0,j=c?Object.keys(u).length*10:0,E=T>35||j>35,U=n||"relative flex flex-col text-left w-max max-w-[90vw]",h=l==="inner"?"top-0.5 right-0.5":"-top-1 -right-1";return s.jsxs("div",{className:U,children:[e.power>0&&s.jsx("div",{className:`absolute ${h} w-[37px] h-[37px] flex items-center justify-center rounded border-2 ${v} shadow-sm z-10`,children:s.jsx("span",{className:`font-bold text-lg ${C}`,children:i})}),s.jsxs("div",{className:"mb-1 pr-8 whitespace-nowrap",children:[s.jsx("div",{className:"font-bold text-white text-lg leading-tight mb-0.5",children:e.name}),o&&s.jsx("div",{className:"text-xs text-gray-400 font-semibold",children:o})]}),s.jsxs("div",{className:`flex flex-col ${!n&&E?"w-[16rem]":"w-full"} whitespace-normal break-words`,children:[e.ability&&s.jsx("hr",{className:"border-gray-600 mt-[0px] mb-[2px]"}),e.ability&&s.jsx("div",{className:"text-sm text-gray-200 leading-snug",children:Jf(e.ability)}),e.ability&&s.jsx("hr",{className:"border-gray-600 my-[4px]"}),c&&s.jsx("div",{className:"text-xs text-gray-200 leading-snug",children:Object.entries(u).map(([p,m],I,O)=>s.jsxs("span",{children:[s.jsx("span",{className:"font-bold text-indigo-300",children:p}),m>1&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(x",m,")"]}),I<O.length-1?s.jsx("span",{className:"text-gray-400 mr-1",children:", "}):""]},p))}),c&&f&&!r&&s.jsx("hr",{className:"border-gray-600 my-[2px]"}),f&&!r&&s.jsxs("div",{className:"text-xs text-gray-500 font-semibold",children:["Owner: ",s.jsx("span",{className:"text-gray-300",children:f})]})]})]})},dg={0:"Setup",1:"Command Phase #1",2:"Deploy",3:"Command Phase #2",4:"Commit"},io=(e,t,n,r)=>Math.abs(e-n)+Math.abs(t-r)===1,pr=(e,t,n)=>{var r;return((r=e.statuses)==null?void 0:r.some(l=>l.type===t&&l.addedByPlayerId===n))||!1},Yf=(e,t)=>{var n;return((n=e.statuses)==null?void 0:n.some(r=>r.type===t))||!1},fg=e=>{var t;return((t=e.statuses)==null?void 0:t.some(n=>n.type==="Support"))||!1},pg=(e,t)=>{let n=0;return e.forEach(r=>{r.forEach(l=>{var o;if(l.card){const a=((o=l.card.statuses)==null?void 0:o.filter(i=>i.type==="Exploit"&&i.addedByPlayerId===t).length)||0;n+=a}})}),n},Cc=(e,t)=>!e||!t?!1:e.teamId!==void 0&&t.teamId!==void 0&&e.teamId===t.teamId,ri=(e,t,n)=>{var i;if(e.ownerId!==n||Yf(e,"Stun")||e.abilityUsedInPhase===t)return!1;if(e.deck==="Command")return t===1||t===3;const r=dg[t];if(!r)return!1;const l=e.ability.includes(`Support  ${r}`)||e.ability.includes(`Support => ${r}`);return!e.ability.includes(`${r}:`)&&!l||t===2&&((i=e.types)!=null&&i.includes("Unit"))&&!e.enteredThisTurn||l&&!fg(e)?!1:(e.name.toLowerCase().includes("tactical agent")&&t===0,!0)},mg=(e,t,n,r)=>{const l=t.currentPhase,o=e.name.toLowerCase(),a=t.players.find(i=>i.id===n);if(e.id.includes("MOBILIZATION")&&(l===1||l===3))return{type:"ENTER_MODE",mode:"SELECT_LINE_START",sourceCard:e,sourceCoords:r,payload:{}};if(o.includes("reckless provocateur")){if(l===2)return{type:"ENTER_MODE",mode:"SWAP_POSITIONS",sourceCard:e,sourceCoords:r,payload:{filter:(i,u,c)=>io(r.row,r.col,u,c)&&i.id!==e.id}};if(l===4)return{type:"ENTER_MODE",mode:"TRANSFER_ALL_STATUSES",sourceCard:e,sourceCoords:r,payload:{filter:i=>{const u=t.players.find(f=>f.id===i.ownerId),c=i.ownerId===n||Cc(a,u);return i.id===e.id||!c?!1:i.statuses&&i.statuses.some(f=>!["Support","Threat"].includes(f.type))}}}}if(o.includes("data liberator")&&l===2)return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(o.includes("cautious avenger")){if(l===2)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Aim",filter:(i,u,c)=>(u===r.row||c===r.col)&&i.id!==e.id}};if(l===0)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>pr(i,"Aim",n)}}}if(o.includes("vigilant spotter")&&l===4)return{type:"CREATE_STACK",tokenType:"Revealed",count:1,onlyOpponents:!0,onlyFaceDown:!0};if(o.includes("inventive maker")){if(l===2)return{type:"ENTER_MODE",mode:"SPAWN_TOKEN",sourceCard:e,sourceCoords:r,payload:{tokenName:"Recon Drone"}};if(l===0)return{type:"OPEN_MODAL",mode:"RETRIEVE_DEVICE",sourceCard:e,sourceCoords:r,payload:{}}}if(o.includes("recon drone")){if(l===0)return{type:"ENTER_MODE",mode:"SELECT_CELL",sourceCard:e,sourceCoords:r,payload:{allowSelf:!0}};if(l===4)return{type:"ENTER_MODE",mode:"REVEAL_ENEMY",sourceCard:e,sourceCoords:r,payload:{filter:(i,u,c)=>{if(!io(r.row,r.col,u,c))return!1;const f=t.players.find(v=>v.id===i.ownerId);return!(i.ownerId===n||Cc(a,f))}}}}if(o.includes("ip dept agent")){if(l===2)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Stun",count:2,filter:i=>pr(i,"Exploit",n)}};if(l===4)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:(i,u,c)=>{if(u!==void 0||c!==void 0)return!1;const f=Yf(i,"Revealed"),v=i.revealedTo==="all";return f||v}}}}if(o.includes("tactical agent")){if(l===2)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Aim",filter:i=>pr(i,"Threat",n)}};if(l===0)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{actionType:"DESTROY",filter:i=>pr(i,"Aim",n)}}}if(o.includes("patrol agent")){if(l===0)return{type:"ENTER_MODE",mode:"PATROL_MOVE",sourceCard:e,sourceCoords:r,payload:{}};if(l===4)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Stun",filter:(i,u,c)=>io(r.row,r.col,u,c)&&i.ownerId!==n&&pr(i,"Threat",n)}}}if(o.includes("riot agent")){if(l===2)return{type:"ENTER_MODE",mode:"RIOT_PUSH",sourceCard:e,sourceCoords:r,payload:{}};if(l===4)return{type:"ENTER_MODE",mode:"SELECT_TARGET",sourceCard:e,sourceCoords:r,payload:{tokenType:"Stun",filter:(i,u,c)=>io(r.row,r.col,u,c)&&i.ownerId!==n&&pr(i,"Threat",n)}}}if(o.includes("threat analyst")){if(l===2)return{type:"CREATE_STACK",tokenType:"Exploit",count:1};if(l===4){const i=pg(t.board,n);if(i>0)return{type:"CREATE_STACK",tokenType:"Revealed",count:i}}}return null},Gt=({card:e,isFaceUp:t,playerColorMap:n,localPlayerId:r,imageRefreshVersion:l,disableTooltip:o,smallStatusIcons:a,activePhaseIndex:i,activeTurnPlayerId:u,disableActiveHighlights:c})=>{const[f,v]=S.useState(!1),[C,T]=S.useState({x:0,y:0}),j=S.useRef(null),[E,U]=S.useState(!1);S.useEffect(()=>{U(!1)},[i]),S.useEffect(()=>{c||U(!1)},[c]);const[h,d]=S.useState(e.imageUrl);S.useEffect(()=>{let A=e.imageUrl;if(l&&A){const $=A.includes("?")?"&":"?";A=`${A}${$}v=${l}`}d(A)},[e.imageUrl,l]);const p=()=>{let A=e.fallbackImage;if(l&&A){const $=A.includes("?")?"&":"?";A=`${A}${$}v=${l}`}h!==A&&d(A)},m=A=>{o||(T({x:A.clientX,y:A.clientY}),!f&&!j.current&&(j.current=window.setTimeout(()=>{v(!0)},250)))},I=()=>{o||(j.current&&clearTimeout(j.current),j.current=window.setTimeout(()=>{v(!0)},250))},O=()=>{j.current&&(clearTimeout(j.current),j.current=null),v(!1)},F=()=>{j.current&&(clearTimeout(j.current),j.current=null),v(!1)},G=i!==void 0&&u!==void 0?ri(e,i,u):!1,J=!c&&!E&&G,V=A=>{J&&r===e.ownerId&&U(!0)},re=(e.statuses??[]).reduce((A,$)=>{const ne=`${$.type}_${$.addedByPlayerId}`;return A[ne]||(A[ne]={type:$.type,playerId:$.addedByPlayerId,count:0}),A[ne].count++,A},{}),de=({type:A,playerId:$,count:ne})=>{const fe=n.get($),je=fe&&Dt[fe]?Dt[fe].bg:"bg-gray-500";let ae=Xi[A];if(ae&&l){const Qe=ae.includes("?")?"&":"?";ae=`${ae}${Qe}v=${l}`}const _e=["Support","Threat","Revealed","LastPlayed"].includes(A),Me=!_e&&ne>1,oe=Me?"p-1.5":"p-1",X=a?"w-6 h-6":"w-8 h-8",xe=a?Me?"text-xs":"text-base":Me?"text-base":"text-lg",Ce=a?"text-[10px]":"text-xs";return s.jsxs("div",{className:`relative ${X} flex items-center justify-center ${je} bg-opacity-80 rounded-sm shadow-md flex-shrink-0`,title:`${A} (Player ${$}) ${!_e&&ne>0?`x${ne}`:""}`,children:[ae?s.jsx("img",{src:ae,alt:A,className:`object-contain w-full h-full transition-all duration-150 ${oe}`}):s.jsx("span",{className:`text-white font-black transition-all duration-150 ${xe}`,style:{textShadow:"0 0 2px black"},children:A.charAt(0)}),Me&&s.jsx("span",{className:`absolute top-0 right-0.5 text-white font-bold ${Ce} leading-none`,style:{textShadow:"1px 1px 2px black"},children:ne})]})};if(e.deck==="counter")return s.jsx("div",{title:e.name,className:`w-full h-full ${e.color} shadow-md`,style:{clipPath:"polygon(30% 0%, 70% 0%, 100% 30%, 100% 70%, 70% 100%, 30% 100%, 0% 70%, 0% 30%)"}});const pe=e.ownerId?n.get(e.ownerId):null,R=pe&&Dt[pe]?Dt[pe]:null,Z=Object.values(re).sort((A,$)=>A.type!==$.type?A.type.localeCompare($.type):A.playerId-$.playerId),W=e.powerModifier||0,H=Math.max(0,e.power+W);let M="text-white";return W>0?M="text-green-400":W<0&&(M="text-red-500"),s.jsxs(s.Fragment,{children:[t?(()=>{var xe;const A=R?R.border:((xe=Wf[e.deck])==null?void 0:xe.color)||"border-gray-300",$=e.deck===ve.Tokens?e.color:"bg-card-face",ne=(e.deck===ve.Tokens,"text-black"),fe=["Support","Shield"],je=Z.filter(Ce=>fe.includes(Ce.type)),ae=Z.filter(Ce=>!fe.includes(Ce.type)&&Ce.type!=="LastPlayed"),_e=Z.find(Ce=>Ce.type==="LastPlayed"),Me=_e?[_e,...je]:je,oe=R?R.glow:"shadow-[0_0_15px_#ffffff]",X=J?`border-[6px] shadow-2xl ${oe}`:"border-4";return s.jsxs("div",{onMouseEnter:I,onMouseLeave:O,onMouseMove:m,onMouseDown:F,onClick:V,className:`relative w-full h-full ${$} rounded-md shadow-md ${X} ${A} ${ne} flex-shrink-0 select-none overflow-hidden transition-all duration-300 ${J?"scale-[1.15] z-10":""}`,children:[h?s.jsx("img",{src:h,onError:p,alt:e.name,className:"absolute inset-0 w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full p-1 flex items-center justify-center",children:s.jsx("span",{className:"text-center text-sm font-bold",children:e.name})}),Z.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute top-[3px] left-[3px] right-[3px] flex flex-row-reverse flex-wrap justify-start items-start z-10 pointer-events-none",children:ae.map(Ce=>s.jsx(de,{type:Ce.type,playerId:Ce.playerId,count:Ce.count},`${Ce.type}_${Ce.playerId}`))}),s.jsx("div",{className:"absolute bottom-[3px] left-[3px] right-[30px] flex flex-wrap-reverse content-start items-end z-10 pointer-events-none",children:Me.map(Ce=>s.jsx(de,{type:Ce.type,playerId:Ce.playerId,count:Ce.count},`${Ce.type}_${Ce.playerId}`))})]}),e.power>0&&s.jsx("div",{className:`absolute bottom-[5px] right-[5px] w-8 h-8 rounded-full ${R?R.bg:"bg-gray-600"} border-[3px] border-white flex items-center justify-center z-20 shadow-md`,children:s.jsx("span",{className:`${M} font-bold text-lg leading-none`,style:{textShadow:"0 0 2px black"},children:H})})]})})():(()=>{const A=R?R.bg:"bg-card-back",$=R?R.border:"border-blue-300",ne=Z.find(fe=>fe.type==="LastPlayed");return s.jsx("div",{onMouseEnter:I,onMouseLeave:O,onMouseMove:m,onMouseDown:F,className:`relative w-full h-full ${A} rounded-md shadow-md border-2 ${$} flex-shrink-0 transition-transform duration-300 ${J?"scale-[1.15] z-10":""}`,children:ne&&s.jsx("div",{className:"absolute bottom-[3px] left-[3px] pointer-events-none",children:s.jsx(de,{type:ne.type,playerId:ne.playerId,count:ne.count})})})})(),f&&t&&!o&&s.jsx(Zi,{x:C.x,y:C.y,children:s.jsx(hs,{card:e})})]})},hg=({row:e,col:t,cell:n,isGameStarted:r,handleDrop:l,draggedItem:o,setDraggedItem:a,openContextMenu:i,playMode:u,setPlayMode:c,playerColorMap:f,localPlayerId:v,onCardDoubleClick:C,onEmptyCellDoubleClick:T,imageRefreshVersion:j,cursorStack:E,setCursorStack:U,currentPhase:h,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,isValidTarget:I,showNoTarget:O,disableActiveHighlights:F})=>{const[G,J]=bn.useState(!1),V=ae=>{ae.preventDefault(),o&&l(o,{target:"board",boardCoords:{row:e,col:t}}),J(!1)},re=()=>{if(u){const ae={...u.sourceItem,card:{...u.sourceItem.card}};ae.card.isFaceDown=!!u.faceDown,l(ae,{target:"board",boardCoords:{row:e,col:t}}),c(null)}else n.card&&p?p(n.card,{row:e,col:t}):!n.card&&m&&m({row:e,col:t})},de=ae=>{ae.preventDefault();const _e=(o==null?void 0:o.source)==="counter_panel";(!n.card||n.card&&_e)&&J(!0)},pe=()=>{J(!1)},R=!!u,Z=!!E,W=!!n.card,H="w-full h-full rounded-lg transition-colors duration-200 flex items-center justify-center relative",M=!!o&&(!W||W&&o.source==="counter_panel"),ne=I||R&&!W||Z&&I,je=`bg-board-cell-active ${G&&M?"bg-indigo-400 opacity-80":""} ${R&&W?"cursor-not-allowed":""} ${ne?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] cursor-pointer z-10":""}`;return s.jsxs("div",{onDrop:V,onDragOver:de,onDragLeave:pe,onClick:re,onContextMenu:ae=>{n.card||i(ae,"emptyBoardCell",{boardCoords:{row:e,col:t}})},onDoubleClick:()=>{n.card||T({row:e,col:t})},className:`${H} ${je}`,"data-interactive":!n.card,"data-board-coords":`${e},${t}`,children:[ne&&s.jsx("div",{className:"absolute inset-0 rounded-lg bg-cyan-400 bg-opacity-30 animate-pulse pointer-events-none"}),n.card&&s.jsxs("div",{draggable:r,onDragStart:()=>a({card:n.card,source:"board",boardCoords:{row:e,col:t},isManual:!0}),onDragEnd:()=>a(null),onContextMenu:ae=>i(ae,"boardItem",{card:n.card,boardCoords:{row:e,col:t}}),onDoubleClick:ae=>{ae.stopPropagation(),E?re():C(n.card,{row:e,col:t})},className:`w-full h-full ${r?"cursor-grab":"cursor-default"} relative`,"data-interactive":"true",children:[s.jsx(Gt,{card:n.card,isFaceUp:(()=>{var X;const ae=n.card;if(!ae)return!1;const _e=ae.revealedTo==="all",Me=v!==null&&Array.isArray(ae.revealedTo)&&ae.revealedTo.includes(v),oe=v!==null&&((X=ae.statuses)==null?void 0:X.some(xe=>xe.type==="Revealed"&&xe.addedByPlayerId===v));return!ae.isFaceDown||_e||Me||oe})(),playerColorMap:f,localPlayerId:v,imageRefreshVersion:j,activePhaseIndex:h,activeTurnPlayerId:d,disableActiveHighlights:F}),O&&s.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center pointer-events-none animate-pulse",children:s.jsx("img",{src:"https://res.cloudinary.com/dxxh6meej/image/upload/v1763978163/no_tarket_mic5sm.png",alt:"No Target",className:"w-4/5 h-4/5 object-contain drop-shadow-lg opacity-90"})})]},n.card.id)]})},kc={4:"grid-cols-4 grid-rows-4",5:"grid-cols-5 grid-rows-5",6:"grid-cols-6 grid-rows-6",7:"grid-cols-7 grid-rows-7"},Sc=({board:e,isGameStarted:t,activeGridSize:n,handleDrop:r,draggedItem:l,setDraggedItem:o,openContextMenu:a,playMode:i,setPlayMode:u,highlight:c,playerColorMap:f,localPlayerId:v,onCardDoubleClick:C,onEmptyCellDoubleClick:T,imageRefreshVersion:j,cursorStack:E,setCursorStack:U,currentPhase:h,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,validTargets:I,noTargetOverlay:O,disableActiveHighlights:F})=>{const G=e.length,J=Math.floor((G-n)/2),V=e.slice(J,J+n).map(de=>de.slice(J,J+n)),re=()=>{if(!c)return null;const{type:de,row:pe,col:R,playerId:Z}=c,W=f.get(Z),M=`outline outline-[8px] ${W&&Dt[W]?Dt[W].outline:"outline-yellow-400"} rounded-lg`;if(de==="row"&&pe!==void 0&&pe>=J&&pe<J+n){const A=pe-J+1;return s.jsx("div",{className:M,style:{gridArea:`${A} / 1 / ${A+1} / ${n+1}`}})}if(de==="col"&&R!==void 0&&R>=J&&R<J+n){const A=R-J+1;return s.jsx("div",{className:M,style:{gridArea:`1 / ${A} / ${n+1} / ${A+1}`}})}if(de==="cell"&&pe!==void 0&&R!==void 0&&pe>=J&&pe<J+n&&R>=J&&R<J+n){const A=pe-J+1,$=R-J+1;return s.jsx("div",{className:M,style:{gridArea:`${A} / ${$} / ${A+1} / ${$+1}`}})}return null};return s.jsxs("div",{className:"relative p-2 bg-board-bg rounded-xl shadow-2xl h-full aspect-square transition-all duration-300",children:[s.jsx("div",{className:`grid ${kc[n]} gap-0.5 h-full w-full`,children:V.map((de,pe)=>de.map((R,Z)=>{const W=pe+J,H=Z+J,M=I==null?void 0:I.some($=>$.row===W&&$.col===H),A=O&&O.row===W&&O.col===H;return s.jsx(hg,{row:W,col:H,cell:R,isGameStarted:t,handleDrop:r,draggedItem:l,setDraggedItem:o,openContextMenu:a,playMode:i,setPlayMode:u,playerColorMap:f,localPlayerId:v,onCardDoubleClick:C,onEmptyCellDoubleClick:T,imageRefreshVersion:j,cursorStack:E,setCursorStack:U,currentPhase:h,activeTurnPlayerId:d,onCardClick:p,onEmptyCellClick:m,isValidTarget:M,showNoTarget:A,disableActiveHighlights:F},`${W}-${H}`)}))}),c&&s.jsx("div",{className:`absolute top-2 right-2 bottom-2 left-2 grid ${kc[n]} gap-0.5 pointer-events-none z-20`,children:s.jsx(re,{})})]})},Tt=({onDrop:e,children:t,className:n,isOverClassName:r="bg-indigo-500",onContextMenu:l,style:o})=>{const[a,i]=S.useState(!1),u=v=>{v.preventDefault(),i(!0)},c=v=>{i(!1)},f=v=>{v.preventDefault(),i(!1),e()};return s.jsx("div",{onDragOver:u,onDragLeave:c,onDrop:f,onContextMenu:l,className:`${n} transition-colors ${a?r:""}`,"data-interactive":!!l,style:o,children:t})},sa=({player:e,canEditSettings:t,selectedColors:n,onColorChange:r,compact:l=!1})=>{const[o,a]=S.useState(!1),[i,u]=S.useState({top:0,left:0}),c=S.useRef(null),f=S.useRef(null),v=Dt[e.color]?e.color:"blue",C=Dt[v];S.useEffect(()=>{const j=E=>{const U=E.target;o&&c.current&&!c.current.contains(U)&&f.current&&!f.current.contains(U)&&a(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[o]);const T=()=>{if(t)if(!o&&c.current){const j=c.current.getBoundingClientRect();u({top:j.bottom+window.scrollY+4,left:j.left+window.scrollX}),a(!0)}else a(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs("button",{ref:c,type:"button",onClick:T,disabled:!t,className:`flex items-center gap-2 bg-gray-700 p-1.5 rounded-md border border-gray-600 justify-center disabled:opacity-100 disabled:cursor-default hover:bg-gray-600 ${l?"px-2 py-1":"w-28"} flex-shrink-0`,title:t?"Change Color":void 0,children:[s.jsx("div",{className:`rounded-full ${C.bg} border border-white/50 ${l?"w-3 h-3":"w-4 h-4"}`}),!l&&s.jsx("span",{className:"capitalize font-medium truncate",children:v})]}),o&&ps.createPortal(s.jsx("div",{ref:f,className:"fixed bg-gray-800 border border-gray-600 rounded-md shadow-lg py-1 left-0 z-[9990]",style:{top:i.top,left:i.left,width:"9rem"},children:Kf.map(j=>{const E=n.has(j),U=Dt[j];return s.jsxs("button",{type:"button",disabled:E,onClick:()=>{r(j),a(!1)},className:"w-full flex items-center gap-3 px-3 py-1.5 text-sm text-left hover:bg-indigo-600 disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${U.bg} border border-white/50`}),s.jsx("span",{className:"capitalize font-medium text-white",children:j})]},j)})}),document.body)]})},aa=({player:e,isLocalPlayer:t,localPlayerId:n,isSpectator:r,isGameStarted:l,position:o,onNameChange:a,onColorChange:i,onScoreChange:u,onDeckChange:c,onLoadCustomDeck:f,onDrawCard:v,handleDrop:C,draggedItem:T,setDraggedItem:j,openContextMenu:E,onHandCardDoubleClick:U,playerColorMap:h,allPlayers:d,localPlayerTeamId:p,activeTurnPlayerId:m,onToggleActiveTurn:I,imageRefreshVersion:O,layoutMode:F="standard",onCardClick:G,validHandTargets:J,onAnnouncedCardDoubleClick:V,currentPhase:re,disableActiveHighlights:de})=>{const pe=!!e.isDisconnected,R=p!==void 0&&e.teamId===p,Z=S.useRef(null),W=!l&&!r&&(t||!!e.isDummy),H=!r&&l&&(t||pe||!!e.isDummy),M=t&&!pe,A=new Set(d.filter(oe=>!oe.isDummy&&oe.id!==e.id).map(oe=>oe.color)),$=S.useMemo(()=>Hf(),[]),ne=e.id===m,fe=oe=>{const X=oe.target.value;c(X)},je=()=>{var oe;(oe=Z.current)==null||oe.click()},ae=oe=>{var Ce;const X=(Ce=oe.target.files)==null?void 0:Ce[0];if(!X)return;const xe=new FileReader;xe.onload=Qe=>{var Ue;try{const ht=(Ue=Qe.target)==null?void 0:Ue.result,Kt=JSON.parse(ht);f(Kt)}catch(ht){alert(`Error loading deck: ${ht instanceof Error?ht.message:"Unknown error"}`)}finally{oe.target&&(oe.target.value="")}},xe.readAsText(X)};if(F==="list-remote"){const oe=ne?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full bg-panel-bg rounded-lg shadow-lg p-3 border-2 ${oe} ${pe?"opacity-60":""} flex flex-col overflow-hidden`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 flex-shrink-0 gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 overflow-hidden flex-grow",children:[s.jsx(sa,{player:e,canEditSettings:W,selectedColors:A,onColorChange:i,compact:!0}),s.jsxs("div",{className:"flex flex-col min-w-0",children:[s.jsx("span",{className:`font-bold text-base truncate ${ne?"text-yellow-400":"text-white"}`,children:e.name}),e.isDummy&&!l&&s.jsx("div",{className:"flex items-center gap-1 mt-0.5",children:s.jsx("select",{value:e.selectedDeck,onChange:fe,className:"bg-gray-800 border border-gray-600 text-xs rounded p-0.5 text-gray-300 max-w-[120px]",onClick:X=>X.stopPropagation(),children:$.map(X=>s.jsx("option",{value:X.id,children:X.name},X.id))})})]})]}),s.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>I(e.id),disabled:!t&&!e.isDummy,className:"w-4 h-4 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Mark as Active Turn"})})]}),s.jsxs("div",{className:"grid grid-cols-6 gap-1 mb-2 flex-shrink-0",children:[s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:X=>H&&E(X,"deckPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-card-back rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:ring-1 ring-white shadow-sm",onClick:H?v:void 0,title:"Deck",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-white drop-shadow-md",children:"DECK"}),s.jsx("span",{className:"text-xl font-bold text-white drop-shadow-md",children:e.deck.length})]})}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"discard",playerId:e.id}),onContextMenu:X=>H&&E(X,"discardPile",{player:e}),className:"w-full aspect-square",children:s.jsxs("div",{className:"w-full h-full bg-gray-700 rounded border border-gray-600 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 shadow-sm",title:"Discard",children:[s.jsx("span",{className:"text-xs font-bold mb-0.5 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-xl font-bold text-white",children:e.discard.length})]})}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"announced",playerId:e.id}),className:"w-full aspect-square bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",isOverClassName:"bg-indigo-600",children:e.announcedCard?s.jsx("div",{className:"w-full h-full cursor-pointer",draggable:H,onDragStart:()=>H&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:X=>H&&E(X,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Gt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:h,imageRefreshVersion:O,activePhaseIndex:re,activeTurnPlayerId:m,disableActiveHighlights:de})}):s.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Showcase"})}),s.jsx("div",{}),s.jsx("div",{}),s.jsx("div",{className:"flex justify-end h-full w-full",children:s.jsxs("div",{className:"flex flex-col items-center justify-between h-full w-6",children:[s.jsx("button",{onClick:()=>u(1),disabled:!H,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"+"}),s.jsx("span",{className:"font-bold text-lg leading-none",children:e.score}),s.jsx("button",{onClick:()=>u(-1),disabled:!H,className:"bg-gray-700 w-full h-[30%] rounded hover:bg-gray-600 disabled:opacity-50 flex items-center justify-center text-sm font-bold leading-none pb-0.5",children:"-"})]})})]}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"hand",playerId:e.id}),className:"w-full bg-gray-900/50 rounded p-1 grid grid-cols-6 gap-1 flex-grow overflow-y-scroll content-start",children:e.hand.map((X,xe)=>{const Qe=(J==null?void 0:J.some(Ue=>Ue.playerId===e.id&&Ue.cardIndex===xe))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-full aspect-square ${Qe}`,draggable:H,onDragStart:()=>H&&j({card:X,source:"hand",playerId:e.id,cardIndex:xe}),onDragEnd:()=>j(null),onContextMenu:Ue=>l&&E(Ue,"handCard",{card:X,player:e,cardIndex:xe}),onDoubleClick:()=>U(e,X,xe),onClick:()=>G&&G(e,X,xe),"data-hand-card":`${e.id},${xe}`,children:s.jsx(Gt,{card:X,isFaceUp:(()=>{var tn;const Ue=X.revealedTo==="all",ht=n!==null&&Array.isArray(X.revealedTo)&&X.revealedTo.includes(n),Kt=n!==null&&((tn=X.statuses)==null?void 0:tn.some(ke=>ke.type==="Revealed"&&ke.addedByPlayerId===n));return t||R||!!e.isDummy||pe||Ue||ht||Kt})(),playerColorMap:h,localPlayerId:n,imageRefreshVersion:O,disableActiveHighlights:de})},`${X.id}-${xe}`)})})]})}if(F==="list-local"){const oe=ne?"border-yellow-400":"border-gray-700";return s.jsxs("div",{className:`w-full h-full flex flex-col p-4 bg-panel-bg border-2 ${oe} rounded-lg shadow-2xl ${pe?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-[3px] flex-shrink-0",children:[s.jsx(sa,{player:e,canEditSettings:W,selectedColors:A,onColorChange:i}),s.jsxs("div",{className:"flex-grow relative flex items-center",children:[s.jsx("input",{type:"text",value:e.name,onChange:X=>a(X.target.value),readOnly:!W,className:"bg-transparent font-bold text-xl p-1 flex-grow focus:bg-gray-800 rounded focus:outline-none border-b border-gray-600 mr-3"}),s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>I(e.id),disabled:!t&&!e.isDummy,className:"w-6 h-6 text-yellow-400 bg-gray-700 border-gray-600 rounded cursor-pointer flex-shrink-0",title:"Active Turn"})]})]}),s.jsxs("div",{className:"flex justify-between items-start gap-4 bg-gray-800 p-[2px] rounded-lg mb-[3px] flex-shrink-0",children:[s.jsxs("div",{className:"p-0 border border-transparent flex gap-[3px]",children:[s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:X=>H&&E(X,"deckPile",{player:e}),children:s.jsxs("div",{onClick:H?v:void 0,className:"w-[120px] h-[120px] bg-card-back rounded flex flex-col items-center justify-center cursor-pointer hover:ring-2 ring-indigo-400 transition-all shadow-lg",children:[s.jsx("span",{className:"text-xs font-bold mb-1",children:"DECK"}),s.jsx("span",{className:"text-lg font-bold",children:e.deck.length})]})}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"discard",playerId:e.id}),onContextMenu:X=>H&&E(X,"discardPile",{player:e}),isOverClassName:"bg-indigo-600 ring-2",children:s.jsxs("div",{className:"w-[120px] h-[120px] bg-gray-700 rounded flex flex-col items-center justify-center cursor-pointer hover:bg-gray-600 transition-all shadow-lg border border-gray-600",children:[s.jsx("span",{className:"text-xs font-bold mb-1 text-gray-400",children:"DISCARD"}),s.jsx("span",{className:"text-lg font-bold",children:e.discard.length})]})}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"announced",playerId:e.id}),className:"w-[120px] h-[120px] bg-gray-800 border border-dashed border-gray-600 rounded flex items-center justify-center",children:e.announcedCard?s.jsx("div",{className:"w-full h-full p-1 cursor-pointer",draggable:H,onDragStart:()=>H&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:X=>H&&E(X,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),children:s.jsx(Gt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:h,imageRefreshVersion:O,activePhaseIndex:re,activeTurnPlayerId:m,disableActiveHighlights:de})}):s.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Showcase"})})]}),s.jsxs("div",{className:"flex flex-col items-center justify-between h-[120px] w-12 flex-shrink-0 py-0",children:[s.jsx("button",{onClick:()=>u(1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"+"}),s.jsx("span",{className:"font-bold text-3xl",children:e.score}),s.jsx("button",{onClick:()=>u(-1),className:"bg-gray-700 w-full h-10 rounded font-bold hover:bg-gray-600 flex items-center justify-center text-xl",children:"-"})]})]}),!l&&s.jsxs("div",{className:"mb-[3px] flex-shrink-0",children:[s.jsxs("select",{value:e.selectedDeck,onChange:fe,className:"w-full bg-gray-700 border border-gray-600 rounded p-2 mb-2",children:[$.map(X=>s.jsx("option",{value:X.id,children:X.name},X.id)),s.jsx("option",{value:ve.Custom,children:"Custom Deck"})]}),e.selectedDeck===ve.Custom&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"file",ref:Z,onChange:ae,accept:".json",className:"hidden"}),s.jsx("button",{onClick:je,className:"w-full bg-indigo-600 hover:bg-indigo-700 py-1 rounded font-bold",children:"Load Custom Deck"})]})]}),s.jsx("div",{className:"flex-grow flex flex-col min-h-0",children:s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 overflow-y-scroll border border-gray-700",children:s.jsx("div",{className:"flex flex-col gap-[2px]",children:e.hand.map((X,xe)=>{const Qe=(J==null?void 0:J.some(Ue=>Ue.playerId===e.id&&Ue.cardIndex===xe))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsxs("div",{className:`flex bg-gray-900 border border-gray-700 rounded p-2 ${Qe}`,draggable:H,onDragStart:()=>H&&j({card:X,source:"hand",playerId:e.id,cardIndex:xe}),onDragEnd:()=>j(null),onContextMenu:Ue=>H&&E(Ue,"handCard",{card:X,player:e,cardIndex:xe}),onDoubleClick:()=>U(e,X,xe),onClick:()=>G&&G(e,X,xe),"data-hand-card":`${e.id},${xe}`,children:[s.jsx("div",{className:"w-[120px] h-[120px] flex-shrink-0 mr-3",children:s.jsx(Gt,{card:X,isFaceUp:!0,playerColorMap:h,localPlayerId:n,imageRefreshVersion:O,disableTooltip:!0,disableActiveHighlights:de})}),s.jsx("div",{className:"flex-grow min-w-0",children:s.jsx(hs,{card:X,className:"relative flex flex-col text-left w-full h-full justify-start whitespace-normal break-words",hideOwner:X.ownerId===e.id,powerPosition:"inner"})})]},`${X.id}-${xe}`)})})})})]})}const _e=ug[o]||"top-2 left-2",Me=ne?"border-yellow-400":M?"border-indigo-500":"border-gray-700";return s.jsxs("div",{className:`fixed ${_e} min-w-[30rem] bg-panel-bg rounded-lg shadow-2xl p-3 flex flex-col z-10 border-2 ${Me} ${pe?"opacity-60":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[s.jsx(sa,{player:e,canEditSettings:W,selectedColors:A,onColorChange:i}),s.jsx("input",{type:"text",value:pe?`${e.name} (Disconnected)`:e.name,onChange:oe=>a(oe.target.value),readOnly:!W||pe,className:"bg-transparent font-bold text-xl p-1.5 flex-grow focus:bg-gray-800 rounded focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:cursor-default"})]}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("input",{type:"checkbox",checked:ne,onChange:()=>I(e.id),disabled:!t&&!e.isDummy,className:"w-5 h-5 text-yellow-400 bg-gray-700 border-gray-600 rounded focus:ring-yellow-500 focus:ring-offset-gray-800 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Mark as active turn"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>u(-1),disabled:!H,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"-"}),s.jsx("span",{className:"font-bold text-2xl w-10 text-center",children:e.score}),s.jsx("button",{onClick:()=>u(1),disabled:!H,className:"bg-gray-700 w-8 h-8 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:"+"})]})]})]}),s.jsxs("div",{className:"mb-3 flex items-center space-x-2",children:[s.jsxs("select",{value:e.selectedDeck,onChange:fe,disabled:!W,className:"bg-gray-700 border border-gray-600 text-white text-base rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[e.selectedDeck===ve.Custom&&s.jsx("option",{value:ve.Custom,children:"Custom Deck"}),$.map(oe=>s.jsx("option",{value:oe.id,children:oe.name},oe.id))]}),s.jsx("input",{type:"file",ref:Z,onChange:ae,accept:".json",style:{display:"none"}}),s.jsx("button",{onClick:je,disabled:!W,title:"Load Custom Deck",className:"bg-gray-600 hover:bg-gray-500 text-white font-bold p-2 rounded disabled:opacity-70 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),s.jsxs("div",{className:"flex-grow flex space-x-3",children:[s.jsxs("div",{className:"flex flex-col w-28 space-y-2",children:[s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"deck",playerId:e.id,deckPosition:"top"}),onContextMenu:oe=>H&&E(oe,"deckPile",{player:e}),children:s.jsxs("div",{onClick:H?v:void 0,className:`relative w-28 h-28 bg-card-back rounded-md flex items-center justify-center text-center text-sm font-bold p-1 ${H?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,children:["DECK ",s.jsx("br",{})," (",e.deck.length,")"]})}),s.jsxs(Tt,{onDrop:()=>{T&&C(T,{target:"discard",playerId:e.id})},onContextMenu:oe=>H&&E(oe,"discardPile",{player:e}),className:`relative w-28 h-28 bg-gray-700 rounded-md flex items-center justify-center text-center text-sm font-bold p-1 ${H?"cursor-pointer":""}`,isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:["DISCARD ",s.jsx("br",{})," (",e.discard.length,")"]}),s.jsx("div",{className:"relative w-28 h-28",children:s.jsxs(Tt,{onDrop:()=>T&&C(T,{target:"announced",playerId:e.id}),className:"w-full h-full bg-gray-700 rounded-md flex items-center justify-center text-center text-sm p-1",isOverClassName:"bg-indigo-600 ring-2 ring-indigo-400",children:[!e.announcedCard&&s.jsx("span",{className:"text-sm font-bold text-gray-500",children:"Showcase"}),e.announcedCard&&s.jsx("div",{draggable:H,onDragStart:()=>H&&j({card:e.announcedCard,source:"announced",playerId:e.id}),onDragEnd:()=>j(null),onContextMenu:oe=>H&&E(oe,"announcedCard",{card:e.announcedCard,player:e}),onDoubleClick:()=>V&&V(e,e.announcedCard),className:"w-full h-full cursor-pointer","data-interactive":"true",children:s.jsx(Gt,{card:e.announcedCard,isFaceUp:!0,playerColorMap:h,localPlayerId:n,imageRefreshVersion:O,activePhaseIndex:re,activeTurnPlayerId:m,disableActiveHighlights:de})})]})})]}),s.jsx(Tt,{onDrop:()=>T&&C(T,{target:"hand",playerId:e.id}),className:"flex-grow bg-gray-800 rounded-lg p-2 min-h-[16rem] max-h-[22.25rem] overflow-y-auto",isOverClassName:"bg-gray-900 ring-2 ring-indigo-400",children:s.jsx("div",{className:"grid grid-cols-3 gap-0.5",children:e.hand.map((oe,X)=>{const Ce=(J==null?void 0:J.some(Qe=>Qe.playerId===e.id&&Qe.cardIndex===X))?"ring-4 ring-cyan-400 shadow-[0_0_15px_#22d3ee] rounded-md z-10":"";return s.jsx("div",{className:`w-28 h-28 ${Ce}`,draggable:H,onDragStart:()=>H&&j({card:oe,source:"hand",playerId:e.id,cardIndex:X}),onDragEnd:()=>j(null),onContextMenu:Qe=>{n!==null&&l&&E(Qe,"handCard",{card:oe,player:e,cardIndex:X})},onDoubleClick:()=>U(e,oe,X),onClick:()=>G&&G(e,oe,X),"data-interactive":"true","data-hand-card":`${e.id},${X}`,children:s.jsx(Gt,{card:oe,isFaceUp:(()=>{var Kt;const Qe=oe.revealedTo==="all",Ue=n!==null&&Array.isArray(oe.revealedTo)&&oe.revealedTo.includes(n),ht=n!==null&&((Kt=oe.statuses)==null?void 0:Kt.some(tn=>tn.type==="Revealed"&&tn.addedByPlayerId===n));return t||R||!!e.isDummy||pe||Qe||Ue||ht})(),playerColorMap:h,localPlayerId:n,imageRefreshVersion:O,disableActiveHighlights:de})},`${oe.id}-${X}`)})})})]})]})},gg=4,yg=({gameId:e,isGameStarted:t,onStartGame:n,onResetGame:r,activeGridSize:l,onGridSizeChange:o,dummyPlayerCount:a,onDummyPlayerCountChange:i,realPlayerCount:u,connectionStatus:c,onExitGame:f,onOpenTokensModal:v,onOpenCountersModal:C,gameMode:T,onGameModeChange:j,isPrivate:E,onPrivacyChange:U,isHost:h,onSyncGame:d,currentPhase:p,onNextPhase:m,onPrevPhase:I,onSetPhase:O,isAutoAbilitiesEnabled:F,onToggleAutoAbilities:G})=>{const J=[0,1,2,3],V=()=>{let re="bg-gray-500",de="Connecting to server...";return c==="Connected"?(re="bg-green-500 animate-pulse",de="Connected"):c==="Disconnected"&&(re="bg-red-500",de="Disconnected. Retrying..."),s.jsxs("div",{className:"flex items-center space-x-2",title:de,children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${re} transition-colors`}),s.jsx("span",{className:"text-sm text-gray-400 hidden sm:block",children:c})]})};return s.jsxs("header",{className:"fixed top-0 left-0 right-0 h-14 bg-panel-bg bg-opacity-80 backdrop-blur-sm z-50 flex items-center justify-between px-4 shadow-lg",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-bold text-indigo-400 hidden lg:block",children:"New Avalon"}),s.jsx(V,{}),s.jsxs("div",{className:"flex items-center space-x-3",children:[e&&s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-400 hidden md:inline",children:"ID:"}),s.jsx("span",{className:"font-mono bg-gray-700 px-2 py-1 rounded text-indigo-300 w-24 md:w-44 text-center truncate",children:e})]}),s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer hidden md:flex",title:"Hidden games do not appear in the 'Join Game' list.",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:re=>U(re.target.checked),disabled:t||!h,className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500 disabled:opacity-70 disabled:cursor-not-allowed"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Hidden"})]}),s.jsx("span",{className:"text-gray-600 hidden md:inline",children:"|"}),s.jsx("button",{onClick:v,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Tokens"}),s.jsx("button",{onClick:C,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Counters"})]})]}),t&&s.jsxs("div",{className:"absolute left-1/2 transform -translate-x-1/2 flex items-center bg-gray-800 rounded-lg p-1 border border-gray-700 shadow-md",children:[s.jsx("button",{onClick:I,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",title:"Previous Phase",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M15 6 L8 12 L15 18 Z"})})}),s.jsx("select",{value:p,onChange:re=>O(parseInt(re.target.value)),className:"bg-gray-800 text-white font-bold text-sm text-center border-none focus:ring-0 cursor-pointer appearance-none px-2 min-w-[120px]",children:ni.map((re,de)=>s.jsx("option",{value:de,children:re},de))}),s.jsx("button",{onClick:m,className:"w-8 h-8 flex items-center justify-center text-gray-300 hover:text-white hover:bg-gray-700 rounded transition-colors",title:"Next Phase",children:s.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M9 6 L16 12 L9 18 Z"})})})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[t&&s.jsxs("label",{className:"flex items-center space-x-1.5 cursor-pointer bg-gray-800 px-2 py-1 rounded border border-gray-600",title:"Automatically attach counters/tokens when clicking your cards.",children:[s.jsx("input",{type:"checkbox",checked:F,onChange:re=>G(re.target.checked),className:"w-4 h-4 text-indigo-600 bg-gray-700 border-gray-600 rounded focus:ring-indigo-500"}),s.jsx("span",{className:"text-sm text-gray-300",children:"Auto-Ability"})]}),t?h&&s.jsx("button",{onClick:r,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded text-sm hidden md:block",children:"New Game"}):s.jsx("button",{onClick:n,disabled:!h,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded text-sm animate-pulse disabled:bg-gray-600 disabled:opacity-70 disabled:cursor-not-allowed disabled:animate-none",children:"Start Game"}),s.jsxs("div",{className:"flex items-center space-x-2 hidden lg:flex",children:[s.jsx("label",{htmlFor:"game-mode",className:"text-sm font-medium text-gray-300",children:"Mode:"}),s.jsxs("select",{id:"game-mode",value:T,onChange:re=>j(re.target.value),disabled:t||!h,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[s.jsx("option",{value:An.FreeForAll,children:"FFA"}),s.jsx("option",{value:An.TwoVTwo,children:"2v2"}),s.jsx("option",{value:An.ThreeVOne,children:"3v1"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsx("label",{htmlFor:"grid-size",className:"text-sm font-medium text-gray-300",children:"Size:"}),s.jsxs("select",{id:"grid-size",value:l,onChange:re=>o(parseInt(re.target.value,10)),disabled:t||!h,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"4",children:"4x4"}),s.jsx("option",{value:"5",children:"5x5"}),s.jsx("option",{value:"6",children:"6x6"}),s.jsx("option",{value:"7",children:"7x7"})]})]}),s.jsxs("div",{className:"flex items-center space-x-2 hidden xl:flex",children:[s.jsx("label",{htmlFor:"dummy-players",className:"text-sm font-medium text-gray-300",children:"Dummies:"}),s.jsx("select",{id:"dummy-players",value:a,onChange:re=>i(parseInt(re.target.value,10)),disabled:t||!h,className:"bg-gray-700 border border-gray-600 text-white text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2 disabled:opacity-70 disabled:cursor-not-allowed",children:J.map(re=>s.jsx("option",{value:re,disabled:u+re>gg,children:re},re))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[h&&t&&s.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white font-bold p-2 rounded text-sm",title:"Force sync game state and refresh images.",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded text-sm",title:"Return to Main Menu",children:"Exit"})]})]})]})},vg=({isOpen:e,onClose:t,onJoin:n,games:r})=>{const[l,o]=S.useState("");if(!e)return null;const a=()=>{l.trim()&&n(l.trim().toUpperCase())};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Join an Existing Game"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Active Games"}),s.jsx("div",{className:"h-[40rem] overflow-y-auto pr-2 border-b border-gray-700 pb-2 mb-6",children:r.length>0?s.jsx("ul",{className:"space-y-2",children:r.map(i=>s.jsx("li",{children:s.jsxs("button",{onClick:()=>n(i.gameId),className:"w-full text-left p-3 bg-gray-700 hover:bg-indigo-600 rounded-lg transition-colors flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Game ID:"}),s.jsx("span",{className:"block font-mono text-indigo-300",children:i.gameId})]}),s.jsxs("span",{className:"bg-gray-600 px-2 py-1 rounded-full text-sm font-bold",children:[i.playerCount," / 4"]})]})},i.gameId))}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("p",{className:"text-gray-400 text-center",children:["No active games found. ",s.jsx("br",{})," Why not create one?"]})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Or Join with Code"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:l,onChange:i=>o(i.target.value),placeholder:"Enter Game ID",className:"flex-grow bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:i=>i.key==="Enter"&&a()}),s.jsx("button",{onClick:a,disabled:!l.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Join"})]}),s.jsx("div",{className:"flex justify-end mt-8",children:s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"})})]})})},Nc=({isOpen:e,onClose:t,title:n,player:r,cards:l,setDraggedItem:o,onCardContextMenu:a,onCardDoubleClick:i,canInteract:u,isDeckView:c=!1,playerColorMap:f,localPlayerId:v,imageRefreshVersion:C})=>{const[T,j]=S.useState(null),E=S.useRef(null);if(!e)return null;const U=m=>{T!==null&&E.current&&!E.current.contains(m.relatedTarget)&&t()},d=Math.ceil(l.length/5)>5;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 pointer-events-auto",onClick:t,children:s.jsxs("div",{ref:E,onClick:m=>m.stopPropagation(),onDragLeave:U,className:"bg-gray-800 rounded-lg p-4 shadow-xl w-auto max-w-4xl max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold",children:n}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:`bg-gray-900 rounded p-2 ${d?"overflow-y-auto":""}`,style:d?{height:"calc(5 * 7rem + 4 * 0.5rem + 1rem)"}:{},children:s.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[l.map((m,I)=>s.jsx("div",{style:{visibility:T===I?"hidden":"visible"},draggable:u,onDragStart:()=>{u&&(j(I),o({card:m,source:c?"deck":"discard",playerId:r.id,cardIndex:I}))},onDragEnd:()=>{j(null),o(null)},onContextMenu:O=>u&&(a==null?void 0:a(O,I)),onDoubleClick:()=>u&&i(I),"data-interactive":u,className:`w-28 h-28 ${u?"cursor-grab":"cursor-default"}`,children:s.jsx(Gt,{card:m,isFaceUp:!0,playerColorMap:f,localPlayerId:v,imageRefreshVersion:C})},`${m.id}-${I}`)),l.length===0&&s.jsx("p",{className:"col-span-5 w-full text-center text-gray-400 py-8",children:"Empty"})]})})]})})},xg=({isOpen:e,onClose:t,setDraggedItem:n,openContextMenu:r,canInteract:l,anchorEl:o,imageRefreshVersion:a,draggedItem:i})=>{if(!e||!o)return null;const u=(ti[ve.Tokens]||[]).filter(v=>!v.allowedPanels||v.allowedPanels.includes("TOKEN_PANEL")),c={position:"fixed",top:`${o.top}px`,left:`${o.left}px`,zIndex:60},f=v=>{if(i&&i.source==="token_panel"){const C=v.currentTarget.getBoundingClientRect(),T=v.clientX,j=v.clientY;(T<C.left||T>=C.right||j<C.top||j>=C.bottom)&&t()}};return s.jsx("div",{style:c,className:"pointer-events-auto",onDragLeave:f,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-96 max-w-[90vw] h-auto flex flex-col",onClick:v=>v.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Tokens"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("div",{className:"flex-grow bg-gray-900 rounded p-2 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-3 gap-2",children:u.map(v=>s.jsx("div",{draggable:l,onDragStart:()=>l&&n({card:v,source:"token_panel"}),onDragEnd:()=>n(null),onContextMenu:C=>l&&r(C,"token_panel_item",{card:v}),"data-interactive":l,className:`w-24 h-24 ${l?"cursor-grab":"cursor-not-allowed"}`,children:s.jsx(Gt,{card:v,isFaceUp:!0,playerColorMap:new Map,imageRefreshVersion:a})},v.id))})})]})})},wg="https://res.cloudinary.com/dxxh6meej/image/upload/v1763653192/background_counter_socvss.png",Cg=({isOpen:e,onClose:t,setDraggedItem:n,canInteract:r,anchorEl:l,imageRefreshVersion:o,onCounterMouseDown:a,cursorStack:i})=>{const[u,c]=S.useState(null),[f,v]=S.useState({x:0,y:0});if(!e||!l)return null;const C={position:"fixed",top:`${l.top}px`,left:`${l.left}px`,zIndex:60},T=p=>{let m=Xi[p];if(m&&o){const I=m.includes("?")?"&":"?";m=`${m}${I}v=${o}`}return m},j=(p,m,I)=>{if(p.button===2){const O={id:`tooltip_${m}`,deck:"counter",name:I,imageUrl:"",fallbackImage:"",power:0,ability:qo[m]||"",types:[],statuses:[]};c(O),v({x:p.clientX,y:p.clientY})}else p.button===0&&r&&a(m,p)},E=()=>{c(null)},U=p=>{u&&v({x:p.clientX,y:p.clientY})},h=()=>{i&&t(),c(null)},d=p=>{const m=p.currentTarget.getBoundingClientRect(),I=p.clientX,O=p.clientY;(I<m.left||I>=m.right||O<m.top||O>=m.bottom)&&t()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{style:C,className:"pointer-events-auto counter-modal-content",onMouseLeave:h,onDragLeave:d,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-xl w-80 max-w-[90vw] h-auto flex flex-col",onClick:p=>p.stopPropagation(),children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Counters"}),s.jsx("button",{onClick:t,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-1 px-3 rounded text-sm",children:"Close"})]}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Hold right click to view hints"})]}),s.jsx("div",{className:"bg-gray-900 rounded p-4",children:s.jsx("div",{className:"grid grid-cols-4 gap-1",children:ig.map(p=>{const m=T(p.type),I=p.type.startsWith("Power");return s.jsx("button",{onContextMenu:O=>O.preventDefault(),onMouseDown:O=>j(O,p.type,p.label),onMouseUp:E,onMouseMove:U,className:`w-12 h-12 rounded-full border-white flex items-center justify-center shadow-lg mx-auto relative select-none ${r?"cursor-pointer hover:ring-2 ring-indigo-400":"cursor-not-allowed"}`,style:{backgroundImage:`url(${wg})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"},children:m?s.jsx("img",{src:m,alt:p.label,className:"w-full h-full object-contain p-1 pointer-events-none"}):s.jsx("span",{className:`font-bold text-white pointer-events-none ${I?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:I?p.label:p.type.charAt(0)})},p.type)})})})]})}),u&&s.jsx(Zi,{x:f.x,y:f.y,children:s.jsx(hs,{card:u,statusDescriptions:qo})})]})},qf=({player:e,onDragStart:t})=>{const n=Dt[e.color]||Dt.blue;return s.jsxs("div",{draggable:!0,onDragStart:r=>t(r,e.id),className:"flex items-center gap-2 bg-gray-600 p-2 rounded-md cursor-grab active:cursor-grabbing",children:[s.jsx("div",{className:`w-4 h-4 rounded-full ${n.bg} border border-white/50`}),s.jsx("span",{className:"font-medium",children:e.name})]})},Ec=({teamId:e,teamName:t,players:n,capacity:r,onDrop:l,onDragOver:o,onPlayerDragStart:a,isOver:i})=>s.jsxs("div",{onDrop:u=>l(u,e),onDragOver:o,className:`bg-gray-800 p-4 rounded-lg border-2 ${i?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsxs("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:[t," (",n.length,"/",r,")"]}),s.jsx("div",{className:"space-y-2 min-h-[4rem]",children:n.map(u=>s.jsx(qf,{player:u,onDragStart:a},u.id))})]}),kg=({players:e,gameMode:t,onCancel:n,onConfirm:r})=>{const[l,o]=S.useState(e),[a,i]=S.useState([]),[u,c]=S.useState([]),[f,v]=S.useState(null),[C,T]=S.useState(null),{team1Capacity:j,team2Capacity:E}=S.useMemo(()=>t===An.TwoVTwo?{team1Capacity:2,team2Capacity:2}:t===An.ThreeVOne?{team1Capacity:3,team2Capacity:1}:{team1Capacity:0,team2Capacity:0},[t]),U=l.length===0&&a.length===j&&u.length===E,h=(I,O)=>{I.dataTransfer.effectAllowed="move",v(O)},d=I=>{I.preventDefault(),I.dataTransfer.dropEffect="move"},p=(I,O)=>{if(I.preventDefault(),f===null)return;const F=e.find(R=>R.id===f);if(!F)return;const G=[...l],J=[...a],V=[...u],re=G.findIndex(R=>R.id===f);re>-1&&G.splice(re,1);const de=J.findIndex(R=>R.id===f);de>-1&&J.splice(de,1);const pe=V.findIndex(R=>R.id===f);pe>-1&&V.splice(pe,1),O===1&&J.length<j?J.push(F):O===2&&V.length<E?V.push(F):G.push(F),o(G),i(J),c(V),v(null),T(null)},m=()=>{if(!U)return;const I={1:a.map(O=>O.id),2:u.map(O=>O.id)};r(I)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg p-8 shadow-xl w-full max-w-4xl",children:[s.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Assign Teams"}),s.jsx("p",{className:"text-gray-400 mb-6",children:"Drag and drop players into their teams."}),s.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[s.jsxs("div",{onDrop:I=>p(I,"unassigned"),onDragOver:I=>{d(I),T("unassigned")},onDragLeave:()=>T(null),className:`bg-gray-800 p-4 rounded-lg border-2 ${C==="unassigned"?"border-indigo-500":"border-gray-700"} transition-colors`,children:[s.jsx("h3",{className:"text-lg font-bold mb-3 border-b border-gray-700 pb-2",children:"Unassigned Players"}),s.jsx("div",{className:"space-y-2",children:l.map(I=>s.jsx(qf,{player:I,onDragStart:h},I.id))})]}),s.jsx(Ec,{teamId:1,teamName:"Team 1",players:a,capacity:j,onDrop:p,onDragOver:I=>{d(I),T(1)},onPlayerDragStart:h,isOver:C===1}),s.jsx(Ec,{teamId:2,teamName:"Team 2",players:u,capacity:E,onDrop:p,onDragOver:I=>{d(I),T(2)},onPlayerDragStart:h,isOver:C===2})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-4",children:[s.jsx("button",{type:"button",onClick:n,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{type:"button",onClick:m,disabled:!U,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors",children:"Confirm Teams & Start"})]})]})})},Sg=({players:e,localPlayer:t,onReady:n,onCancel:r})=>{const l=()=>{t.isReady||n()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Ready to Start?"}),s.jsx("p",{className:"text-gray-400 text-center mb-6",children:"The game will begin once all players are ready. You can still change your name and deck."}),s.jsx("ul",{className:"space-y-3 mb-8",children:e.map(o=>s.jsxs("li",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-lg",children:[s.jsxs("span",{className:"font-medium",children:[o.name," ",o.id===t.id&&"(You)"]}),o.isReady?s.jsxs("span",{className:"flex items-center text-green-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Ready"]}):s.jsxs("span",{className:"flex items-center text-yellow-400",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1 animate-pulse",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 102 0V6zM9 14a1 1 0 112 0 1 1 0 01-2 0z",clipRule:"evenodd"})}),"Waiting..."]})]},o.id))}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx("button",{onClick:l,disabled:t.isReady,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded disabled:bg-gray-500 disabled:cursor-not-allowed transition-colors text-lg",children:t.isReady?"Waiting for others...":"I'm Ready"}),s.jsx("button",{onClick:r,className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Cancel Start"})]})]})})},bc=({card:e,ownerPlayer:t,onClose:n,statusDescriptions:r,allPlayers:l,imageRefreshVersion:o})=>{var T,j,E;const[a,i]=S.useState(e.imageUrl);S.useEffect(()=>{let U=e.imageUrl;if(o&&U){const h=U.includes("?")?"&":"?";U=`${U}${h}v=${o}`}i(U)},[e.imageUrl,o]);const u=()=>{let U=e.fallbackImage;if(o&&U){const h=U.includes("?")?"&":"?";U=`${U}${h}v=${o}`}a!==U&&i(U)},c=t==null?void 0:t.color,f=c?Dt[c].border:((T=Wf[e.deck])==null?void 0:T.color)||"border-gray-300",v=S.useMemo(()=>!t||t.teamId===void 0?null:`Team ${t.teamId}`,[t]),C=(e.statuses??[]).reduce((U,h)=>(U[h.type]||(U[h.type]=[]),U[h.type].push(h.addedByPlayerId),U),{});return s.jsx("div",{onClick:n,className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[102]",children:s.jsxs("div",{onClick:U=>U.stopPropagation(),className:`bg-gray-800 rounded-lg shadow-2xl w-full max-w-4xl h-[40rem] p-6 flex gap-6 border-4 ${f}`,children:[s.jsx("div",{className:"w-1/2 h-full flex-shrink-0",children:a?s.jsx("img",{src:a,onError:u,alt:e.name,className:"w-full h-full object-contain rounded-lg"}):s.jsx("div",{className:"w-full h-full bg-gray-700 rounded-lg flex items-center justify-center text-2xl font-bold text-center p-4",children:e.name})}),s.jsxs("div",{className:"w-1/2 h-full flex flex-col gap-4 overflow-y-auto pr-2 text-left",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-4xl font-bold",children:e.name}),s.jsx("p",{className:"text-lg text-gray-400 capitalize",children:((j=e.types)==null?void 0:j.join(", "))||`${e.deck} Card`})]}),s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Power:"})," ",s.jsx("span",{className:"text-xl font-bold",children:e.power})]}),s.jsxs("p",{className:"mt-2",children:[s.jsx("strong",{className:"text-indigo-400 text-lg",children:"Ability:"})," ",s.jsx("span",{className:"text-gray-200 text-base",children:Jf(e.ability)})]})]}),t&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{className:"text-indigo-400",children:"Owner:"})," ",t.name]}),v&&s.jsxs("p",{className:"mt-1",children:[s.jsx("strong",{className:"text-indigo-400",children:"Team:"})," ",v]})]}),e.statuses&&e.statuses.length>0&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 text-lg font-bold mb-2",children:"Statuses"}),s.jsx("ul",{className:"space-y-2 text-sm",children:Object.entries(C).map(([U,h])=>{const d=h.reduce((m,I)=>(m[I]=(m[I]||0)+1,m),{}),p=Object.entries(d).map(([m,I])=>{var F;return`${((F=l.find(G=>G.id===Number(m)))==null?void 0:F.name)||`Player ${m}`} (x${I})`}).join(", ");return s.jsxs("li",{children:[s.jsx("strong",{className:"text-gray-200",children:U})," ",s.jsxs("span",{className:"text-gray-400 text-xs ml-1",children:["- ",p]}),s.jsx("p",{className:"text-gray-400 text-xs pl-2 mt-0.5",children:r[U]||"No description available."})]},U)})})]}),e.flavorText&&s.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-indigo-400 font-bold mb-1",children:"Flavor Text"}),s.jsx("p",{className:"italic text-gray-400",children:(E=e.flavorText)==null?void 0:E.split(`
`).map((U,h)=>s.jsxs(bn.Fragment,{children:[h>0&&s.jsx("br",{}),U]},h))})]}),s.jsx("button",{onClick:n,className:"mt-auto bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded self-end",children:"Close"})]})]})})},Ng=({fromPlayer:e,cardCount:t,onAccept:n,onDecline:r})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[105]",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-md text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reveal Request"}),s.jsxs("p",{className:"text-gray-300 mb-6",children:[s.jsx("span",{className:"font-bold",children:e.name})," would like to see ",t>1?`${t} of your hidden cards`:"one of your hidden cards","."]}),s.jsxs("div",{className:"flex justify-center space-x-4",children:[s.jsx("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Decline"}),s.jsx("button",{onClick:n,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded transition-colors",children:"Accept"})]})]})}),Qf=({x:e,y:t,items:n,onClose:r})=>{const l=S.useRef(null),[o,a]=S.useState({top:t,left:e});return S.useEffect(()=>{if(l.current){const{innerWidth:i,innerHeight:u}=window,{offsetWidth:c,offsetHeight:f}=l.current,v=e+c>i?i-c-10:e,C=t+f>u?u-f-10:t;a({top:C,left:v})}},[e,t,n]),ps.createPortal(s.jsx("div",{ref:l,className:"fixed bg-gray-900 border border-gray-700 rounded-md shadow-lg z-[100] py-1",style:{top:o.top,left:o.left},onClick:i=>i.stopPropagation(),children:n.map((i,u)=>"isDivider"in i?s.jsx("hr",{className:"border-gray-700 my-1"},`divider-${u}`):"onClick"in i?s.jsx("button",{onClick:()=>{i.disabled||(i.onClick(),r())},disabled:i.disabled,className:"block w-full text-left px-4 py-1 text-sm text-white hover:bg-indigo-600 disabled:text-gray-500 disabled:cursor-not-allowed disabled:bg-gray-800",style:{fontWeight:i.isBold?"bold":"normal"},children:i.label},u):s.jsxs("div",{className:"flex items-center justify-between px-4 py-1 text-sm text-white w-full space-x-2",children:[s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onRemove()},disabled:i.removeDisabled,className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-red-600 rounded disabled:bg-gray-800 disabled:text-gray-500 disabled:cursor-not-allowed font-mono text-lg",children:"-"}),s.jsx("span",{className:"flex-grow text-center",children:i.label}),s.jsx("button",{onClick:c=>{c.stopPropagation(),i.onAdd()},className:"w-7 h-6 flex items-center justify-center bg-gray-700 hover:bg-green-600 rounded font-mono text-lg",children:"+"})]},u))}),document.body)},Eg=ag(),jc=Hf(),sn=100,bg=e=>{if(typeof e.deckName!="string"||!Array.isArray(e.cards))return{isValid:!1,error:"Invalid file structure. Must have 'deckName' (string) and 'cards' (array)."};let t=0;for(const n of e.cards){if(typeof n.cardId!="string"||typeof n.quantity!="number"||n.quantity<1||!Number.isInteger(n.quantity))return{isValid:!1,error:`Invalid card entry: ${JSON.stringify(n)}`};if(!Yo(n.cardId))return{isValid:!1,error:`Card with ID '${n.cardId}' does not exist.`};t+=n.quantity}return t>sn?{isValid:!1,error:`Deck exceeds the ${sn} card limit (found ${t} cards).`}:t===0&&e.cards.length>0?{isValid:!1,error:"Deck contains cards with zero quantity."}:{isValid:!0,deckFile:e}},jg=({isOpen:e,onClose:t,setViewingCard:n})=>{const[r,l]=S.useState("My Custom Deck"),[o,a]=S.useState(new Map),[i,u]=S.useState(""),[c,f]=S.useState("all"),[v,C]=S.useState(""),[T,j]=S.useState(null),E=S.useRef(null),[U,h]=S.useState(null),d=S.useMemo(()=>Array.from(o.values()).reduce((R,Z)=>R+Z,0),[o]),p=S.useCallback(R=>{const Z=Yo(R);return Z&&Z.faction&&Object.values(ve).includes(Z.faction)?Z.faction:Jo.has(R)?ve.Command:ve.Custom},[]),m=S.useMemo(()=>Eg.filter(({id:R,card:Z})=>{if(Z.allowedPanels&&!Z.allowedPanels.includes("DECK_BUILDER"))return!1;if(c==="command"){if(!Jo.has(R))return!1}else if(c!=="all")if(Z.faction){if(Z.faction!==c)return!1}else{const W=jc.find(H=>H.cards.some(M=>M.cardId===R));if(!W||W.id!==c)return!1}if(v.trim()){const W=parseInt(v.trim(),10);if(!isNaN(W)&&Z.power!==W)return!1}if(i.trim()){const W=i.toLowerCase(),H=Z.name.toLowerCase().includes(W),M=Z.ability.toLowerCase().includes(W);if(!H&&!M)return!1}return!0}),[i,c,v]),I=S.useCallback(R=>{d>=sn||a(Z=>{const W=new Map(Z),H=W.get(R)||0;return W.set(R,H+1),W})},[d]),O=S.useCallback(R=>{a(Z=>{const W=new Map(Z);return W.delete(R),W})},[]),F=S.useCallback((R,Z)=>{a(W=>{const H=new Map(W),M=H.get(R)||0;let A=M+Z;const $=Array.from(H.values()).reduce((fe,je)=>fe+je,0),ne=$+Z;return Z>0&&ne>sn&&(A=M+(sn-$)),A<=0?H.delete(R):H.set(R,A),H})},[]),G=()=>{const R=Array.from(o.entries()).map(([A,$])=>({cardId:A,quantity:$})),Z={deckName:r,cards:R},W=new Blob([JSON.stringify(Z,null,2)],{type:"application/json"}),H=URL.createObjectURL(W),M=document.createElement("a");M.href=H,M.download=`${r.replace(/ /g,"_")}.json`,document.body.appendChild(M),M.click(),document.body.removeChild(M),URL.revokeObjectURL(H)},J=R=>{var H;const Z=(H=R.target.files)==null?void 0:H[0];if(!Z)return;const W=new FileReader;W.onload=M=>{var A;try{const $=(A=M.target)==null?void 0:A.result,ne=JSON.parse($),fe=bg(ne);if("error"in fe)alert(`Error loading deck: ${fe.error}`);else{const{deckFile:je}=fe;l(je.deckName);const ae=new Map;je.cards.forEach(_e=>ae.set(_e.cardId,_e.quantity)),a(ae)}}catch($){alert(`Error reading file: ${$ instanceof Error?$.message:"Invalid file format."}`)}finally{R.target&&(R.target.value="")}},W.readAsText(Z)},V=(R,Z)=>{const W=p(R),H={...Z,id:`detail-${R}`,deck:W};n({card:H})},re=S.useCallback((R,Z)=>{E.current&&clearTimeout(E.current),E.current=window.setTimeout(()=>{j({x:R.clientX,y:R.clientY,cardDef:Z})},250)},[]),de=S.useCallback(R=>{j(Z=>Z?{...Z,x:R.clientX,y:R.clientY}:null)},[]),pe=S.useCallback(()=>{E.current&&clearTimeout(E.current),E.current=null,j(null)},[]);return S.useEffect(()=>{const R=()=>h(null);window.addEventListener("click",R);const Z=W=>{W.target.closest("[data-interactive]")||R()};return window.addEventListener("contextmenu",Z),()=>{window.removeEventListener("click",R),window.removeEventListener("contextmenu",Z)}},[]),e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[101]",onClick:t,children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 shadow-xl w-[95vw] h-[90vh] max-w-7xl flex flex-col gap-4",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"flex justify-between items-center flex-shrink-0",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Deck Builder"}),s.jsx("button",{onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Close"})]}),s.jsxs("div",{className:"flex-grow flex gap-6 min-h-0",children:[s.jsxs("div",{className:"w-1/3 bg-gray-900 rounded-lg p-4 flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 mb-4 space-y-3",children:[s.jsx("input",{type:"text",value:r,onChange:R=>l(R.target.value),placeholder:"Deck Name",className:"w-full bg-gray-700 border border-gray-600 text-white font-bold text-lg rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:G,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded",children:"Save"}),s.jsxs("label",{className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-3 rounded cursor-pointer text-center",children:["Load",s.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:J})]})]}),s.jsxs("div",{className:`text-center font-bold text-lg ${d>sn?"text-red-500":"text-gray-300"}`,children:["Total Cards: ",d," / ",sn]})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2 space-y-2",children:Array.from(o.entries()).map(([R,Z])=>{const W=Yo(R);return W?s.jsxs("div",{className:"bg-gray-800 p-2 rounded flex items-center justify-between",onContextMenu:H=>{H.preventDefault(),H.stopPropagation();const M=[{label:"View",onClick:()=>V(R,W)},{isDivider:!0},{label:"Add to Deck",onClick:()=>F(R,1),disabled:d>=sn},{label:"Remove from Deck",onClick:()=>F(R,-1)},{label:"Remove all copies",onClick:()=>O(R)}];h({x:H.clientX,y:H.clientY,items:M,onClose:()=>h(null)})},"data-interactive":"true",children:[s.jsx("span",{className:"flex-grow truncate",title:W.name,onMouseEnter:H=>re(H,W),onMouseMove:de,onMouseLeave:pe,children:W.name}),s.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>F(R,-1),className:"w-6 h-6 bg-gray-700 rounded",children:"-"}),s.jsx("span",{className:"font-mono w-6 text-center",children:Z}),s.jsx("button",{onClick:()=>F(R,1),className:"w-6 h-6 bg-gray-700 rounded",children:"+"}),s.jsx("button",{onClick:()=>O(R),className:"w-6 h-6 bg-red-600 text-white rounded text-sm",children:"X"})]})]},R):null})})]}),s.jsxs("div",{className:"w-2/3 bg-gray-900 rounded-lg p-4 flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 mb-4 flex gap-2 items-center",children:[s.jsxs("select",{value:c,onChange:R=>f(R.target.value),className:"bg-gray-700 border border-gray-600 rounded p-2",children:[s.jsx("option",{value:"all",children:"All Factions"}),jc.map(R=>s.jsx("option",{value:R.id,children:R.name},R.id)),s.jsx("option",{value:"command",children:"Command"})]}),s.jsx("input",{type:"text",value:v,onChange:R=>C(R.target.value),placeholder:"Power",className:"bg-gray-700 border border-gray-600 rounded p-2 w-24"}),s.jsx("input",{type:"text",value:i,onChange:R=>u(R.target.value),placeholder:"Search name or ability...",className:"bg-gray-700 border border-gray-600 rounded p-2 flex-grow"})]}),s.jsx("div",{className:"flex-grow overflow-y-auto pr-2",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2",children:m.map(({id:R,card:Z})=>s.jsxs("div",{className:"relative group w-32 h-32","data-interactive":"true",children:[s.jsx("div",{className:"w-full h-full",children:s.jsx(Gt,{card:{...Z,id:`lib_${R}`,deck:p(R)},isFaceUp:!0,playerColorMap:new Map})}),s.jsx("div",{onClick:()=>I(R),onContextMenu:W=>{W.preventDefault(),W.stopPropagation();const H=[{label:"View",onClick:()=>V(R,Z)},{isDivider:!0},{label:"Add to Deck",onClick:()=>I(R),disabled:d>=sn}];h({x:W.clientX,y:W.clientY,items:H,onClose:()=>h(null)})},onMouseEnter:W=>re(W,Z),onMouseMove:de,onMouseLeave:pe,className:"absolute inset-0 bg-black bg-opacity-60 opacity-0 group-hover:opacity-100 flex items-center justify-center cursor-pointer transition-opacity",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"Add to Deck"})})]},R))})})]})]})]})}),T&&s.jsx(Zi,{x:T.x,y:T.y,children:s.jsx(hs,{card:{...T.cardDef,id:"tooltip",deck:ve.Command}})}),U&&s.jsx(Qf,{...U})]}):null},Tg=({isOpen:e,onClose:t,onSave:n})=>{const[r,l]=S.useState(""),[o,a]=S.useState(!1);if(S.useEffect(()=>{if(e){const u=localStorage.getItem("custom_ws_url")||"";l(u);const c=localStorage.getItem("ui_list_mode");a(c===null?!0:c==="true")}},[e]),!e)return null;const i=()=>{localStorage.setItem("ui_list_mode",String(o)),window.dispatchEvent(new Event("storage")),n(r)};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-800 rounded-lg p-8 shadow-xl w-full max-w-xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Settings"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"server-url",className:"block text-sm font-medium text-gray-300 mb-1",children:"Server Address"}),s.jsx("input",{id:"server-url",type:"text",value:r,onChange:u=>l(u.target.value),placeholder:"e.g., ws://localhost:8080 or wss://my-server.com",className:"w-full bg-gray-700 border border-gray-600 text-white font-mono rounded-lg p-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyUp:u=>u.key==="Enter"&&i()}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter the full WebSocket address for the server. Leave blank to use the default."})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-bold",children:"List Mode Interface"}),s.jsx("p",{className:"text-xs text-gray-400",children:"In List Mode, your panel occupies the full left side of the screen, and cards in hand are shown as a list."})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o,onChange:u=>a(u.target.checked)}),s.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]}),s.jsxs("div",{className:"flex justify-end mt-8 space-x-3",children:[s.jsx("button",{type:"button",onClick:t,className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"Cancel"}),s.jsx("button",{onClick:i,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded transition-colors",children:"Save & Apply"})]})]})})},Xf="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253337/SYN_RIOT_AGENT_jurf4t.png",Zf="/images/cards/SYN_RIOT_AGENT.png",ep="https://res.cloudinary.com/dxxh6meej/image/upload/v1763253332/OPT_PRINCEPS_w3o5lq.png",tp="/images/cards/OPT_PRINCEPS.png",Ig=e=>e===1?{id:`demo-riot-${Math.random()}`,deck:ve.SynchroTech,name:"Riot Agent",imageUrl:Xf,fallbackImage:Zf,power:3,ability:`Support  Act: Place 1 stun on adjacent card. 
Act: Push an adjacent card 1 cell. ay take its place.`,ownerId:1,ownerName:"Player 1",statuses:[],types:["Unit","SynchroTech"]}:{id:`demo-princeps-${Math.random()}`,deck:ve.Optimates,name:"Princeps",imageUrl:ep,fallbackImage:tp,power:3,ability:`Act: Destroy a card in a row if it has a target or threat. 
Support  Shield 1.`,ownerId:2,ownerName:"Player 2",statuses:[],types:["Unit","Optimates"]},_g=new Map([[1,"blue"],[2,"red"]]),uo=[{id:"intro",title:"1. Introduction",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:'"New Avalon: Skirmish"'})," is a tactical card game where opponents control units simultaneously on a limited battlefield (grid)."]}),s.jsxs("p",{children:["The game uses a ",s.jsx("strong",{children:"Priority System"}),": whenever a player performs an action, other players get a chance to respond with Command cards."]})]}),demoConfig:[null,1,null,null,2,null,null,null,null]},{id:"components",title:"2. Components",content:s.jsx("div",{className:"text-left",children:s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Deck:"})," 15100 cards (Units and Commands)."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Battlefield:"})," Grid of 5x5, 6x6, or 7x7 cells."]})]})})},{id:"turn_order",title:"3. Turn Order",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"mb-2",children:"A turn consists of the following phases:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"Deployment Phase:"})," Players place units on the board."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Abilities Phase:"})," Players trigger unit abilities."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Scoring Phase:"})," Players score points from rows/columns."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"Draw Phase:"})," Draw cards up to 6."]}),s.jsxs("li",{children:[s.jsx("strong",{children:"End Phase:"})," Pass the First Player token."]})]}),s.jsx("p",{className:"mt-2 italic text-gray-400",children:"Note: Command cards can be played at any time a player has Priority."})]})},{id:"priority",title:"4. Priority",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"Priority"})," is the right to perform an action."]}),s.jsx("p",{className:"mb-2",children:"A player receives priority:"}),s.jsxs("ul",{className:"list-disc list-inside ml-2 mb-2",children:[s.jsx("li",{children:"After declaring an action."}),s.jsx("li",{children:"After their action fully resolves."}),s.jsx("li",{children:"When phases change."}),s.jsx("li",{children:"After an opponent declares an action (to respond)."})]}),s.jsxs("p",{children:["When you have priority, you can: ",s.jsx("strong",{children:"Play a Command"}),", ",s.jsx("strong",{children:"Activate an Ability"}),", or ",s.jsx("strong",{children:"Pass"}),"."]})]})},{id:"stack",title:"5. The Stack",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-2",children:["Actions that can be interrupted go into the ",s.jsx("strong",{children:"Stack"}),"."]}),s.jsxs("ul",{className:"list-disc list-inside ml-2 mb-2",children:[s.jsx("li",{children:"Commands"}),s.jsx("li",{children:"Active Abilities"}),s.jsx("li",{children:"Triggered Abilities"})]}),s.jsxs("p",{className:"mb-2",children:[s.jsx("strong",{children:"LIFO (Last In, First Out):"})," The last action added to the stack is resolved first."]}),s.jsx("p",{className:"text-gray-400 italic",children:"Passive abilities do not use the stack."})]})},{id:"statuses_support",title:"6. Status: Support",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-4",children:["A unit gains ",s.jsx("strong",{children:"Support"})," if an allied unit is orthogonally adjacent (up, down, left, or right) to it."]}),s.jsx("p",{children:"Many card abilities become stronger if the unit has Support."})]}),demoConfig:[null,null,null,null,1,1,null,null,null],demoCardStatuses:{4:[{type:"Support",addedByPlayerId:1}],5:[{type:"Support",addedByPlayerId:1}]}},{id:"statuses_threat",title:"6. Status: Threat",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"mb-4",children:["A unit gains ",s.jsx("strong",{children:"Threat"})," in two situations:"]}),s.jsxs("ul",{className:"list-disc list-inside space-y-2",children:[s.jsx("li",{children:'It is "sandwiched" between two enemy units (orthogonally).'}),s.jsx("li",{children:'It is "pinned" against the edge of the board by an enemy unit.'})]}),s.jsx("p",{className:"mt-2",children:"Threatened units are often vulnerable to destruction or debuffs."})]}),demoConfig:[null,2,null,null,1,null,null,2,null],demoCardStatuses:{4:[{type:"Threat",addedByPlayerId:2}]}},{id:"deployment",title:"7. Deployment Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"mb-2",children:'Replaces old mechanics. The Active Player declares: "I am placing a unit."'}),s.jsx("p",{children:"Priority passes around. If everyone passes, the unit is placed face-up on an empty cell."}),s.jsx("p",{className:"mt-2",children:"Units cannot be placed on occupied cells."})]}),demoConfig:[null,null,null,null,1,null,null,null,null]},{id:"abilities",title:"8. Abilities Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsx("p",{children:"Players take turns activating their units' abilities."}),s.jsx("p",{children:"Announce ability  Place in Stack  Opponents respond  Resolve."})]})},{id:"scoring",title:"9. Scoring Phase",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{children:["A player selects ",s.jsx("strong",{children:"one row or column"}),"."]}),s.jsxs("p",{children:["They gain points equal to the total ",s.jsx("strong",{children:"Power"})," of all their units in that line."]}),s.jsx("p",{children:"Bonuses and penalties from statuses are applied."})]}),demoConfig:[1,1,1,null,null,null,null,null,null]},{id:"draw",title:"10. Draw Phase",content:s.jsx("div",{className:"text-left",children:s.jsxs("p",{children:["Each player draws cards from their deck until they have ",s.jsx("strong",{children:"6 cards"})," in hand."]})})},{id:"endgame",title:"12. End Game",content:s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{children:["The first player to reach ",s.jsx("strong",{children:"30 points"})," triggers the final round."]}),s.jsx("p",{children:"Every other player gets one last turn to try and beat that score."}),s.jsx("p",{children:"The player with the highest score wins."})]})},{id:"glossary",title:"13. Glossary",content:s.jsxs("dl",{className:"space-y-2 text-left",children:[s.jsx("dt",{className:"font-bold text-indigo-400",children:"Priority"}),s.jsx("dd",{className:"ml-4",children:"The right to act."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Stack"}),s.jsx("dd",{className:"ml-4",children:"LIFO queue for resolving actions."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Command"}),s.jsx("dd",{className:"ml-4",children:"One-time use card played from hand."}),s.jsx("dt",{className:"font-bold text-indigo-400",children:"Unit"}),s.jsx("dd",{className:"ml-4",children:"Card placed on the battlefield."})]})}],Pg=({config:e,cardStatuses:t})=>{const n=e||Array(9).fill(null);return s.jsx("div",{className:"bg-board-bg p-2 rounded-lg shadow-xl aspect-square w-full max-w-[400px] mx-auto grid grid-cols-3 grid-rows-3 gap-1",children:n.map((r,l)=>{const o=r?Ig(r):null;return o&&t&&t[l]&&(o.statuses=t[l]),s.jsx("div",{className:"bg-board-cell rounded flex items-center justify-center relative",children:o?s.jsx("div",{className:"w-full h-full p-0.5",children:s.jsx(Gt,{card:o,isFaceUp:!0,playerColorMap:_g,localPlayerId:1})}):s.jsx("div",{className:"w-1 h-1 bg-gray-600 rounded-full opacity-20"})},l)})})},Dg=({isOpen:e,onClose:t})=>{const[n,r]=S.useState(uo[0].id),l=S.useMemo(()=>uo.find(o=>o.id===n)||uo[0],[n]);return S.useEffect(()=>{e&&[Xf,ep,Zf,tp].forEach(a=>{const i=new Image;i.src=a})},[e]),e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-[100]",onClick:t,children:s.jsxs("div",{className:"bg-gray-900 w-[95vw] h-[90vh] rounded-xl shadow-2xl flex overflow-hidden border border-gray-700",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"w-1/4 min-w-[250px] bg-gray-800 border-r border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-800",children:s.jsx("h2",{className:"text-xl font-bold text-white",children:"Encyclopedia"})}),s.jsx("div",{className:"flex-grow overflow-y-auto p-2 space-y-1",children:uo.map(o=>s.jsx("button",{onClick:()=>r(o.id),className:`w-full text-left px-4 py-3 rounded-md transition-colors text-sm font-medium ${n===o.id?"bg-indigo-600 text-white shadow-md":"text-gray-400 hover:bg-gray-700 hover:text-gray-200"}`,children:o.title},o.id))}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:s.jsx("button",{onClick:t,className:"w-full bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 rounded transition-colors",children:"Close Rules"})})]}),s.jsxs("div",{className:"w-2/5 p-8 overflow-y-auto border-r border-gray-700 bg-gray-900 text-left",children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-6 border-b border-indigo-500 pb-2 inline-block",children:l.title}),s.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300 leading-relaxed text-left",children:l.content})]}),s.jsxs("div",{className:"w-[35%] bg-gray-800 flex flex-col items-center justify-center p-8 relative",children:[s.jsx("h3",{className:"absolute top-6 left-0 right-0 text-center text-gray-400 text-sm uppercase tracking-widest font-bold",children:"Visual Demonstration"}),s.jsx("div",{className:"w-full",children:s.jsx(Pg,{config:l.demoConfig,cardStatuses:l.demoCardStatuses})}),s.jsxs("div",{className:"mt-8 text-center text-gray-500 text-sm italic max-w-xs",children:["Example of the rule in action on a 3x3 grid snippet. ",s.jsx("br",{}),s.jsx("span",{className:"text-blue-400 font-bold",children:"Riot Agent"})," = Friendly, ",s.jsx("span",{className:"text-red-400 font-bold",children:"Princeps"})," = Enemy."]})]})]})}):null},Tc=7,Ic=()=>Array(Tc).fill(null).map(()=>Array(Tc).fill({card:null})),qt=e=>{const{board:t,activeGridSize:n,players:r}=e,l=JSON.parse(JSON.stringify(t)),o=l.length,a=Math.floor((o-n)/2),i=new Map;r.forEach(u=>i.set(u.id,u.teamId));for(let u=0;u<o;u++)for(let c=0;c<o;c++){const f=l[u][c].card;f&&f.statuses&&(f.statuses=f.statuses.filter(v=>v.type!=="Support"&&v.type!=="Threat"))}for(let u=0;u<o;u++)for(let c=0;c<o;c++){const f=l[u][c].card;if(!f||f.ownerId===void 0||f.isFaceDown)continue;const v=f.ownerId,C=i.get(v),T=[{r:u-1,c},{r:u+1,c},{r:u,c:c-1},{r:u,c:c+1}],j={};let E=!1;for(const h of T){const{r:d,c:p}=h;if(d>=0&&d<o&&p>=0&&p<o){const m=l[d][p].card;if(m&&m.ownerId!==void 0&&!m.isFaceDown){const I=m.ownerId,O=i.get(I);v===I||C!==void 0&&C===O?E=!0:(j[I]||(j[I]=[]),j[I].push({r:d,c:p}))}}}E&&(f.statuses||(f.statuses=[]),f.statuses.some(h=>h.type==="Support")||f.statuses.push({type:"Support",addedByPlayerId:v}));let U=null;for(const h in j)if(j[h].length>=2){U=parseInt(h,10);break}if(U===null&&u>=a&&u<a+n&&c>=a&&c<a+n){const d=u===a||u===a+n-1||c===a||c===a+n-1,p=Object.keys(j).length>0;d&&p&&(U=parseInt(Object.keys(j)[0],10))}U!==null&&(f.statuses||(f.statuses=[]),f.statuses.some(h=>h.type==="Threat")||f.statuses.push({type:"Threat",addedByPlayerId:U}))}return l},Rg=4,Og=()=>{const e=localStorage.getItem("custom_ws_url");if(e&&e.trim()!=="")return console.log(`Using custom WebSocket URL: ${e}`),e.trim();const t=window.location.protocol==="https:"?"wss":"ws",n=window.location.hostname||"localhost";return window.location.port&&window.location.port!=="80"&&window.location.port!=="443"&&window.location.hostname==="localhost"?"wss://platinocyanic-unsceptically-belia.ngrok-free.dev":`${t}://${n}`},Ag=()=>Math.random().toString(36).substring(2,18).toUpperCase(),Lg=()=>{const e=S.useCallback((y,x,w)=>{const k=ti[y];if(!k)return console.error(`Deck data for ${y} not loaded! Returning empty deck.`),[];const b=[...k].map(P=>({...P,ownerId:x,ownerName:w}));return oa(b)},[]),t=S.useCallback((y,x=!1)=>{const w=Object.keys(ti)[0],k={id:y,name:x?`Dummy ${y-1}`:`Player ${y}`,score:0,hand:[],deck:[],discard:[],announcedCard:null,selectedDeck:w,color:Kf[y-1]||"blue",isDummy:x,isReady:!1};return k.deck=e(w,y,k.name),k},[e]),n=S.useCallback(()=>({players:[],board:Ic(),activeGridSize:7,gameId:null,dummyPlayerCount:0,isGameStarted:!1,gameMode:An.FreeForAll,isPrivate:!0,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,currentPhase:0}),[]),[r,l]=S.useState(n),[o,a]=S.useState(null),[i,u]=S.useState(null),[c,f]=S.useState("Connecting"),[v,C]=S.useState([]),[T,j]=S.useState(null),E=S.useRef(null),U=S.useRef(null),h=S.useRef(null),d=S.useRef(r);S.useEffect(()=>{d.current=r},[r]);const p=S.useRef(o);S.useEffect(()=>{p.current=o},[o]);const m=S.useCallback(y=>{l(x=>{const w=typeof y=="function"?y(x):y;return E.current&&E.current.readyState===WebSocket.OPEN&&E.current.send(JSON.stringify({type:"UPDATE_STATE",gameState:w})),w})},[]),I=S.useCallback(()=>{if(E.current&&E.current.readyState!==WebSocket.CLOSED)return;const y=Og();try{E.current=new WebSocket(y)}catch(x){console.error("Failed to create WebSocket:",x),f("Disconnected"),U.current&&clearTimeout(U.current),U.current=window.setTimeout(I,3e3);return}f("Connecting"),E.current.onopen=()=>{var w;console.log("WebSocket connection established"),f("Connected");const x=d.current;x&&x.gameId&&((w=E.current)==null?void 0:w.readyState)===WebSocket.OPEN&&(E.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:x.gameId})),p.current===1&&E.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Wn})))},E.current.onmessage=x=>{try{const w=JSON.parse(x.data);if(w.type==="GAMES_LIST")C(w.games);else if(w.type==="JOIN_SUCCESS"){a(w.playerId);const k=h.current;k&&w.playerId!==null&&w.playerToken?localStorage.setItem("reconnection_data",JSON.stringify({gameId:k,playerId:w.playerId,playerToken:w.playerToken,timestamp:Date.now()})):w.playerId===null&&localStorage.removeItem("reconnection_data"),h.current=null,w.playerId===1&&setTimeout(()=>{var b;((b=E.current)==null?void 0:b.readyState)===WebSocket.OPEN&&E.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Wn}))},500)}else w.type==="ERROR"?(alert(w.message),localStorage.removeItem("reconnection_data"),l(n()),a(null)):w.type==="HIGHLIGHT_TRIGGERED"?j(w.highlightData):l(w)}catch(w){console.error("Failed to parse message from server:",x.data,w)}},E.current.onclose=()=>{console.log("WebSocket connection closed. Attempting to reconnect..."),f("Disconnected"),U.current&&clearTimeout(U.current),U.current=window.setTimeout(I,3e3)},E.current.onerror=x=>console.error("WebSocket error event:",x)},[l,n]),O=S.useCallback(()=>{E.current&&(console.log("Forcing WebSocket reconnection..."),E.current.close())},[]),F=S.useCallback(y=>{var x;if(((x=E.current)==null?void 0:x.readyState)===WebSocket.OPEN){h.current=y;let w=null;try{const b=localStorage.getItem("reconnection_data");b&&(w=JSON.parse(b))}catch(b){console.error("Could not parse reconnection data:",b),localStorage.removeItem("reconnection_data")}const k={type:"JOIN_GAME",gameId:y};w&&w.gameId===y&&w.playerToken&&(k.playerToken=w.playerToken),E.current.send(JSON.stringify(k))}else alert("Could not connect to the server. Please try refreshing the page.")},[]);S.useEffect(()=>(localStorage.removeItem("reconnection_data"),I(),()=>{U.current&&clearTimeout(U.current),E.current&&(E.current.onclose=null,E.current.close())}),[I]);const G=S.useCallback(()=>{var w;localStorage.removeItem("reconnection_data");const y=Ag(),x={...n(),gameId:y,players:[t(1)]};m(x),((w=E.current)==null?void 0:w.readyState)===WebSocket.OPEN&&(E.current.send(JSON.stringify({type:"SUBSCRIBE",gameId:y})),E.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Wn})))},[m,n,t]),J=S.useCallback(()=>{var y;((y=E.current)==null?void 0:y.readyState)===WebSocket.OPEN&&E.current.send(JSON.stringify({type:"GET_GAMES_LIST"}))},[]),V=S.useCallback(()=>{var w;const y=d.current.gameId,x=p.current;l(n()),a(null),localStorage.removeItem("reconnection_data"),((w=E.current)==null?void 0:w.readyState)===WebSocket.OPEN&&y&&x!==null&&E.current.send(JSON.stringify({type:"LEAVE_GAME",gameId:y,playerId:x}))},[n]),re=S.useCallback(()=>{var y;((y=E.current)==null?void 0:y.readyState)===WebSocket.OPEN&&d.current.gameId&&E.current.send(JSON.stringify({type:"START_READY_CHECK",gameId:d.current.gameId}))},[]),de=S.useCallback(()=>{var y;((y=E.current)==null?void 0:y.readyState)===WebSocket.OPEN&&d.current.gameId&&E.current.send(JSON.stringify({type:"CANCEL_READY_CHECK",gameId:d.current.gameId}))},[]),pe=S.useCallback(()=>{var y;((y=E.current)==null?void 0:y.readyState)===WebSocket.OPEN&&d.current.gameId&&p.current!==null&&E.current.send(JSON.stringify({type:"PLAYER_READY",gameId:d.current.gameId,playerId:p.current}))},[]),R=S.useCallback(y=>{var x;((x=E.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&E.current.send(JSON.stringify({type:"ASSIGN_TEAMS",gameId:d.current.gameId,assignments:y}))},[]),Z=S.useCallback(y=>{var x;((x=E.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&E.current.send(JSON.stringify({type:"SET_GAME_MODE",gameId:d.current.gameId,mode:y}))},[]),W=S.useCallback(y=>{var x;((x=E.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId&&E.current.send(JSON.stringify({type:"SET_GAME_PRIVACY",gameId:d.current.gameId,isPrivate:y}))},[]),H=S.useCallback(()=>{var y;if(((y=E.current)==null?void 0:y.readyState)===WebSocket.OPEN&&d.current.gameId&&p.current===1){E.current.send(JSON.stringify({type:"UPDATE_DECK_DATA",deckData:Wn}));const x=d.current,w=JSON.parse(JSON.stringify(x));w.players.forEach(k=>{if(["hand","deck","discard"].forEach(b=>{k[b]&&(k[b]=k[b].map(P=>{const D=la(P.name);return D?{...P,...D}:P}))}),k.announcedCard){const b=la(k.announcedCard.name);b&&(k.announcedCard={...k.announcedCard,...b})}}),w.board.forEach(k=>{k.forEach(b=>{if(b.card){const P=la(b.card.name);P&&(b.card={...b.card,...P})}})}),E.current.send(JSON.stringify({type:"FORCE_SYNC",gameState:w})),l(w)}},[]),M=S.useCallback(()=>{m(y=>{if(p.current!==1)return y;const x=y.players.map(w=>{const k=e(w.selectedDeck,w.id,w.name);return{...w,hand:[],deck:k,discard:[],announcedCard:null,score:0,isReady:!1}});return{...y,players:x,board:Ic(),isGameStarted:!1,isReadyCheckActive:!1,revealRequests:[],activeTurnPlayerId:void 0,currentPhase:0}})},[m,e]),A=S.useCallback(y=>{m(x=>{if(x.isGameStarted)return x;const w={...x,activeGridSize:y};return w.board=qt(w),w})},[m]),$=S.useCallback(y=>{m(x=>{if(x.isGameStarted)return x;const w=x.players.filter(b=>!b.isDummy);if(w.length+y>Rg)return x;const k=[...w];for(let b=0;b<y;b++){const P=k.length+1,D=t(P,!0);D.name=`Dummy ${b+1}`,k.push(D)}return{...x,players:k,dummyPlayerCount:y}})},[m,t]),ne=S.useCallback((y,x,w)=>{m(k=>{var D;if(!k.isGameStarted)return k;const b=JSON.parse(JSON.stringify(k)),P=b.board[y.row][y.col].card;if(P){if(["Support","Threat","Revealed"].includes(x)&&((D=P.statuses)==null?void 0:D.some(te=>te.type===x&&te.addedByPlayerId===w)))return k;P.statuses||(P.statuses=[]),P.statuses.push({type:x,addedByPlayerId:w})}return b})},[m]),fe=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.board[y.row][y.col].card;if(b!=null&&b.statuses){const P=b.statuses.map(D=>D.type).lastIndexOf(x);P>-1&&b.statuses.splice(P,1)}return k})},[m]),je=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.board[y.row][y.col].card;return b&&(b.powerModifier===void 0&&(b.powerModifier=0),b.powerModifier+=x),k})},[m]),ae=S.useCallback((y,x,w)=>{m(k=>{var D;if(!k.isGameStarted)return k;const b=JSON.parse(JSON.stringify(k)),P=b.players.find(Q=>Q.id===y);if(P&&P.announcedCard){if(["Support","Threat","Revealed"].includes(x)&&((D=P.announcedCard.statuses)==null?void 0:D.some(te=>te.type===x&&te.addedByPlayerId===w)))return k;P.announcedCard.statuses||(P.announcedCard.statuses=[]),P.announcedCard.statuses.push({type:x,addedByPlayerId:w})}return b})},[m]),_e=S.useCallback((y,x)=>{m(w=>{var P;if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.players.find(D=>D.id===y);if(b&&((P=b.announcedCard)!=null&&P.statuses)){const D=b.announcedCard.statuses.map(Q=>Q.type).lastIndexOf(x);D>-1&&b.announcedCard.statuses.splice(D,1)}return k})},[m]),Me=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.players.find(P=>P.id===y);return b&&b.announcedCard&&(b.announcedCard.powerModifier===void 0&&(b.announcedCard.powerModifier=0),b.announcedCard.powerModifier+=x),k})},[m]),oe=S.useCallback((y,x,w,k)=>{m(b=>{var Q;if(!b.isGameStarted)return b;const P=JSON.parse(JSON.stringify(b)),D=P.players.find(te=>te.id===y);if(D&&D.hand[x]){const te=D.hand[x];if(["Support","Threat","Revealed"].includes(w)&&((Q=te.statuses)==null?void 0:Q.some(ie=>ie.type===w&&ie.addedByPlayerId===k)))return b;te.statuses||(te.statuses=[]),te.statuses.push({type:w,addedByPlayerId:k})}return P})},[m]),X=S.useCallback((y,x,w)=>{m(k=>{if(!k.isGameStarted)return k;const b=JSON.parse(JSON.stringify(k)),P=b.players.find(Q=>Q.id===y),D=P==null?void 0:P.hand[x];if(D!=null&&D.statuses){const Q=D.statuses.map(te=>te.type).lastIndexOf(w);Q>-1&&D.statuses.splice(Q,1),w==="Revealed"&&(D.statuses.some(B=>B.type==="Revealed")||delete D.revealedTo)}return b})},[m]),xe=S.useCallback(y=>{m(x=>{if(!x.isGameStarted)return x;const w=JSON.parse(JSON.stringify(x)),k=w.board[y.row][y.col].card;return k&&(k.isFaceDown=!1),w.board=qt(w),w})},[m]),Ce=S.useCallback(y=>{m(x=>{if(!x.isGameStarted)return x;const w=JSON.parse(JSON.stringify(x)),k=w.board[y.row][y.col].card;return k&&(k.isFaceDown=!0),w.board=qt(w),w})},[m]),Qe=S.useCallback((y,x,w)=>{m(k=>{const b=k.players.find(Q=>Q.id===y);if(!b||!b.hand[x])return k;const P=JSON.parse(JSON.stringify(k)),D=P.players.find(Q=>Q.id===y).hand[x];if(w==="all")D.revealedTo="all",D.statuses||(D.statuses=[]),D.statuses.some(Q=>Q.type==="Revealed"&&Q.addedByPlayerId===y)||D.statuses.push({type:"Revealed",addedByPlayerId:y});else{(!D.revealedTo||D.revealedTo==="all"||!Array.isArray(D.revealedTo))&&(D.revealedTo=[]);const Q=w.filter(te=>!D.revealedTo.includes(te));D.revealedTo.push(...Q)}return P})},[m]),Ue=S.useCallback((y,x)=>{m(w=>{if(!w.board[y.row][y.col].card)return w;const b=JSON.parse(JSON.stringify(w)),P=b.board[y.row][y.col].card,D=P.ownerId;if(x==="all")P.revealedTo="all",D!==void 0&&(P.statuses||(P.statuses=[]),P.statuses.some(Q=>Q.type==="Revealed"&&Q.addedByPlayerId===D)||P.statuses.push({type:"Revealed",addedByPlayerId:D}));else{(!P.revealedTo||P.revealedTo==="all"||!Array.isArray(P.revealedTo))&&(P.revealedTo=[]);const Q=x.filter(te=>!P.revealedTo.includes(te));P.revealedTo.push(...Q)}return b})},[m]),ht=S.useCallback((y,x)=>{m(w=>{var D;const k=y.boardCoords?(D=w.board[y.boardCoords.row][y.boardCoords.col].card)==null?void 0:D.ownerId:y.ownerId;if(!k)return w;const b=JSON.parse(JSON.stringify(w)),P=b.revealRequests.find(Q=>Q.fromPlayerId===x&&Q.toPlayerId===k);return P?P.cardIdentifiers.some(te=>JSON.stringify(te)===JSON.stringify(y))||P.cardIdentifiers.push(y):b.revealRequests.push({fromPlayerId:x,toPlayerId:k,cardIdentifiers:[y]}),b})},[m]),Kt=S.useCallback((y,x)=>{m(w=>{const k=w.revealRequests.findIndex(D=>D.toPlayerId===p.current&&D.fromPlayerId===y);if(k===-1)return w;const b=JSON.parse(JSON.stringify(w)),P=b.revealRequests[k];if(x){const{toPlayerId:D,cardIdentifiers:Q}=P;for(const te of Q){let B=null;if(te.source==="board"&&te.boardCoords)B=b.board[te.boardCoords.row][te.boardCoords.col].card;else if(te.source==="hand"&&te.ownerId&&te.cardIndex!==void 0){const ie=b.players.find(me=>me.id===te.ownerId);ie&&(B=ie.hand[te.cardIndex])}B&&(B.statuses||(B.statuses=[]),B.statuses.some(ie=>ie.type==="Revealed"&&ie.addedByPlayerId===y)||B.statuses.push({type:"Revealed",addedByPlayerId:y}))}}return b.revealRequests.splice(k,1),b})},[m]),tn=S.useCallback(y=>{m(x=>{const w=JSON.parse(JSON.stringify(x));let k=null;if(y.source==="board"&&y.boardCoords)k=w.board[y.boardCoords.row][y.boardCoords.col].card;else if(y.source==="hand"&&y.playerId&&y.cardIndex!==void 0){const b=w.players.find(P=>P.id===y.playerId);b&&(k=b.hand[y.cardIndex])}return k&&(k.statuses&&(k.statuses=k.statuses.filter(b=>b.type!=="Revealed")),delete k.revealedTo),w})},[m]),ke=S.useCallback((y,x)=>{m(w=>w.isGameStarted?w:{...w,players:w.players.map(k=>k.id===y?{...k,name:x}:k)})},[m]),gs=S.useCallback((y,x)=>{m(w=>w.isGameStarted||w.players.some(b=>b.id!==y&&!b.isDummy&&b.color===x)?w:{...w,players:w.players.map(b=>b.id===y?{...b,color:x}:b)})},[m]),ys=S.useCallback((y,x)=>{m(w=>w.isGameStarted?{...w,players:w.players.map(k=>k.id===y?{...k,score:k.score+x}:k)}:w)},[m]),vs=S.useCallback((y,x)=>{m(w=>w.isGameStarted?w:{...w,players:w.players.map(k=>k.id===y?{...k,deck:e(x,y,k.name),selectedDeck:x,hand:[],discard:[],announcedCard:null}:k)})},[m,e]),xs=S.useCallback((y,x)=>{m(w=>{if(w.isGameStarted)return w;const k=w.players.find(D=>D.id===y);if(!k)return w;const b=[];let P=new Map;for(const{cardId:D,quantity:Q}of x.cards){const te=Yo(D);if(!te)continue;const B=Jo.has(D),ie=B?ve.Command:ve.Custom,me=B?"CMD":"CUS";for(let he=0;he<Q;he++){const ye=(P.get(D)||0)+1;P.set(D,ye),b.push({...te,id:`${me}_${D.toUpperCase()}_${ye}`,deck:ie,ownerId:y,ownerName:k.name})}}return{...w,players:w.players.map(D=>D.id===y?{...D,deck:oa(b),selectedDeck:ve.Custom,hand:[],discard:[],announcedCard:null}:D)}})},[m]),ws=S.useCallback(y=>{m(x=>{if(!x.isGameStarted)return x;const w=x.players.find(D=>D.id===y);if(!w||w.deck.length===0)return x;const k=JSON.parse(JSON.stringify(x)),b=k.players.find(D=>D.id===y),P=b.deck.shift();return P&&b.hand.push(P),k})},[m]),Cs=S.useCallback(y=>{m(x=>{if(!x.isGameStarted||!x.players.find(P=>P.id===y))return x;const k=JSON.parse(JSON.stringify(x)),b=k.players.find(P=>P.id===y);return b.deck=oa(b.deck),k})},[m]),ks=S.useCallback(y=>{m(x=>{const w=x.activeTurnPlayerId===y?void 0:y;return{...x,activeTurnPlayerId:w}})},[m]),Br=S.useCallback(y=>{m(x=>x.isGameStarted?{...x,currentPhase:Math.max(0,Math.min(y,ni.length-1))}:x)},[m]),Ss=S.useCallback(()=>{m(y=>{if(!y.isGameStarted)return y;const x=y.currentPhase+1;if(x>=ni.length){const w=y.activeTurnPlayerId,k=JSON.parse(JSON.stringify(y));w!==void 0&&k.board.forEach(P=>{P.forEach(D=>{if(D.card&&D.card.ownerId===w&&D.card.statuses){const Q=D.card.statuses.findIndex(te=>te.type==="Stun");Q!==-1&&D.card.statuses.splice(Q,1)}})});let b=w;if(b!==void 0){const P=[...k.players].sort((Q,te)=>Q.id-te.id),D=P.findIndex(Q=>Q.id===b);if(D!==-1){let Q=(D+1)%P.length;b=P[Q].id}}return k.currentPhase=0,k.activeTurnPlayerId=b,k.board.forEach(P=>{P.forEach(D=>{D.card&&(delete D.card.enteredThisTurn,delete D.card.abilityUsedInPhase)})}),k}else return{...y,currentPhase:x}})},[m]),Fl=S.useCallback(()=>{m(y=>y.isGameStarted?{...y,currentPhase:Math.max(0,y.currentPhase-1)}:y)},[m]),$l=S.useCallback((y,x)=>{m(w=>{var D,Q,te;if(!w.isGameStarted||x.target==="board"&&x.boardCoords&&w.board[x.boardCoords.row][x.boardCoords.col].card!==null&&y.source!=="counter_panel")return w;const k=JSON.parse(JSON.stringify(w));if(y.source==="board"&&["hand","deck","discard"].includes(x.target)&&!y.bypassOwnershipCheck){const B=y.card.ownerId,ie=k.players.find(ye=>ye.id===B),me=B===p.current,he=!!(ie!=null&&ie.isDummy);if(!me&&!he)return w}if(y.source==="board"&&x.target==="board"){let ie=y.card;if(y.boardCoords){const he=w.board[y.boardCoords.row][y.boardCoords.col];he.card&&(ie=he.card)}if((D=ie.statuses)==null?void 0:D.some(he=>he.type==="Stun")){const he=p.current,ye=ie.ownerId,Je=w.players.find(Pe=>Pe.id===he),ot=w.players.find(Pe=>Pe.id===ye),Ve=he===ye,$e=(Je==null?void 0:Je.teamId)!==void 0&&(ot==null?void 0:ot.teamId)!==void 0&&Je.teamId===ot.teamId;if((Ve||$e)&&!y.isManual)return w}}if(y.source==="counter_panel"&&y.statusType){const B=zl[y.statusType];if(!((B==null?void 0:B.allowedTargets)||["board","hand"]).includes(x.target))return w;let me=null;if(x.target==="board"&&x.boardCoords)me=k.board[x.boardCoords.row][x.boardCoords.col].card;else if(x.playerId!==void 0){const he=k.players.find(ye=>ye.id===x.playerId);he&&(x.target==="hand"&&x.cardIndex!==void 0&&(me=he.hand[x.cardIndex]),x.target==="announced"&&(me=he.announcedCard||null),x.target==="deck"&&he.deck.length>0?x.deckPosition==="top"||!x.deckPosition?me=he.deck[0]:me=he.deck[he.deck.length-1]:x.target==="discard"&&he.discard.length>0&&(me=he.discard[he.discard.length-1]))}if(me){const he=y.count||1,ye=k.players.find(ot=>ot.id===k.activeTurnPlayerId),Je=ye&&ye.isDummy?ye.id:p.current!==null?p.current:0;if(y.statusType==="Power+")me.powerModifier===void 0&&(me.powerModifier=0),me.powerModifier+=1*he;else if(y.statusType==="Power-")me.powerModifier===void 0&&(me.powerModifier=0),me.powerModifier-=1*he;else{me.statuses||(me.statuses=[]);for(let ot=0;ot<he;ot++)["Support","Threat","Revealed"].includes(y.statusType)?me.statuses.some($e=>$e.type===y.statusType&&$e.addedByPlayerId===Je)||me.statuses.push({type:y.statusType,addedByPlayerId:Je}):me.statuses.push({type:y.statusType,addedByPlayerId:Je})}return x.target==="board"&&(k.board=qt(k)),k}return w}let b={...y.card};if(y.source==="hand"&&y.playerId!==void 0&&y.cardIndex!==void 0){const B=k.players.find(ie=>ie.id===y.playerId);B&&B.hand.splice(y.cardIndex,1)}else if(y.source==="board"&&y.boardCoords)k.board[y.boardCoords.row][y.boardCoords.col].card=null;else if(y.source==="discard"&&y.playerId!==void 0&&y.cardIndex!==void 0){const B=k.players.find(ie=>ie.id===y.playerId);B&&B.discard.splice(y.cardIndex,1)}else if(y.source==="deck"&&y.playerId!==void 0&&y.cardIndex!==void 0){const B=k.players.find(ie=>ie.id===y.playerId);B&&B.deck.splice(y.cardIndex,1)}else if(y.source==="announced"&&y.playerId!==void 0){const B=k.players.find(ie=>ie.id===y.playerId);B&&(B.announcedCard=null)}if(["hand","deck","discard"].includes(x.target)?(b.statuses&&(b.statuses=b.statuses.filter(B=>B.type==="Revealed")),b.isFaceDown=!1,delete b.powerModifier,delete b.enteredThisTurn,delete b.abilityUsedInPhase):x.target==="board"&&(b.statuses||(b.statuses=[]),y.source!=="board"&&b.isFaceDown===void 0&&(b.isFaceDown=!1),y.source!=="board"&&(b.enteredThisTurn=!0)),x.target==="hand"&&x.playerId!==void 0){if(b.deck===ve.Tokens||b.deck==="counter")return k;const B=k.players.find(ie=>ie.id===x.playerId);B&&B.hand.push(b)}else if(x.target==="board"&&x.boardCoords){if(k.board[x.boardCoords.row][x.boardCoords.col].card===null){if(b.ownerId===void 0&&p.current!==null){const B=k.players.find(ie=>ie.id===p.current);B&&(b.ownerId=B.id,b.ownerName=B.name)}k.board[x.boardCoords.row][x.boardCoords.col].card=b}}else if(x.target==="discard"&&x.playerId!==void 0){if(!(b.deck===ve.Tokens||b.deck==="counter")){const B=k.players.find(ie=>ie.id===x.playerId);B&&B.discard.push(b)}}else if(x.target==="deck"&&x.playerId!==void 0){if(b.deck===ve.Tokens||b.deck==="counter")return k;const B=k.players.find(ie=>ie.id===x.playerId);B&&(x.deckPosition==="top"?B.deck.unshift(b):B.deck.push(b))}else if(x.target==="announced"&&x.playerId!==void 0){const B=k.players.find(ie=>ie.id===x.playerId);B&&(B.announcedCard&&(B.announcedCard.statuses&&(B.announcedCard.statuses=B.announcedCard.statuses.filter(ie=>ie.type==="Revealed")),delete B.announcedCard.enteredThisTurn,delete B.announcedCard.abilityUsedInPhase,delete B.announcedCard.powerModifier,B.hand.push(B.announcedCard)),B.announcedCard=b)}if(y.source==="hand"&&x.target==="board"){const B=b;if(B.revealedTo==="all"||((Q=B.statuses)==null?void 0:Q.some(me=>me.type==="Revealed"))){const me=k.board.length;for(let he=0;he<me;he++)for(let ye=0;ye<me;ye++){const Je=k.board[he][ye].card;if(Je&&Je.name.toLowerCase().includes("vigilant spotter")&&Je.ownerId!==B.ownerId&&(k.board=qt(k),(te=k.board[he][ye].card.statuses)!=null&&te.some(Ve=>Ve.type==="Support"))){const Ve=k.players.find($e=>$e.id===Je.ownerId);Ve&&(Ve.score+=2)}}}}return(y.source==="board"||x.target==="board")&&(k.board=qt(k)),k})},[m]),Gr=S.useCallback(y=>{var x;if(((x=E.current)==null?void 0:x.readyState)===WebSocket.OPEN&&d.current.gameId){const w={...y,timestamp:Date.now()};E.current.send(JSON.stringify({type:"TRIGGER_HIGHLIGHT",gameId:d.current.gameId,highlightData:w}))}},[]),Bl=S.useCallback(y=>{m(x=>{if(!x.isGameStarted)return x;const w=JSON.parse(JSON.stringify(x)),k=w.board[y.row][y.col].card;return k&&(k.abilityUsedInPhase=w.currentPhase),w})},[m]),$n=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.board[y.row][y.col].card,P=k.board[x.row][x.col].card;return k.board[y.row][y.col].card=P,k.board[x.row][x.col].card=b,k.board=qt(k),k})},[m]),Gl=S.useCallback((y,x,w)=>{m(k=>{if(!k.isGameStarted)return k;const b=JSON.parse(JSON.stringify(k)),P=b.board[y.row][y.col].card,D=b.board[x.row][x.col].card;if(P&&D&&P.statuses){const Q=P.statuses.findIndex(te=>te.type===w);if(Q>-1){const[te]=P.statuses.splice(Q,1);D.statuses||(D.statuses=[]),D.statuses.push(te)}}return b.board=qt(b),b})},[m]),Bn=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.board[y.row][y.col].card,P=k.board[x.row][x.col].card,D=["Support","Threat"];if(b&&P&&b.statuses){const Q=b.statuses.filter(B=>!D.includes(B.type)),te=b.statuses.filter(B=>D.includes(B.type));Q.length>0&&(P.statuses||(P.statuses=[]),P.statuses.push(...Q),b.statuses=te)}return k.board=qt(k),k})},[m]),Ns=S.useCallback((y,x)=>{m(w=>{if(!w.isGameStarted)return w;const k=JSON.parse(JSON.stringify(w)),b=k.players.find(P=>P.id===y);if(b&&b.discard.length>x){const[P]=b.discard.splice(x,1);b.hand.push(P)}return k})},[m]),Vr=S.useCallback((y,x,w)=>{m(k=>{if(!k.isGameStarted)return k;const b=JSON.parse(JSON.stringify(k)),P=Object.keys(Wn.tokenDatabase).find(te=>Wn.tokenDatabase[te].name===x);if(!P)return k;const D=Wn.tokenDatabase[P],Q=b.players.find(te=>te.id===w);if(D&&b.board[y.row][y.col].card===null){const te={id:`TKN_${x.toUpperCase().replace(/\s/g,"_")}_${Date.now()}`,deck:ve.Tokens,name:x,imageUrl:D.imageUrl,fallbackImage:D.fallbackImage,power:D.power,ability:D.ability,color:D.color,types:D.types||["Unit"],faction:"Tokens",ownerId:w,ownerName:Q==null?void 0:Q.name,enteredThisTurn:!0};b.board[y.row][y.col].card=te}return b.board=qt(b),b})},[m]),Es=S.useCallback((y,x,w,k,b)=>{m(P=>{var ot;if(!P.isGameStarted)return P;const D=JSON.parse(JSON.stringify(P)),Q=D.players.find(Ve=>Ve.id===b);if(!Q)return P;let te=0;const B=D.board.length,ie=(Ve,$e)=>{var Be,Ct;if(Ve.ownerId===$e)return!0;const Pe=(Be=Ve.statuses)==null?void 0:Be.some(Lt=>Lt.type==="Exploit"&&Lt.addedByPlayerId===$e);let Y=!1;for(let Lt=0;Lt<B;Lt++)for(let ar=0;ar<B;ar++){const Gn=D.board[Lt][ar].card;Gn&&Gn.ownerId===$e&&Gn.name.toLowerCase().includes("data liberator")&&(Ct=Gn.statuses)!=null&&Ct.some(Hr=>Hr.type==="Support")&&(Y=!0)}return!!(Pe&&Y)};let me=y,he=y,ye=x,Je=x;if(y===w)me=y,he=y,ye=0,Je=B-1;else if(x===k)ye=x,Je=x,me=0,he=B-1;else return P;for(let Ve=me;Ve<=he;Ve++)for(let $e=ye;$e<=Je;$e++){const Pe=D.board[Ve][$e];Pe.card&&!((ot=Pe.card.statuses)!=null&&ot.some(Y=>Y.type==="Stun"))&&ie(Pe.card,b)&&(te+=Math.max(0,Pe.card.power+(Pe.card.powerModifier||0)))}return Q.score+=te,D})},[m]);return{gameState:r,localPlayerId:o,setLocalPlayerId:a,draggedItem:i,setDraggedItem:u,connectionStatus:c,gamesList:v,latestHighlight:T,createGame:G,joinGame:F,requestGamesList:J,exitGame:V,startReadyCheck:re,cancelReadyCheck:de,playerReady:pe,assignTeams:R,setGameMode:Z,setGamePrivacy:W,setActiveGridSize:A,setDummyPlayerCount:$,updatePlayerName:ke,changePlayerColor:gs,updatePlayerScore:ys,changePlayerDeck:vs,loadCustomDeck:xs,drawCard:ws,shufflePlayerDeck:Cs,moveItem:$l,handleDrop:$l,addBoardCardStatus:ne,removeBoardCardStatus:fe,modifyBoardCardPower:je,addAnnouncedCardStatus:ae,removeAnnouncedCardStatus:_e,modifyAnnouncedCardPower:Me,addHandCardStatus:oe,removeHandCardStatus:X,flipBoardCard:xe,flipBoardCardFaceDown:Ce,revealHandCard:Qe,revealBoardCard:Ue,requestCardReveal:ht,respondToRevealRequest:Kt,syncGame:H,removeRevealedStatus:tn,resetGame:M,toggleActiveTurnPlayer:ks,forceReconnect:O,triggerHighlight:Gr,nextPhase:Ss,prevPhase:Fl,setPhase:Br,markAbilityUsed:Bl,swapCards:$n,transferStatus:Gl,transferAllCounters:Bn,recoverDiscardedCard:Ns,spawnToken:Vr,scoreLine:Es}},So=(e,t,n,r)=>{var i;const{card:l,ownerId:o,location:a}=e;if(t.targetOwnerId!==void 0&&t.targetOwnerId!==o||t.excludeOwnerId!==void 0&&t.excludeOwnerId===o)return!1;if(t.onlyOpponents){if(o===n)return!1;const u=r.find(f=>f.id===n),c=r.find(f=>f.id===o);if(u&&c&&u.teamId!==void 0&&u.teamId===c.teamId)return!1}return!(t.onlyFaceDown&&((i=l.statuses)!=null&&i.some(u=>u.type==="Revealed")||a==="board"&&!l.isFaceDown))},np=(e,t,n)=>{if(!e||e.type!=="ENTER_MODE"&&e.type!=="CREATE_STACK")return[];const r=[],l=t.board,o=l.length;if(e.type==="CREATE_STACK"){const c={targetOwnerId:e.targetOwnerId,excludeOwnerId:e.excludeOwnerId,onlyOpponents:e.onlyOpponents,onlyFaceDown:e.onlyFaceDown};for(let f=0;f<o;f++)for(let v=0;v<o;v++){const C=l[f][v];C.card&&So({card:C.card,ownerId:C.card.ownerId||0,location:"board"},c,n,t.players)&&r.push({row:f,col:v})}return r}const{mode:a,payload:i,sourceCoords:u}=e;if(a==="SELECT_TARGET"&&i.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=l[c][f];v.card&&i.filter(v.card,c,f)&&r.push({row:c,col:f})}else if(a==="PATROL_MOVE"&&u)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=c===u.row||f===u.col,C=c===u.row&&f===u.col,T=!l[c][f].card;v&&(T||C)&&r.push({row:c,col:f})}else if(a==="RIOT_PUSH"&&u)[{r:u.row-1,c:u.col},{r:u.row+1,c:u.col},{r:u.row,c:u.col-1},{r:u.row,c:u.col+1}].forEach(f=>{if(f.r>=0&&f.r<o&&f.c>=0&&f.c<o){const v=l[f.r][f.c].card;if(v&&v.ownerId!==n){const C=f.r-u.row,T=f.c-u.col,j=f.r+C,E=f.c+T;j>=0&&j<o&&E>=0&&E<o&&(l[j][E].card||r.push({row:f.r,col:f.c}))}}});else if(a==="RIOT_MOVE"&&i.vacatedCoords)r.push(i.vacatedCoords),u&&r.push(u);else if(a==="SWAP_POSITIONS"&&i.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=l[c][f];v.card&&i.filter(v.card,c,f)&&r.push({row:c,col:f})}else if((a==="TRANSFER_STATUS_SELECT"||a==="TRANSFER_ALL_STATUSES")&&i.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=l[c][f];v.card&&i.filter(v.card,c,f)&&r.push({row:c,col:f})}else if((a==="SPAWN_TOKEN"||a==="SELECT_CELL")&&u)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=!l[c][f].card,C=Math.abs(c-u.row)+Math.abs(f-u.col)===1,T=c===u.row&&f===u.col;a==="SPAWN_TOKEN"&&v&&C&&r.push({row:c,col:f}),a==="SELECT_CELL"&&(v&&r.push({row:c,col:f}),i.allowSelf&&T&&r.push({row:c,col:f}))}else if(a==="REVEAL_ENEMY"&&i.filter)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=l[c][f];v.card&&i.filter(v.card,c,f)&&r.push({row:c,col:f})}else if(a==="SELECT_LINE_START")for(let c=0;c<o;c++)for(let f=0;f<o;f++)r.push({row:c,col:f});else if(a==="SELECT_LINE_END"&&i.firstCoords)for(let c=0;c<o;c++)for(let f=0;f<o;f++){const v=c===i.firstCoords.row,C=f===i.firstCoords.col;(v||C)&&r.push({row:c,col:f})}return r},Mg=(e,t,n)=>{var l;if(e.type==="OPEN_MODAL"||e.type==="CREATE_STACK"||np(e,t,n).length>0)return!0;if(e.mode==="SELECT_TARGET"&&((l=e.payload)!=null&&l.filter)){for(const o of t.players)if(o.hand.some(a=>e.payload.filter(a)))return!0}return!1};function Ug(){var uu,cu,du;const{gameState:e,localPlayerId:t,setLocalPlayerId:n,createGame:r,joinGame:l,startReadyCheck:o,cancelReadyCheck:a,playerReady:i,assignTeams:u,setGameMode:c,setGamePrivacy:f,setActiveGridSize:v,setDummyPlayerCount:C,updatePlayerName:T,changePlayerColor:j,updatePlayerScore:E,changePlayerDeck:U,loadCustomDeck:h,drawCard:d,handleDrop:p,draggedItem:m,setDraggedItem:I,connectionStatus:O,gamesList:F,requestGamesList:G,exitGame:J,moveItem:V,shufflePlayerDeck:re,addBoardCardStatus:de,removeBoardCardStatus:pe,modifyBoardCardPower:R,addAnnouncedCardStatus:Z,removeAnnouncedCardStatus:W,modifyAnnouncedCardPower:H,addHandCardStatus:M,removeHandCardStatus:A,flipBoardCard:$,flipBoardCardFaceDown:ne,revealHandCard:fe,revealBoardCard:je,requestCardReveal:ae,respondToRevealRequest:_e,syncGame:Me,removeRevealedStatus:oe,resetGame:X,toggleActiveTurnPlayer:xe,forceReconnect:Ce,triggerHighlight:Qe,latestHighlight:Ue,nextPhase:ht,prevPhase:Kt,setPhase:tn,markAbilityUsed:ke,swapCards:gs,transferStatus:ys,transferAllCounters:vs,recoverDiscardedCard:xs,spawnToken:ws,scoreLine:Cs}=Lg(),[ks,Br]=S.useState(!1),[Ss,Fl]=S.useState(!1),[$l,Gr]=S.useState(!1),[Bl,$n]=S.useState(!1),[Gl,Bn]=S.useState(!1),[Ns,Vr]=S.useState(!1),[Es,y]=S.useState(null),[x,w]=S.useState(null),[k,b]=S.useState(!1),[P,D]=S.useState(null),[Q,te]=S.useState(null),[B,ie]=S.useState(null),[me,he]=S.useState(!0),[ye,Je]=S.useState(()=>{try{const N=localStorage.getItem("image_refresh_data");if(N){const{version:L,timestamp:K}=JSON.parse(N),_=12*60*60*1e3;if(Date.now()-K<_)return L}}catch(N){console.error("Error parsing image refresh data",N)}const g=Date.now();return localStorage.setItem("image_refresh_data",JSON.stringify({version:g,timestamp:g})),g}),[ot,Ve]=S.useState(null),[$e,Pe]=S.useState(null),[Y,Be]=S.useState(null),Ct=S.useRef(null),Lt=S.useRef(null),[ar,Gn]=S.useState(null),[Hr,lp]=S.useState(!1),[le,He]=S.useState(null),[eu,op]=S.useState([]),[bs,sp]=S.useState([]),[tu,nu]=S.useState(null),Wr=S.useRef({x:0,y:0}),ap=S.useRef(null),Kr=S.useRef(null),[ip,ru]=S.useState(void 0),et=S.useRef(!1);S.useMemo(()=>e.players.filter(g=>!g.isDummy&&!g.isDisconnected).length,[e.players]);const ir=t===null&&e.gameId!==null,up=S.useMemo(()=>e.players.filter(g=>!g.isDummy).length,[e.players]),js=t===1,ze=S.useMemo(()=>e.players.find(g=>g.id===t),[e.players,t]),cp=e.gameId&&(ze||ir),Vn=S.useMemo(()=>{const g=new Map;return e.players.forEach(N=>g.set(N.id,N.color)),g},[e.players]),Jr=!!le||!!Y;S.useEffect(()=>{const g=()=>{const N=localStorage.getItem("ui_list_mode");he(N===null?!0:N==="true")};return g(),window.addEventListener("storage",g),()=>window.removeEventListener("storage",g)},[]),S.useLayoutEffect(()=>{if(!me){ru(void 0);return}const g=()=>{if(Kr.current){const K=window.innerWidth,_=Kr.current.getBoundingClientRect();if(_.width===0)return;const We=(K-_.width)/2-10;ru(Math.max(0,We))}},N=new ResizeObserver(g);Kr.current&&N.observe(Kr.current),window.addEventListener("resize",g),g();const L=setTimeout(g,100);return()=>{N.disconnect(),window.removeEventListener("resize",g),clearTimeout(L)}},[me,t,e.activeGridSize]),S.useLayoutEffect(()=>{Y&&Ct.current&&Lt.current&&(Ct.current.style.left=`${Lt.current.x-2}px`,Ct.current.style.top=`${Lt.current.y-2}px`)},[Y]),S.useEffect(()=>{const g=N=>{Wr.current={x:N.clientX,y:N.clientY},Ct.current&&(Y||le)&&(Ct.current.style.left=`${N.clientX-2}px`,Ct.current.style.top=`${N.clientY-2}px`)};return window.addEventListener("mousemove",g),(Y||le)&&Ct.current&&(Ct.current.style.left=`${Wr.current.x-2}px`,Ct.current.style.top=`${Wr.current.y-2}px`),()=>{window.removeEventListener("mousemove",g)}},[Y,le]),S.useEffect(()=>{const g=N=>{if(!Y)return;const L=document.elementFromPoint(N.clientX,N.clientY),K=L==null?void 0:L.closest("[data-hand-card]");if(K){const se=K.getAttribute("data-hand-card");if(se){const[De,We]=se.split(","),q=parseInt(De,10),ue=parseInt(We,10),ce=e.players.find(st=>st.id===q),Te=ce==null?void 0:ce.hand[ue];if(ce&&Te){if(!So({card:Te,ownerId:q,location:"hand"},Y,t,e.players))return;if(Y.type==="Revealed"&&q!==t&&!ce.isDummy){t!==null&&(ae({source:"hand",ownerId:q,cardIndex:ue},t),Y.sourceCoords&&ke(Y.sourceCoords),Y.count>1?Be(tt=>tt?{...tt,count:tt.count-1}:null):Be(null),et.current=!0,setTimeout(()=>{et.current=!1},300));return}p({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:Y.type,count:1},{target:"hand",playerId:q,cardIndex:ue,boardCoords:void 0}),Y.sourceCoords&&ke(Y.sourceCoords),Y.count>1?Be(tt=>tt?{...tt,count:tt.count-1}:null):Be(null),et.current=!0,setTimeout(()=>{et.current=!1},300);return}}}const _=L==null?void 0:L.closest("[data-board-coords]");if(_){const se=_.getAttribute("data-board-coords");if(se){const[De,We]=se.split(","),q=parseInt(De,10),ue=parseInt(We,10),ce=e.board[q][ue].card;if(ce&&ce.ownerId!==void 0){if(!So({card:ce,ownerId:ce.ownerId,location:"board"},Y,t,e.players))return;const st=e.players.find(tt=>tt.id===ce.ownerId);if(Y.type==="Revealed"&&ce.ownerId!==t&&!(st!=null&&st.isDummy)){t!==null&&(ae({source:"board",ownerId:ce.ownerId,boardCoords:{row:q,col:ue}},t),Y.sourceCoords&&ke(Y.sourceCoords),Y.count>1?Be(tt=>tt?{...tt,count:tt.count-1}:null):Be(null),et.current=!0,setTimeout(()=>{et.current=!1},300));return}}ce&&(p({card:{id:"stack",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:Y.type,count:1},{target:"board",boardCoords:{row:q,col:ue}}),Y.sourceCoords&&ke(Y.sourceCoords),Y.count>1?Be(Te=>Te?{...Te,count:Te.count-1}:null):Be(null),et.current=!0,setTimeout(()=>{et.current=!1},300))}}else{const se=L==null?void 0:L.closest(".counter-modal-content");Y.isDragging?Be(se?De=>De?{...De,isDragging:!1}:null:null):se||Be(null)}};return window.addEventListener("mouseup",g),()=>{window.removeEventListener("mouseup",g)}},[Y,p,e,t,fe,ae,ke]),S.useEffect(()=>{const g=N=>{et.current&&(N.stopPropagation(),N.preventDefault())};return window.addEventListener("click",g,!0),()=>window.removeEventListener("click",g,!0)},[]),S.useEffect(()=>{const g=L=>{["INPUT","TEXTAREA","SELECT"].includes(L.target.tagName)||(L.code==="Space"&&(L.preventDefault(),e.isGameStarted&&ht()),L.key==="Escape"&&(le&&le.sourceCoords&&le.sourceCoords.row>=0&&ke(le.sourceCoords),Y&&Y.sourceCoords&&ke(Y.sourceCoords),Be(null),Pe(null),He(null),D(null)))},N=L=>{(Y||$e||le)&&(L.preventDefault(),le&&le.sourceCoords&&le.sourceCoords.row>=0&&ke(le.sourceCoords),Y&&Y.sourceCoords&&ke(Y.sourceCoords),Be(null),Pe(null),He(null),D(null))};return window.addEventListener("keydown",g),window.addEventListener("contextmenu",N),()=>{window.removeEventListener("keydown",g),window.removeEventListener("contextmenu",N)}},[Y,$e,le,ke,e.isGameStarted,ht]),S.useEffect(()=>{let g=le;Y&&!le&&(g={type:"CREATE_STACK",tokenType:Y.type,count:Y.count,onlyFaceDown:Y.onlyFaceDown,onlyOpponents:Y.onlyOpponents,targetOwnerId:Y.targetOwnerId,excludeOwnerId:Y.excludeOwnerId});const N=np(g,e,t),L=[];if(le&&le.type==="ENTER_MODE"&&le.mode==="SELECT_TARGET")le.payload.filter&&e.players.forEach(K=>{K.hand.forEach((_,se)=>{le.payload.filter(_)&&L.push({playerId:K.id,cardIndex:se})})});else if(Y){const K=zl[Y.type];K&&K.allowedTargets&&K.allowedTargets.includes("hand")&&e.players.forEach(_=>{_.hand.forEach((se,De)=>{So({card:se,ownerId:_.id,location:"hand"},Y,t,e.players)&&L.push({playerId:_.id,cardIndex:De})})})}op(N),sp(L)},[le,Y,e.board,e.players,t]),S.useEffect(()=>{if(Ue){Gn(Ue);const g=setTimeout(()=>Gn(null),1e3);return()=>clearTimeout(g)}},[Ue]);const Hn=()=>{$n(!1),Bn(!1),D(null),te(null),ie(null),Vr(!1)},dp=()=>{js&&(e.gameMode===An.FreeForAll?o():b(!0))},fp=g=>{u(g),b(!1),o()},pp=g=>{l(g),Br(!1)},mp=()=>{r(),n(1)},hp=()=>{G(),Br(!0)},gp=g=>{localStorage.setItem("custom_ws_url",g.trim());const N=localStorage.getItem("ui_list_mode");he(N===null?!0:N==="true"),Gr(!1),Ce()},yp=()=>{const g=Date.now();Je(g),localStorage.setItem("image_refresh_data",JSON.stringify({version:g,timestamp:g})),Me()},yn=g=>{t!==null&&Qe({...g,playerId:t})},Vl=(g,N)=>{if(le||Y||!Hr||!e.isGameStarted||t===null||t!==e.activeTurnPlayerId||g.ownerId!==t||!ri(g,e.currentPhase,e.activeTurnPlayerId))return;const L=mg(g,e,t,N);if(L){if(L.type==="CREATE_STACK"&&L.tokenType&&L.count)Be({type:L.tokenType,count:L.count,isDragging:!1,sourceCoords:N,excludeOwnerId:L.excludeOwnerId,onlyOpponents:L.onlyOpponents,onlyFaceDown:L.onlyFaceDown});else if(L.type==="ENTER_MODE"){if(!Mg(L,e,t)){N.row>=0&&(nu(N),ke(N),setTimeout(()=>nu(null),750));return}He(L)}else if(L.type==="OPEN_MODAL"&&L.mode==="RETRIEVE_DEVICE"){const K=e.players.find(_=>_.id===t);K&&(D({player:K,pickMode:!0}),N.row>=0&&ke(N))}}},lu=(g,N)=>{if(!$e&&!Y&&!et.current){if(le&&le.type==="ENTER_MODE"){if(le.sourceCard&&le.sourceCard.id===g.id)return;const{mode:L,payload:K,sourceCard:_,sourceCoords:se}=le;if(L==="SELECT_TARGET"&&K.actionType==="DESTROY"){if(K.filter&&!K.filter(g,N.row,N.col))return;V({card:g,source:"board",boardCoords:N,bypassOwnershipCheck:!0},{target:"discard",playerId:g.ownerId}),se&&se.row>=0&&ke(se),setTimeout(()=>He(null),100);return}if(L==="SELECT_TARGET"&&K.tokenType){if(K.filter&&!K.filter(g,N.row,N.col))return;p({card:{id:"dummy",deck:"counter",name:"",imageUrl:"",fallbackImage:"",power:0,ability:"",types:[]},source:"counter_panel",statusType:K.tokenType,count:K.count||1},{target:"board",boardCoords:N}),se&&se.row>=0&&ke(se),setTimeout(()=>He(null),100);return}if(L==="RIOT_PUSH"&&se&&se.row>=0){if(!(Math.abs(N.row-se.row)+Math.abs(N.col-se.col)===1)||g.ownerId===t)return;const We=N.row-se.row,q=N.col-se.col,ue=N.row+We,ce=N.col+q,Te=e.board.length;if(ue<0||ue>=Te||ce<0||ce>=Te||e.board[ue][ce].card!==null)return;V({card:g,source:"board",boardCoords:N,bypassOwnershipCheck:!0},{target:"board",boardCoords:{row:ue,col:ce}}),He({type:"ENTER_MODE",mode:"RIOT_MOVE",sourceCard:le.sourceCard,sourceCoords:le.sourceCoords,payload:{vacatedCoords:N}});return}if(L==="RIOT_MOVE"&&se&&se.row>=0){N.row===se.row&&N.col===se.col&&(ke(se),setTimeout(()=>He(null),100));return}if(L==="SWAP_POSITIONS"&&se&&se.row>=0){if(_&&_.id===g.id||K.filter&&!K.filter(g,N.row,N.col))return;gs(se,N),ke(N),setTimeout(()=>He(null),100);return}if(L==="TRANSFER_STATUS_SELECT"&&se&&se.row>=0){if(_&&_.id===g.id||K.filter&&!K.filter(g,N.row,N.col))return;g.statuses&&g.statuses.length>0&&(ys(N,se,g.statuses[0].type),ke(se),setTimeout(()=>He(null),100));return}if(L==="TRANSFER_ALL_STATUSES"&&se&&se.row>=0){if(_&&_.id===g.id||K.filter&&!K.filter(g,N.row,N.col))return;vs(N,se),ke(se),setTimeout(()=>He(null),100);return}if(L==="REVEAL_ENEMY"){if(_&&_.id===g.id||K.filter&&!K.filter(g,N.row,N.col))return;Be({type:"Revealed",count:1,isDragging:!1,sourceCoords:se,targetOwnerId:g.ownerId,onlyFaceDown:!0,onlyOpponents:!0}),setTimeout(()=>He(null),100);return}return}!le&&!Y&&Vl(g,N)}},Ts=(g,N,L)=>{if(!et.current&&le&&le.type==="ENTER_MODE"&&le.mode==="SELECT_TARGET"){const{payload:K,sourceCoords:_}=le;if(K.actionType==="DESTROY"){if(K.filter&&!K.filter(N))return;V({card:N,source:"hand",playerId:g.id,cardIndex:L,bypassOwnershipCheck:!0},{target:"discard",playerId:g.id}),_&&_.row>=0&&ke(_),setTimeout(()=>He(null),100)}}},Is=(g,N)=>{le||Y||et.current||g.id===t&&(!Hr||!e.isGameStarted||e.activeTurnPlayerId===t&&ri(N,e.currentPhase,e.activeTurnPlayerId)&&Vl(N,{row:-1,col:-1}))},ou=g=>{if(et.current||!le||le.type!=="ENTER_MODE")return;const{mode:N,sourceCoords:L,sourceCard:K,payload:_}=le;if(N==="PATROL_MOVE"&&L&&K&&L.row>=0){const se=g.row===L.row,De=g.col===L.col;if(g.row===L.row&&g.col===L.col){setTimeout(()=>He(null),100);return}(se||De)&&(V({card:K,source:"board",boardCoords:L},{target:"board",boardCoords:g}),ke(g),setTimeout(()=>He(null),100));return}if(N==="RIOT_MOVE"&&L&&K&&_.vacatedCoords){g.row===_.vacatedCoords.row&&g.col===_.vacatedCoords.col&&(V({card:K,source:"board",boardCoords:L},{target:"board",boardCoords:g}),ke(g),setTimeout(()=>He(null),100));return}if(N==="SPAWN_TOKEN"&&L&&_.tokenName&&L.row>=0){Math.abs(g.row-L.row)+Math.abs(g.col-L.col)===1&&(ws(g,_.tokenName,t),ke(L),setTimeout(()=>He(null),100));return}if(N==="SELECT_CELL"&&L&&K&&L.row>=0){if(_.allowSelf&&g.row===L.row&&g.col===L.col){ke(L),setTimeout(()=>He(null),100);return}V({card:K,source:"board",boardCoords:L},{target:"board",boardCoords:g}),ke(g),setTimeout(()=>He(null),100);return}if(N==="SELECT_LINE_START"&&K){He({type:"ENTER_MODE",mode:"SELECT_LINE_END",sourceCard:K,payload:{firstCoords:g}});return}if(N==="SELECT_LINE_END"&&K&&_.firstCoords){const{row:se,col:De}=_.firstCoords,{row:We,col:q}=g;(se===We||De===q)&&(Cs(se,De,We,q,t),V({card:K,source:"announced",playerId:t},{target:"discard",playerId:t}),setTimeout(()=>He(null),100));return}},Yr=()=>{Ve(null)},vn=(g,N,L)=>{g.preventDefault(),!(le||Y||$e)&&(g.stopPropagation(),!(t===null||!e.isGameStarted)&&Ve({x:g.clientX,y:g.clientY,type:N,data:L}))},su=(g,N)=>{var De;if(le||Y||et.current)return;const L=g.ownerId===t;if(L&&g.isFaceDown){$(N);return}const K=g.ownerId?e.players.find(We=>We.id===g.ownerId):void 0,_=(De=g.statuses)==null?void 0:De.some(We=>We.type==="Revealed"&&We.addedByPlayerId===t);!g.isFaceDown||g.revealedTo==="all"||Array.isArray(g.revealedTo)&&g.revealedTo.includes(t)||_||L?ie({card:g,player:K}):t!==null&&ae({source:"board",ownerId:g.ownerId,boardCoords:N},t)},au=g=>{le||Y||et.current||yn({type:"cell",row:g.row,col:g.col})},_s=(g,N,L)=>{var K;if(!(le||Y)&&!et.current){if(g.id===t){Hn();const _={card:N,source:"hand",playerId:g.id,cardIndex:L};Pe({card:N,sourceItem:_,faceDown:!1})}else if(t!==null){const _=N.revealedTo==="all",se=Array.isArray(N.revealedTo)&&N.revealedTo.includes(t),De=(K=N.statuses)==null?void 0:K.some(q=>q.type==="Revealed"&&q.addedByPlayerId===t);_||se||De||!!g.isDummy||!!g.isDisconnected?ie({card:N,player:g}):ae({source:"hand",ownerId:g.id,cardIndex:L},t)}}},iu=(g,N,L,K)=>{if(le||Y||et.current)return;const _={card:N,source:K,playerId:g.id,cardIndex:L};V(_,{target:"hand",playerId:g.id})},vp=g=>{D(null),te(g)},xp=g=>{te(null),D({player:g})},wp=S.useMemo(()=>{var se,De,We;if(!ot||t===null)return null;const{type:g,data:N,x:L,y:K}=ot;let _=[];if(g==="emptyBoardCell")_.push({label:"Highlight Cell",onClick:()=>yn({type:"cell",row:N.boardCoords.row,col:N.boardCoords.col})}),_.push({label:"Highlight Column",onClick:()=>yn({type:"col",col:N.boardCoords.col})}),_.push({label:"Highlight Row",onClick:()=>yn({type:"row",row:N.boardCoords.row})});else if(g==="boardItem"||g==="announcedCard"){const q=g==="boardItem";let ue=q?e.board[N.boardCoords.row][N.boardCoords.col].card:N.card,ce=q?null:N.player;if(!q&&ce){const Re=e.players.find(Mt=>Mt.id===ce.id);Re&&(ce=Re,ue=Re.announcedCard||ue)}if(!ue)return Ve(null),null;const Te=ue.ownerId?e.players.find(Re=>Re.id===ue.ownerId):void 0,st=ue.ownerId===t,tt=!!(Te!=null&&Te.isDummy),nn=st||tt,Ps=(se=ue.statuses)==null?void 0:se.some(Re=>Re.type==="Revealed"&&Re.addedByPlayerId===t),ur=!ue.isFaceDown||ue.revealedTo==="all"||Array.isArray(ue.revealedTo)&&ue.revealedTo.includes(t)||Ps;(ur||st&&ue.isFaceDown)&&_.push({label:"View",isBold:!0,onClick:()=>ie({card:ue,player:Te})}),!q&&nn&&ue.deck===ve.Command&&(e.currentPhase===1||e.currentPhase===3)&&_.push({label:"Play",isBold:!0,onClick:()=>{Vl(ue,{row:-1,col:-1})}}),q&&nn&&(ue.isFaceDown?_.push({label:"Flip Face Up",isBold:!0,onClick:()=>$(N.boardCoords)}):_.push({label:"Flip Face Down",onClick:()=>ne(N.boardCoords)}));const cr=q?{card:ue,source:"board",boardCoords:N.boardCoords}:{card:ue,source:"announced",playerId:ce.id},rn=ue.ownerId,ln=(ue==null?void 0:ue.deck)===ve.Tokens||(ue==null?void 0:ue.deck)==="counter";if(q&&(nn&&ue.isFaceDown&&_.push({label:"Reveal to All",onClick:()=>je(N.boardCoords,"all")}),!st&&!ur&&_.push({label:"Request Reveal",onClick:()=>ae({source:"board",ownerId:ue.ownerId,boardCoords:N.boardCoords},t)})),_.length>0&&_.push({isDivider:!0}),nn&&ur&&(_.push({label:"To Hand",disabled:ln,onClick:()=>V(cr,{target:"hand",playerId:rn})}),rn)){const Re=ln?"Remove":"To Discard";_.push({label:Re,onClick:()=>V(cr,{target:"discard",playerId:rn})}),_.push({label:"To Deck Top",disabled:ln,onClick:()=>V(cr,{target:"deck",playerId:rn,deckPosition:"top"})}),_.push({label:"To Deck Bottom",disabled:ln,onClick:()=>V(cr,{target:"deck",playerId:rn,deckPosition:"bottom"})})}if(q&&(_.push({isDivider:!0}),_.push({label:"Highlight Cell",onClick:()=>yn({type:"cell",row:N.boardCoords.row,col:N.boardCoords.col})}),_.push({label:"Highlight Column",onClick:()=>yn({type:"col",col:N.boardCoords.col})}),_.push({label:"Highlight Row",onClick:()=>yn({type:"row",row:N.boardCoords.row})})),ur){const Re=["Aim","Exploit","Stun","Shield","Support","Threat","Revealed"],Mt=[];Re.forEach(Ut=>{var dr;(((dr=ue.statuses)==null?void 0:dr.filter(Np=>Np.type===Ut).length)||0)>0&&Mt.push({type:"statusControl",label:Ut,onAdd:()=>q?de(N.boardCoords,Ut,t):Z(ce.id,Ut,t),onRemove:()=>q?pe(N.boardCoords,Ut):W(ce.id,Ut),removeDisabled:!1})}),Mt.length>0&&(_.length>0&&!("isDivider"in _[_.length-1])&&_.push({isDivider:!0}),_.push(...Mt)),_.length>0&&!("isDivider"in _[_.length-1])&&_.push({isDivider:!0}),_.push({type:"statusControl",label:"Power",onAdd:()=>q?R(N.boardCoords,1):H(ce.id,1),onRemove:()=>q?R(N.boardCoords,-1):H(ce.id,-1),removeDisabled:!1})}}else if(g==="token_panel_item"){const{card:q}=N,ue={card:q,source:"token_panel"};_.push({label:"View",isBold:!0,onClick:()=>ie({card:q})}),_.push({isDivider:!0}),_.push({label:"Play Face Up",isBold:!0,onClick:()=>{Hn(),Pe({card:q,sourceItem:ue,faceDown:!1})}}),_.push({label:"Play Face Down",onClick:()=>{Hn(),Pe({card:q,sourceItem:ue,faceDown:!0})}})}else if(["handCard","discardCard","deckCard"].includes(g)){let{card:q,boardCoords:ue,player:ce,cardIndex:Te}=N;const st=e.players.find(Jt=>Jt.id===ce.id);st&&(ce=st,g==="handCard"?q=st.hand[Te]||q:g==="discardCard"?q=st.discard[Te]||q:g==="deckCard"&&(q=st.deck[Te]||q));const tt=ce.id===t||!!ce.isDummy,nn=e.players.find(Jt=>Jt.id===t),Ps=(nn==null?void 0:nn.teamId)!==void 0&&ce.teamId===nn.teamId,ur=q.revealedTo==="all"||Array.isArray(q.revealedTo)&&q.revealedTo.includes(t),cr=(De=q.statuses)==null?void 0:De.some(Jt=>Jt.type==="Revealed"&&Jt.addedByPlayerId===t),rn=g!=="handCard"?!0:ce.id===t||Ps||!!ce.isDummy||!!ce.isDisconnected||ur||cr;let ln;g==="handCard"?ln="hand":g==="discardCard"?ln="discard":ln="deck";const Re={card:q,source:ln,playerId:ce==null?void 0:ce.id,cardIndex:Te,boardCoords:ue},Mt=q.ownerId,Ut=(q==null?void 0:q.deck)===ve.Tokens||(q==null?void 0:q.deck)==="counter";if(rn){const Jt=q.ownerId?e.players.find(dr=>dr.id===q.ownerId):void 0;_.push({label:"View",isBold:!0,onClick:()=>ie({card:q,player:Jt})})}tt?(g==="handCard"?(_.push({label:"Play",isBold:!0,onClick:()=>{Hn(),Pe({card:q,sourceItem:Re,faceDown:!1})}}),_.push({label:"Play Face Down",onClick:()=>{Hn(),Pe({card:q,sourceItem:Re,faceDown:!0})}})):rn&&["discardCard","deckCard"].includes(g)&&(_.push({label:"Play Face Up",isBold:!0,onClick:()=>{Hn(),Pe({card:q,sourceItem:Re,faceDown:!1})}}),_.push({label:"Play Face Down",onClick:()=>{Hn(),Pe({card:q,sourceItem:Re,faceDown:!0})}})),_.length>0&&_.push({isDivider:!0}),g==="handCard"&&_.push({label:"Reveal to All",onClick:()=>fe(ce.id,Te,"all")}),_.length>0&&!("isDivider"in _[_.length-1])&&_.push({isDivider:!0}),g==="discardCard"?_.push({label:"To Hand",disabled:Ut,onClick:()=>V(Re,{target:"hand",playerId:Mt})}):g==="handCard"&&_.push({label:"To Discard",onClick:()=>V(Re,{target:"discard",playerId:Mt})}),["handCard","discardCard"].includes(g)&&Mt&&(_.push({label:"To Deck Top",disabled:Ut,onClick:()=>V(Re,{target:"deck",playerId:Mt,deckPosition:"top"})}),_.push({label:"To Deck Bottom",disabled:Ut,onClick:()=>V(Re,{target:"deck",playerId:Mt,deckPosition:"bottom"})})),g==="deckCard"&&(_.push({label:"To Hand",disabled:Ut,onClick:()=>V(Re,{target:"hand",playerId:ce.id})}),_.push({label:"To Discard",onClick:()=>V(Re,{target:"discard",playerId:ce.id})})),g==="handCard"&&(((We=q.statuses)==null?void 0:We.filter(dr=>dr.type==="Revealed").length)||0)>0&&(_.length>0&&!("isDivider"in _[_.length-1])&&_.push({isDivider:!0}),_.push({type:"statusControl",label:"Revealed",onAdd:()=>M(ce.id,Te,"Revealed",t),onRemove:()=>A(ce.id,Te,"Revealed"),removeDisabled:!1}))):g==="handCard"&&!rn&&_.push({label:"Request Reveal",onClick:()=>ae({source:"hand",ownerId:ce.id,cardIndex:Te},t)})}else if(g==="deckPile"){const{player:q}=N;(q.id===t||!!q.isDummy)&&(_.push({label:"Draw Card",onClick:()=>d(q.id)}),_.push({label:"Shuffle",onClick:()=>re(q.id)})),_.push({label:"View",onClick:()=>vp(q)})}else if(g==="discardPile"){const{player:q}=N;_.push({label:"View",onClick:()=>xp(q)})}return _=_.filter((q,ue)=>"isDivider"in q?!(ue===0||ue===_.length-1||"isDivider"in _[ue-1]):!0),s.jsx(Qf,{x:L,y:K,items:_,onClose:Yr})},[e,t,V,yn,de,pe,R,Z,W,H,M,A,d,re,$,ne,fe,je,ae,oe,Vl]);S.useEffect(()=>{window.addEventListener("click",Yr);const g=N=>{N.target.closest("[data-interactive]")||Yr()};return window.addEventListener("contextmenu",g),()=>{window.removeEventListener("click",Yr),window.removeEventListener("contextmenu",g)}},[]),S.useEffect(()=>{m&&Yr()},[m]);const Cp=g=>{if(Bl)$n(!1),y(null);else{Bn(!1),w(null);const N=g.currentTarget.getBoundingClientRect();y({top:N.top,left:N.left}),$n(!0)}},kp=g=>{if(Gl)Bn(!1),w(null);else{$n(!1),y(null);const N=g.currentTarget.getBoundingClientRect();w({top:N.top,left:N.left}),Bn(!0)}},Sp=(g,N)=>{Lt.current={x:N.clientX,y:N.clientY},Be(L=>L&&L.type===g?{type:g,count:L.count+1,isDragging:!0,sourceCoords:L.sourceCoords}:{type:g,count:1,isDragging:!0})};if(!cp){const g="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg text-lg w-full transition-colors disabled:bg-gray-600 disabled:text-gray-400 disabled:cursor-not-allowed",N="text-gray-400 hover:text-white transition-colors";return s.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-800",children:s.jsxs("div",{className:"text-center p-4 flex flex-col items-center",children:[s.jsx("h1",{className:"text-5xl font-bold mb-12",children:"New Avalon: Skirmish"}),s.jsxs("div",{className:"flex flex-col space-y-4 w-64",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:mp,className:`${g} flex-grow`,children:"Start Game"}),s.jsx("button",{onClick:()=>Gr(!0),className:"bg-gray-600 hover:bg-gray-700 text-white font-bold p-3 rounded-lg transition-colors aspect-square",title:"Settings",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),s.jsx("button",{onClick:hp,className:g,children:"Join Game"}),s.jsx("button",{onClick:()=>Fl(!0),className:g,children:"Deck Building"}),s.jsx("button",{disabled:!0,className:g,children:"Story Mode"}),s.jsx("button",{disabled:!0,className:g,children:"Puzzles"}),s.jsx("button",{onClick:()=>Vr(!0),className:g,children:"Rules & Tutorial"})]}),s.jsxs("div",{className:"mt-16 flex items-center space-x-8",children:[s.jsx("a",{href:"https://t.me/NikitaAnahoretTriakin",target:"_blank",rel:"noopener noreferrer",className:N,title:"Telegram",children:s.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5c/Telegram_Messenger.png",alt:"Telegram",className:"h-8 w-8 object-contain"})}),s.jsx("a",{href:"https://discord.gg/U5zKADsZZY",target:"_blank",rel:"noopener noreferrer",className:N,title:"Discord",children:s.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/2111/2111370.png",alt:"Discord",className:"h-8 w-8 object-contain"})}),s.jsx("a",{href:"https://www.patreon.com/c/AnchoriteComics",target:"_blank",rel:"noopener noreferrer",className:N,title:"Patreon",children:s.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/5968/5968722.png",alt:"Patreon",className:"h-8 w-8 object-contain"})})]}),s.jsx(vg,{isOpen:ks,onClose:()=>Br(!1),onJoin:pp,games:F}),s.jsx(jg,{isOpen:Ss,onClose:()=>Fl(!1),setViewingCard:ie}),s.jsx(Tg,{isOpen:$l,onClose:()=>Gr(!1),onSave:gp}),s.jsx(Dg,{isOpen:Ns,onClose:()=>Vr(!1)}),B&&s.jsx(bc,{card:B.card,ownerPlayer:B.player,onClose:()=>ie(null),statusDescriptions:qo,allPlayers:e.players,imageRefreshVersion:ye})]})})}return s.jsxs("div",{className:`relative w-screen h-screen overflow-hidden ${Y?"cursor-none":""}`,children:[s.jsx(yg,{gameId:e.gameId,isGameStarted:e.isGameStarted,onStartGame:dp,onResetGame:X,activeGridSize:e.activeGridSize,onGridSizeChange:v,dummyPlayerCount:e.dummyPlayerCount,onDummyPlayerCountChange:C,realPlayerCount:up,connectionStatus:O,onExitGame:J,onOpenTokensModal:Cp,onOpenCountersModal:kp,gameMode:e.gameMode,onGameModeChange:c,isPrivate:e.isPrivate,onPrivacyChange:f,isHost:js,onSyncGame:yp,currentPhase:e.currentPhase,onNextPhase:ht,onPrevPhase:Kt,onSetPhase:tn,isAutoAbilitiesEnabled:Hr,onToggleAutoAbilities:lp}),me?s.jsxs("div",{className:"relative h-full w-full pt-14 overflow-hidden bg-gray-900",children:[ze&&s.jsx("div",{ref:ap,className:"absolute left-0 top-14 bottom-[2px] z-30 bg-panel-bg shadow-xl flex flex-col border-r border-gray-700 w-fit min-w-0 pl-[2px] py-[2px] pr-0 transition-all duration-100 overflow-hidden",style:{width:ip},children:s.jsx(aa,{player:ze,isLocalPlayer:!0,localPlayerId:t,isSpectator:ir,isGameStarted:e.isGameStarted,position:ze.id,onNameChange:g=>T(ze.id,g),onColorChange:g=>j(ze.id,g),onScoreChange:g=>E(ze.id,g),onDeckChange:g=>U(ze.id,g),onLoadCustomDeck:g=>h(ze.id,g),onDrawCard:()=>d(ze.id),handleDrop:p,draggedItem:m,setDraggedItem:I,openContextMenu:vn,onHandCardDoubleClick:_s,playerColorMap:Vn,allPlayers:e.players,localPlayerTeamId:ze==null?void 0:ze.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:xe,imageRefreshVersion:ye,layoutMode:"list-local",onCardClick:Ts,validHandTargets:bs,onAnnouncedCardDoubleClick:Is,currentPhase:e.currentPhase,disableActiveHighlights:Jr},ze.id)}),s.jsx("div",{className:"absolute top-14 bottom-0 z-10 flex items-center justify-center pointer-events-none w-full left-0",children:s.jsx("div",{ref:Kr,className:"pointer-events-auto h-full aspect-square flex items-center justify-center py-[2px]",children:s.jsx(Sc,{board:e.board,isGameStarted:e.isGameStarted,activeGridSize:e.activeGridSize,handleDrop:p,draggedItem:m,setDraggedItem:I,openContextMenu:vn,playMode:$e,setPlayMode:Pe,highlight:ar,playerColorMap:Vn,localPlayerId:t,onCardDoubleClick:su,onEmptyCellDoubleClick:au,imageRefreshVersion:ye,cursorStack:Y,setCursorStack:Be,currentPhase:e.currentPhase,activeTurnPlayerId:e.activeTurnPlayerId,onCardClick:lu,onEmptyCellClick:ou,validTargets:eu,noTargetOverlay:tu,disableActiveHighlights:Jr})})}),s.jsx("div",{className:"absolute right-0 top-14 bottom-0 z-30 w-[34.2rem] bg-panel-bg shadow-xl flex flex-col pt-[3px] pb-[3px] border-l border-gray-700 gap-[3px]",children:e.players.filter(g=>g.id!==t).map(g=>s.jsx("div",{className:"w-full flex-1 min-h-0",children:s.jsx(aa,{player:g,isLocalPlayer:!1,localPlayerId:t,isSpectator:ir,isGameStarted:e.isGameStarted,position:g.id,onNameChange:N=>T(g.id,N),onColorChange:N=>j(g.id,N),onScoreChange:N=>E(g.id,N),onDeckChange:N=>U(g.id,N),onLoadCustomDeck:N=>h(g.id,N),onDrawCard:()=>d(g.id),handleDrop:p,draggedItem:m,setDraggedItem:I,openContextMenu:vn,onHandCardDoubleClick:_s,playerColorMap:Vn,allPlayers:e.players,localPlayerTeamId:ze==null?void 0:ze.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:xe,imageRefreshVersion:ye,layoutMode:"list-remote",onCardClick:Ts,validHandTargets:bs,onAnnouncedCardDoubleClick:Is,currentPhase:e.currentPhase,disableActiveHighlights:Jr})},g.id))})]}):s.jsxs("main",{className:"pt-14 h-screen w-full flex items-center justify-center py-[2px] px-[2px]",children:[s.jsx(Sc,{board:e.board,isGameStarted:e.isGameStarted,activeGridSize:e.activeGridSize,handleDrop:p,draggedItem:m,setDraggedItem:I,openContextMenu:vn,playMode:$e,setPlayMode:Pe,highlight:ar,playerColorMap:Vn,localPlayerId:t,onCardDoubleClick:su,onEmptyCellDoubleClick:au,imageRefreshVersion:ye,cursorStack:Y,setCursorStack:Be,currentPhase:e.currentPhase,activeTurnPlayerId:e.activeTurnPlayerId,onCardClick:lu,onEmptyCellClick:ou,validTargets:eu,noTargetOverlay:tu,disableActiveHighlights:Jr}),e.players.map(g=>s.jsx(aa,{player:g,isLocalPlayer:g.id===t,localPlayerId:t,isSpectator:ir,isGameStarted:e.isGameStarted,position:g.id,onNameChange:N=>T(g.id,N),onColorChange:N=>j(g.id,N),onScoreChange:N=>E(g.id,N),onDeckChange:N=>U(g.id,N),onLoadCustomDeck:N=>h(g.id,N),onDrawCard:()=>d(g.id),handleDrop:p,draggedItem:m,setDraggedItem:I,openContextMenu:vn,onHandCardDoubleClick:_s,playerColorMap:Vn,allPlayers:e.players,localPlayerTeamId:ze==null?void 0:ze.teamId,activeTurnPlayerId:e.activeTurnPlayerId,onToggleActiveTurn:xe,imageRefreshVersion:ye,layoutMode:"standard",onCardClick:Ts,validHandTargets:bs,onAnnouncedCardDoubleClick:Is,currentPhase:e.currentPhase,disableActiveHighlights:Jr},g.id))]}),(Y||le&&((uu=le.payload)==null?void 0:uu.tokenType))&&s.jsx("div",{ref:Ct,className:"fixed pointer-events-none select-none z-[100000] flex items-center justify-center",style:{left:Wr.current.x-2,top:Wr.current.y-2},children:(Y||((cu=le==null?void 0:le.payload)==null?void 0:cu.tokenType))&&s.jsxs("div",{className:"relative w-12 h-12 rounded-full bg-gray-500 border-[3px] border-white flex items-center justify-center shadow-xl",children:[(()=>{var K;const g=Y?Y.type:le.payload.tokenType;Y?Y.count:(K=le==null?void 0:le.payload)!=null&&K.count;let N=Xi[g];N&&ye&&(N=`${N}?v=${ye}`);const L=g.startsWith("Power");return N?s.jsx("img",{src:N,alt:g,className:"w-full h-full object-contain p-1",draggable:"false"}):s.jsx("span",{className:`font-bold text-white ${L?"text-sm":"text-lg"}`,style:{textShadow:"0 0 2px black"},children:L?g==="Power+"?"+P":"-P":g.charAt(0)})})(),s.jsx("div",{className:"absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center border border-white",children:Y?Y.count:((du=le==null?void 0:le.payload)==null?void 0:du.count)||1})]})}),ir&&!me&&s.jsxs("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-70 p-4 rounded-lg z-50",children:[s.jsx("p",{className:"text-xl font-bold text-center",children:"Spectator Mode"}),s.jsx("p",{className:"text-center text-gray-300",children:"You are watching the game."})]}),(()=>{const g=e.revealRequests.find(L=>L.toPlayerId===t);if(!g)return null;const N=e.players.find(L=>L.id===g.fromPlayerId);return N?s.jsx(Ng,{fromPlayer:N,cardCount:g.cardIdentifiers.length,onAccept:()=>_e(g.fromPlayerId,!0),onDecline:()=>_e(g.fromPlayerId,!1)}):null})(),k&&js&&s.jsx(kg,{players:e.players.filter(g=>!g.isDisconnected),gameMode:e.gameMode,onCancel:()=>b(!1),onConfirm:fp}),e.isReadyCheckActive&&!ir&&ze&&s.jsx(Sg,{players:e.players.filter(g=>!g.isDummy&&!g.isDisconnected),localPlayer:ze,onReady:i,onCancel:a}),P&&(()=>{const g=e.players.find(K=>K.id===P.player.id),N=g?g.discard:[],L=P.pickMode?N.filter(K=>{var _;return(_=K.types)==null?void 0:_.includes("Device")}):N;return s.jsx(Nc,{isOpen:!!P,onClose:()=>D(null),title:`${P.player.name}'s Discard Pile ${P.pickMode?"(Pick a Device)":""}`,player:P.player,cards:L,setDraggedItem:I,onCardContextMenu:(K,_)=>vn(K,"discardCard",{card:L[_],player:P.player,cardIndex:_}),onCardDoubleClick:K=>{if(P.pickMode){const _=N.indexOf(L[K]);_>-1&&(xs(P.player.id,_),D(null))}else iu(P.player,L[K],K,"discard")},canInteract:t!==null&&e.isGameStarted&&(P.player.id===t||!!P.player.isDummy),playerColorMap:Vn,localPlayerId:t,imageRefreshVersion:ye})})(),Q&&(()=>{const g=e.players.find(L=>L.id===Q.id),N=g?g.deck:[];return s.jsx(Nc,{isOpen:!!Q,onClose:()=>te(null),title:`${Q.name}'s Deck`,player:Q,cards:N,setDraggedItem:I,onCardContextMenu:(L,K)=>vn(L,"deckCard",{card:N[K],player:Q,cardIndex:K}),onCardDoubleClick:L=>iu(Q,N[L],L,"deck"),canInteract:t!==null&&e.isGameStarted&&(Q.id===t||!!Q.isDummy),isDeckView:!0,playerColorMap:Vn,localPlayerId:t,imageRefreshVersion:ye})})(),s.jsx(xg,{isOpen:Bl,onClose:()=>$n(!1),setDraggedItem:I,openContextMenu:vn,canInteract:t!==null&&e.isGameStarted,anchorEl:Es,imageRefreshVersion:ye,draggedItem:m}),s.jsx(Cg,{isOpen:Gl,onClose:()=>Bn(!1),setDraggedItem:I,canInteract:t!==null&&e.isGameStarted,anchorEl:x,imageRefreshVersion:ye,onCounterMouseDown:Sp,cursorStack:Y}),B&&s.jsx(bc,{card:B.card,ownerPlayer:B.player,onClose:()=>ie(null),statusDescriptions:qo,allPlayers:e.players,imageRefreshVersion:ye}),wp]})}class zg extends bn.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,n){console.error("Uncaught error:",t,n)}render(){return this.state.hasError?s.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-900 text-white p-4 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Something went wrong"}),s.jsx("p",{className:"mb-6 text-gray-400",children:"The application encountered an unexpected error."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-indigo-600 px-6 py-3 rounded-lg hover:bg-indigo-700 transition font-bold shadow-lg",children:"Reload Game"})]}):this.props.children}}const rp=document.getElementById("root");if(!rp)throw new Error("Could not find root element to mount to");const Fg=ia.createRoot(rp);Fg.render(s.jsx(zg,{children:s.jsx(Ug,{})}));
